'use strict';(function(){function G(){}function q(a,b){for(var c in b)a[c]=b[c];return a}function qa(a,b){for(var c in b)a[c]=1;return a}function x(a){a.parentNode.removeChild(a)}function Jc(a){for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling)}function ya(a,b){for(;a.firstChild;)b.appendChild(a.firstChild)}function Mb(a,b){for(var c=0;c<a.length;c+=1)a[c]&&a[c].d(b)}function X(){return document.createDocumentFragment()}function l(a){return document.createElement(a)}function Y(a){return document.createElementNS("http://www.w3.org/2000/svg",
a)}function p(a){return document.createTextNode(a)}function t(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function Kc(a){return""===a?void 0:+a}function r(a,b,c){a.style.setProperty(b,c)}function da(a,b){"static"===getComputedStyle(a).position&&(a.style.position="relative");let c=document.createElement("object");c.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;");c.type="text/html";
let d;c.onload=()=>{d=c.contentDocument.defaultView;d.addEventListener("resize",b)};/Trident/.test(navigator.userAgent)?(a.appendChild(c),c.data="about:blank"):(c.data="about:blank",a.appendChild(c));return{cancel:()=>{d&&d.removeEventListener&&d.removeEventListener("resize",b);a.removeChild(c)}}}function md(a,b){return a!=a?b==b:a!==b||a&&"object"===typeof a||"function"===typeof a}function qf(a,b){return a!=a?b==b:a!==b}function nd(a,b){if(a=a in this._handlers&&this._handlers[a].slice())for(var c=
0;c<a.length;c+=1){var d=a[c];if(!d.__calling)try{d.__calling=!0,d.call(this,b)}finally{d.__calling=!1}}}function D(a){a._lock=!0;ib(a._beforecreate);ib(a._oncreate);ib(a._aftercreate);a._lock=!1}function od(){return this._state}function u(a,b){a._handlers=Object.create(null);a._slots=Object.create(null);a._bind=b._bind;a._staged={};a.options=b;a.root=b.root||a;a.store=b.store||a.root.store;b.root||(a._beforecreate=[],a._oncreate=[],a._aftercreate=[])}function pd(a,b){var c=this._handlers[a]||(this._handlers[a]=
[]);c.push(b);return{cancel:function(){var a=c.indexOf(b);~a&&c.splice(a,1)}}}function ib(a){for(;a&&a.length;)a.shift()()}function qd(){this.store._remove(this)}function rd(a,b){this._handlers={};this._dependents=[];this._computed=Object.create(null);this._sortedComputedProperties=[];this._state=q({},a);this._differs=b&&b.immutable?qf:md}function jb(a,b){if(0>(b=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e")))return null;var c=a.slice(0,b);return[1<c.length?c[0]+c.slice(2):c,+a.slice(b+
1)]}function rf(a){return a=jb(Math.abs(a)),a?a[1]:NaN}function sf(a,b){return function(c,d){for(var e=c.length,g=[],f=0,h=a[0],k=0;0<e&&0<h;){k+h+1>d&&(h=Math.max(1,d-k));g.push(c.substring(e-=h,e+h));if((k+=h+1)>d)break;h=a[f=(f+1)%a.length]}return g.reverse().join(b)}}function tf(a){return function(b){return b.replace(/[0-9]/g,function(b){return a[+b]})}}function Nb(a){return new kb(a)}function kb(a){if(!(b=uf.exec(a)))throw Error("invalid format: "+a);var b;this.fill=b[1]||" ";this.align=b[2]||
">";this.sign=b[3]||"-";this.symbol=b[4]||"";this.zero=!!b[5];this.width=b[6]&&+b[6];this.comma=!!b[7];this.precision=b[8]&&+b[8].slice(1);this.trim=!!b[9];this.type=b[10]||""}function sd(a,b){b=jb(a,b);if(!b)return a+"";a=b[0];b=b[1];return 0>b?"0."+Array(-b).join("0")+a:a.length>b+1?a.slice(0,b+1)+"."+a.slice(b+1):a+Array(b-a.length+2).join("0")}function td(a){return a}function vf(a){function b(a){function b(a){var b=y,d=t,f,k;if("c"===q)d=x(a)+d,a="";else{a=+a;var n=0>a;a=x(Math.abs(a),w);if(r){var C=
a.length,L=1,lb=-1;a:for(;L<C;++L)switch(a[L]){case ".":lb=f=L;break;case "0":0===lb&&(lb=L);f=L;break;default:if(0<lb){if(!+a[L])break a;lb=0}}a=0<lb?a.slice(0,lb)+a.slice(f+1):a}n&&0===+a&&(n=!1);b=(n?"("===A?A:"-":"-"===A||"("===A?"":A)+b;d=("s"===q?ud[8+vd/3]:"")+d+(n&&"("===A?")":"");if(v)for(n=-1,f=a.length;++n<f;)if(k=a.charCodeAt(n),48>k||57<k){d=(46===k?e+a.slice(n+1):a.slice(n))+d;a=a.slice(0,n);break}}p&&!Ha&&(a=c(a,Infinity));k=b.length+a.length+d.length;n=k<l?Array(l-k+1).join(h):"";
p&&Ha&&(a=c(n+a,n.length?l-d.length:Infinity),n="");switch(m){case "<":a=b+a+d+n;break;case "=":a=b+n+a+d;break;case "^":a=n.slice(0,k=n.length>>1)+b+a+d+n.slice(k);break;default:a=n+b+a+d}return g(a)}a=Nb(a);var h=a.fill,m=a.align,A=a.sign,C=a.symbol,Ha=a.zero,l=a.width,p=a.comma,w=a.precision,r=a.trim,q=a.type;"n"===q?(p=!0,q="g"):wd[q]||(null==w&&(w=12),r=!0,q="g");if(Ha||"0"===h&&"="===m)Ha=!0,h="0",m="=";var y="$"===C?d[0]:"#"===C&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",t="$"===C?d[1]:/[%p]/.test(q)?
f:"",x=wd[q],v=/[defgprs%]/.test(q);w=null==w?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));b.toString=function(){return a+""};return b}var c=a.grouping&&a.thousands?sf(a.grouping,a.thousands):td,d=a.currency,e=a.decimal,g=a.numerals?tf(a.numerals):td,f=a.percent||"%";return{format:b,formatPrefix:function(a,c){var d=b((a=Nb(a),a.type="f",a));a=3*Math.max(-8,Math.min(8,Math.floor(rf(c)/3)));var e=Math.pow(10,-a),f=ud[8+a/3];return function(a){return d(e*a)+f}}}}function wf(a,
b){function c(b){a.fire("click")}var d,e=a._slotted.default;return{c(){d=l("button");d.addEventListener("click",c,void 0);r(d,"background-color",b.backgroundColor);r(d,"color",b.color);d.className="svelte-nm66xb"},m(a,b){a.insertBefore(d,b);e&&d.appendChild(e)},p(a,b){a.backgroundColor&&r(d,"background-color",b.backgroundColor);a.color&&r(d,"color",b.color)},d(a){a&&x(d);e&&ya(d,e);d.removeEventListener("click",c,void 0)}}}function Dc(a){u(this,a);this._state=q({backgroundColor:"rgb(255, 130, 0)",
color:"white"},a.data);this._intro=!0;this._slotted=a.slots||{};this._fragment=wf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function xf(a,b){var c,d,e;return{c(){c=Y("svg");d=Y("path");e=Y("path");t(d,"d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z");t(e,"d","M0 0h24v24H0z");t(e,"fill","none");t(c,"xmlns","http://www.w3.org/2000/svg");t(c,"width","24");t(c,"height","24");t(c,"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:G,d(a){a&&
x(c)}}}function xd(a){u(this,a);this._state=q({},a.data);this._intro=!0;this._fragment=xf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function yf(a,b){var c,d,e;return{c(){c=Y("svg");d=Y("path");e=Y("path");t(d,"d","M19 13H5v-2h14v2z");t(e,"d","M0 0h24v24H0z");t(e,"fill","none");t(c,"xmlns","http://www.w3.org/2000/svg");t(c,"width","24");t(c,"height","24");t(c,"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:G,d(a){a&&x(c)}}}
function yd(a){u(this,a);this._state=q({},a.data);this._intro=!0;this._fragment=yf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function zf(a,b){var c,d,e;return{c(){c=Y("svg");d=Y("path");e=Y("path");t(d,"d","M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z");t(e,"d","M0 0h24v24H0z");t(e,"fill","none");t(c,"xmlns","http://www.w3.org/2000/svg");t(c,"width","24");t(c,"height","24");t(c,"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:G,d(a){a&&
x(c)}}}function zd(a){u(this,a);this._state=q({},a.data);this._intro=!0;this._fragment=zf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Af({name:a}){if("home"===a)return zd;if("add"===a)return xd;if("remove"===a)return yd}function Bf(a,b){var c,d=b.Icon;if(d)var e=new d({root:a.root,store:a.store});return{c(){c=l("div");e&&e._fragment.c();r(c,"fill",b.color)},m(a,b){a.insertBefore(c,b);e&&e._mount(c,null)},p(b,f){d!==(d=f.Icon)&&(e&&e.destroy(),d?(e=new d({root:a.root,
store:a.store}),e._fragment.c(),e._mount(c,null)):e=null);b.color&&r(c,"fill",f.color)},d(a){a&&x(c);e&&e.destroy()}}}function $b(a){u(this,a);this._state=q({color:"black"},a.data);this._recompute({name:1},this._state);this._intro=!0;this._fragment=Bf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Cf({clientWidth:a,extent:b}){return Math.min(a,Math.max(1E-6,b[0][0]*a))}function Df({clientWidth:a,extent:b}){return Math.min(a,b[0][1]*a)}function Ef({clientHeight:a,
extent:b}){return Math.min(a,Math.max(1E-6,b[1][0]*a))}function Ff({clientHeight:a,extent:b}){return Math.min(a,b[1][1]*a)}function Gf(a,b){function c(){a.set({clientWidth:e.clientWidth,clientHeight:e.clientHeight})}function d(b){a.down(b)}var e,g,f=b.extent&&Ad(a,b);return{c(){e=l("div");f&&f.c();a.root._beforecreate.push(c);e.addEventListener("pointerdown",d,void 0);e.className="root svelte-1pppif8";r(e,"cursor",b.cursor)},m(a,b){a.insertBefore(e,b);f&&f.m(e,null);g=da(e,c)},p(b,c){c.extent?f?f.p(b,
c):(f=Ad(a,c),f.c(),f.m(e,null)):f&&(f.d(1),f=null);b.cursor&&r(e,"cursor",c.cursor)},d(a){a&&x(e);f&&f.d();g.cancel();e.removeEventListener("pointerdown",d,void 0)}}}function Ad(a,b){var c,d,e,g,f=b.left&&b.right&&b.top&&b.bottom&&Bd(a,b),h=b.annotationValue&&Cd(a,b);return{c(){c=Y("svg");f&&f.c();d=p("\n  ");e=l("div");h&&h.c();t(c,"width",b.clientWidth);t(c,"height",b.clientHeight);t(c,"class","svelte-1pppif8");e.className=g="reticle "+(b.round?"round":"")+" svelte-1pppif8";r(e,"border-color",
b.color);r(e,"top",""+(b.top-1)+"px");r(e,"left",""+(b.left-1)+"px");r(e,"width",""+(b.right-b.left+2)+"px");r(e,"height",""+(b.bottom-b.top+2)+"px")},m(a,b){a.insertBefore(c,b);f&&f.m(c,null);a.insertBefore(d,b);a.insertBefore(e,b);h&&h.m(e,null)},p(b,d){d.left&&d.right&&d.top&&d.bottom?f?f.p(b,d):(f=Bd(a,d),f.c(),f.m(c,null)):f&&(f.d(1),f=null);b.clientWidth&&t(c,"width",d.clientWidth);b.clientHeight&&t(c,"height",d.clientHeight);d.annotationValue?h?h.p(b,d):(h=Cd(a,d),h.c(),h.m(e,null)):h&&(h.d(1),
h=null);b.round&&g!==(g="reticle "+(d.round?"round":"")+" svelte-1pppif8")&&(e.className=g);b.color&&r(e,"border-color",d.color);b.top&&r(e,"top",""+(d.top-1)+"px");b.left&&r(e,"left",""+(d.left-1)+"px");(b.right||b.left)&&r(e,"width",""+(d.right-d.left+2)+"px");(b.bottom||b.top)&&r(e,"height",""+(d.bottom-d.top+2)+"px")},d(a){a&&x(c);f&&f.d();a&&(x(d),x(e));h&&h.d()}}}function Bd(a,b){var c,d,e;return{c(){c=Y("path");t(c,"class",d=(b.background?"":"transparent")+" svelte-1pppif8");t(c,"d",e="M0,0 L"+
b.clientWidth+",0 L"+b.clientWidth+","+b.clientHeight+" L0,"+b.clientHeight+" z M"+b.left+","+b.top+" L"+b.left+","+b.bottom+" L"+b.right+","+b.bottom+" L"+b.right+","+b.top+" z")},m(a,b){a.insertBefore(c,b)},p(a,b){a.background&&d!==(d=(b.background?"":"transparent")+" svelte-1pppif8")&&t(c,"class",d);(a.clientWidth||a.clientHeight||a.left||a.top||a.bottom||a.right)&&e!==(e="M0,0 L"+b.clientWidth+",0 L"+b.clientWidth+","+b.clientHeight+" L0,"+b.clientHeight+" z M"+b.left+","+b.top+" L"+b.left+","+
b.bottom+" L"+b.right+","+b.bottom+" L"+b.right+","+b.top+" z")&&t(c,"d",e)},d(a){a&&x(c)}}}function Cd(a,b){var c,d,e,g;return{c(){c=l("div");d=l("div");e=l("div");g=p(b.annotationValue);e.className="annotation";d.className="annotationTab svelte-1pppif8";r(d,"background",b.color);c.className="annotationTabParent svelte-1pppif8";r(c,"top",""+(b.w*b.width-2)/2+"px")},m(a,b){a.insertBefore(c,b);c.appendChild(d);d.appendChild(e);e.appendChild(g)},p(a,b){a.annotationValue&&(g.data=""+b.annotationValue);
a.color&&r(d,"background",b.color);(a.w||a.width)&&r(c,"top",""+(b.w*b.width-2)/2+"px")},d(a){a&&x(c)}}}function mb(a){u(this,a);this._state=q({dragging:!1,extent:[[0,0],[0,0]],background:!0,round:!1,color:"rgb(255, 130, 0)",enableDragging:!0,upListener:null,moveListener:null,cursor:"grab"},a.data);this._recompute({clientWidth:1,extent:1,clientHeight:1},this._state);this._intro=!0;this._fragment=Gf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Hf(){this.refs.element.addEventListener("ready",
(a)=>{this.set({ready:!0})});this.refs.element.addEventListener("onscreen",(a)=>{this.set({onscreen:!0});this.fire("onscreen")});this.refs.element.addEventListener("offscreen",(a)=>{this.set({onscreen:!1});this.fire("offscreen")})}function If(a,b){var c,d=a._slotted.default;return{c(){c=l("d-figure");r(c,"display",b.display);r(c,"height",b.height)},m(b,g){b.insertBefore(c,g);d&&c.appendChild(d);a.refs.element=c},p(a,b){a.display&&r(c,"display",b.display);a.height&&r(c,"height",b.height)},d(b){b&&
x(c);d&&ya(c,d);a.refs.element===c&&(a.refs.element=null)}}}function Ob(a){u(this,a);this.refs={};this._state=q({display:"block",ready:!1,height:"",onscreen:!1,offscreen:!0},a.data);this._intro=!0;this._slotted=a.slots||{};this._fragment=If(this,this._state);this.root._oncreate.push(()=>{Hf.call(this);this.fire("update",{changed:qa({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Jf(a,b){var c;return{c(){c=l("div");c.innerHTML=
'<span class="svelte-19e83wz">Loading \u2026</span>';c.className="svelte-19e83wz"},m(a,b){a.insertBefore(c,b)},p:G,d(a){a&&x(c)}}}function Dd(a){u(this,a);this._state=q({},a.data);this._intro=!0;this._fragment=Jf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Kf({clientWidth:a}){return a}function Lf({width:a,aspectRatio:b}){return a/b}function Mf(a,b){function c(){a.set({clientWidth:d.clientWidth})}var d,e,g=a._slotted.default,f;return{c(){d=l("div");e=l("div");
e.className="container svelte-xqvv98";a.root._beforecreate.push(c);d.className="root svelte-xqvv98";r(d,"display",b.display);r(d,"padding-bottom",""+100/b.aspectRatio+"%")},m(a,b){a.insertBefore(d,b);d.appendChild(e);g&&e.appendChild(g);f=da(d,c)},p(a,b){a.display&&r(d,"display",b.display);a.aspectRatio&&r(d,"padding-bottom",""+100/b.aspectRatio+"%")},d(a){a&&x(d);g&&ya(e,g);f.cancel()}}}function Ia(a){u(this,a);this._state=q({display:"block",aspectRatio:1,clientWidth:0},a.data);this._recompute({clientWidth:1,
width:1,aspectRatio:1},this._state);this._intro=!0;this._slotted=a.slots||{};this._fragment=Mf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Nf(a,b){var c,d,e,g=b.ready?Ed:Fd,f=g(a,b),h={aspectRatio:b.aspectRatio},k=new Ia({root:a.root,store:a.store,slots:{default:X()},data:h});h={};if(void 0!==b.ready){h.ready=b.ready;var n=!0}var m=new Ob({root:a.root,store:a.store,slots:{default:X()},data:h,_bind(b,c){var d={};!n&&b.ready&&(d.ready=c.ready);a._set(d);
n=void 0}});a.root._beforecreate.push(()=>{m._bind({ready:1},m.get())});return{c(){c=l("div");f.c();d=document.createComment("");k._fragment.c();m._fragment.c();c.className=e=(b.background?"background":"")+" "+(b.border?"border":"")+" svelte-1q1tvil svelte-ref-root"},m(b,e){b.insertBefore(c,e);f.m(k._slotted.default,null);k._slotted.default.appendChild(d);k._mount(m._slotted.default,null);m._mount(c,null);a.refs.root=c},p(h,C){b=C;g===(g=b.ready?Ed:Fd)&&f?f.p(h,b):(f.d(1),f=g(a,b),f.c(),f.m(d.parentNode,
d));C={};h.aspectRatio&&(C.aspectRatio=b.aspectRatio);k._set(C);C={};!n&&h.ready&&(C.ready=b.ready,n=void 0!==b.ready);m._set(C);n=void 0;(h.background||h.border)&&e!==(e=(b.background?"background":"")+" "+(b.border?"border":"")+" svelte-1q1tvil svelte-ref-root")&&(c.className=e)},d(b){b&&x(c);f.d();k.destroy();m.destroy();a.refs.root===c&&(a.refs.root=null)}}}function Fd(a,b){var c=new Dd({root:a.root,store:a.store});return{c(){c._fragment.c()},m(a,b){c._mount(a,b)},p:G,d(a){c.destroy(a)}}}function Ed(a,
b){var c;return{c(){c=l("img");c.src=b.src;c.alt=b.alt;c.style.cssText=b.style;c.className="svelte-1q1tvil svelte-ref-image"},m(b,e){b.insertBefore(c,e);a.refs.image=c},p(a,b){a.src&&(c.src=b.src);a.alt&&(c.alt=b.alt);a.style&&(c.style.cssText=b.style)},d(b){b&&x(c);a.refs.image===c&&(a.refs.image=null)}}}function Gd(a){u(this,a);this.refs={};this._state=q({ready:!1,src:"",alt:"",style:"",display:"block",aspectRatio:1,border:!0,background:!1},a.data);this._intro=!0;this._fragment=Nf(this,this._state);
a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Of(a,b){var c,d,e,g=new Gd({root:a.root,store:a.store,data:{aspectRatio:1,src:"assets/images/renders/thumbnail-"+b.layerName+".jpg",border:!1,alt:"thumbnail for "+b.layerName}}),f={enableDragging:!0};if(void 0!==b.extent){f.extent=b.extent;var h=!0}var k=new mb({root:a.root,store:a.store,data:f,_bind(b,c){var d={};!h&&b.extent&&(d.extent=c.extent);a._set(d);h=void 0}});a.root._beforecreate.push(()=>{k._bind({extent:1},
k.get())});k.on("drag",function(b){a.fire("drag",b)});var n=new Ia({root:a.root,store:a.store,slots:{default:X()}});return{c(){c=l("div");d=l("div");g._fragment.c();e=p("\n    ");k._fragment.c();n._fragment.c();r(d,"opacity","0.4");c.className="svelte-15ooxw3 svelte-ref-root"},m(b,f){b.insertBefore(c,f);n._slotted.default.appendChild(d);g._mount(d,null);n._slotted.default.appendChild(e);k._mount(n._slotted.default,null);n._mount(c,null);a.refs.root=c},p(a,c){b=c;c={};a.layerName&&(c.src="assets/images/renders/thumbnail-"+
b.layerName+".jpg");a.layerName&&(c.alt="thumbnail for "+b.layerName);g._set(c);c={};!h&&a.extent&&(c.extent=b.extent,h=void 0!==b.extent);k._set(c);h=void 0},d(b){b&&x(c);g.destroy();k.destroy();n.destroy();a.refs.root===c&&(a.refs.root=null)}}}function Hd(a){u(this,a);this.refs={};this._state=q({scaleCountFactor:200},a.data);this._intro=!0;this._fragment=Of(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Pb(){}function nb(a){for(var b,c,d=1,e=arguments.length;d<
e;d++)for(b in c=arguments[d],c)a[b]=c[b];return a}function Id(a){this.destroy=Pb;this.fire("destroy");this.set=this.get=Pb;!1!==a&&this._fragment.u();this._fragment.d();this._fragment=this._state=null}function Jd(a,b,c,d,e){for(var g in b)if(c[g]){var f=d[g],h=e[g],k=b[g];if(k)for(var n=0;n<k.length;n+=1){var m=k[n];m.__calling||(m.__calling=!0,m.call(a,f,h),m.__calling=!1)}}}function ob(a){for(;a&&a.length;)a.shift()()}function Pf(a,b){return b?b:a}function Qf(){let a=(b)=>{this.set({loaded:!0});
var {img:b}=this.get();b.removeEventListener("loaded",a)};this.observe("index",(a)=>{this.draw()},{init:!1});this.observe("img",(a)=>{this.draw()},{init:!1});this.observe("loaded",(a)=>{this.draw()},{init:!1});this.observe("url",(b)=>{let c=this.get("img");c&&c.removeEventListener("load",a);if(Qb.has(b))b=Qb.get(b),b.loaded?this.set({loaded:!0,img:b.img}):(this.set({loaded:!1,img:b.img}),b.img.addEventListener("load",a));else{let c=new Image;this.set({loaded:!1,img:c});let e={img:c},g=(a)=>{e.loaded=
!0;c.removeEventListener("load",g)};c.addEventListener("load",g);c.addEventListener("load",a);Qb.set(b,e);c.src=b}})}function Rf(a,b){var c;return{c:function(){c=document.createElement("canvas");this.h()},h:function(){c.width=b.width;c.height=b.realHeight},m:function(b,e){b.insertBefore(c,e);a.refs.canvas=c},p:function(a,b){a.width&&(c.width=b.width);a.realHeight&&(c.height=b.realHeight)},u:function(){c.parentNode.removeChild(c)},d:function(){a.refs.canvas===c&&(a.refs.canvas=null)}}}function Kd(a){this._observers=
{pre:Object.create(null),post:Object.create(null)};this._handlers=Object.create(null);this._bind=a._bind;this.options=a;this.root=a.root||this;this.store=this.root.store||a.store;this.refs={};this._state=nb({url:"",index:0,width:100,loaded:null,columns:Infinity,height:null,img:null},a.data);this._recompute({width:1,height:1},this._state);var b=Qf.bind(this);a.root||(this._oncreate=[]);this._fragment=Rf(this,this._state);this.root._oncreate.push(b);a.target&&(this._fragment.c(),this._mount(a.target,
a.anchor),ob(this._oncreate))}function Ld(a){return new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}")}function Sf(a,b){var c=Ld(a);return function(d,e){return b(c(d),e,a)}}function Tf(a){var b=Object.create(null),c=[];a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)});return c}function Md(a){function b(a,b){function c(){if(L)return pb;if(p)return p=!1,Nd;var b,c=f,d;if(34===a.charCodeAt(c)){for(;f++<e&&34!==a.charCodeAt(f)||34===a.charCodeAt(++f););
(b=f)>=e?L=!0:10===(d=a.charCodeAt(f++))?p=!0:13===d&&(p=!0,10===a.charCodeAt(f)&&++f);return a.slice(c+1,b-1).replace(/""/g,'"')}for(;f<e;){if(10===(d=a.charCodeAt(b=f++)))p=!0;else if(13===d)p=!0,10===a.charCodeAt(f)&&++f;else if(d!==g)continue;return a.slice(c,b)}return L=!0,a.slice(c,e)}var d=[],e=a.length,f=0,h=0,l,L=0>=e,p=!1;10===a.charCodeAt(e-1)&&--e;for(13===a.charCodeAt(e-1)&&--e;(l=c())!==pb;){for(var w=[];l!==Nd&&l!==pb;)w.push(l),l=c();b&&null==(w=b(w,h++))||d.push(w)}return d}function c(b){return b.map(d).join(a)}
function d(a){return null==a?"":e.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}var e=new RegExp('["'+a+"\n\r]"),g=a.charCodeAt(0);return{parse:function(a,c){var d,e;a=b(a,function(a,b){if(d)return d(a,b-1);e=a;d=c?Sf(a,c):Ld(a)});a.columns=e||[];return a},parseRows:b,format:function(b,c){null==c&&(c=Tf(b));return[c.map(d).join(a)].concat(b.map(function(b){return c.map(function(a){return d(b[a])}).join(a)})).join("\n")},formatRows:function(a){return a.map(c).join("\n")}}}function Od(a){if(a.ok)return a;
throw Error(a.status+":"+a.statusText);}function qb(a){return new Promise((b,c)=>{let d=new Image;d.onload=(a)=>b(d);d.onerror=(a)=>c(a);d.src=a})}function rb(a){return fetch(a).then(Od).then((a)=>a.text())}function Uf(a,b){b=null!=b?b:Date.now()+""+Math.random();let c="namespace:"+b+", url:"+a+", random:"+Date.now()+Math.random();sb.set(c,!1);if(tb.has(b)){let a=tb.get(b);sb.set(a,!0)}tb.set(b,c);return new Promise((b,e)=>{if(Array.isArray(a)){var d=a.map((a)=>Pd(a));d=Promise.all(d)}else d=Pd(a);
d.then((a)=>{sb.get(c)||b(a)}).catch((a)=>{sb.get(c)||e(a)})})}function Pd(a){if(ub.has(a))return ub.get(a);var b=Qd;var c=a.split(".");c=c[c.length-1];b.has(c)||console.warn("Trying to load url: "+a+' with an unknown filetype. Assuming "text".');b=b.has(c)?c:"text";b=Qd.get(b)(a);ub.set(a,b);return b}function Vf({clientWidth:a}){return a}function Wf({model:a,layerName:b}){return a+"_"+b}function Xf(){let {root:a,id:b,grid:c}=this.get(),d=Yf[b];null==d.class_filter&&(d.class_filter="None");null==
d.filter&&(d.filter="None");Array.isArray(d.layout)||(d.layout=[d.layout]);Array.isArray(d.layer)||(d.layer=[d.layer]);Array.isArray(d.filter)||(d.filter=[d.filter]);this.set({gridSize:d.grid_size[c],layerName:d.layer[0]});Uf(`${a}/${b}/web/web--grid_size=${d.grid_size[c]}--layout=${d.layout[0]}--class_filter=${d.class_filter}--filter=${d.filter[0]}--layer=${d.layer[0]}--model=${d.model}--sample_images=${d.sample_images}--sample_type=${d.sample_type}.json`).then((a)=>{this.set({icons:a});this.render()})}
function Zf({changed:a}){a.classHeatmap&&this.render()}function $f(a,b){function c(){a.set({clientWidth:d.clientWidth})}var d,e,g;return{c(){d=l("div");e=l("canvas");e.width=b.gridSize;e.height=b.gridSize;r(e,"width",""+b.clientWidth+"px");r(e,"height",""+b.height+"px");e.className="svelte-sjakuy";a.root._beforecreate.push(c);r(d,"height",""+b.height+"px")},m(b,h){b.insertBefore(d,h);d.appendChild(e);a.refs.canvas=e;g=da(d,c)},p(a,b){a.gridSize&&(e.width=b.gridSize,e.height=b.gridSize);a.clientWidth&&
r(e,"width",""+b.clientWidth+"px");a.height&&(r(e,"height",""+b.height+"px"),r(d,"height",""+b.height+"px"))},d(b){b&&x(d);a.refs.canvas===e&&(a.refs.canvas=null);g.cancel()}}}function vb(a){u(this,a);this.refs={};this._state=q({root:"https://storage.googleapis.com/activation-atlas/build",model:"inceptionv1",layerName:"mixed4d",grid:1,layout:0,gridSize:10,classHeatmap:-1,icons:[]},a.data);this._recompute({clientWidth:1,model:1,layerName:1},this._state);this._intro=!0;this._handlers.update=[Zf];this._fragment=
$f(this,this._state);this.root._oncreate.push(()=>{Xf.call(this);this.fire("update",{changed:qa({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Rd(a,b,c){a=Object.create(a);a.layer=b[c];a.i=c;return a}function ag(a,b){for(var c,d=b.layers,e=[],g=0;g<d.length;g+=1)e[g]=Sd(a,Rd(b,d,g));return{c(){c=l("div");for(var a=0;a<e.length;a+=1)e[a].c();c.className="stack"},m(a,b){a.insertBefore(c,b);for(a=0;a<e.length;a+=1)e[a].m(c,null)},
p(b,g){if(b.layerName||b.layers||b.classHeatmap){d=g.layers;for(var f=0;f<d.length;f+=1){let h=Rd(g,d,f);e[f]?e[f].p(b,h):(e[f]=Sd(a,h),e[f].c(),e[f].m(c,null))}for(;f<e.length;f+=1)e[f].d(1);e.length=d.length}},d(a){a&&x(c);Mb(e,a)}}}function Sd(a,b){function c(){a.set({layerName:e.__value})}var d,e,g,f,h,k,n,m=b.layer,A,C,Ha,L=new vb({root:a.root,store:a.store,data:{grid:0,layerName:b.layer,classHeatmap:b.classHeatmap}});return{c(){d=l("label");e=l("input");f=p("\n    ");h=l("div");L._fragment.c();
k=p("\n    ");n=l("span");A=p(m);C=p("\n  ");a._bindingGroups[0].push(e);e.addEventListener("change",c,void 0);t(e,"type","radio");e.__value=g=b.layer;e.value=e.__value;e.className="svelte-1tpwqxh";h.className="thumb svelte-1tpwqxh";r(h,"position","relative");n.className="svelte-1tpwqxh";d.className=Ha="layer "+(b.layerName==b.layer?"selected":"")+" svelte-1tpwqxh"},m(a,c){a.insertBefore(d,c);d.appendChild(e);e.checked=e.__value===b.layerName;d.appendChild(f);d.appendChild(h);L._mount(h,null);d.appendChild(k);
d.appendChild(n);n.appendChild(A);d.appendChild(C)},p(a,b){a.layerName&&(e.checked=e.__value===b.layerName);a.layers&&g!==(g=b.layer)&&(e.__value=g);e.value=e.__value;var c={};a.layers&&(c.layerName=b.layer);a.classHeatmap&&(c.classHeatmap=b.classHeatmap);L._set(c);a.layers&&m!==(m=b.layer)&&(A.data=""+m);(a.layerName||a.layers)&&Ha!==(Ha="layer "+(b.layerName==b.layer?"selected":"")+" svelte-1tpwqxh")&&(d.className=Ha)},d(b){b&&x(d);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(e),1);e.removeEventListener("change",
c,void 0);L.destroy()}}}function Td(a){u(this,a);this._state=q({layerName:"mixed4c",layers:"mixed3a mixed3b mixed4a mixed4b mixed4c mixed4d mixed4e mixed5a mixed5b".split(" "),classHeatmap:-1},a.data);this._bindingGroups=[[]];this._intro=!0;this._fragment=ag(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function bg({inceptionLabels:a}){let b=Ja.map((b)=>({label:a.inception[b],i:b}));return[{label:"show all",i:-1}].concat(b)}function Ud(a,b,c){a=Object.create(a);
a.l=b[c];return a}function cg(a,b){for(var c,d=b.labels,e=[],g=0;g<d.length;g+=1)e[g]=Vd(a,Ud(b,d,g));return{c(){c=l("div");for(var a=0;a<e.length;a+=1)e[a].c();c.className="chooser svelte-h2ed57"},m(a,b){a.insertBefore(c,b);for(a=0;a<e.length;a+=1)e[a].m(c,null)},p(b,g){if(b.classHeatmap||b.labels){d=g.labels;for(var f=0;f<d.length;f+=1){let h=Ud(g,d,f);e[f]?e[f].p(b,h):(e[f]=Vd(a,h),e[f].c(),e[f].m(c,null))}for(;f<e.length;f+=1)e[f].d(1);e.length=d.length}},d(a){a&&x(c);Mb(e,a)}}}function Vd(a,
b){function c(){a.set({classHeatmap:e.__value})}var d,e,g,f,h,k=b.l.label,n,m,A,C;return{c(){d=l("label");e=l("input");f=p("\n      ");h=l("span");n=p(k);A=p("\n    ");a._bindingGroups[0].push(e);e.addEventListener("change",c,void 0);t(e,"type","radio");e.__value=g=b.l.i;e.value=e.__value;e.className="svelte-h2ed57";h.title=m=b.l.i;d.className=C=(b.classHeatmap===b.l.i?"selected":"")+" svelte-h2ed57"},m(a,c){a.insertBefore(d,c);d.appendChild(e);e.checked=e.__value===b.classHeatmap;d.appendChild(f);
d.appendChild(h);h.appendChild(n);d.appendChild(A)},p(a,b){a.classHeatmap&&(e.checked=e.__value===b.classHeatmap);a.labels&&g!==(g=b.l.i)&&(e.__value=g);e.value=e.__value;a.labels&&k!==(k=b.l.label)&&(n.data=""+k);a.labels&&m!==(m=b.l.i)&&(h.title=m);(a.classHeatmap||a.labels)&&C!==(C=(b.classHeatmap===b.l.i?"selected":"")+" svelte-h2ed57")&&(d.className=C)},d(b){b&&x(d);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(e),1);e.removeEventListener("change",c,void 0)}}}function Lc(a){u(this,a);
this._state=q({classesToKeep:Ja,inceptionLabels:Ua,classHeatmap:235},a.data);this._recompute({inceptionLabels:1},this._state);this._bindingGroups=[[]];this._intro=!0;this._fragment=cg(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Wd(a){return new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}")}function dg(a,b){var c=Wd(a);return function(d,e){return b(c(d),e,a)}}function eg(a){var b=Object.create(null),c=
[];a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)});return c}function Xd(a){function b(a,b){function c(){if(p)return ac;if(r)return r=!1,Yd;var b,c=f,d;if(34===a.charCodeAt(c)){for(;f++<e&&34!==a.charCodeAt(f)||34===a.charCodeAt(++f););(b=f)>=e?p=!0:10===(d=a.charCodeAt(f++))?r=!0:13===d&&(r=!0,10===a.charCodeAt(f)&&++f);return a.slice(c+1,b-1).replace(/""/g,'"')}for(;f<e;){if(10===(d=a.charCodeAt(b=f++)))r=!0;else if(13===d)r=!0,10===a.charCodeAt(f)&&++f;else if(d!==g)continue;return a.slice(c,
b)}return p=!0,a.slice(c,e)}var d=[],e=a.length,f=0,h=0,l,p=0>=e,r=!1;10===a.charCodeAt(e-1)&&--e;for(13===a.charCodeAt(e-1)&&--e;(l=c())!==ac;){for(var q=[];l!==Yd&&l!==ac;)q.push(l),l=c();b&&null==(q=b(q,h++))||d.push(q)}return d}function c(b){return b.map(d).join(a)}function d(a){return null==a?"":e.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}var e=new RegExp('["'+a+"\n\r]"),g=a.charCodeAt(0);return{parse:function(a,c){var d,e;a=b(a,function(a,b){if(d)return d(a,b-1);e=a;d=c?dg(a,c):Wd(a)});a.columns=
e||[];return a},parseRows:b,format:function(b,c){null==c&&(c=eg(b));return[c.map(d).join(a)].concat(b.map(function(b){return c.map(function(a){return d(b[a])}).join(a)})).join("\n")},formatRows:function(a){return a.map(c).join("\n")}}}function Zd(a){if(a.ok)return a;throw Error(a.status+":"+a.statusText);}function wb(a){return new Promise((b,c)=>{let d=new Image;d.onload=(a)=>b(d);d.onerror=(a)=>c(a);d.src=a})}function xb(a){return fetch(a).then(Zd).then((a)=>a.text())}function $d(a,b){b=null!=b?
b:Date.now()+""+Math.random();let c="namespace:"+b+", url:"+a+", random:"+Date.now()+Math.random();yb.set(c,!1);if(Mc.has(b)){let a=Mc.get(b);yb.set(a,!0)}Mc.set(b,c);return new Promise((b,e)=>{if(Array.isArray(a)){var d=a.map((a)=>ae(a));d=Promise.all(d)}else d=ae(a);d.then((a)=>{yb.get(c)||b(a)}).catch((a)=>{yb.get(c)||e(a)})})}function ae(a){if(Nc.has(a))return Nc.get(a);var b=be;var c=a.split(".");c=c[c.length-1];b.has(c)||console.warn("Trying to load url: "+a+' with an unknown filetype. Assuming "text".');
b=b.has(c)?c:"text";b=be.get(b)(a);Nc.set(a,b);return b}function ce(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function fg(a){return function(b,c){return ce(a(b),c)}}function gg({changed:a}){if(a.layer||a.classFilter||a.id||a.layout||a.filter){let {root:b,id:c,layer:d,classFilter:e,filter:g,layout:f}=this.get();this.set({loading:!0});let h=hg[c];this.set({config:h});let k=!1,n=!1;switch(h.layer[d]){case "mixed4a":n=k=!0;break;case "mixed4d":k=!0;n=!1;break;case "mixed5a":k=!0;n=!1;break;case "mixed5b":k=
!0,n=!1}null!==e&&(null==h.class_filter&&(h.class_filter="None"),null==h.filter&&(h.filter="None"),Array.isArray(h.grid_size)||(h.grid_size=[h.grid_size]),Array.isArray(h.class_filter)||(h.class_filter=[h.class_filter]),Array.isArray(h.layer)||(h.layer=[h.layer]),Array.isArray(h.layout)||(h.layout=[h.layout]),Array.isArray(h.filter)||(h.filter=[h.filter]),a=h.grid_size.map((a)=>`${b}/${c}/web/web--grid_size=${a}--layout=${h.layout[f]}--class_filter=${h.class_filter[e]}--filter=${h.filter[g]}--layer=${h.layer[d]}--model=${h.model}--sample_images=${h.sample_images}--sample_type=${h.sample_type}.json`),
$d(a).then((a)=>{let m=Array(a.length);a.forEach((a,A)=>{let l=h.grid_size[A],C=h.tile_size;Array(l/C).keys();let p=[...Array(l).keys()].map((a)=>Array(l));for(let m of a){void 0!==m.x&&(m.grid_x=m.x);void 0!==m.y&&(m.grid_y=m.y);void 0!==m.n&&(m.num_activations=m.n);void 0!==m.i&&(m.top_class_indices=m.i);void 0!==m.v&&(m.top_class_values=m.v);void 0!==m.f&&(m.full_class_values=m.f,m.full_class_indices=Ja);a=k?l-m.grid_x-1:m.grid_x;let A=n?l-m.grid_y-1:m.grid_y;m.gx=a/l;m.gy=A/l;m.gw=1/l;let r=Math.floor(m.grid_x/
C),q=Math.floor(m.grid_y/C);m.localX=m.grid_x%C;m.localY=m.grid_y%C;m.url=`${b}/${c}/render/render--x=${r}--y=${q}--tries=${h.tries}--alpha=${h.alpha?"True":"False"}--tile_size=${h.tile_size}--whiten=${h.whiten}--steps=${h.steps}--icon_size=${h.icon_size}--grid_size=${l}--layout=${h.layout[f]}--class_filter=${h.class_filter[e]}--filter=${h.filter[g]}--layer=${h.layer[d]}--model=${h.model}--sample_images=${h.sample_images}--sample_type=${h.sample_type}.jpg`;p[a][A]=m}m[A]=p});this.set({layers:m,loading:!1})}))}}
function de(a){u(this,a);this._state=q({fingerprint:Math.random()+Date.now(),root:"https://storage.googleapis.com/activation-atlas/build",id:"inceptionv1",labels:Ua.inception,layer:0,classFilter:0,filter:0,layout:0,config:null,layers:null,loading:!1},a.data);this._intro=!0;this._handlers.update=[gg];this._fragment={c:G,m:G,p:G,d:G};this.root._oncreate.push(()=>{this.fire("update",{changed:qa({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}
function Oc(){for(var a=0,b=arguments.length,c={},d;a<b;++a){if(!(d=arguments[a]+"")||d in c)throw Error("illegal type: "+d);c[d]=[]}return new zb(c)}function zb(a){this._=a}function ig(a,b){return a.trim().split(/^|\s+/).map(function(a){var c="",e=a.indexOf(".");0<=e&&(c=a.slice(e+1),a=a.slice(0,e));if(a&&!b.hasOwnProperty(a))throw Error("unknown type: "+a);return{type:a,name:c}})}function ee(a,b,c){for(var d=0,e=a.length;d<e;++d)if(a[d].name===b){a[d]=jg;a=a.slice(0,d).concat(a.slice(d+1));break}null!=
c&&a.push({name:b,value:c});return a}function Ab(a){var b=a+="",c=b.indexOf(":");0<=c&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1));return fe.hasOwnProperty(b)?{space:fe[b],local:a}:a}function kg(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===c&&"http://www.w3.org/1999/xhtml"===b.documentElement.namespaceURI?b.createElement(a):b.createElementNS(c,a)}}function lg(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}
function ge(a){a=Ab(a);return(a.local?lg:kg)(a)}function mg(){}function Pc(a){return null==a?mg:function(){return this.querySelector(a)}}function ng(){return[]}function he(a){return null==a?ng:function(){return this.querySelectorAll(a)}}function ie(a){return Array(a.length)}function Ka(a,b){this.ownerDocument=a.ownerDocument;this.namespaceURI=a.namespaceURI;this._next=null;this._parent=a;this.__data__=b}function og(a){return function(){return a}}function pg(a,b,c,d,e,g){for(var f=0,h,k=b.length,n=
g.length;f<n;++f)(h=b[f])?(h.__data__=g[f],d[f]=h):c[f]=new Ka(a,g[f]);for(;f<k;++f)if(h=b[f])e[f]=h}function qg(a,b,c,d,e,g,f){var h,k,n={},m=b.length,A=g.length,l=Array(m),p;for(h=0;h<m;++h)if(k=b[h])l[h]=p="$"+f.call(k,k.__data__,h,b),p in n?e[h]=k:n[p]=k;for(h=0;h<A;++h)p="$"+f.call(a,g[h],h,g),(k=n[p])?(d[h]=k,k.__data__=g[h],n[p]=null):c[h]=new Ka(a,g[h]);for(h=0;h<m;++h)(k=b[h])&&n[l[h]]===k&&(e[h]=k)}function rg(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function sg(a){return function(){this.removeAttribute(a)}}
function tg(a){return function(){this.removeAttributeNS(a.space,a.local)}}function ug(a,b){return function(){this.setAttribute(a,b)}}function vg(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}function wg(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}}function xg(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}function yg(a){return function(){this.style.removeProperty(a)}}
function zg(a,b,c){return function(){this.style.setProperty(a,b,c)}}function Ag(a,b,c){return function(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}}function ea(a,b){return a.style.getPropertyValue(b)||(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView).getComputedStyle(a,null).getPropertyValue(b)}function Bg(a){return function(){delete this[a]}}function Cg(a,b){return function(){this[a]=b}}function Dg(a,b){return function(){var c=
b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}function Qc(a){return a.classList||new je(a)}function je(a){this._node=a;this._names=(a.getAttribute("class")||"").trim().split(/^|\s+/)}function ke(a,b){a=Qc(a);for(var c=-1,d=b.length;++c<d;)a.add(b[c])}function le(a,b){a=Qc(a);for(var c=-1,d=b.length;++c<d;)a.remove(b[c])}function Eg(a){return function(){ke(this,a)}}function Fg(a){return function(){le(this,a)}}function Gg(a,b){return function(){(b.apply(this,arguments)?ke:le)(this,a)}}function Hg(){this.textContent=
""}function Ig(a){return function(){this.textContent=a}}function Jg(a){return function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}}function Kg(){this.innerHTML=""}function Lg(a){return function(){this.innerHTML=a}}function Mg(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}function Ng(){this.nextSibling&&this.parentNode.appendChild(this)}function Og(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Pg(){return null}
function Qg(){var a=this.parentNode;a&&a.removeChild(this)}function Rg(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Sg(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function Tg(a,b,c){a=me(a,b,c);return function(b){var c=b.relatedTarget;c&&(c===this||c.compareDocumentPosition(this)&8)||a.call(this,b)}}function me(a,b,c){return function(d){var e=v;v=d;try{a.call(this,this.__data__,b,c)}finally{v=e}}}function Ug(a){return a.trim().split(/^|\s+/).map(function(a){var b=
"",d=a.indexOf(".");0<=d&&(b=a.slice(d+1),a=a.slice(0,d));return{type:a,name:b}})}function Vg(a){return function(){var b=this.__on;if(b){for(var c=0,d=-1,e=b.length,g;c<e;++c)(g=b[c],a.type&&g.type!==a.type||g.name!==a.name)?b[++d]=g:this.removeEventListener(g.type,g.listener,g.capture);++d?b.length=d:delete this.__on}}}function Wg(a,b,c){var d=ne.hasOwnProperty(a.type)?Tg:me;return function(e,g,f){e=this.__on;var h;g=d(b,g,f);if(e){f=0;for(var k=e.length;f<k;++f)if((h=e[f]).type===a.type&&h.name===
a.name){this.removeEventListener(h.type,h.listener,h.capture);this.addEventListener(h.type,h.listener=g,h.capture=c);h.value=b;return}}this.addEventListener(a.type,g,c);h={type:a.type,name:a.name,value:b,listener:g,capture:c};e?e.push(h):this.__on=[h]}}function oe(a,b,c){var d=a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView,e=d.CustomEvent;"function"===typeof e?e=new e(b,c):(e=d.document.createEvent("Event"),c?(e.initEvent(b,c.bubbles,c.cancelable),e.detail=c.detail):e.initEvent(b,
!1,!1));a.dispatchEvent(e)}function Xg(a,b){return function(){return oe(this,a,b)}}function Yg(a,b){return function(){return oe(this,a,b.apply(this,arguments))}}function F(a,b){this._groups=a;this._parents=b}function sa(){return new F([[document.documentElement]],pe)}function Ba(a){return"string"===typeof a?new F([[document.querySelector(a)]],[document.documentElement]):new F([[a]],pe)}function qe(){for(var a=v,b;b=a.sourceEvent;)a=b;return a}function re(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint)return c=
c.createSVGPoint(),c.x=b.clientX,c.y=b.clientY,c=c.matrixTransform(a.getScreenCTM().inverse()),[c.x,c.y];c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function Bb(a){var b=qe();b.changedTouches&&(b=b.changedTouches[0]);return re(a,b)}function se(a,b,c){3>arguments.length&&(c=b,b=qe().changedTouches);for(var d=0,e=b?b.length:0,g;d<e;++d)if((g=b[d]).identifier===c)return re(a,g);return null}function Rc(){v.preventDefault();v.stopImmediatePropagation()}
function Zg(a){var b=a.document.documentElement;a=Ba(a).on("dragstart.drag",Rc,!0);if("onselectstart"in b)a.on("selectstart.drag",Rc,!0);else b.__noselect=b.style.MozUserSelect,b.style.MozUserSelect="none"}function $g(a,b){var c=a.document.documentElement,d=Ba(a).on("dragstart.drag",null);b&&(d.on("click.drag",Rc,!0),setTimeout(function(){d.on("click.drag",null)},0));if("onselectstart"in c)d.on("selectstart.drag",null);else c.style.MozUserSelect=c.__noselect,delete c.__noselect}function La(a,b,c){a.prototype=
b.prototype=c;c.constructor=a}function Va(a,b){a=Object.create(a.prototype);for(var c in b)a[c]=b[c];return a}function Z(){}function ta(a){var b;a=(a+"").trim().toLowerCase();return(b=ah.exec(a))?(b=parseInt(b[1],16),new B(b>>8&15|b>>4&240,b>>4&15|b&240,(b&15)<<4|b&15,1)):(b=bh.exec(a))?te(parseInt(b[1],16)):(b=ch.exec(a))?new B(b[1],b[2],b[3],1):(b=dh.exec(a))?new B(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=eh.exec(a))?ue(b[1],b[2],b[3],b[4]):(b=fh.exec(a))?ue(255*b[1]/100,255*b[2]/100,255*b[3]/
100,b[4]):(b=gh.exec(a))?ve(b[1],b[2]/100,b[3]/100,1):(b=hh.exec(a))?ve(b[1],b[2]/100,b[3]/100,b[4]):we.hasOwnProperty(a)?te(we[a]):"transparent"===a?new B(NaN,NaN,NaN,0):null}function te(a){return new B(a>>16&255,a>>8&255,a&255,1)}function ue(a,b,c,d){0>=d&&(a=b=c=NaN);return new B(a,b,c,d)}function Sc(a){a instanceof Z||(a=ta(a));if(!a)return new B;a=a.rgb();return new B(a.r,a.g,a.b,a.opacity)}function Tc(a,b,c,d){return 1===arguments.length?Sc(a):new B(a,b,c,null==d?1:d)}function B(a,b,c,d){this.r=
+a;this.g=+b;this.b=+c;this.opacity=+d}function Uc(a){a=Math.max(0,Math.min(255,Math.round(a)||0));return(16>a?"0":"")+a.toString(16)}function ve(a,b,c,d){0>=d?a=b=c=NaN:0>=c||1<=c?a=b=NaN:0>=b&&(a=NaN);return new fa(a,b,c,d)}function ih(a){if(a instanceof fa)return new fa(a.h,a.s,a.l,a.opacity);a instanceof Z||(a=ta(a));if(!a)return new fa;if(a instanceof fa)return a;a=a.rgb();var b=a.r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),g=Math.max(b,c,d),f=NaN,h=g-e,k=(g+e)/2;h?(f=b===g?(c-d)/h+6*(c<d):c===
g?(d-b)/h+2:(b-c)/h+4,h/=.5>k?g+e:2-g-e,f*=60):h=0<k&&1>k?0:f;return new fa(f,h,k,a.opacity)}function fa(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}function Vc(a,b,c){return 255*(60>a?b+(c-b)*a/60:180>a?c:240>a?b+(c-b)*(240-a)/60:b)}function Wc(a){if(a instanceof I)return new I(a.l,a.a,a.b,a.opacity);if(a instanceof la){if(isNaN(a.h))return new I(a.l,0,0,a.opacity);var b=a.h*xe;return new I(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}a instanceof B||(a=Sc(a));var c=Xc(a.r),d=Xc(a.g),
e=Xc(a.b);b=Yc(.2225045*c+.7168786*d+.0606169*e);if(c===d&&d===e)var g=c=b;else g=Yc((.4360747*c+.3850649*d+.1430804*e)/.96422),c=Yc((.0139322*c+.0971045*d+.7141733*e)/.82521);return new I(116*b-16,500*(g-b),200*(b-c),a.opacity)}function I(a,b,c,d){this.l=+a;this.a=+b;this.b=+c;this.opacity=+d}function Yc(a){return a>jh?Math.pow(a,1/3):a/ye+ze}function Zc(a){return a>ma?a*a*a:ye*(a-ze)}function $c(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Xc(a){return.04045>=(a/=255)?
a/12.92:Math.pow((a+.055)/1.055,2.4)}function kh(a){if(a instanceof la)return new la(a.h,a.c,a.l,a.opacity);a instanceof I||(a=Wc(a));if(0===a.a&&0===a.b)return new la(NaN,0,a.l,a.opacity);var b=Math.atan2(a.b,a.a)*Ae;return new la(0>b?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function la(a,b,c,d){this.h=+a;this.c=+b;this.l=+c;this.opacity=+d}function Ca(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}function Be(a){return function(){return a}}function lh(a,b){return function(c){return a+
c*b}}function mh(a,b,c){return a=Math.pow(a,c),b=Math.pow(b,c)-a,c=1/c,function(d){return Math.pow(a+d*b,c)}}function nh(a){return 1===(a=+a)?Ce:function(b,c){return c-b?mh(b,c,a):Be(isNaN(b)?c:b)}}function Ce(a,b){var c=b-a;return c?lh(a,c):Be(isNaN(a)?b:a)}function ua(a,b){return a=+a,b-=a,function(c){return a+b*c}}function oh(a){return function(){return a}}function ph(a){return function(b){return a(b)+""}}function qh(a,b){var c=ad.lastIndex=bd.lastIndex=0,d,e,g,f=-1,h=[],k=[];a+="";for(b+="";(d=
ad.exec(a))&&(e=bd.exec(b));)(g=e.index)>c&&(g=b.slice(c,g),h[f]?h[f]+=g:h[++f]=g),(d=d[0])===(e=e[0])?h[f]?h[f]+=e:h[++f]=e:(h[++f]=null,k.push({i:f,x:ua(d,e)})),c=bd.lastIndex;c<b.length&&(g=b.slice(c),h[f]?h[f]+=g:h[++f]=g);return 2>h.length?k[0]?ph(k[0].x):oh(b):(b=k.length,function(a){for(var c=0,d;c<b;++c)h[(d=k[c]).i]=d.x(a);return h.join("")})}function De(a,b,c,d,e,g){var f,h,k;if(f=Math.sqrt(a*a+b*b))a/=f,b/=f;if(k=a*c+b*d)c-=a*k,d-=b*k;if(h=Math.sqrt(c*c+d*d))c/=h,d/=h,k/=h;a*d<b*c&&(a=
-a,b=-b,k=-k,f=-f);return{translateX:e,translateY:g,rotate:Math.atan2(b,a)*Ee,skewX:Math.atan(k)*Ee,scaleX:f,scaleY:h}}function Fe(a,b,c,d){function e(a){return a.length?a.pop()+" ":""}function g(a,d,e,f,g,h){a!==e||d!==f?(g=g.push("translate(",null,b,null,c),h.push({i:g-4,x:ua(a,e)},{i:g-2,x:ua(d,f)})):(e||f)&&g.push("translate("+e+b+f+c)}function f(a,b,c,f){a!==b?(180<a-b?b+=360:180<b-a&&(a+=360),f.push({i:c.push(e(c)+"rotate(",null,d)-2,x:ua(a,b)})):b&&c.push(e(c)+"rotate("+b+d)}function h(a,b,
c,f){a!==b?f.push({i:c.push(e(c)+"skewX(",null,d)-2,x:ua(a,b)}):b&&c.push(e(c)+"skewX("+b+d)}function k(a,b,c,d,f,g){a!==c||b!==d?(f=f.push(e(f)+"scale(",null,",",null,")"),g.push({i:f-4,x:ua(a,c)},{i:f-2,x:ua(b,d)})):1===c&&1===d||f.push(e(f)+"scale("+c+","+d+")")}return function(b,c){var d=[],e=[];b=a(b);c=a(c);g(b.translateX,b.translateY,c.translateX,c.translateY,d,e);f(b.rotate,c.rotate,d,e);h(b.skewX,c.skewX,d,e);k(b.scaleX,b.scaleY,c.scaleX,c.scaleY,d,e);b=c=null;return function(a){for(var b=
-1,c=e.length,f;++b<c;)d[(f=e[b]).i]=f.x(a);return d.join("")}}}function Ge(a){return((a=Math.exp(a))+1/a)/2}function rh(a,b){var c=a[0],d=a[1],e=a[2];a=b[2];var g=b[0]-c,f=b[1]-d,h=g*g+f*f;if(1E-12>h){var k=Math.log(a/e)/Wa;a=function(a){return[c+a*g,d+a*f,e*Math.exp(Wa*a*k)]}}else{var n=Math.sqrt(h);b=(a*a-e*e+4*h)/(4*e*n);a=(a*a-e*e-4*h)/(4*a*n);var m=Math.log(Math.sqrt(b*b+1)-b);k=(Math.log(Math.sqrt(a*a+1)-a)-m)/Wa;a=function(a){a*=k;var b=Ge(m),h=Wa*a+m;var l=((h=Math.exp(2*h))-1)/(h+1);var A=
m;h=((A=Math.exp(A))-1/A)/2;l=e/(2*n)*(b*l-h);return[c+l*g,d+l*f,e*b/Ge(Wa*a+m)]}}a.duration=1E3*k;return a}function Cb(){return O||(He(sh),O=Xa.now()+Db)}function sh(){O=0}function Ma(){this._call=this._time=this._next=null}function Ie(a,b,c){var d=new Ma;d.restart(a,b,c);return d}function Je(){O=(Eb=Xa.now())+Db;Na=va=0;try{Cb();++Na;for(var a=Oa,b;a;)0<=(b=O-a._time)&&a._call.call(null,b),a=a._next;--Na}finally{Na=0;a=Oa;for(var c=Infinity;a;)if(a._call){c>a._time&&(c=a._time);var d=a;a=a._next}else b=
a._next,a._next=null,a=d?d._next=b:Oa=b;Ya=d;cd(c);O=0}}function th(){var a=Xa.now(),b=a-Eb;1E3<b&&(Db-=b,Eb=a)}function cd(a){Na||(va&&(va=clearTimeout(va)),24<a-O?(Infinity>a&&(va=setTimeout(Je,a-Xa.now()-Db)),Za&&(Za=clearInterval(Za))):(Za||(Eb=Xa.now(),Za=setInterval(th,1E3)),Na=1,He(Je)))}function Ke(a,b,c){var d=new Ma;b=null==b?0:+b;d.restart(function(c){d.stop();a(c+b)},b,c);return d}function Fb(a,b,c,d,e,g){var f=a.__transition;if(!f)a.__transition={};else if(c in f)return;uh(a,c,{name:b,
index:d,group:e,on:vh,tween:wh,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:0})}function dd(a,b){a=aa(a,b);if(0<a.state)throw Error("too late; already scheduled");return a}function Da(a,b){a=aa(a,b);if(2<a.state)throw Error("too late; already started");return a}function aa(a,b){a=a.__transition;if(!a||!(a=a[b]))throw Error("transition not found");return a}function uh(a,b,c){function d(k){var n,m;if(1!==c.state)return g();for(p in f){var l=f[p];if(l.name===c.name){if(3===
l.state)return Ke(d);4===l.state?(l.state=6,l.timer.stop(),l.on.call("interrupt",a,a.__data__,l.index,l.group),delete f[p]):+p<b&&(l.state=6,l.timer.stop(),delete f[p])}}Ke(function(){3===c.state&&(c.state=4,c.timer.restart(e,c.delay,c.time),e(k))});c.state=2;c.on.call("start",a,a.__data__,c.index,c.group);if(2===c.state){c.state=3;h=Array(m=c.tween.length);var p=0;for(n=-1;p<m;++p)if(l=c.tween[p].value.call(a,a.__data__,c.index,c.group))h[++n]=l;h.length=n+1}}function e(b){b=b<c.duration?c.ease.call(null,
b/c.duration):(c.timer.restart(g),c.state=5,1);for(var d=-1,e=h.length;++d<e;)h[d].call(null,b);5===c.state&&(c.on.call("end",a,a.__data__,c.index,c.group),g())}function g(){c.state=6;c.timer.stop();delete f[b];for(var d in f)return;delete a.__transition}var f=a.__transition,h;f[b]=c;c.timer=Ie(function(a){c.state=1;c.timer.restart(d,c.delay,c.time);c.delay<=a&&d(a-c.delay)},0,c.time)}function Pa(a,b){var c=a.__transition,d,e=!0,g;if(c){b=null==b?null:b+"";for(g in c)if((d=c[g]).name!==b)e=!1;else{var f=
2<d.state&&5>d.state;d.state=6;d.timer.stop();f&&d.on.call("interrupt",a,a.__data__,d.index,d.group);delete c[g]}e&&delete a.__transition}}function xh(a,b){var c,d;return function(){var e=Da(this,a),g=e.tween;if(g!==c){d=c=g;g=0;for(var f=d.length;g<f;++g)if(d[g].name===b){d=d.slice();d.splice(g,1);break}}e.tween=d}}function yh(a,b,c){var d,e;if("function"!==typeof c)throw Error();return function(){var g=Da(this,a),f=g.tween;if(f!==d){e=(d=f).slice();f={name:b,value:c};for(var h=0,k=e.length;h<k;++h)if(e[h].name===
b){e[h]=f;break}h===k&&e.push(f)}g.tween=e}}function ed(a,b,c){var d=a._id;a.each(function(){var a=Da(this,d);(a.value||(a.value={}))[b]=c.apply(this,arguments)});return function(a){return aa(a,d).value[b]}}function Le(a,b){var c;return("number"===typeof b?ua:b instanceof ta?Me:(c=ta(b))?(b=c,Me):qh)(a,b)}function zh(a){return function(){this.removeAttribute(a)}}function Ah(a){return function(){this.removeAttributeNS(a.space,a.local)}}function Bh(a,b,c){var d,e;return function(){var g=this.getAttribute(a);
return g===c?null:g===d?e:e=b(d=g,c)}}function Ch(a,b,c){var d,e;return function(){var g=this.getAttributeNS(a.space,a.local);return g===c?null:g===d?e:e=b(d=g,c)}}function Dh(a,b,c){var d,e,g;return function(){var f=c(this);if(null==f)return void this.removeAttribute(a);var h=this.getAttribute(a);return h===f?null:h===d&&f===e?g:g=b(d=h,e=f)}}function Eh(a,b,c){var d,e,g;return function(){var f=c(this);if(null==f)return void this.removeAttributeNS(a.space,a.local);var h=this.getAttributeNS(a.space,
a.local);return h===f?null:h===d&&f===e?g:g=b(d=h,e=f)}}function Fh(a,b){function c(){var c=this,e=b.apply(c,arguments);return e&&function(b){c.setAttributeNS(a.space,a.local,e(b))}}c._value=b;return c}function Gh(a,b){function c(){var c=this,e=b.apply(c,arguments);return e&&function(b){c.setAttribute(a,e(b))}}c._value=b;return c}function Hh(a,b){return function(){dd(this,a).delay=+b.apply(this,arguments)}}function Ih(a,b){return b=+b,function(){dd(this,a).delay=b}}function Jh(a,b){return function(){Da(this,
a).duration=+b.apply(this,arguments)}}function Kh(a,b){return b=+b,function(){Da(this,a).duration=b}}function Lh(a,b){if("function"!==typeof b)throw Error();return function(){Da(this,a).ease=b}}function Mh(a){return(a+"").trim().split(/^|\s+/).every(function(a){var b=a.indexOf(".");0<=b&&(a=a.slice(0,b));return!a||"start"===a})}function Nh(a,b,c){var d,e,g=Mh(b)?dd:Da;return function(){var f=g(this,a),h=f.on;if(h!==d)(e=(d=h).copy()).on(b,c);f.on=e}}function Oh(a){return function(){var b=this.parentNode,
c;for(c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}}function Ph(a,b){var c,d,e;return function(){var g=ea(this,a),f=(this.style.removeProperty(a),ea(this,a));return g===f?null:g===c&&f===d?e:e=b(c=g,d=f)}}function Qh(a){return function(){this.style.removeProperty(a)}}function Rh(a,b,c){var d,e;return function(){var g=ea(this,a);return g===c?null:g===d?e:e=b(d=g,c)}}function Sh(a,b,c){var d,e,g;return function(){var f=ea(this,a),h=c(this);null==h&&(h=(this.style.removeProperty(a),
ea(this,a)));return f===h?null:f===d&&h===e?g:g=b(d=f,e=h)}}function Th(a,b,c){function d(){var d=this,g=b.apply(d,arguments);return g&&function(b){d.style.setProperty(a,g(b),c)}}d._value=b;return d}function Uh(a){return function(){this.textContent=a}}function Vh(a){return function(){var b=a(this);this.textContent=null==b?"":b}}function na(a,b,c,d){this._groups=a;this._parents=b;this._name=c;this._id=d}function $a(a){return function(){return a}}function Wh(a,b,c){this.target=a;this.type=b;this.transform=
c}function oa(a,b,c){this.k=a;this.x=b;this.y=c}function Ne(a){return a.__zoom||Gb}function wa(){v.preventDefault();v.stopImmediatePropagation()}function Xh(){return!v.button}function Yh(){var a=this;if(a instanceof SVGElement){a=a.ownerSVGElement||a;var b=a.width.baseVal.value;a=a.height.baseVal.value}else b=a.clientWidth,a=a.clientHeight;return[[0,0],[b,a]]}function Oe(){return this.__zoom||Gb}function Zh(){return-v.deltaY*(v.deltaMode?120:1)/500}function $h(){return"ontouchstart"in this}function ai(a,
b,c){var d=a.invertX(b[0][0])-c[0][0],e=a.invertX(b[1][0])-c[1][0],g=a.invertY(b[0][1])-c[0][1];b=a.invertY(b[1][1])-c[1][1];return a.translate(e>d?(d+e)/2:Math.min(0,d)||Math.max(0,e),b>g?(g+b)/2:Math.min(0,g)||Math.max(0,b))}function bi(){function a(a){a.property("__zoom",Oe).on("wheel.zoom",h).on("mousedown.zoom",k).on("dblclick.zoom",n).filter(x).on("touchstart.zoom",m).on("touchmove.zoom",l).on("touchend.zoom touchcancel.zoom",p).style("touch-action","none").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)")}function b(a,b){b=Math.max(E[0],Math.min(E[1],b));return b===a.k?a:new oa(b,a.x,a.y)}function c(a,b,c){var d=b[0]-c[0]*a.k;b=b[1]-c[1]*a.k;return d===a.x&&b===a.y?a:new oa(a.k,d,b)}function d(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function e(a,b,c){a.on("start.zoom",function(){g(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){g(this,arguments).end()}).tween("zoom",function(){var a=arguments,e=g(this,a),f=q.apply(this,a),h=c||d(f),k=Math.max(f[1][0]-
f[0][0],f[1][1]-f[0][1]);f=this.__zoom;var n="function"===typeof b?b.apply(this,a):b,m=u(f.invert(h).concat(k/f.k),n.invert(h).concat(k/n.k));return function(a){if(1===a)a=n;else{a=m(a);var b=k/a[2];a=new oa(b,h[0]-a[0]*b,h[1]-a[1]*b)}e.zoom(null,a)}})}function g(a,b){for(var c=0,d=N.length,e;c<d;++c)if((e=N[c]).that===a)return e;return new f(a,b)}function f(a,b){this.that=a;this.args=b;this.index=-1;this.active=0;this.extent=q.apply(a,b)}function h(){if(r.apply(this,arguments)){var a=g(this,arguments),
d=this.__zoom,e=Math.max(E[0],Math.min(E[1],d.k*Math.pow(2,w.apply(this,arguments)))),f=Bb(this);if(a.wheel){if(a.mouse[0][0]!==f[0]||a.mouse[0][1]!==f[1])a.mouse[1]=d.invert(a.mouse[0]=f);clearTimeout(a.wheel)}else{if(d.k===e)return;a.mouse=[f,d.invert(f)];Pa(this);a.start()}wa();a.wheel=setTimeout(function(){a.wheel=null;a.end()},150);a.zoom("mouse",t(c(b(d,e),a.mouse[0],a.mouse[1]),a.extent,y))}}function k(){if(!ra&&r.apply(this,arguments)){var a=g(this,arguments),b=Ba(v.view).on("mousemove.zoom",
function(){wa();if(!a.moved){var b=v.clientX-e,d=v.clientY-f;a.moved=b*b+d*d>B}a.zoom("mouse",t(c(a.that.__zoom,a.mouse[0]=Bb(a.that),a.mouse[1]),a.extent,y))},!0).on("mouseup.zoom",function(){b.on("mousemove.zoom mouseup.zoom",null);$g(v.view,a.moved);wa();a.end()},!0),d=Bb(this),e=v.clientX,f=v.clientY;Zg(v.view);v.stopImmediatePropagation();a.mouse=[d,this.__zoom.invert(d)];Pa(this);a.start()}}function n(){if(r.apply(this,arguments)){var d=this.__zoom,f=Bb(this),g=d.invert(f);d=t(c(b(d,d.k*(v.shiftKey?
.5:2)),f,g),q.apply(this,arguments),y);wa();0<Cc?Ba(this).transition().duration(Cc).call(e,d,f):Ba(this).call(a.transform,d)}}function m(){if(r.apply(this,arguments)){var a=g(this,arguments),b=v.changedTouches,c=b.length,d;v.stopImmediatePropagation();for(d=0;d<c;++d){var e=b[d];var f=se(this,b,e.identifier);f=[f,this.__zoom.invert(f),e.identifier];if(a.touch0)a.touch1||(a.touch1=f);else{a.touch0=f;var h=!0}}if(H&&(H=clearTimeout(H),!a.touch1)){a.end();(f=Ba(this).on("dblclick.zoom"))&&f.apply(this,
arguments);return}h&&(H=setTimeout(function(){H=null},500),Pa(this),a.start())}}function l(){var a=g(this,arguments),d=v.changedTouches,e=d.length,f;wa();H&&(H=clearTimeout(H));for(f=0;f<e;++f){var h=d[f];var k=se(this,d,h.identifier);a.touch0&&a.touch0[2]===h.identifier?a.touch0[0]=k:a.touch1&&a.touch1[2]===h.identifier&&(a.touch1[0]=k)}h=a.that.__zoom;if(a.touch1){k=a.touch0[0];d=a.touch0[1];f=a.touch1[0];e=a.touch1[1];var n=(n=f[0]-k[0])*n+(n=f[1]-k[1])*n;var m=(m=e[0]-d[0])*m+(m=e[1]-d[1])*m;
h=b(h,Math.sqrt(n/m));k=[(k[0]+f[0])/2,(k[1]+f[1])/2];n=[(d[0]+e[0])/2,(d[1]+e[1])/2]}else if(a.touch0)k=a.touch0[0],n=a.touch0[1];else return;a.zoom("touch",t(c(h,k,n),a.extent,y))}function p(){var a=g(this,arguments),b=v.changedTouches,c=b.length,d;v.stopImmediatePropagation();ra&&clearTimeout(ra);ra=setTimeout(function(){ra=null},500);for(d=0;d<c;++d){var e=b[d];a.touch0&&a.touch0[2]===e.identifier?delete a.touch0:a.touch1&&a.touch1[2]===e.identifier&&delete a.touch1}a.touch1&&!a.touch0&&(a.touch0=
a.touch1,delete a.touch1);a.touch0?a.touch0[1]=this.__zoom.invert(a.touch0[0]):a.end()}var r=Xh,q=Yh,t=ai,w=Zh,x=$h,E=[0,Infinity],y=[[-Infinity,-Infinity],[Infinity,Infinity]],Cc=250,u=rh,N=[],z=Oc("start","zoom","end"),H,ra,B=0;a.transform=function(a,b){var c=a.selection?a.selection():a;c.property("__zoom",Oe);a!==c?e(a,b):c.interrupt().each(function(){g(this,arguments).start().zoom(null,"function"===typeof b?b.apply(this,arguments):b).end()})};a.scaleBy=function(b,c){a.scaleTo(b,function(){var a=
this.__zoom.k,b="function"===typeof c?c.apply(this,arguments):c;return a*b})};a.scaleTo=function(e,f){a.transform(e,function(){var a=q.apply(this,arguments),e=this.__zoom,g=d(a),h=e.invert(g),k="function"===typeof f?f.apply(this,arguments):f;return t(c(b(e,k),g,h),a,y)})};a.translateBy=function(b,c,d){a.transform(b,function(){return t(this.__zoom.translate("function"===typeof c?c.apply(this,arguments):c,"function"===typeof d?d.apply(this,arguments):d),q.apply(this,arguments),y)})};a.translateTo=function(b,
c,e){a.transform(b,function(){var a=q.apply(this,arguments),b=this.__zoom,f=d(a);return t(Gb.translate(f[0],f[1]).scale(b.k).translate("function"===typeof c?-c.apply(this,arguments):-c,"function"===typeof e?-e.apply(this,arguments):-e),a,y)})};f.prototype={start:function(){1===++this.active&&(this.index=N.push(this)-1,this.emit("start"));return this},zoom:function(a,b){this.mouse&&"mouse"!==a&&(this.mouse[1]=b.invert(this.mouse[0]));this.touch0&&"touch"!==a&&(this.touch0[1]=b.invert(this.touch0[0]));
this.touch1&&"touch"!==a&&(this.touch1[1]=b.invert(this.touch1[0]));this.that.__zoom=b;this.emit("zoom");return this},end:function(){0===--this.active&&(N.splice(this.index,1),this.index=-1,this.emit("end"));return this},emit:function(b){var c=new Wh(a,b,this.that.__zoom),d=z.apply;b=[b,this.that,this.args];var e=v;c.sourceEvent=v;v=c;try{d.apply(z,b)}finally{v=e}}};a.wheelDelta=function(b){return arguments.length?(w="function"===typeof b?b:$a(+b),a):w};a.filter=function(b){return arguments.length?
(r="function"===typeof b?b:$a(!!b),a):r};a.touchable=function(b){return arguments.length?(x="function"===typeof b?b:$a(!!b),a):x};a.extent=function(b){return arguments.length?(q="function"===typeof b?b:$a([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),a):q};a.scaleExtent=function(b){return arguments.length?(E[0]=+b[0],E[1]=+b[1],a):[E[0],E[1]]};a.translateExtent=function(b){return arguments.length?(y[0][0]=+b[0][0],y[1][0]=+b[1][0],y[0][1]=+b[0][1],y[1][1]=+b[1][1],a):[[y[0][0],y[0][1]],[y[1][0],y[1][1]]]};
a.constrain=function(b){return arguments.length?(t=b,a):t};a.duration=function(b){return arguments.length?(Cc=+b,a):Cc};a.interpolate=function(b){return arguments.length?(u=b,a):u};a.on=function(){var b=z.on.apply(z,arguments);return b===z?a:b};a.clickDistance=function(b){return arguments.length?(B=(b=+b)*b,a):Math.sqrt(B)};return a}function ci(a){return function(){return a}}function fd(a,b){if(a===b||a!==a)return ci(a);var c=typeof a;if(c!==typeof b||Array.isArray(a)!==Array.isArray(b))throw Error("Cannot interpolate values of different type");
if(Array.isArray(a)){var d=b.map(function(b,c){return fd(a[c],b)});return function(a){return d.map(function(b){return b(a)})}}if("object"===c){if(!a||!b)throw Error("Object cannot be null");if("[object Date]"===Object.prototype.toString.call(a)&&"[object Date]"===Object.prototype.toString.call(b)){a=a.getTime();b=b.getTime();var e=b-a;return function(b){return new Date(a+b*e)}}var g=Object.keys(b),f={},h={};g.forEach(function(c){f[c]=fd(a[c],b[c])});return function(a){g.forEach(function(b){h[b]=f[b](a)});
return h}}if("number"===c){var k=b-a;return function(b){return a+b*k}}throw Error("Cannot interpolate "+c+" values");}function di(a){return a}function ei({clientWidth:a,clientHeight:b}){return Math.min(a,b)}function fi({msx:a,msy:b}){return void 0!=a&&void 0!=b}function gi({transform:a,msx:b,msy:c}){return a&&void 0!=b&&void 0!=c?[a.invertX(b),a.invertY(c)]:null}function hi({scale:a,translateX:b,translateY:c,minSize:d,clientWidth:e,clientHeight:g}){b=-b/a;c=-c/a;return[[b/d,(b+e/a)/d],[c/d,(c+g/a)/
d]]}function ii({extent:a}){return(a[0][0]+a[0][1])/2}function ji({extent:a}){return(a[1][0]+a[1][1])/2}function ki(){let {z:a,scaleExtent:b,minSize:c,homeScale:d,homeX:e,homeY:g,disableBehaviors:f}=this.get(),h=this;a.wheelDelta(()=>{let a=-v.deltaY*(v.deltaMode?120:1)/500;v.ctrlKey&&(a*=10);return a});a.scaleExtent(b);let k=Ba(this.refs.root);this.set({selection:k,el:this.refs.root});f||a(k);a.filter(this.zoomEventFilter.bind(this));a.on("zoom",()=>{this.onzoom(h)});a.translateTo(k,e*c,g*c);a.scaleTo(k,
d)}function Pe({changed:a,current:b,previous:c}){void 0!=c&&(a.clientWidth||a.clientHeight)&&b.el&&this.update();let {}=this.get()}function li(a,b){function c(){a.set({clientWidth:f.clientWidth,clientHeight:f.clientHeight})}function d(b){a.mouseMove(b)}function e(b){a.set({msx:null,msy:null})}function g(b){a.set({msx:null,msy:null})}var f,h=a._slotted.default,k;return{c(){f=l("div");a.root._beforecreate.push(c);f.addEventListener("mousemove",d,void 0);f.addEventListener("mousedown",e,void 0);f.addEventListener("mouseout",
g,void 0);f.className="d3zoom svelte-kaete3 svelte-ref-root"},m(b,d){b.insertBefore(f,d);h&&f.appendChild(h);k=da(f,c);a.refs.root=f},p:G,d(b){b&&x(f);h&&ya(f,h);k.cancel();f.removeEventListener("mousemove",d,void 0);f.removeEventListener("mousedown",e,void 0);f.removeEventListener("mouseout",g,void 0);a.refs.root===f&&(a.refs.root=null)}}}function Qa(a){u(this,a);this.refs={};this._state=q({z:bi(),el:null,selection:null,transform:null,scaleExtent:[1,48],homeScale:1,homeX:.5,homeY:.5,scale:null,translateX:null,
translateY:null,k:1,x:0,y:0,msx:null,msy:null,disableBehaviors:!1,scrollWheel:!1},a.data);this._recompute({clientWidth:1,clientHeight:1,msx:1,msy:1,transform:1,minSize:1,scale:1,translateX:1,translateY:1,extent:1},this._state);this._intro=!0;this._handlers.state=[Pe];this._slotted=a.slots||{};Pe.call(this,{changed:qa({},this._state),current:this._state});this._fragment=li(this,this._state);this.root._oncreate.push(()=>{ki.call(this);this.fire("update",{changed:qa({},this._state),current:this._state})});
a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function mi({layers:a,layer:b}){if(null==a)return 0;let c=0;a[b].forEach((a)=>{a.forEach((a)=>{a&&500<a.num_activations&&(a=a.full_class_values[0],a>c&&(c=a))})});return c}function ni({viewWidth:a,screenResolution:b}){return a*b}function oi({viewHeight:a,screenResolution:b}){return a*b}function pi({scale:a,gridSize:b,config:c,classHeatmap:d,w:e,h:g,autoGridSizeMultiplier:f}){a=-1<b?+b:Math.floor(Math.sqrt(Math.max(e,g)*a/80/f/20));
c&&(a=Math.min(c.grid_size.length-1,a));-1<d&&(a=Math.min(2,a));return a}function qi({currentZoomIndex:a,layers:b}){return b?b[a]:[[]]}function ri({labelsBufferContext:a,labels:b,fontSize:c,textColor:d,textShadowColor:e}){a&&b&&(a.globalAlpha=1,a.font=c+"px Helvetica",b.forEach((b,c)=>{a.lineWidth=3;a.lineJoin="round";a.strokeStyle=e;a.strokeText(b,c%10*150+10,20*Math.floor(c/10+1),80,15);a.fillStyle=d;a.fillStyle=d;a.fillText(b,c%10*150+10,20*Math.floor(c/10+1),80,15)}))}function si({hoverIconData:a,
mouseGlobalPosition:b}){return b&&a&&a.gcx}function ti({currentLayerData:a,mouseGlobalPosition:b,w:c,h:d}){if(a){let e=a.length;if(b){let g=Math.floor(b[0]/Math.min(c,d)*e);b=Math.floor(b[1]/Math.min(c,d)*e);return a[b]&&a[b][g]?a[b][g]:{}}}return{}}function ui({hoverIconData:a,scale:b,w:c,h:d,translateX:e}){return a.gy*b*Math.min(c,d)+e}function vi({hoverIconData:a,scale:b,w:c,h:d,translateY:e}){return a.gx*b*Math.min(c,d)+e}function wi({hoverIconData:a,scale:b,w:c,h:d}){return a.gw*b*Math.min(c,
d)}function xi({mouseGlobalPosition:a,hoverIconData:b,enableHover:c}){return c&&a&&b&&b.gw}function yi(){let {tooltip:a}=this.store.get();this.refs.d3Zoom.on("zoom",()=>{a.hide()});let b=document.createElement("canvas");b.width=1500;b.height=2040;let c=b.getContext("2d");this.set({labelsBufferCanvas:b,labelsBufferContext:c})}function zi({changed:a,current:b}){if(!b.context||a.viewWidth||a.viewHeight){var c=this.refs.labelsCanvas.getContext("2d");c.imageSmoothingEnabled=!1;this.set({context:this.refs.canvas.getContext("2d"),
labelsContext:c})}(a.loading||a.autoGridSizeMultiplier||a.labels||a.density||a.maxAttributionValue||a.classHeatmap||a.classHeatmapMultiplier||a.classHeatmapPositive||a.showLabels||a.viewWidth||a.viewHeight||a.scale||a.translateX||a.translateY||a.iconCrop||a.gridSize||a.layers)&&this.render();if(a.hoverIconData){var {tooltip:c}=this.store.get();let {showHoverIcon:a}=this.get();a?c.show(b.hoverIconData):c.hide()}if(a.showHoverIcon&&0==b.showHoverIcon){var {tooltip:a}=this.store.get();a.hide()}}function Ai(a,
b){function c(){a.set({viewWidth:g.clientWidth,viewHeight:g.clientHeight})}var d,e,g,f,h,k,n,m,A,r,q,t,v,w={};if(void 0!==b.ready){w.ready=b.ready;var z=!0}var E=new Ob({root:a.root,store:a.store,data:w,_bind(b,c){var d={};!z&&b.ready&&(d.ready=c.ready);a._set(d);z=void 0}});a.root._beforecreate.push(()=>{E._bind({ready:1},E.get())});var y=b.ready&&Qe(a,b),u=b.showHoverIcon&&Re(a,b);w={homeX:b.homeX,homeY:b.homeY,homeScale:b.homeScale};if(void 0!==b.scale){w.scale=b.scale;var B=!0}if(void 0!==b.translateX){w.translateX=
b.translateX;var N=!0}if(void 0!==b.translateY){w.translateY=b.translateY;var D=!0}if(void 0!==b.mouseOver){w.mouseOver=b.mouseOver;var H=!0}if(void 0!==b.mouseGlobalPosition){w.mouseGlobalPosition=b.mouseGlobalPosition;var ra=!0}if(void 0!==b.extent){w.extent=b.extent;var G=!0}if(void 0!==b.scrollWheel){w.scrollWheel=b.scrollWheel;var za=!0}if(void 0!==b.disableBehaviors){w.disableBehaviors=b.disableBehaviors;var F=!0}if(void 0!==b.gcx){w.gcx=b.gcx;var Aa=!0}if(void 0!==b.gcy){w.gcy=b.gcy;var ka=
!0}var K=new Qa({root:a.root,store:a.store,slots:{default:X()},data:w,_bind(b,c){var d={};!B&&b.scale&&(d.scale=c.scale);!N&&b.translateX&&(d.translateX=c.translateX);!D&&b.translateY&&(d.translateY=c.translateY);!H&&b.mouseOver&&(d.mouseOver=c.mouseOver);!ra&&b.mouseGlobalPosition&&(d.mouseGlobalPosition=c.mouseGlobalPosition);!G&&b.extent&&(d.extent=c.extent);!za&&b.scrollWheel&&(d.scrollWheel=c.scrollWheel);!F&&b.disableBehaviors&&(d.disableBehaviors=c.disableBehaviors);!Aa&&b.gcx&&(d.gcx=c.gcx);
!ka&&b.gcy&&(d.gcy=c.gcy);a._set(d);ka=Aa=F=za=G=ra=H=D=N=B=void 0}});a.root._beforecreate.push(()=>{K._bind({scale:1,translateX:1,translateY:1,mouseOver:1,mouseGlobalPosition:1,extent:1,scrollWheel:1,disableBehaviors:1,gcx:1,gcy:1},K.get())});a.refs.d3Zoom=K;return{c(){E._fragment.c();d=p("\n\n");y&&y.c();e=p("\n\n");g=l("div");f=l("canvas");n=p("\n    ");m=l("canvas");q=p("\n    ");u&&u.c();t=document.createComment("");K._fragment.c();f.width=h=b.viewWidth*b.screenResolution;f.height=k=b.viewHeight*
b.screenResolution;f.className="svelte-w9b5xg svelte-ref-canvas";m.width=A=b.viewWidth*b.screenResolution;m.height=r=b.viewHeight*b.screenResolution;m.className="svelte-w9b5xg svelte-ref-labelsCanvas";a.root._beforecreate.push(c);g.className="svelte-w9b5xg svelte-ref-root"},m(b,h){E._mount(b,h);b.insertBefore(d,h);y&&y.m(b,h);b.insertBefore(e,h);b.insertBefore(g,h);K._slotted.default.appendChild(f);a.refs.canvas=f;K._slotted.default.appendChild(n);K._slotted.default.appendChild(m);a.refs.labelsCanvas=
m;K._slotted.default.appendChild(q);u&&u.m(K._slotted.default,null);K._slotted.default.appendChild(t);K._mount(g,null);v=da(g,c);a.refs.root=g},p(c,d){b=d;d={};!z&&c.ready&&(d.ready=b.ready,z=void 0!==b.ready);E._set(d);z=void 0;b.ready?y?y.p(c,b):(y=Qe(a,b),y.c(),y.m(e.parentNode,e)):y&&(y.d(1),y=null);(c.viewWidth||c.screenResolution)&&h!==(h=b.viewWidth*b.screenResolution)&&(f.width=h);(c.viewHeight||c.screenResolution)&&k!==(k=b.viewHeight*b.screenResolution)&&(f.height=k);(c.viewWidth||c.screenResolution)&&
A!==(A=b.viewWidth*b.screenResolution)&&(m.width=A);(c.viewHeight||c.screenResolution)&&r!==(r=b.viewHeight*b.screenResolution)&&(m.height=r);b.showHoverIcon?u?u.p(c,b):(u=Re(a,b),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);d={};c.homeX&&(d.homeX=b.homeX);c.homeY&&(d.homeY=b.homeY);c.homeScale&&(d.homeScale=b.homeScale);!B&&c.scale&&(d.scale=b.scale,B=void 0!==b.scale);!N&&c.translateX&&(d.translateX=b.translateX,N=void 0!==b.translateX);!D&&c.translateY&&(d.translateY=b.translateY,D=void 0!==b.translateY);
!H&&c.mouseOver&&(d.mouseOver=b.mouseOver,H=void 0!==b.mouseOver);!ra&&c.mouseGlobalPosition&&(d.mouseGlobalPosition=b.mouseGlobalPosition,ra=void 0!==b.mouseGlobalPosition);!G&&c.extent&&(d.extent=b.extent,G=void 0!==b.extent);!za&&c.scrollWheel&&(d.scrollWheel=b.scrollWheel,za=void 0!==b.scrollWheel);!F&&c.disableBehaviors&&(d.disableBehaviors=b.disableBehaviors,F=void 0!==b.disableBehaviors);!Aa&&c.gcx&&(d.gcx=b.gcx,Aa=void 0!==b.gcx);!ka&&c.gcy&&(d.gcy=b.gcy,ka=void 0!==b.gcy);K._set(d);ka=Aa=
F=za=G=ra=H=D=N=B=void 0},d(b){E.destroy(b);b&&x(d);y&&y.d(b);b&&(x(e),x(g));a.refs.canvas===f&&(a.refs.canvas=null);a.refs.labelsCanvas===m&&(a.refs.labelsCanvas=null);u&&u.d();K.destroy();a.refs.d3Zoom===K&&(a.refs.d3Zoom=null);v.cancel();a.refs.root===g&&(a.refs.root=null)}}}function Qe(a,b){var c={id:b.id,layer:b.layer,layout:b.layout,classFilter:b.classFilter,filter:b.filter};if(void 0!==b.config){c.config=b.config;var d=!0}if(void 0!==b.layers){c.layers=b.layers;var e=!0}if(void 0!==b.labels){c.labels=
b.labels;var g=!0}if(void 0!==b.loading){c.loading=b.loading;var f=!0}var h=new de({root:a.root,store:a.store,data:c,_bind(b,c){var h={};!d&&b.config&&(h.config=c.config);!e&&b.layers&&(h.layers=c.layers);!g&&b.labels&&(h.labels=c.labels);!f&&b.loading&&(h.loading=c.loading);a._set(h);f=g=e=d=void 0}});a.root._beforecreate.push(()=>{h._bind({config:1,layers:1,labels:1,loading:1},h.get())});return{c(){h._fragment.c()},m(a,b){h._mount(a,b)},p(a,c){b=c;c={};a.id&&(c.id=b.id);a.layer&&(c.layer=b.layer);
a.layout&&(c.layout=b.layout);a.classFilter&&(c.classFilter=b.classFilter);a.filter&&(c.filter=b.filter);!d&&a.config&&(c.config=b.config,d=void 0!==b.config);!e&&a.layers&&(c.layers=b.layers,e=void 0!==b.layers);!g&&a.labels&&(c.labels=b.labels,g=void 0!==b.labels);!f&&a.loading&&(c.loading=b.loading,f=void 0!==b.loading);h._set(c);f=g=e=d=void 0},d(a){h.destroy(a)}}}function Re(a,b){var c;return{c(){c=l("div");r(c,"left",""+b.hoverIconX+"px");r(c,"top",""+b.hoverIconY+"px");r(c,"width",""+b.hoverIconW+
"px");r(c,"height",""+b.hoverIconW+"px");c.className="svelte-w9b5xg svelte-ref-hover"},m(b,e){b.insertBefore(c,e);a.refs.hover=c},p(a,b){a.hoverIconX&&r(c,"left",""+b.hoverIconX+"px");a.hoverIconY&&r(c,"top",""+b.hoverIconY+"px");a.hoverIconW&&(r(c,"width",""+b.hoverIconW+"px"),r(c,"height",""+b.hoverIconW+"px"))},d(b){b&&x(c);a.refs.hover===c&&(a.refs.hover=null)}}}function Ec(a){u(this,a);this.refs={};this._state=q({ready:!0,id:"inceptionv1_mixed4c",config:null,layers:null,layer:0,layout:0,classFilter:0,
filter:0,context:null,alphaAttributionFactor:.02,density:1,classHeatmap:-1,classHeatmapMultiplier:1,classHeatmapPositive:1,iconCrop:.02,autoGridSizeMultiplier:.5,gridSize:null,homeX:.5,homeY:.5,homeScale:1,enableClickToZoom:!0,enableHover:!0,enableDragToPan:!0,backgroundColor:"white",strokeColor:"rgb(220, 220, 220)",strokeThickness:1,imageSmoothing:!1,fontSize:10,textColor:"white",textShadowColor:"rgba(0, 0, 0, 0.6)",showLabels:!0,screenResolution:1},a.data);this._recompute({layers:1,layer:1,viewWidth:1,
screenResolution:1,viewHeight:1,scale:1,gridSize:1,config:1,classHeatmap:1,w:1,h:1,autoGridSizeMultiplier:1,currentZoomIndex:1,labelsBufferContext:1,labels:1,fontSize:1,textColor:1,textShadowColor:1,currentLayerData:1,mouseGlobalPosition:1,translateX:1,translateY:1,hoverIconData:1,enableHover:1},this._state);this._intro=!0;this._handlers.update=[zi];this._fragment=Ai(this,this._state);this.root._oncreate.push(()=>{yi.call(this);this.fire("update",{changed:qa({},this._state),current:this._state})});
a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Bi(a,b){var c,d,e=a._slotted.head,g,f,h=a._slotted.body;return{c(){c=l("div");d=l("div");g=p("\n  ");f=l("div");d.className="head svelte-l56anp";f.className="body svelte-l56anp";c.className="root svelte-l56anp"},m(a,b){a.insertBefore(c,b);c.appendChild(d);e&&d.appendChild(e);c.appendChild(g);c.appendChild(f);h&&f.appendChild(h)},p:G,d(a){a&&x(c);e&&ya(d,e);h&&ya(f,h)}}}function gd(a){u(this,a);this._state=q({},a.data);
this._intro=!0;this._slotted=a.slots||{};this._fragment=Bi(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Ci({clientWidth:a,minWidth:b}){return a/Math.max(a,b)}function Di({clientWidth:a,minWidth:b}){return Math.max(a,b)+"px"}function Ei({clientHeight:a,scale:b}){return a/b+"px"}function Fi(a,b){var c,d,e=a._slotted.default;return{c(){c=l("div");d=l("div");r(d,"transform","scale("+b.scale+")");r(d,"width",b.finalWidth);r(d,"height",""+b.finalHeight+b.style+
"\n    ");d.className="svelte-fkjf8u svelte-ref-frame";c.className="svelte-fkjf8u svelte-ref-root"},m(b,f){b.insertBefore(c,f);c.appendChild(d);e&&d.appendChild(e);a.refs.frame=d;a.refs.root=c},p(a,b){a.scale&&r(d,"transform","scale("+b.scale+")");a.finalWidth&&r(d,"width",b.finalWidth);(a.finalHeight||a.style)&&r(d,"height",""+b.finalHeight+b.style+"\n    ")},d(b){b&&x(c);e&&ya(d,e);a.refs.frame===d&&(a.refs.frame=null);a.refs.root===c&&(a.refs.root=null)}}}function hd(a){u(this,a);this.refs={};
this._state=q({style:"",aspectRatio:1,minWidth:800,clientWidth:1E3,clientHeight:1E3},a.data);this._recompute({clientWidth:1,minWidth:1,width:1,clientHeight:1,scale:1},this._state);this._intro=!0;this._slotted=a.slots||{};this._fragment=Fi(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Gi({gridSize:a}){return 20*(a+1)}function Hi({iconScaleFactor:a,realGridSize:b}){return 1E6/(b*b*a)}function Ii(){let a=new URLSearchParams(window.location.search);if(a.has("layer")){let b=
decodeURIComponent(a.get("layer"));this.set({layerName:b})}if(a.has("poi")){let b=a.get("poi").split(",").map(parseFloat);setTimeout(()=>{this.zoomTo(...b,4E3)},1E3)}}function Ji(a,b){function c(){a.set({showLabels:ab.checked})}function d(){a.set({enableHover:bb.checked})}function e(){a.store.set({scroll:cb.checked})}function g(b){a.copyShareLink()}function f(){a.set({gridSize:P.__value})}function h(){a.set({gridSize:Q.__value})}function k(){a.set({gridSize:R.__value})}function n(){a.set({gridSize:S.__value})}
function m(){a.set({gridSize:T.__value})}function A(){a.set({gridSize:U.__value})}function q(){a.set({autoGridSizeMultiplier:Kc(ha.value)})}function x(){a.set({density:Kc(ia.value)})}function u(){a.set({classHeatmapPositive:V.__value})}function v(){a.set({classHeatmapPositive:W.__value})}function w(){a.set({classHeatmapMultiplier:Kc(ja.value)})}function z(b){a.toggle()}var E,y,B,D,N,G,H,F,Y,za,aa,Aa,ka,K,xa,Rb,M,Hb,fa,I,la,Se,na,Sb,Ea,db,ab,oa,qa,Z,bb,ua,ya,da,cb,Ba,Ca,O,Da,ea,Fa,J,sa,La,ma,P,Na,
Sa,pa,Q,Ua,Va,ta,R,Wa,Xa,va,S,Ya,Za,wa,T,gb,hb,bc,U,jb,mb,Ib,Ia,nb,cc,ob,ha,qb,Tb,dc,rb,ec,sb,ia,vb,ba,Ja,wb,fc,V,xb,yb,gc,W,zb,Ab,Ka,Bb,hc,Cb,ja,Db,Ga,Ma,Eb,Oa,Fb,Pa=Ub(b.gcx),$a,Gb,Qa,Kb,Ra=Ub(b.gcy),fb,Lb,Ta,Mb,Fc=Ub(b.scale),ib,Nb,Gc,Vb,Hc=b.showOptions?"fewer options":"more options",kb,Ic,Ob={};if(void 0!==b.classHeatmap){Ob.classHeatmap=b.classHeatmap;var ic=!0}var Wb=new Lc({root:a.root,store:a.store,data:Ob,_bind(b,c){var d={};!ic&&b.classHeatmap&&(d.classHeatmap=c.classHeatmap);a._set(d);
ic=void 0}});a.root._beforecreate.push(()=>{Wb._bind({classHeatmap:1},Wb.get())});var Xb=new gd({root:a.root,store:a.store,slots:{default:X(),body:X(),head:X()}}),Pb={classHeatmap:b.classHeatmap};if(void 0!==b.layerName){Pb.layerName=b.layerName;var jc=!0}var Yb=new Td({root:a.root,store:a.store,data:Pb,_bind(b,c){var d={};!jc&&b.layerName&&(d.layerName=c.layerName);a._set(d);jc=void 0}});a.root._beforecreate.push(()=>{Yb._bind({layerName:1},Yb.get())});var Zb=new gd({root:a.root,store:a.store,slots:{default:X(),
body:X(),head:X()}}),ca={id:"inceptionv1_"+b.layerName,strokeColor:"#666",backgroundColor:"#dfdfdf",showHoverImage:!1,classHeatmap:b.classHeatmap,homeX:b.homeX,homeY:b.homeY,homeScale:b.homeScale};if(void 0!==b.density){ca.density=b.density;var kc=!0}if(void 0!==b.iconCrop){ca.iconCrop=b.iconCrop;var lc=!0}if(void 0!==b.classHeatmapMultiplier){ca.classHeatmapMultiplier=b.classHeatmapMultiplier;var mc=!0}if(void 0!==b.classHeatmapPositive){ca.classHeatmapPositive=b.classHeatmapPositive;var nc=!0}if(void 0!==
b.autoGridSizeMultiplier){ca.autoGridSizeMultiplier=b.autoGridSizeMultiplier;var oc=!0}if(void 0!==b.gridSize){ca.gridSize=b.gridSize;var pc=!0}if(void 0!==b.showLabels){ca.showLabels=b.showLabels;var qc=!0}if(void 0!==b.enableHover){ca.enableHover=b.enableHover;var rc=!0}if(void 0!==b.scale){ca.scale=b.scale;var sc=!0}if(void 0!==b.gcx){ca.gcx=b.gcx;var tc=!0}if(void 0!==b.gcy){ca.gcy=b.gcy;var uc=!0}if(void 0!==b.extent){ca.extent=b.extent;var vc=!0}if(void 0!==b.$scroll){ca.scrollWheel=b.$scroll;
var wc=!0}var eb=new Ec({root:a.root,store:a.store,data:ca,_bind(b,c){var d={},e={};!kc&&b.density&&(d.density=c.density);!lc&&b.iconCrop&&(d.iconCrop=c.iconCrop);!mc&&b.classHeatmapMultiplier&&(d.classHeatmapMultiplier=c.classHeatmapMultiplier);!nc&&b.classHeatmapPositive&&(d.classHeatmapPositive=c.classHeatmapPositive);!oc&&b.autoGridSizeMultiplier&&(d.autoGridSizeMultiplier=c.autoGridSizeMultiplier);!pc&&b.gridSize&&(d.gridSize=c.gridSize);!qc&&b.showLabels&&(d.showLabels=c.showLabels);!rc&&b.enableHover&&
(d.enableHover=c.enableHover);!sc&&b.scale&&(d.scale=c.scale);!tc&&b.gcx&&(d.gcx=c.gcx);!uc&&b.gcy&&(d.gcy=c.gcy);!vc&&b.extent&&(d.extent=c.extent);!wc&&b.scrollWheel&&(e.scroll=c.scrollWheel);a.store.set(e);a._set(d);wc=vc=uc=tc=sc=rc=qc=pc=oc=nc=mc=lc=kc=void 0}});a.root._beforecreate.push(()=>{eb._bind({density:1,iconCrop:1,classHeatmapMultiplier:1,classHeatmapPositive:1,autoGridSizeMultiplier:1,gridSize:1,showLabels:1,enableHover:1,scale:1,gcx:1,gcy:1,extent:1,scrollWheel:1},eb.get())});a.refs.atlas=
eb;var Qb={id:"inceptionv1_"+b.layerName,layerName:b.layerName,enableDragging:!0,classHeatmap:b.classHeatmap,scaleCountFactor:b.scaleCountFactor};if(void 0!==b.extent){Qb.extent=b.extent;var xc=!0}var Jb=new Hd({root:a.root,store:a.store,data:Qb,_bind(b,c){var d={};!xc&&b.extent&&(d.extent=c.extent);a._set(d);xc=void 0}});a.root._beforecreate.push(()=>{Jb._bind({extent:1},Jb.get())});Jb.on("drag",function(b){a.refs.atlas.translateTo(b.gcx,b.gcy)});var pb=new $b({root:a.root,store:a.store,data:{name:"home",
color:"white"}}),yc=new Dc({root:a.root,store:a.store,slots:{default:X()}});yc.on("click",function(b){a.refs.atlas.home(3E3)});var tb=new $b({root:a.root,store:a.store,data:{name:"add",color:"white"}}),zc=new Dc({root:a.root,store:a.store,slots:{default:X()}});zc.on("click",function(b){a.refs.atlas.scaleBy(2)});var ub=new $b({root:a.root,store:a.store,data:{name:"remove",color:"white"}}),Ac=new Dc({root:a.root,store:a.store,slots:{default:X()}});Ac.on("click",function(b){a.refs.atlas.scaleBy(.5)});
var ac={clientWidth:b.clientWidth,clientHeight:b.clientHeight,minWidth:768},Bc=new hd({root:a.root,store:a.store,slots:{default:X()},data:ac});return{c(){E=l("div");y=l("div");B=l("h2");B.textContent="Class Filter";D=p("\n        ");N=l("div");Wb._fragment.c();Xb._fragment.c();G=p("\n    ");H=l("div");F=l("h2");F.textContent="Layer";Y=p("\n        ");za=l("div");Yb._fragment.c();Zb._fragment.c();aa=p("\n  ");Aa=l("div");ka=l("div");eb._fragment.c();K=p("\n        ");xa=l("div");Rb=l("div");M=l("div");
Hb=l("div");Jb._fragment.c();fa=p("\n            ");I=l("div");pb._fragment.c();yc._fragment.c();la=p("\n              ");tb._fragment.c();zc._fragment.c();Se=p("\n              ");ub._fragment.c();Ac._fragment.c();na=p("\n          ");Sb=l("div");Ea=l("div");db=l("label");ab=l("input");oa=p(" attribution labels");qa=p("\n              ");Z=l("label");bb=l("input");ua=p(" show tooltip");ya=p("\n              ");da=l("label");cb=l("input");Ba=p(" scroll to zoom");Ca=p("\n              ");O=l("button");
O.textContent="copy shareable link";Da=p("\n            ");ea=l("div");Fa=l("div");J=l("div");sa=l("h3");sa.textContent="Grid size";La=p("\n                  ");ma=l("label");P=l("input");Na=p(" 20x20");Sa=p("\n                  ");pa=l("label");Q=l("input");Ua=p(" 40x40");Va=p("\n                  ");ta=l("label");R=l("input");Wa=p(" 80x80");Xa=p("\n                  ");va=l("label");S=l("input");Ya=p(" 160x160");Za=p("\n                  ");wa=l("label");T=l("input");gb=p(" 320x320");hb=p("\n                  ");
bc=l("label");U=l("input");jb=p(" auto");mb=p("\n                  ");Ib=l("div");Ia=l("div");nb=p("auto threshold: ");cc=l("noscript");ob=p("\n                    ");ha=l("input");qb=p("\n                ");Tb=l("div");dc=l("h3");rb=p("Icon density: ");ec=l("noscript");sb=p("\n                  ");ia=l("input");vb=p("\n                ");ba=l("div");Ja=l("h3");Ja.textContent="Class filter";wb=p("\n                  ");fc=l("label");V=l("input");xb=p(" positive influence");yb=p("\n                  ");
gc=l("label");W=l("input");zb=p(" negative influence");Ab=p("\n                  ");Ka=l("div");Bb=p("Intensity: ");hc=l("noscript");Cb=p("\n                  ");ja=l("input");Db=p("\n                ");Ga=l("div");Ma=l("h3");Ma.textContent="Location";Eb=p("\n                  ");Oa=l("div");Fb=p("x: ");$a=p(Pa);Gb=p("\n                  ");Qa=l("div");Kb=p("y: ");fb=p(Ra);Lb=p("\n                  ");Ta=l("div");Mb=p("scale: ");ib=p(Fc);Nb=p("\n          ");Gc=l("div");Vb=l("button");kb=p(Hc);Bc._fragment.c();
t(B,"slot","head");t(N,"slot","body");y.className="filter svelte-1mmgffy";r(y,"display",b.showClassFilter?"block":"none");t(F,"slot","head");t(za,"slot","body");H.className="stack svelte-1mmgffy";r(H,"display",b.showLayerChooser?"block":"none");Hb.className="map-container svelte-1mmgffy";r(Hb,"width","100px");r(Hb,"height","100px");r(Hb,"position","absolute");M.className="map svelte-1mmgffy";I.className="buttons svelte-1mmgffy";Rb.className="nav svelte-1mmgffy";ab.addEventListener("change",c,void 0);
t(ab,"type","checkbox");r(db,"white-space","nowrap");r(db,"text-overflow","ellipsis");r(db,"overflow","hidden");db.className="svelte-1mmgffy";bb.addEventListener("change",d,void 0);t(bb,"type","checkbox");Z.className="svelte-1mmgffy";cb.addEventListener("change",e,void 0);t(cb,"type","checkbox");da.className="svelte-1mmgffy";O.addEventListener("click",g,void 0);r(O,"font-size","10px");t(O,"href","#");Ea.className="essential";sa.className="svelte-1mmgffy";a._bindingGroups[0].push(P);P.addEventListener("change",
f,void 0);t(P,"type","radio");P.__value=0;P.value=P.__value;ma.className="svelte-1mmgffy";a._bindingGroups[0].push(Q);Q.addEventListener("change",h,void 0);t(Q,"type","radio");Q.__value=1;Q.value=Q.__value;pa.className="svelte-1mmgffy";a._bindingGroups[0].push(R);R.addEventListener("change",k,void 0);t(R,"type","radio");R.__value=2;R.value=R.__value;ta.className="svelte-1mmgffy";a._bindingGroups[0].push(S);S.addEventListener("change",n,void 0);t(S,"type","radio");S.__value=3;S.value=S.__value;va.className=
"svelte-1mmgffy";a._bindingGroups[0].push(T);T.addEventListener("change",m,void 0);t(T,"type","radio");T.__value=4;T.value=T.__value;wa.className="svelte-1mmgffy";a._bindingGroups[0].push(U);U.addEventListener("change",A,void 0);t(U,"type","radio");U.__value=-1;U.value=U.__value;bc.className="svelte-1mmgffy";ha.addEventListener("change",q,void 0);ha.addEventListener("input",q,void 0);t(ha,"type","range");ha.min=.5;ha.max=1.4;ha.step=.01;r(Ib,"display","none");J.className="section svelte-1mmgffy";
dc.className="svelte-1mmgffy";ia.addEventListener("change",x,void 0);ia.addEventListener("input",x,void 0);t(ia,"type","range");ia.min=.2;ia.max=8;ia.step=.01;Tb.className="section svelte-1mmgffy";Ja.className="svelte-1mmgffy";a._bindingGroups[1].push(V);V.addEventListener("change",u,void 0);t(V,"type","radio");V.__value=1;V.value=V.__value;fc.className="svelte-1mmgffy";a._bindingGroups[1].push(W);W.addEventListener("change",v,void 0);t(W,"type","radio");W.__value=-1;W.value=W.__value;gc.className=
"svelte-1mmgffy";ja.addEventListener("change",w,void 0);ja.addEventListener("input",w,void 0);t(ja,"type","range");ja.min="0.5";ja.max="2";ja.step="0.1";ba.className="section svelte-1mmgffy";r(ba,"display",-1<b.classHeatmap?"block":"none");Ma.className="svelte-1mmgffy";Ga.className="section svelte-1mmgffy";Fa.className="grid-size";ea.className="expand svelte-1mmgffy";Sb.className="options svelte-1mmgffy";Vb.addEventListener("click",z,void 0);Vb.className="svelte-1mmgffy";Gc.className="expand-toggle svelte-1mmgffy";
xa.className=Ic="controls "+(b.showOptions?"open":"closed")+" svelte-1mmgffy svelte-ref-controls";ka.className="atlas svelte-1mmgffy";Aa.className="main svelte-1mmgffy";E.className="container svelte-1mmgffy"},m(c,d){Bc._slotted.default.appendChild(E);E.appendChild(y);Xb._slotted.head.appendChild(B);Xb._slotted.default.appendChild(D);Xb._slotted.body.appendChild(N);Wb._mount(N,null);Xb._mount(y,null);E.appendChild(G);E.appendChild(H);Zb._slotted.head.appendChild(F);Zb._slotted.default.appendChild(Y);
Zb._slotted.body.appendChild(za);Yb._mount(za,null);Zb._mount(H,null);E.appendChild(aa);E.appendChild(Aa);Aa.appendChild(ka);eb._mount(ka,null);ka.appendChild(K);ka.appendChild(xa);xa.appendChild(Rb);Rb.appendChild(M);M.appendChild(Hb);Jb._mount(Hb,null);Rb.appendChild(fa);Rb.appendChild(I);pb._mount(yc._slotted.default,null);yc._mount(I,null);I.appendChild(la);tb._mount(zc._slotted.default,null);zc._mount(I,null);I.appendChild(Se);ub._mount(Ac._slotted.default,null);Ac._mount(I,null);xa.appendChild(na);
xa.appendChild(Sb);Sb.appendChild(Ea);Ea.appendChild(db);db.appendChild(ab);ab.checked=b.showLabels;db.appendChild(oa);Ea.appendChild(qa);Ea.appendChild(Z);Z.appendChild(bb);bb.checked=b.enableHover;Z.appendChild(ua);Ea.appendChild(ya);Ea.appendChild(da);da.appendChild(cb);cb.checked=b.$scroll;da.appendChild(Ba);Ea.appendChild(Ca);Ea.appendChild(O);Sb.appendChild(Da);Sb.appendChild(ea);ea.appendChild(Fa);Fa.appendChild(J);J.appendChild(sa);J.appendChild(La);J.appendChild(ma);ma.appendChild(P);P.checked=
P.__value===b.gridSize;ma.appendChild(Na);J.appendChild(Sa);J.appendChild(pa);pa.appendChild(Q);Q.checked=Q.__value===b.gridSize;pa.appendChild(Ua);J.appendChild(Va);J.appendChild(ta);ta.appendChild(R);R.checked=R.__value===b.gridSize;ta.appendChild(Wa);J.appendChild(Xa);J.appendChild(va);va.appendChild(S);S.checked=S.__value===b.gridSize;va.appendChild(Ya);J.appendChild(Za);J.appendChild(wa);wa.appendChild(T);T.checked=T.__value===b.gridSize;wa.appendChild(gb);J.appendChild(hb);J.appendChild(bc);
bc.appendChild(U);U.checked=U.__value===b.gridSize;bc.appendChild(jb);J.appendChild(mb);J.appendChild(Ib);Ib.appendChild(Ia);Ia.appendChild(nb);Ia.appendChild(cc);cc.insertAdjacentHTML("afterend",b.autoGridSizeMultiplier);Ib.appendChild(ob);Ib.appendChild(ha);ha.value=b.autoGridSizeMultiplier;Fa.appendChild(qb);Fa.appendChild(Tb);Tb.appendChild(dc);dc.appendChild(rb);dc.appendChild(ec);ec.insertAdjacentHTML("afterend",b.density);Tb.appendChild(sb);Tb.appendChild(ia);ia.value=b.density;Fa.appendChild(vb);
Fa.appendChild(ba);ba.appendChild(Ja);ba.appendChild(wb);ba.appendChild(fc);fc.appendChild(V);V.checked=V.__value===b.classHeatmapPositive;fc.appendChild(xb);ba.appendChild(yb);ba.appendChild(gc);gc.appendChild(W);W.checked=W.__value===b.classHeatmapPositive;gc.appendChild(zb);ba.appendChild(Ab);ba.appendChild(Ka);Ka.appendChild(Bb);Ka.appendChild(hc);hc.insertAdjacentHTML("afterend",b.classHeatmapMultiplier);ba.appendChild(Cb);ba.appendChild(ja);ja.value=b.classHeatmapMultiplier;Fa.appendChild(Db);
Fa.appendChild(Ga);Ga.appendChild(Ma);Ga.appendChild(Eb);Ga.appendChild(Oa);Oa.appendChild(Fb);Oa.appendChild($a);Ga.appendChild(Gb);Ga.appendChild(Qa);Qa.appendChild(Kb);Qa.appendChild(fb);Ga.appendChild(Lb);Ga.appendChild(Ta);Ta.appendChild(Mb);Ta.appendChild(ib);a.refs.expand=ea;xa.appendChild(Nb);xa.appendChild(Gc);Gc.appendChild(Vb);Vb.appendChild(kb);a.refs.controls=xa;Bc._mount(c,d)},p(a,c){b=c;c={};!ic&&a.classHeatmap&&(c.classHeatmap=b.classHeatmap,ic=void 0!==b.classHeatmap);Wb._set(c);
ic=void 0;a.showClassFilter&&r(y,"display",b.showClassFilter?"block":"none");c={};a.classHeatmap&&(c.classHeatmap=b.classHeatmap);!jc&&a.layerName&&(c.layerName=b.layerName,jc=void 0!==b.layerName);Yb._set(c);jc=void 0;a.showLayerChooser&&r(H,"display",b.showLayerChooser?"block":"none");c={};a.layerName&&(c.id="inceptionv1_"+b.layerName);a.classHeatmap&&(c.classHeatmap=b.classHeatmap);a.homeX&&(c.homeX=b.homeX);a.homeY&&(c.homeY=b.homeY);a.homeScale&&(c.homeScale=b.homeScale);!kc&&a.density&&(c.density=
b.density,kc=void 0!==b.density);!lc&&a.iconCrop&&(c.iconCrop=b.iconCrop,lc=void 0!==b.iconCrop);!mc&&a.classHeatmapMultiplier&&(c.classHeatmapMultiplier=b.classHeatmapMultiplier,mc=void 0!==b.classHeatmapMultiplier);!nc&&a.classHeatmapPositive&&(c.classHeatmapPositive=b.classHeatmapPositive,nc=void 0!==b.classHeatmapPositive);!oc&&a.autoGridSizeMultiplier&&(c.autoGridSizeMultiplier=b.autoGridSizeMultiplier,oc=void 0!==b.autoGridSizeMultiplier);!pc&&a.gridSize&&(c.gridSize=b.gridSize,pc=void 0!==
b.gridSize);!qc&&a.showLabels&&(c.showLabels=b.showLabels,qc=void 0!==b.showLabels);!rc&&a.enableHover&&(c.enableHover=b.enableHover,rc=void 0!==b.enableHover);!sc&&a.scale&&(c.scale=b.scale,sc=void 0!==b.scale);!tc&&a.gcx&&(c.gcx=b.gcx,tc=void 0!==b.gcx);!uc&&a.gcy&&(c.gcy=b.gcy,uc=void 0!==b.gcy);!vc&&a.extent&&(c.extent=b.extent,vc=void 0!==b.extent);!wc&&a.$scroll&&(c.scrollWheel=b.$scroll,wc=void 0!==b.$scroll);eb._set(c);wc=vc=uc=tc=sc=rc=qc=pc=oc=nc=mc=lc=kc=void 0;c={};a.layerName&&(c.id=
"inceptionv1_"+b.layerName);a.layerName&&(c.layerName=b.layerName);a.classHeatmap&&(c.classHeatmap=b.classHeatmap);a.scaleCountFactor&&(c.scaleCountFactor=b.scaleCountFactor);!xc&&a.extent&&(c.extent=b.extent,xc=void 0!==b.extent);Jb._set(c);xc=void 0;a.showLabels&&(ab.checked=b.showLabels);a.enableHover&&(bb.checked=b.enableHover);a.$scroll&&(cb.checked=b.$scroll);a.gridSize&&(P.checked=P.__value===b.gridSize);a.gridSize&&(Q.checked=Q.__value===b.gridSize);a.gridSize&&(R.checked=R.__value===b.gridSize);
a.gridSize&&(S.checked=S.__value===b.gridSize);a.gridSize&&(T.checked=T.__value===b.gridSize);a.gridSize&&(U.checked=U.__value===b.gridSize);a.autoGridSizeMultiplier&&(Jc(cc),cc.insertAdjacentHTML("afterend",b.autoGridSizeMultiplier));a.autoGridSizeMultiplier&&(ha.value=b.autoGridSizeMultiplier);a.gridSize&&r(Ib,"display","none");a.density&&(Jc(ec),ec.insertAdjacentHTML("afterend",b.density));a.density&&(ia.value=b.density);a.classHeatmapPositive&&(V.checked=V.__value===b.classHeatmapPositive);a.classHeatmapPositive&&
(W.checked=W.__value===b.classHeatmapPositive);a.classHeatmapMultiplier&&(Jc(hc),hc.insertAdjacentHTML("afterend",b.classHeatmapMultiplier));a.classHeatmapMultiplier&&(ja.value=b.classHeatmapMultiplier);a.classHeatmap&&r(ba,"display",-1<b.classHeatmap?"block":"none");a.gcx&&Pa!==(Pa=Ub(b.gcx))&&($a.data=""+Pa);a.gcy&&Ra!==(Ra=Ub(b.gcy))&&(fb.data=""+Ra);a.scale&&Fc!==(Fc=Ub(b.scale))&&(ib.data=""+Fc);a.showOptions&&Hc!==(Hc=b.showOptions?"fewer options":"more options")&&(kb.data=""+Hc);a.showOptions&&
Ic!==(Ic="controls "+(b.showOptions?"open":"closed")+" svelte-1mmgffy svelte-ref-controls")&&(xa.className=Ic);c={};a.clientWidth&&(c.clientWidth=b.clientWidth);a.clientHeight&&(c.clientHeight=b.clientHeight);Bc._set(c)},d(b){Wb.destroy();Xb.destroy();Yb.destroy();Zb.destroy();eb.destroy();a.refs.atlas===eb&&(a.refs.atlas=null);Jb.destroy();pb.destroy();yc.destroy();tb.destroy();zc.destroy();ub.destroy();Ac.destroy();ab.removeEventListener("change",c,void 0);bb.removeEventListener("change",d,void 0);
cb.removeEventListener("change",e,void 0);O.removeEventListener("click",g,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(P),1);P.removeEventListener("change",f,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(Q),1);Q.removeEventListener("change",h,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(R),1);R.removeEventListener("change",k,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(S),1);S.removeEventListener("change",n,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(T),
1);T.removeEventListener("change",m,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(U),1);U.removeEventListener("change",A,void 0);ha.removeEventListener("change",q,void 0);ha.removeEventListener("input",q,void 0);ia.removeEventListener("change",x,void 0);ia.removeEventListener("input",x,void 0);a._bindingGroups[1].splice(a._bindingGroups[1].indexOf(V),1);V.removeEventListener("change",u,void 0);a._bindingGroups[1].splice(a._bindingGroups[1].indexOf(W),1);W.removeEventListener("change",
v,void 0);ja.removeEventListener("change",w,void 0);ja.removeEventListener("input",w,void 0);a.refs.expand===ea&&(a.refs.expand=null);Vb.removeEventListener("click",z,void 0);a.refs.controls===xa&&(a.refs.controls=null);Bc.destroy(b)}}}function Kb(a){u(this,a);this.refs={};this._state=q(q(this.store._init(["scroll"]),{layerName:"mixed4c",gridSize:1,classHeatmap:-1,iconScaleFactor:.8,iconCrop:.35,showClassFilter:!0,showLayerChooser:!0,showOptions:!0,homeX:.5,homeY:.5,homeScale:1}),a.data);this.store._add(this,
["scroll"]);this._recompute({gridSize:1,iconScaleFactor:1,realGridSize:1},this._state);this._bindingGroups=[[],[]];this._intro=!0;this._handlers.destroy=[qd];this._fragment=Ji(this,this._state);this.root._oncreate.push(()=>{Ii.call(this);this.fire("update",{changed:qa({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Ki(){setTimeout(()=>{this.refs.app.home(0)},100)}function Li(a,b){function c(){a.set({clientWidth:d.clientWidth,clientHeight:d.clientHeight})}
var d,e,g=new Kb({root:a.root,store:a.store,data:{clientWidth:b.clientWidth,clientHeight:b.clientHeight,gridSize:-1,showLabels:!0}});a.refs.app=g;return{c(){d=l("div");g._fragment.c();a.root._beforecreate.push(c);r(d,"width","100%");r(d,"height","100%")},m(a,b){a.insertBefore(d,b);g._mount(d,null);e=da(d,c)},p(a,b){var c={};a.clientWidth&&(c.clientWidth=b.clientWidth);a.clientHeight&&(c.clientHeight=b.clientHeight);g._set(c)},d(b){b&&x(d);g.destroy();a.refs.app===g&&(a.refs.app=null);e.cancel()}}}
function Te(a){u(this,a);this.refs={};this._state=q({},a.data);this._intro=!0;this._fragment=Li(this,this._state);this.root._oncreate.push(()=>{Ki.call(this);this.fire("update",{changed:qa({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Mi({x:a,width:b,y:c,clientHeight:d,visible:e}){if(!1===e)return"visibility: hidden;";{e=document.documentElement.scrollLeft;let g=document.documentElement.scrollTop,f=document.documentElement.clientWidth-
b;d=document.documentElement.clientHeight-d;let h=Math.min(a,f),k=Math.min(c,d);a>=f&&c>=d&&(h=a-b);return`width: ${b}px; top: ${k+g}px; left: ${h+e}px;`}}function Ni(a,b){function c(b){a.mousemove(b)}function d(b){a.hide()}function e(){a.set({clientHeight:f.clientHeight})}var g,f,h;document.addEventListener("mousemove",c);document.addEventListener("scroll",d);var k=b.component&&Ue(a,b);return{c(){g=p("\n\n");f=l("div");k&&k.c();a.root._beforecreate.push(e);f.style.cssText=b.style;f.className="svelte-14z2oof svelte-ref-root"},
m(b,c){b.insertBefore(g,c);b.insertBefore(f,c);k&&k.m(f,null);h=da(f,e);a.refs.root=f},p(b,c){c.component?k?k.p(b,c):(k=Ue(a,c),k.c(),k.m(f,null)):k&&(k.d(1),k=null);b.style&&(f.style.cssText=c.style)},d(b){document.removeEventListener("mousemove",c);document.removeEventListener("scroll",d);b&&(x(g),x(f));k&&k.d();h.cancel();a.refs.root===f&&(a.refs.root=null)}}}function Ue(a,b){var c,d=b.component;if(d)var e=new d({root:a.root,store:a.store});return{c(){e&&e._fragment.c();c=document.createComment("")},
m(b,d){e&&(e._mount(b,d),a.refs.component=e);b.insertBefore(c,d)},p(b,f){d!==(d=f.component)&&(e&&e.destroy(),d?(e=new d({root:a.root,store:a.store}),e._fragment.c(),e._mount(c.parentNode,c),a.refs.component=e):(e=null,a.refs.component===e&&(a.refs.component=null)))},d(a){a&&x(c);e&&e.destroy(a)}}}function Ra(a){u(this,a);this.refs={};this._state=q({visible:!1,width:150,component:null},a.data);this._recompute({x:1,width:1,y:1,clientHeight:1,visible:1},this._state);this._intro=!0;this._fragment=Ni(this,
this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Ve(a,b,c){a=Object.create(a);a.top=b[c];a.i=c;return a}function Oi(a,b){var c,d,e,g,f,h=We(b.num_activations),k,n,m=b.top_class_indices&&Xe(a,b);return{c(){c=l("div");d=l("table");m&&m.c();e=p("\n  ");g=l("div");f=p("Average of ");k=p(h);n=p(" activations");d.className="svelte-1qbcldy";r(g,"font-size","10px");r(g,"margin-top","4px");r(g,"color","#999");r(g,"text-align","right");c.className="hover svelte-1qbcldy"},
m(a,b){a.insertBefore(c,b);c.appendChild(d);m&&m.m(d,null);c.appendChild(e);c.appendChild(g);g.appendChild(f);g.appendChild(k);g.appendChild(n)},p(b,c){c.top_class_indices?m?m.p(b,c):(m=Xe(a,c),m.c(),m.m(d,null)):m&&(m.d(1),m=null);b.num_activations&&h!==(h=We(c.num_activations))&&(k.data=""+h)},d(a){a&&x(c);m&&m.d()}}}function Xe(a,b){for(var c,d=b.top_class_indices.slice(0,5),e=[],g=0;g<d.length;g+=1)e[g]=Ye(a,Ve(b,d,g));return{c(){for(var a=0;a<e.length;a+=1)e[a].c();c=document.createComment("")},
m(a,b){for(var d=0;d<e.length;d+=1)e[d].m(a,b);a.insertBefore(c,b)},p(b,g){if(b.top_class_values||b.$inceptionLabels||b.top_class_indices){d=g.top_class_indices.slice(0,5);for(var f=0;f<d.length;f+=1){let h=Ve(g,d,f);e[f]?e[f].p(b,h):(e[f]=Ye(a,h),e[f].c(),e[f].m(c.parentNode,c))}for(;f<e.length;f+=1)e[f].d(1);e.length=d.length}},d(a){Mb(e,a);a&&x(c)}}}function Ye(a,b){var c,d,e=b.i+1,g,f,h,k,n=b.$inceptionLabels[b.top],m,q,t,u=Ze(b.top_class_values[b.i]),v;return{c(){c=l("tr");d=l("td");g=p(e);f=
p(".");h=p("\n        ");k=l("td");m=p(n);q=p("\n        ");t=l("td");v=p(u);r(d,"width","10px");r(d,"text-align","right");r(d,"padding-right","4px");d.className="svelte-1qbcldy";k.className=(0==b.i?"first":"")+" svelte-1qbcldy";r(t,"text-align","right");t.className="svelte-1qbcldy"},m(a,b){a.insertBefore(c,b);c.appendChild(d);d.appendChild(g);d.appendChild(f);c.appendChild(h);c.appendChild(k);k.appendChild(m);c.appendChild(q);c.appendChild(t);t.appendChild(v)},p(a,b){(a.$inceptionLabels||a.top_class_indices)&&
n!==(n=b.$inceptionLabels[b.top])&&(m.data=""+n);a.top_class_values&&u!==(u=Ze(b.top_class_values[b.i]))&&(v.data=""+u)},d(a){a&&x(c)}}}function $e(a){u(this,a);this._state=q(this.store._init(["inceptionLabels"]),a.data);this.store._add(this,["inceptionLabels"]);this._intro=!0;this._handlers.destroy=[qd];this._fragment=Oi(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}var z={destroy:function(a){this.destroy=G;this.fire("destroy");this.set=G;this._fragment.d(!1!==a);
this._fragment=null;this._state={}},get:od,fire:nd,on:pd,set:function(a){this._set(q({},a));this.root._lock||D(this.root)},_recompute:G,_set:function(a){var b=this._state,c={},d=!1;a=q(this._staged,a);this._staged={};for(var e in a)this._differs(a[e],b[e])&&(c[e]=d=!0);d&&(this._state=q(q({},b),a),this._recompute(c,this._state),this._bind&&this._bind(c,this._state),this._fragment&&(this.fire("state",{changed:c,current:this._state,previous:b}),this._fragment.p(c,this._state),this.fire("update",{changed:c,
current:this._state,previous:b})))},_stage:function(a){q(this._staged,a)},_mount:function(a,b){this._fragment[this._fragment.i?"i":"m"](a,b||null)},_differs:md};q(rd.prototype,{_add(a,b){this._dependents.push({component:a,props:b})},_init(a){let b={};for(let c=0;c<a.length;c+=1){let d=a[c];b["$"+d]=this._state[d]}return b},_remove(a){let b=this._dependents.length;for(;b--;)if(this._dependents[b].component===a){this._dependents.splice(b,1);break}},_set(a,b){let c=this._state;this._state=q(q({},c),
a);for(a=0;a<this._sortedComputedProperties.length;a+=1)this._sortedComputedProperties[a].update(this._state,b);this.fire("state",{changed:b,previous:c,current:this._state});this._dependents.filter((a)=>{let c={},d=!1;for(let e=0;e<a.props.length;e+=1){let f=a.props[e];f in b&&(c["$"+f]=this._state[f],d=!0)}if(d)return a.component._stage(c),!0}).forEach((a)=>{a.component.set({})});this.fire("update",{changed:b,previous:c,current:this._state})},_sortComputedProperties(){function a(g){let f=b[g];f&&
(f.deps.forEach((b)=>{if(b===e)throw Error(`Cyclical dependency detected between ${b} <-> ${g}`);a(b)}),d[g]||(d[g]=!0,c.push(f)))}let b=this._computed,c=this._sortedComputedProperties=[],d=Object.create(null),e;for(let b in this._computed)a(e=b)},compute(a,b,c){let d,e={deps:b,update:(e,f,g)=>{var h=b.map((a)=>{a in f&&(g=!0);return e[a]});g&&(h=c.apply(null,h),this._differs(h,d)&&(d=h,f[a]=!0,e[a]=d))}};this._computed[a]=e;this._sortComputedProperties();let g=q({},this._state),f={};e.update(g,f,
!0);this._set(g,f)},fire:nd,get:od,on:pd,set(a){let b=this._state,c=this._changed={},d=!1;for(let e in a){if(this._computed[e])throw Error(`'${e}' is a read-only computed property`);this._differs(a[e],b[e])&&(c[e]=d=!0)}d&&this._set(a,c)}});var Ua={inception:"dummy;kit fox;English setter;Siberian husky;Australian terrier;English springer;grey whale;lesser panda;Egyptian cat;ibex;Persian cat;cougar;gazelle;porcupine;sea lion;malamute;badger;Great Dane;Walker hound;Welsh springer spaniel;whippet;Scottish deerhound;killer whale;mink;African elephant;Weimaraner;soft - coated wheaten terrier;Dandie Dinmont;red wolf;Old English sheepdog;jaguar;otterhound;bloodhound;Airedale;hyena;meerkat;giant schnauzer;titi;three - toed sloth;sorrel;black - footed ferret;dalmatian;black - and - tan coonhound;papillon;skunk;Staffordshire bullterrier;Mexican hairless;Bouvier des Flandres;weasel;miniature poodle;Cardigan;malinois;bighorn;fox squirrel;colobus;tiger cat;Lhasa;impala;coyote;Yorkshire terrier;Newfoundland;brown bear;red fox;Norwegian elkhound;Rottweiler;hartebeest;Saluki;grey fox;schipperke;Pekinese;Brabancon griffon;West Highland white terrier;Sealyham terrier;guenon;mongoose;indri;tiger;Irish wolfhound;wild boar;EntleBucher;zebra;ram;French bulldog;orangutan;basenji;leopard;Bernese mountain dog;Maltese dog;Norfolk terrier;toy terrier;vizsla;cairn;squirrel monkey;groenendael;clumber;Siamese cat;chimpanzee;komondor;Afghan hound;Japanese spaniel;proboscis monkey;guinea pig;white wolf;ice bear;gorilla;borzoi;toy poodle;Kerry blue terrier;ox;Scotch terrier;Tibetan mastiff;spider monkey;Doberman;Boston bull;Greater Swiss Mountain dog;Appenzeller;Shih - Tzu;Irish water spaniel;Pomeranian;Bedlington terrier;warthog;Arabian camel;siamang;miniature schnauzer;collie;golden retriever;Irish terrier;affenpinscher;Border collie;hare;boxer;silky terrier;beagle;Leonberg;German short - haired pointer;patas;dhole;baboon;macaque;Chesapeake Bay retriever;bull mastiff;kuvasz;capuchin;pug;curly - coated retriever;Norwich terrier;flat - coated retriever;hog;keeshond;Eskimo dog;Brittany spaniel;standard poodle;Lakeland terrier;snow leopard;Gordon setter;dingo;standard schnauzer;hamster;Tibetan terrier;Arctic fox;wire - haired fox terrier;basset;water buffalo;American black bear;Angora;bison;howler monkey;hippopotamus;chow;giant panda;American Staffordshire terrier;Shetland sheepdog;Great Pyrenees;Chihuahua;tabby;marmoset;Labrador retriever;Saint Bernard;armadillo;Samoyed;bluetick;redbone;polecat;marmot;kelpie;gibbon;llama;miniature pinscher;wood rabbit;Italian greyhound;lion;cocker spaniel;Irish setter;dugong;Indian elephant;beaver;Sussex spaniel;Pembroke;Blenheim spaniel;Madagascar cat;Rhodesian ridgeback;lynx;African hunting dog;langur;Ibizan hound;timber wolf;cheetah;English foxhound;briard;sloth bear;Border terrier;German shepherd;otter;koala;tusker;echidna;wallaby;platypus;wombat;revolver;umbrella;schooner;soccer ball;accordion;ant;starfish;chambered nautilus;grand piano;laptop;strawberry;airliner;warplane;airship;balloon;space shuttle;fireboat;gondola;speedboat;lifeboat;canoe;yawl;catamaran;trimaran;container ship;liner;pirate;aircraft carrier;submarine;wreck;half track;tank;missile;bobsled;dogsled;bicycle - built -for-two;mountain bike;freight car;passenger car;barrow;shopping cart;motor scooter;forklift;electric locomotive;steam locomotive;amphibian;ambulance;beach wagon;cab;convertible;jeep;limousine;minivan;Model T;racer;sports car;go-kart;golfcart;moped;snowplow;fire engine;garbage truck;pickup;tow truck;trailer truck;moving van;police van;recreational vehicle;streetcar;snowmobile;tractor;mobile home;tricycle;unicycle;horse cart;jinrikisha;oxcart;bassinet;cradle;crib;four-poster;bookcase;china cabinet;medicine chest;chiffonier;table lamp;file;park bench;barber chair;throne;folding chair;rocking chair;studio couch;toilet seat;desk;pool table;dining table;entertainment center;wardrobe;Granny Smith;orange;lemon;fig;pineapple;banana;jackfruit;custard apple;pomegranate;acorn;hip;ear;rapeseed;corn;buckeye;organ;upright;chime;drum;gong;maraca;marimba;steel drum;banjo;cello;violin;harp;acoustic guitar;electric guitar;cornet;French horn;trombone;harmonica;ocarina;panpipe;bassoon;oboe;sax;flute;daisy;yellow lady's slipper;cliff;valley;alp;volcano;promontory;sandbar;coral reef;lakeside;seashore;geyser;hatchet;cleaver;letter opener;plane;power drill;lawn mower;hammer;corkscrew;can opener;plunger;screwdriver;shovel;plow;chain saw;cock;hen;ostrich;brambling;goldfinch;house finch;junco;indigo bunting;robin;bulbul;jay;magpie;chickadee;water ouzel;kite;bald eagle;vulture;great grey owl;black grouse;ptarmigan;ruffed grouse;prairie chicken;peacock;quail;partridge;African grey;macaw;sulphur-crested cockatoo;lorikeet;coucal;bee eater;hornbill;hummingbird;jacamar;toucan;drake;red-breasted merganser;goose;black swan;white stork;black stork;spoonbill;flamingo;American egret;little blue heron;bittern;crane;limpkin;American coot;bustard;ruddy turnstone;red - backed sandpiper;redshank;dowitcher;oystercatcher;European gallinule;pelican;king penguin;albatross;great white shark;tiger shark;hammerhead;electric ray;stingray;barracouta;coho;tench;goldfish;eel;rock beauty;anemone fish;lionfish;puffer;sturgeon;gar;loggerhead;leatherback turtle;mud turtle;terrapin;box turtle;banded gecko;common iguana;American chameleon;whiptail;agama;frilled lizard;alligator lizard;Gila monster;green lizard;African chameleon;Komodo dragon;triceratops;African crocodile;American alligator;thunder snake;ringneck snake;hognose snake;green snake;king snake;garter snake;water snake;vine snake;night snake;boa constrictor;rock python;Indian cobra;green mamba;sea snake;horned viper;diamondback;sidewinder;European fire salamander;common newt;eft;spotted salamander;axolotl;bullfrog;tree frog;tailed frog;whistle;wing;paintbrush;hand blower;oxygen mask;snorkel;loudspeaker;microphone;screen;mouse;electric fan;oil filter;strainer;space heater;stove;guillotine;barometer;rule;odometer;scale;analog clock;digital clock;wall clock;hourglass;sundial;parking meter;stopwatch;digital watch;stethoscope;syringe;magnetic compass;binoculars;projector;sunglasses;loupe;radio telescope;bow;cannon [ground];assault rifle;rifle;projectile;computer keyboard;typewriter keyboard;crane;lighter;abacus;cash machine;slide rule;desktop computer;hand - held computer;notebook;web site;harvester;thresher;printer;slot;vending machine;sewing machine;joystick;switch;hook;car wheel;paddlewheel;pinwheel;potter's wheel;gas pump;carousel;swing;reel;radiator;puck;hard disc;sunglass;pick;car mirror;solar dish;remote control;disk brake;buckle;hair slide;knot;combination lock;padlock;nail;safety pin;screw;muzzle;seat belt;ski;candle;jack - o'-lantern;spotlight;torch;neck brace;pier;tripod;maypole;mousetrap;spider web;trilobite;harvestman;scorpion;black and gold garden spider;barn spider;garden spider;black widow;tarantula;wolf spider;tick;centipede;isopod;Dungeness crab;rock crab;fiddler crab;king crab;American lobster;spiny lobster;crayfish;hermit crab;tiger beetle;ladybug;ground beetle;long - horned beetle;leaf beetle;dung beetle;rhinoceros beetle;weevil;fly;bee;grasshopper;cricket;walking stick;cockroach;mantis;cicada;leafhopper;lacewing;dragonfly;damselfly;admiral;ringlet;monarch;cabbage butterfly;sulphur butterfly;lycaenid;jellyfish;sea anemone;brain coral;flatworm;nematode;conch;snail;slug;sea slug;chiton;sea urchin;sea cucumber;iron;espresso maker;microwave;Dutch oven;rotisserie;toaster;waffle iron;vacuum;dishwasher;refrigerator;washer;Crock Pot;frying pan;wok;caldron;coffeepot;teapot;spatula;altar;triumphal arch;patio;steel arch bridge;suspension bridge;viaduct;barn;greenhouse;palace;monastery;library;apiary;boathouse;church;mosque;stupa;planetarium;restaurant;cinema;home theater;lumbermill;coil;obelisk;totem pole;castle;prison;grocery store;bakery;barbershop;bookshop;butcher shop;confectionery;shoe shop;tobacco shop;toyshop;fountain;cliff dwelling;yurt;dock;brass;megalith;bannister;breakwater;dam;chainlink fence;picket fence;worm fence;stone wall;grille;sliding door;turnstile;mountain tent;scoreboard;honeycomb;plate rack;pedestal;beacon;mashed potato;bell pepper;head cabbage;broccoli;cauliflower;zucchini;spaghetti squash;acorn squash;butternut squash;cucumber;artichoke;cardoon;mushroom;shower curtain;jean;carton;handkerchief;sandal;ashcan;safe;plate;necklace;croquet ball;fur coat;thimble;pajama;running shoe;cocktail shaker;chest;manhole cover;modem;tub;tray;balance beam;bagel;prayer rug;kimono;hot pot;whiskey jug;knee pad;book jacket;spindle;ski mask;beer bottle;crash helmet;bottlecap;tile roof;mask;maillot;Petri dish;football helmet;bathing cap;teddy bear;holster;pop bottle;photocopier;vestment;crossword puzzle;golf ball;trifle;suit;water tower;feather boa;cloak;red wine;drumstick;shield;Christmas stocking;hoopskirt;menu;stage;bonnet;meat loaf;baseball;face powder;scabbard;sunscreen;beer glass;hen-of - the - woods;guacamole;lampshade;wool;hay;bow tie;mailbag;water jug;bucket;dishrag;soup bowl;eggnog;mortar;trench coat;paddle;chain;swab;mixing bowl;potpie;wine bottle;shoji;bulletproof vest;drilling platform;binder;cardigan;sweatshirt;pot;birdhouse;hamper;ping-pong ball;pencil box;pay - phone;consomme;apron;punching bag;backpack;groom;bearskin;pencil sharpener;broom;mosquito net;abaya;mortarboard;poncho;crutch;Polaroid camera;space bar;cup;racket;traffic light;quill;radio;dough;cuirass;military uniform;lipstick;shower cap;monitor;oscilloscope;mitten;brassiere;French loaf;vase;milk can;rugby ball;paper towel;earthstar;envelope;miniskirt;cowboy hat;trolleybus;perfume;bathtub;hotdog;coral fungus;bullet train;pillow;toilet tissue;cassette;carpenter's kit;ladle;stinkhorn;lotion;hair spray;academic gown;dome;crate;wig;burrito;pill bottle;chain mail;theater curtain;window shade;barrel;washbasin;ballpoint;basketball;bath towel;cowboy boot;gown;window screen;agaric;cellular telephone;nipple;barbell;mailbox;lab coat;fire screen;minibus;packet;maze;pole;horizontal bar;sombrero;pickelhaube;rain barrel;wallet;cassette player;comic book;piggy bank;street sign;bell cote;fountain pen;Windsor tie;volleyball;overskirt;sarong;purse;bolo tie;bib;parachute;sleeping bag;television;swimming trunks;measuring cup;espresso;pizza;breastplate;shopping basket;wooden spoon;saltshaker;chocolate sauce;ballplayer;goblet;gyromitra;stretcher;water bottle;dial telephone;soap dispenser;jersey;school bus;jigsaw puzzle;plastic bag;reflex camera;diaper;Band Aid;ice lolly;velvet;tennis ball;gasmask;doormat;Loafer;ice cream;pretzel;quilt;maillot;tape player;clog;iPod;bolete;scuba diver;pitcher;matchstick;bikini;sock;CD player;lens cap;thatch;vault;beaker;bubble;cheeseburger;parallel bars;flagpole;coffee mug;rubber eraser;stole;carbonara;dumbbell".split(";")};
class Pi extends rd{}let fb=new Pi({scroll:!1,inceptionLabels:Ua.inception,currentClass:62,currentClassAtlasIndex:507,currentClassAtlasCompareIndex:507,classChoices:[9,622,665,652,288,233,188,169,80,76,62,61,7,355,990,746,791],classAtlasIndices:[982,507,62,9,169,7,80,76,235,41,2,442,450,454,930,378,582,780,901,946,791,738,736,744,489,387,388,399,721,672,6,665,652,288,355,348,804,600,605,631,643],multipleLayers:{abacus:[{layerName:"mixed3b",homeX:.8086,homeY:.4295,gridSize:3,homeScale:48},{layerName:"mixed4c",
homeX:.8593,homeY:.5814},{layerName:"mixed5b",homeX:.8183,homeY:.79,gridSize:4,homeScale:96}],plant:[{layerName:"mixed3b",homeX:.59,homeY:.64,gridSize:3,homeScale:48,caption:"You'll immediately notice that the early layer is very nonspecific in comparison to the others. The icons that emerge are of patterns and splotches of color. It is suggestive of the final class, but not particularly evocative."},{layerName:"mixed4c",homeX:.15,homeY:.4,caption:"By the middle layer, icons definitely resemble leaves, but they could be any type of plant. Attributions are focused on plants, but are a little all over the board."},
{layerName:"mixed5b",homeX:.178,homeY:.72,caption:"Here we see foliage with textures that are specific to cabbage, and curved into rounded balls. There are full heads of cabbage rather than individual leaves."}],water:[{layerName:"mixed4c",homeX:.365,homeY:.673,caption:'In mixed4c we see two different regions that have high attribution toward "sandbar": an area of <b>sandy textures</b>\u2026'},{layerName:"mixed4c",homeX:.318,homeY:.764,caption:"\u2026and a separate area of <b>watery textures</b>."},
{layerName:"mixed5b",homeX:.74,homeY:.48,caption:'In a later layer we see activations that contain <b>both</b> of those concepts when detecting "sandbar".'}]},currentClassComparisonIndex:0,classComparisons:[{id:"507_982",leftLabel:"snorkel",rightLabel:"scuba diver",left:507,right:982,annotation:[{pos:{x:7,y:8},desc:"train?"}]},{id:"736_744",leftLabel:"head cabbage",rightLabel:"artichoke",left:736,right:744,annotation:[]},{id:"671_672",leftLabel:"frying pan",rightLabel:"wok",left:671,right:672,annotation:[{pos:{x:1,
y:7},desc:"noodles?"}]},{id:"777_831",leftLabel:"beer bottle",rightLabel:"wine bottle",left:777,right:831,annotation:[]},{id:"543_544",leftLabel:"computer keyboard",rightLabel:"typewriter keyboard",left:543,right:544,annotation:[]},{id:"28_205",leftLabel:"red wolf",rightLabel:"timber wolf",left:28,right:205,annotation:[]},{id:"67_62",leftLabel:"grey fox",rightLabel:"red fox",left:67,right:62,annotation:[]},{id:"1_62",leftLabel:"kit fox",rightLabel:"red fox",left:1,right:62,annotation:[]},{id:"6_442",
leftLabel:Ua.inception[6],rightLabel:Ua.inception[442],left:6,right:442,annotation:[{pos:{x:2,y:7},desc:"baseball?"}]}],focus1Highlight:{scale:6,x:.844,y:.49},focusHighlights:[{scale:10,x:.873,y:.585},{scale:10,x:.709,y:.579},{scale:10,x:.221,y:.862},{scale:10,x:.807,y:.667}],pois:{mammals:{layerName:"mixed4a",gridSize:2,gcx:.6295,gcy:1-.9475,scale:8},dogs:{layerName:"mixed5a",gridSize:3,gcx:.589,gcy:1-.946,scale:10},curves:{layerName:"mixed4b",gridSize:3,gcx:.5947,gcy:.3351,scale:14},cups:{layerName:"mixed5b",
gridSize:3,gcx:.35073,gcy:.862,scale:10},patterns:{layerName:"mixed4b",gridSize:3,gcx:.91579,gcy:.32406,scale:8},text:{layerName:"mixed5a",gridSize:3,gcx:.5281,gcy:.9766,scale:19},fabric:{layerName:"mixed4b",gridSize:3,gcx:.489,gcy:.2043,scale:12},clothing:{layerName:"mixed5a",gridSize:3,gcx:.743,gcy:.48,scale:12}}});var uf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Nb.prototype=kb.prototype;kb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+
(this.zero?"0":"")+(null==this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var vd,wd={"%":function(a,b){return(100*a).toFixed(b)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:function(a){return Math.round(a).toString(10)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},g:function(a,b){return a.toPrecision(b)},o:function(a){return Math.round(a).toString(8)},
p:function(a,b){return sd(100*a,b)},r:sd,s:function(a,b){var c=jb(a,b);if(!c)return a+"";var d=c[0];c=c[1];c=c-(vd=3*Math.max(-8,Math.min(8,Math.floor(c/3))))+1;var e=d.length;return c===e?d:c>e?d+Array(c-e+1).join("0"):0<c?d.slice(0,c)+"."+d.slice(c):"0."+Array(1-c).join("0")+jb(a,Math.max(0,b+c-1))[0]},X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}},ud="y z a f p n \u00b5 m  k M G T P E Z Y".split(" "),id,Lb;(function(a){id=vf(a);
Lb=id.format;return id})({decimal:".",thousands:",",grouping:[3],currency:["$",""]});q(Dc.prototype,z);q(xd.prototype,z);q(yd.prototype,z);q(zd.prototype,z);q($b.prototype,z);$b.prototype._recompute=function(a,b){a.name&&this._differs(b.Icon,b.Icon=Af(b))&&(a.Icon=!0)};q(mb.prototype,z);q(mb.prototype,{up(){let {upListener:a,moveListener:b}=this.get();window.removeEventListener("pointermove",b);window.removeEventListener("pointerup",a);this.set({cursor:"grab"})},down(a){a.preventDefault();var {enableDragging:b}=
this.get();b&&this.move(a);a=this.up.bind(this);window.addEventListener("pointerup",a);b=this.move.bind(this);window.addEventListener("pointermove",b);this.set({upListener:a,moveListener:b,cursor:"grabbing"})},move(a){let {clientWidth:b,clientHeight:c}=this.get(),d=a.offsetX/b,e=a.offsetY/c;this.set({gcx:d,gcy:e,startPos:{x:a.screenX,y:a.screenY}});this.fire("drag",{gcx:d,gcy:e})}});mb.prototype._recompute=function(a,b){if(a.clientWidth||a.extent)this._differs(b.left,b.left=Cf(b))&&(a.left=!0),this._differs(b.right,
b.right=Df(b))&&(a.right=!0);if(a.clientHeight||a.extent)this._differs(b.top,b.top=Ef(b))&&(a.top=!0),this._differs(b.bottom,b.bottom=Ff(b))&&(a.bottom=!0)};q(Ob.prototype,z);q(Dd.prototype,z);q(Ia.prototype,z);Ia.prototype._recompute=function(a,b){a.clientWidth&&this._differs(b.width,b.width=Kf(b))&&(a.width=!0);(a.width||a.aspectRatio)&&this._differs(b.height,b.height=Lf(b))&&(a.height=!0)};q(Gd.prototype,z);q(Hd.prototype,z);var Qi={destroy:Id,get:function(a){return a?this._state[a]:this._state},
fire:function(a,b){if(a=a in this._handlers&&this._handlers[a].slice())for(var c=0;c<a.length;c+=1)a[c].call(this,b)},observe:function(a,b,c){var d=c&&c.defer?this._observers.post:this._observers.pre;(d[a]||(d[a]=[])).push(b);c&&!1===c.init||(b.__calling=!0,b.call(this,this._state[a]),b.__calling=!1);return{cancel:function(){var c=d[a].indexOf(b);~c&&d[a].splice(c,1)}}},on:function(a,b){if("teardown"===a)return this.on("destroy",b);var c=this._handlers[a]||(this._handlers[a]=[]);c.push(b);return{cancel:function(){var a=
c.indexOf(b);~a&&c.splice(a,1)}}},set:function(a){this._set(nb({},a));this.root._lock||(this.root._lock=!0,ob(this.root._beforecreate),ob(this.root._oncreate),ob(this.root._aftercreate),this.root._lock=!1)},teardown:Id,_recompute:Pb,_set:function(a){var b=this._state,c={},d=!1,e;for(e in a)this._differs(a[e],b[e])&&(c[e]=d=!0);d&&(this._state=nb({},b,a),this._recompute(c,this._state),this._bind&&this._bind(c,this._state),this._fragment&&(Jd(this,this._observers.pre,c,this._state,b),this._fragment.p(c,
this._state),Jd(this,this._observers.post,c,this._state,b)))},_mount:function(a,b){this._fragment[this._fragment.i?"i":"m"](a,b||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(a,b){return a!=a?b==b:a!==b||a&&"object"===typeof a||"function"===typeof a}};let Qb=new Map;nb(Kd.prototype,{draw(){if(this.refs.canvas){let a=this.refs.canvas.getContext("2d"),{img:b,index:c,width:d,realHeight:e,columns:g,loaded:f}=this.get();a.clearRect(0,0,d,e);let h=Array.isArray(c)?c[0]*
d:c%g*d,k=Array.isArray(c)?c[1]*e:Math.floor(c/g)*e;f?a.drawImage(b,h,k,d,e,0,0,d,e):(a.fillStyle="#ccc",a.fillRect(0,0,d,e),a.fillStyle="#eee",a.textAlign="center",a.font="16px sans-serif",a.fillText("...",d/2,e/2))}}},Qi);Kd.prototype._recompute=function(a,b){(a.width||a.height)&&this._differs(b.realHeight,b.realHeight=Pf(b.width,b.height))&&(a.realHeight=!0)};var Nd={},pb={},Ri=Md(",").parse,Si=Md("\t").parse;let ub=new Map,sb=new Map,tb=new Map,Qd=new Map([["gif",qb],["png",qb],["jpeg",qb],["jpg",
qb],["csv",function(a){return rb(a).then((a)=>Promise.resolve(Ri(a)))}],["tsv",function(a){return rb(a).then((a)=>Promise.resolve(Si(a)))}],["txt",rb],["text",rb],["json",function(a){return fetch(a).then(Od).then((a)=>a.json())}]]);var Ja=[235,287,237,982,507,41,176,3,2,112,158,14,442,450,454,513,523,529,930,600,605,736,744,358,756,936,942,943,366,365,367,484,483,488,489,387,388,399,411,405],af={vm:"shan-gpu-06-vm",id:"inceptionv1_mixed3a",build_dir:"build",cloud_dir:"gs://activation-atlas-public",
model:"inceptionv1",layer:"mixed3a",sample_type:"random",sample_images:1E6,filter:4E5,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"false",steps:1024,icon_size:80,layout:"200_0.05_euclidean",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},bf={vm:"shan-gpu-06-vm",id:"inceptionv1_mixed3b",build_dir:"build",cloud_dir:"gs://activation-atlas-public",model:"inceptionv1",layer:"mixed3b",sample_type:"random",sample_images:1E6,filter:4E5,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"false",
steps:1024,icon_size:80,layout:"200_0.05_euclidean",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},cf={vm:"shan-gpu-08-vm",id:"inceptionv1_mixed4a",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4a"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},df={vm:"shan-gpu-08-vm",
id:"inceptionv1_mixed4b",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4b"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},ef={vm:"shan-gpu-08-vm",id:"inceptionv1_mixed4c",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4c"],
sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},ff={vm:"shan-gpu-07-vm",id:"inceptionv1_mixed4d",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4d"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,
layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},gf={vm:"shan-gpu-07-vm",id:"inceptionv1_mixed4e",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4e"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},hf={vm:"shan-gpu-08-vm",id:"inceptionv1_mixed5a",
build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed5a"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160,320],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},jf={vm:"shan-gpu-07-vm",id:"inceptionv1_mixed5b",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed5b"],sample_type:"random",
sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160,320],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1};let Yf={inceptionv1_mixed3a:af,inceptionv1_mixed3b:bf,inceptionv1_mixed4a:cf,inceptionv1_mixed4b:df,inceptionv1_mixed4c:ef,inceptionv1_mixed4d:ff,inceptionv1_mixed4e:gf,inceptionv1_mixed5a:hf,inceptionv1_mixed5b:jf};q(vb.prototype,z);q(vb.prototype,{render(){let {grid:a,gridSize:b,icons:c,classHeatmap:d,
layerName:e}=this.get(),g=this.refs.canvas.getContext("2d"),f=g.getImageData(0,0,b,b),h=f.data,k=!1,n=!1;switch(e){case "mixed4a":n=k=!0;break;case "mixed4d":k=!0;n=!1;break;case "mixed5a":k=!0;n=!1;break;case "mixed5b":k=!0,n=!1}for(let e of c){var m=1;-1<d&&(m=Ja.indexOf(d),m=Math.max(.1,20*Math.max(0,e.f[m])));h[(k?b-e.x-1:e.x)*b*4+4*(n?b-e.y-1:e.y)+3]=40+e.n/Math.pow(a+1,2)*b*b*(20<b?8E-4:1.5E-4)*m}g.putImageData(f,0,0)}});vb.prototype._recompute=function(a,b){a.clientWidth&&this._differs(b.height,
b.height=Vf(b))&&(a.height=!0);(a.model||a.layerName)&&this._differs(b.id,b.id=Wf(b))&&(a.id=!0)};q(Td.prototype,z);q(Lc.prototype,z);Lc.prototype._recompute=function(a,b){a.inceptionLabels&&this._differs(b.labels,b.labels=bg(b))&&(a.labels=!0)};var Yd={},ac={},Ti=Xd(",").parse,Ui=Xd("\t").parse;let Nc=new Map,yb=new Map,Mc=new Map,be=new Map([["gif",wb],["png",wb],["jpeg",wb],["jpg",wb],["csv",function(a){return xb(a).then((a)=>Promise.resolve(Ti(a)))}],["tsv",function(a){return xb(a).then((a)=>
Promise.resolve(Ui(a)))}],["txt",xb],["text",xb],["json",function(a){return fetch(a).then(Zd).then((a)=>a.json())}]]);(function(a){1===a.length&&(a=fg(a));return{left:function(b,c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var g=d+e>>>1;0>a(b[g],c)?d=g+1:e=g}return d},right:function(b,c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var g=d+e>>>1;0<a(b[g],c)?e=g:d=g+1}return d}}})(ce);let hg={inceptionv1_mixed3a:af,inceptionv1_mixed3b:bf,inceptionv1_mixed4a:cf,inceptionv1_mixed4b:df,
inceptionv1_mixed4c:ef,inceptionv1_mixed4d:ff,inceptionv1_mixed4e:gf,inceptionv1_mixed5a:hf,inceptionv1_mixed5b:jf};q(de.prototype,z);var jg={value:function(){}};zb.prototype=Oc.prototype={constructor:zb,on:function(a,b){var c=this._,d=ig(a+"",c),e,g=-1,f=d.length;if(2>arguments.length)for(;++g<f;){var h;if(h=e=(a=d[g]).type){a:{h=c[e];for(var k=0,n=h.length;k<n;++k)if((e=h[k]).name===a.name){e=e.value;break a}e=void 0}h=e}if(h)return e}else{if(null!=b&&"function"!==typeof b)throw Error("invalid callback: "+
b);for(;++g<f;)if(e=(a=d[g]).type)c[e]=ee(c[e],a.name,b);else if(null==b)for(e in c)c[e]=ee(c[e],a.name,null);return this}},copy:function(){var a={},b=this._,c;for(c in b)a[c]=b[c].slice();return new zb(a)},call:function(a,b){if(0<(e=arguments.length-2))for(var c=Array(e),d=0,e,g;d<e;++d)c[d]=arguments[d+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);g=this._[a];d=0;for(e=g.length;d<e;++d)g[d].value.apply(b,c)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+
a);a=this._[a];for(var d=0,e=a.length;d<e;++d)a[d].value.apply(b,c)}};var fe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},kf=function(a){return function(){return this.matches(a)}};if("undefined"!==typeof document){var gb=document.documentElement;if(!gb.matches){var Vi=gb.webkitMatchesSelector||gb.msMatchesSelector||gb.mozMatchesSelector||gb.oMatchesSelector;
kf=function(a){return function(){return Vi.call(this,a)}}}}var lf=kf;Ka.prototype={constructor:Ka,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};je.prototype={add:function(a){0>this._names.indexOf(a)&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},
remove:function(a){a=this._names.indexOf(a);0<=a&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return 0<=this._names.indexOf(a)}};var ne={},v=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(ne={mouseenter:"mouseover",mouseleave:"mouseout"}));var pe=[null];F.prototype=sa.prototype={constructor:F,select:function(a){"function"!==typeof a&&(a=Pc(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var g=
b[e],f=g.length,h=d[e]=Array(f),k,n,m=0;m<f;++m)(k=g[m])&&(n=a.call(k,k.__data__,m,g))&&("__data__"in k&&(n.__data__=k.__data__),h[m]=n);return new F(d,this._parents)},selectAll:function(a){"function"!==typeof a&&(a=he(a));for(var b=this._groups,c=b.length,d=[],e=[],g=0;g<c;++g)for(var f=b[g],h=f.length,k,n=0;n<h;++n)if(k=f[n])d.push(a.call(k,k.__data__,n,f)),e.push(k);return new F(d,e)},filter:function(a){"function"!==typeof a&&(a=lf(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var g=
b[e],f=g.length,h=d[e]=[],k,n=0;n<f;++n)(k=g[n])&&a.call(k,k.__data__,n,g)&&h.push(k);return new F(d,this._parents)},data:function(a,b){if(!a)return q=Array(this.size()),n=-1,this.each(function(a){q[++n]=a}),q;var c=b?qg:pg,d=this._parents,e=this._groups;"function"!==typeof a&&(a=og(a));for(var g=e.length,f=Array(g),h=Array(g),k=Array(g),n=0;n<g;++n){var m=d[n],l=e[n],p=l.length,q=a.call(m,m&&m.__data__,n,d),r=q.length,t=h[n]=Array(r),w=f[n]=Array(r);p=k[n]=Array(p);c(m,l,t,w,p,q,b);l=m=0;for(var u;m<
r;++m)if(p=t[m]){for(m>=l&&(l=m+1);!(u=w[l])&&++l<r;);p._next=u||null}}f=new F(f,d);f._enter=h;f._exit=k;return f},enter:function(){return new F(this._enter||this._groups.map(ie),this._parents)},exit:function(){return new F(this._exit||this._groups.map(ie),this._parents)},merge:function(a){var b=this._groups;a=a._groups;for(var c=b.length,d=Math.min(c,a.length),e=Array(c),g=0;g<d;++g)for(var f=b[g],h=a[g],k=f.length,n=e[g]=Array(k),m,l=0;l<k;++l)if(m=f[l]||h[l])n[l]=m;for(;g<c;++g)e[g]=b[g];return new F(e,
this._parents)},order:function(){for(var a=this._groups,b=-1,c=a.length;++b<c;)for(var d=a[b],e=d.length-1,g=d[e],f;0<=--e;)if(f=d[e])g&&g!==f.nextSibling&&g.parentNode.insertBefore(f,g),g=f;return this},sort:function(a){function b(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}a||(a=rg);for(var c=this._groups,d=c.length,e=Array(d),g=0;g<d;++g){for(var f=c[g],h=f.length,k=e[g]=Array(h),n,m=0;m<h;++m)if(n=f[m])k[m]=n;k.sort(b)}return(new F(e,this._parents)).order()},call:function(){var a=arguments[0];
arguments[0]=this;a.apply(null,arguments);return this},nodes:function(){var a=Array(this.size()),b=-1;this.each(function(){a[++b]=this});return a},node:function(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var d=a[b],e=0,g=d.length;e<g;++e){var f=d[e];if(f)return f}return null},size:function(){var a=0;this.each(function(){++a});return a},empty:function(){return!this.node()},each:function(a){for(var b=this._groups,c=0,d=b.length;c<d;++c)for(var e=b[c],g=0,f=e.length,h;g<f;++g)(h=e[g])&&a.call(h,
h.__data__,g,e);return this},attr:function(a,b){var c=Ab(a);if(2>arguments.length){var d=this.node();return c.local?d.getAttributeNS(c.space,c.local):d.getAttribute(c)}return this.each((null==b?c.local?tg:sg:"function"===typeof b?c.local?xg:wg:c.local?vg:ug)(c,b))},style:function(a,b,c){return 1<arguments.length?this.each((null==b?yg:"function"===typeof b?Ag:zg)(a,b,null==c?"":c)):ea(this.node(),a)},property:function(a,b){return 1<arguments.length?this.each((null==b?Bg:"function"===typeof b?Dg:Cg)(a,
b)):this.node()[a]},classed:function(a,b){var c=(a+"").trim().split(/^|\s+/);if(2>arguments.length){for(var d=Qc(this.node()),e=-1,g=c.length;++e<g;)if(!d.contains(c[e]))return!1;return!0}return this.each(("function"===typeof b?Gg:b?Eg:Fg)(c,b))},text:function(a){return arguments.length?this.each(null==a?Hg:("function"===typeof a?Jg:Ig)(a)):this.node().textContent},html:function(a){return arguments.length?this.each(null==a?Kg:("function"===typeof a?Mg:Lg)(a)):this.node().innerHTML},raise:function(){return this.each(Ng)},
lower:function(){return this.each(Og)},append:function(a){var b="function"===typeof a?a:ge(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},insert:function(a,b){var c="function"===typeof a?a:ge(a),d=null==b?Pg:"function"===typeof b?b:Pc(b);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})},remove:function(){return this.each(Qg)},clone:function(a){return this.select(a?Sg:Rg)},datum:function(a){return arguments.length?
this.property("__data__",a):this.node().__data__},on:function(a,b,c){var d=Ug(a+""),e=d.length,g;if(2>arguments.length){var f=this.node().__on;if(f)for(var h=0,k=f.length,n;h<k;++h){var m=0;for(n=f[h];m<e;++m)if((g=d[m]).type===n.type&&g.name===n.name)return n.value}}else{f=b?Wg:Vg;null==c&&(c=!1);for(m=0;m<e;++m)this.each(f(d[m],b,c));return this}},dispatch:function(a,b){return this.each(("function"===typeof b?Yg:Xg)(a,b))}};var Sa=1/.7,ah=/^#([0-9a-f]{3})$/,bh=/^#([0-9a-f]{6})$/,ch=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,
dh=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,eh=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,fh=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,gh=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,
hh=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,we={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,
crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,
floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,
lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,
moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,
sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};La(Z,ta,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}});La(B,Tc,Va(Z,{brighter:function(a){a=
null==a?Sa:Math.pow(Sa,a);return new B(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new B(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},hex:function(){return"#"+Uc(this.r)+Uc(this.g)+Uc(this.b)},toString:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(1===a?"rgb(":
"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}}));La(fa,function(a,b,c,d){return 1===arguments.length?ih(a):new fa(a,b,c,null==d?1:d)},Va(Z,{brighter:function(a){a=null==a?Sa:Math.pow(Sa,a);return new fa(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new fa(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=
this.h%360+360*(0>this.h),b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l;b=c+(.5>c?c:1-c)*b;c=2*c-b;return new B(Vc(240<=a?a-240:a+120,c,b),Vc(a,c,b),Vc(120>a?a+240:a-120,c,b),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var xe=Math.PI/180,Ae=180/Math.PI,ze=4/29,ma=6/29,ye=3*ma*ma,jh=ma*ma*ma;La(I,function(a,b,c,d){return 1===arguments.length?Wc(a):new I(a,b,c,null==d?1:d)},Va(Z,{brighter:function(a){return new I(this.l+
18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new I(this.l-18*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;b=.96422*Zc(b);a=1*Zc(a);c=.82521*Zc(c);return new B($c(3.1338561*b-1.6168667*a-.4906146*c),$c(-.9787684*b+1.9161415*a+.033454*c),$c(.0719453*b-.2289914*a+1.4052427*c),this.opacity)}}));La(la,function(a,b,c,d){return 1===arguments.length?kh(a):new la(a,b,c,null==d?1:d)},
Va(Z,{brighter:function(a){return new la(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function(a){return new la(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function(){return Wc(this).rgb()}}));var mf=1.78277*-.29227-.1347134789;La(Ca,function(a,b,c,d){if(1===arguments.length){var e=a;if(e instanceof Ca)e=new Ca(e.h,e.s,e.l,e.opacity);else{e instanceof B||(e=Sc(e));var g=e.g/255,f=e.b/255,h=(mf*f+e.r/255*-1.7884503806-3.5172982438*g)/(mf+-1.7884503806-3.5172982438);f-=h;
var k=(1.97294*(g-h)- -.29227*f)/-.90649;f=(g=Math.sqrt(k*k+f*f)/(1.97294*h*(1-h)))?Math.atan2(k,f)*Ae-120:NaN;e=new Ca(0>f?f+360:f,g,h,e.opacity)}}else e=new Ca(a,b,c,null==d?1:d);return e},Va(Z,{brighter:function(a){a=null==a?Sa:Math.pow(Sa,a);return new Ca(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new Ca(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=isNaN(this.h)?0:(this.h+120)*xe,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),d=Math.cos(a);
a=Math.sin(a);return new B(255*(b+c*(-.14861*d+1.78277*a)),255*(b+c*(-.29227*d+-.90649*a)),255*(b+1.97294*c*d),this.opacity)}}));var Me=function c(b){function d(b,c){var d=e((b=Tc(b)).r,(c=Tc(c)).r),f=e(b.g,c.g),g=e(b.b,c.b),m=Ce(b.opacity,c.opacity);return function(c){b.r=d(c);b.g=f(c);b.b=g(c);b.opacity=m(c);return b+""}}var e=nh(b);d.gamma=c;return d}(1),ad=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bd=new RegExp(ad.source,"g"),Ee=180/Math.PI,jd={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,
scaleY:1},hb,kd,nf,Ta,Wi=Fe(function(b){if("none"===b)return jd;hb||(hb=document.createElement("DIV"),kd=document.documentElement,nf=document.defaultView);hb.style.transform=b;b=nf.getComputedStyle(kd.appendChild(hb),null).getPropertyValue("transform");kd.removeChild(hb);b=b.slice(7,-1).split(",");return De(+b[0],+b[1],+b[2],+b[3],+b[4],+b[5])},"px, ","px)","deg)"),Xi=Fe(function(b){if(null==b)return jd;Ta||(Ta=document.createElementNS("http://www.w3.org/2000/svg","g"));Ta.setAttribute("transform",
b);if(!(b=Ta.transform.baseVal.consolidate()))return jd;b=b.matrix;return De(b.a,b.b,b.c,b.d,b.e,b.f)},", ",")",")"),Wa=Math.SQRT2,Na=0,va=0,Za=0,Oa,Ya,Eb=0,O=0,Db=0,Xa="object"===typeof performance&&performance.now?performance:Date,He="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(b){setTimeout(b,17)};Ma.prototype=Ie.prototype={constructor:Ma,restart:function(b,c,d){if("function"!==typeof b)throw new TypeError("callback is not a function");
d=(null==d?Cb():+d)+(null==c?0:+c);this._next||Ya===this||(Ya?Ya._next=this:Oa=this,Ya=this);this._call=b;this._time=d;cd()},stop:function(){this._call&&(this._call=null,this._time=Infinity,cd())}};var vh=Oc("start","end","interrupt"),wh=[],Yi=sa.prototype.constructor,of=0,pa=sa.prototype;na.prototype=function(b){return sa().transition(b)}.prototype={constructor:na,select:function(b){var c=this._name,d=this._id;"function"!==typeof b&&(b=Pc(b));for(var e=this._groups,g=e.length,f=Array(g),h=0;h<g;++h)for(var k=
e[h],n=k.length,m=f[h]=Array(n),l,p,q=0;q<n;++q)(l=k[q])&&(p=b.call(l,l.__data__,q,k))&&("__data__"in l&&(p.__data__=l.__data__),m[q]=p,Fb(m[q],c,d,q,m,aa(l,d)));return new na(f,this._parents,c,d)},selectAll:function(b){var c=this._name,d=this._id;"function"!==typeof b&&(b=he(b));for(var e=this._groups,g=e.length,f=[],h=[],k=0;k<g;++k)for(var n=e[k],m=n.length,l,p=0;p<m;++p)if(l=n[p]){for(var q=b.call(l,l.__data__,p,n),r,t=aa(l,d),w=0,u=q.length;w<u;++w)(r=q[w])&&Fb(r,c,d,w,q,t);f.push(q);h.push(l)}return new na(f,
h,c,d)},filter:function(b){"function"!==typeof b&&(b=lf(b));for(var c=this._groups,d=c.length,e=Array(d),g=0;g<d;++g)for(var f=c[g],h=f.length,k=e[g]=[],l,m=0;m<h;++m)(l=f[m])&&b.call(l,l.__data__,m,f)&&k.push(l);return new na(e,this._parents,this._name,this._id)},merge:function(b){if(b._id!==this._id)throw Error();var c=this._groups;b=b._groups;for(var d=c.length,e=Math.min(d,b.length),g=Array(d),f=0;f<e;++f)for(var h=c[f],k=b[f],l=h.length,m=g[f]=Array(l),p,q=0;q<l;++q)if(p=h[q]||k[q])m[q]=p;for(;f<
d;++f)g[f]=c[f];return new na(g,this._parents,this._name,this._id)},selection:function(){return new Yi(this._groups,this._parents)},transition:function(){for(var b=this._name,c=this._id,d=++of,e=this._groups,g=e.length,f=0;f<g;++f)for(var h=e[f],k=h.length,l,m=0;m<k;++m)if(l=h[m]){var p=aa(l,c);Fb(l,b,d,m,h,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new na(e,this._parents,b,d)},call:pa.call,nodes:pa.nodes,node:pa.node,size:pa.size,empty:pa.empty,each:pa.each,
on:function(b,c){var d=this._id;return 2>arguments.length?aa(this.node(),d).on.on(b):this.each(Nh(d,b,c))},attr:function(b,c){var d=Ab(b),e="transform"===d?Xi:Le;return this.attrTween(b,"function"===typeof c?(d.local?Eh:Dh)(d,e,ed(this,"attr."+b,c)):null==c?(d.local?Ah:zh)(d):(d.local?Ch:Bh)(d,e,c+""))},attrTween:function(b,c){var d="attr."+b;if(2>arguments.length)return(d=this.tween(d))&&d._value;if(null==c)return this.tween(d,null);if("function"!==typeof c)throw Error();var e=Ab(b);return this.tween(d,
(e.local?Fh:Gh)(e,c))},style:function(b,c,d){var e="transform"===(b+="")?Wi:Le;return null==c?this.styleTween(b,Ph(b,e)).on("end.style."+b,Qh(b)):this.styleTween(b,"function"===typeof c?Sh(b,e,ed(this,"style."+b,c)):Rh(b,e,c+""),d)},styleTween:function(b,c,d){var e="style."+(b+="");if(2>arguments.length)return(e=this.tween(e))&&e._value;if(null==c)return this.tween(e,null);if("function"!==typeof c)throw Error();return this.tween(e,Th(b,c,null==d?"":d))},text:function(b){return this.tween("text","function"===
typeof b?Vh(ed(this,"text",b)):Uh(null==b?"":b+""))},remove:function(){return this.on("end.remove",Oh(this._id))},tween:function(b,c){var d=this._id;b+="";if(2>arguments.length){d=aa(this.node(),d).tween;for(var e=0,g=d.length,f;e<g;++e)if((f=d[e]).name===b)return f.value;return null}return this.each((null==c?xh:yh)(d,b,c))},delay:function(b){var c=this._id;return arguments.length?this.each(("function"===typeof b?Hh:Ih)(c,b)):aa(this.node(),c).delay},duration:function(b){var c=this._id;return arguments.length?
this.each(("function"===typeof b?Jh:Kh)(c,b)):aa(this.node(),c).duration},ease:function(b){var c=this._id;return arguments.length?this.each(Lh(c,b)):aa(this.node(),c).ease}};var ld={time:null,delay:0,duration:250,ease:function(b){return(1>=(b*=2)?b*b*b:(b-=2)*b*b+2)/2}};sa.prototype.interrupt=function(b){return this.each(function(){Pa(this,b)})};sa.prototype.transition=function(b){var c;if(b instanceof na){var d=b._id;b=b._name}else d=++of,(c=ld).time=Cb(),b=null==b?null:b+"";for(var e=this._groups,
g=e.length,f=0;f<g;++f)for(var h=e[f],k=h.length,l,m=0;m<k;++m)if(l=h[m]){var p=l,q=b,r=d,t=m,u=h,w;if(!(w=c))a:{w=void 0;for(var x=d;!(w=l.__transition)||!(w=w[x]);)if(!(l=l.parentNode)){w=(ld.time=Cb(),ld);break a}}Fb(p,q,r,t,u,w)}return new na(e,this._parents,b,d)};oa.prototype={constructor:oa,scale:function(b){return 1===b?this:new oa(this.k*b,this.x,this.y)},translate:function(b,c){return 0===b&0===c?this:new oa(this.k,this.x+this.k*b,this.y+this.k*c)},apply:function(b){return[b[0]*this.k+this.x,
b[1]*this.k+this.y]},applyX:function(b){return b*this.k+this.x},applyY:function(b){return b*this.k+this.y},invert:function(b){return[(b[0]-this.x)/this.k,(b[1]-this.y)/this.k]},invertX:function(b){return(b-this.x)/this.k},invertY:function(b){return(b-this.y)/this.k},rescaleX:function(b){return b.copy().domain(b.range().map(this.invertX,this).map(b.invert,b))},rescaleY:function(b){return b.copy().domain(b.range().map(this.invertY,this).map(b.invert,b))},toString:function(){return"translate("+this.x+
","+this.y+") scale("+this.k+")"}};var Gb=new oa(1,0,0);Ne.prototype=oa.prototype;var M={components:[],running:!1,add:function(b){~M.components.indexOf(b)||(M.components.push(b),M.running||(M.running=!0,requestAnimationFrame(M.next)))},next:function(){for(var b=window.performance.now(),c=!1,d=M.components.length;d--;){var e=M.components[d],g={},f=!1,h;for(h in e._currentTweens){var k=e._currentTweens[h];b>=k.end?(g[h]=k.to,delete e._currentTweens[h],k.fulfil()):(c=f=!0,b>=k.start&&(g[h]=k.value(k.ease((b-
k.start)/k.duration))))}e._tweening=!0;e.set(g);e._tweening=!1;f||M.components.splice(d,1)}c?requestAnimationFrame(M.next):M.running=!1}};q(Qa.prototype,z);q(Qa.prototype,{tween:function(b,c,d){var e=this;void 0===d&&(d={});if(!this._currentTweens){this._currentTweens=Object.create(null);this._tweening=!1;var g=this.set;this.set=function(b){if(!e._tweening)for(var c in b)e._currentTweens[c]&&e._currentTweens[c].abort();g.call(e,b)}}this._currentTweens[b]&&this._currentTweens[b].abort();var f=window.performance.now()+
(d.delay||0),h=d.duration||400,k=f+h,l={key:b,value:(d.interpolate||fd)(this.get()[b],c),to:c,start:f,end:k,duration:h,ease:d.easing||di,running:!0,abort:function(){l.running=!1;delete e._currentTweens[b]}};this._currentTweens[b]=l;M.add(this);c=new Promise(function(b){l.fulfil=b});c.abort=l.abort;return c},zoomEventFilter:function(){let {scrollWheel:b,disableBehaviors:c}=this.get();return c?!1:b?!v.button:!("wheel"===v.type&&!1===v.ctrlKey)&&!v.button},mouseMove:function(b){this.set({msx:b.offsetX,
msy:b.offsetY});let {}=this.get()},update:function(){var {el:b}=this.get();b=Ne(b);this.set({scale:b.k,transform:b,translateX:b.x,translateY:b.y})},onzoom:function(b){b.update();b.fire("zoom")},zoomTo:function(b,c,d=1,e=1E3){let {selection:g,z:f,minSize:h,clientWidth:k,clientHeight:l}=this.get();g.transition().duration(e).call(f.transform,Gb.translate(k/2,l/2).scale(d).translate(-b*h,-c*h))},translateTo:function(b,c){let {z:d,selection:e,minSize:g}=this.get();d.translateTo(e,b*g,c*g)},home:function(b=
0){let {homeX:c,homeY:d,homeScale:e}=this.get();this.zoomTo(c,d,e,b)},scaleTo:function(b,c=0){let {z:d,selection:e}=this.get();e.transition().duration(c).call(d.scaleTo,b)}});Qa.prototype._recompute=function(b,c){(b.clientWidth||b.clientHeight)&&this._differs(c.minSize,c.minSize=ei(c))&&(b.minSize=!0);(b.msx||b.msy)&&this._differs(c.mouseOver,c.mouseOver=fi(c))&&(b.mouseOver=!0);(b.transform||b.msx||b.msy||b.clientHeight||b.clientWidth||b.minSize)&&this._differs(c.mouseGlobalPosition,c.mouseGlobalPosition=
gi(c))&&(b.mouseGlobalPosition=!0);(b.scale||b.translateX||b.translateY||b.minSize||b.clientWidth||b.clientHeight)&&this._differs(c.extent,c.extent=hi(c))&&(b.extent=!0);b.extent&&(this._differs(c.gcx,c.gcx=ii(c))&&(b.gcx=!0),this._differs(c.gcy,c.gcy=ji(c))&&(b.gcy=!0))};q(Ec.prototype,z);q(Ec.prototype,{fullscreen(){this.refs.root.webkitRequestFullscreen()},home(b=0){this.refs.d3Zoom.home(b)},translateTo(b,c){this.refs.d3Zoom.translateTo(b,c)},zoomTo(b,c,d,e=1E3){this.refs.d3Zoom.zoomTo(b,c,d,e)},
transitionTo(b,c,d,e=0){this.refs.d3Zoom.transformTo(b,c,d,e)},scaleBy(b){let {scale:c}=this.get();this.refs.d3Zoom.scaleTo(c*b,300)},iconToGlobalPosition(b,c){let {density:d,scale:e,translateX:g,translateY:f,config:h,w:k,h:l}=this.get();var m=h.grid_size[c];c=b.gw*e*Math.min(k,l);m=c*Math.min(1,Math.sqrt(d*b.num_activations/(("number"==typeof h.filter[0]?h.filter[0]:h.sample_images)/(m*m))));return{sourceX:b.localX*h.icon_size,sourceY:b.localY*h.icon_size,iconX:b.gy*e*Math.min(k,l)+g+(c-m)/2,iconY:b.gx*
e*Math.min(k,l)+f+(c-m)/2,iconWidth:m}},clear(){let {viewHeight:b,viewWidth:c,context:d,backgroundColor:e,labelsContext:g}=this.get();d.globalAlpha=1;d.fillStyle=e;d.clearRect(0,0,c,b);d.fillRect(0,0,c,b);g.globalAlpha=1;g.clearRect(0,0,c,b)},render(){let {id:b,labelsContext:c,loading:d,classHeatmap:e,showLabels:g,labels:f,labelsBufferCanvas:h,imageSmoothing:k,scale:l,w:m,h:p,translateX:q,translateY:r,context:t,config:u,layers:w,currentZoomIndex:x,strokeColor:v,strokeThickness:y,maxAttributionValue:z}=
this.get();this.clear();t.imageSmoothingEnabled=k;c.strokeStyle=v;c.lineWidth=y;t.fillStyle="white";if(u&&w&&!d){let d=[{i:x,opacity:1}];this.set({visibleLayers:d});d.forEach((d)=>{let k=d.i;d=w[k];var n=Math.min(m,p);let u=Math.max(0,Math.floor(-(q/l/n)*d.length)),x=u+Math.ceil(m/l/n*d.length);var v=Math.max(0,Math.floor(-(r/l/n)*d.length));for(n=v+Math.ceil(p/l/n*d.length);v<=n;v++)for(let l=u;l<=x;l++)if(d[v]&&d[v][l]){let m=d[v][l],{iconX:n,iconY:p,iconWidth:q}=this.iconToGlobalPosition(m,k),
r=b;{c.globalAlpha=.3;c.strokeRect(n,p,q,q);c.globalAlpha=1;var y=Math.ceil(40/q);let b=Math.ceil(60/q);g&&f&&-1===e&&0==m.y%b&&0==m.x%y&&(c.globalAlpha=1,y=m.top_class_indices[0],c.drawImage(h,y%10*150,20*Math.floor(y/10)+4,Math.min(q*b-5,100),20,n,p+q-20-2,Math.min(q*b-5,100),20));$d(m.url).then((b)=>{let {id:c,visibleLayers:d}=this.get();if(d.reduce((b,c)=>c.i===k?b+1:b,0)&&r===c){let {config:c,classHeatmap:d,classHeatmapMultiplier:g,classHeatmapPositive:h}=this.get(),{sourceX:l,sourceY:n,iconX:p,
iconY:q,iconWidth:r}=this.iconToGlobalPosition(m,k);var e=1;-1<d&&(e=m.full_class_indices.indexOf(d),-1<e?(e=m.full_class_values[e]/z,e*=h,e=Math.max(0,e)*g):e=0);var f=Math.min(8/r,.6);t.globalAlpha=1;f=f*c.icon_size/2;-1<d&&t.fillRect(p,q,r,r);t.globalAlpha=e;t.drawImage(b,n+f,l+f,c.icon_size-2*f,c.icon_size-2*f,p,q,r,r)}})}}})}}});Ec.prototype._recompute=function(b,c){(b.layers||b.layer)&&this._differs(c.maxAttributionValue,c.maxAttributionValue=mi(c))&&(b.maxAttributionValue=!0);(b.viewWidth||
b.screenResolution)&&this._differs(c.w,c.w=ni(c))&&(b.w=!0);(b.viewHeight||b.screenResolution)&&this._differs(c.h,c.h=oi(c))&&(b.h=!0);(b.scale||b.gridSize||b.config||b.classHeatmap||b.w||b.h||b.autoGridSizeMultiplier)&&this._differs(c.currentZoomIndex,c.currentZoomIndex=pi(c))&&(b.currentZoomIndex=!0);(b.currentZoomIndex||b.layers)&&this._differs(c.currentLayerData,c.currentLayerData=qi(c))&&(b.currentLayerData=!0);(b.labelsBufferContext||b.labels||b.fontSize||b.textColor||b.textShadowColor)&&this._differs(c.labelsBuffer,
c.labelsBuffer=ri(c))&&(b.labelsBuffer=!0);(b.currentLayerData||b.config||b.mouseGlobalPosition||b.w||b.h||b.translateX||b.translateY)&&this._differs(c.hoverIconData,c.hoverIconData=ti(c))&&(b.hoverIconData=!0);(b.hoverIconData||b.mouseGlobalPosition)&&this._differs(c.showHover,c.showHover=si(c))&&(b.showHover=!0);(b.hoverIconData||b.scale||b.w||b.h||b.translateX)&&this._differs(c.hoverIconX,c.hoverIconX=ui(c))&&(b.hoverIconX=!0);(b.hoverIconData||b.scale||b.w||b.h||b.translateY)&&this._differs(c.hoverIconY,
c.hoverIconY=vi(c))&&(b.hoverIconY=!0);(b.hoverIconData||b.scale||b.w||b.h)&&this._differs(c.hoverIconW,c.hoverIconW=wi(c))&&(b.hoverIconW=!0);(b.mouseGlobalPosition||b.hoverIconData||b.enableHover)&&this._differs(c.showHoverIcon,c.showHoverIcon=xi(c))&&(b.showHoverIcon=!0)};q(gd.prototype,z);q(hd.prototype,z);hd.prototype._recompute=function(b,c){(b.clientWidth||b.minWidth)&&this._differs(c.scale,c.scale=Ci(c))&&(b.scale=!0);(b.clientWidth||b.width||b.minWidth)&&this._differs(c.finalWidth,c.finalWidth=
Di(c))&&(b.finalWidth=!0);(b.clientHeight||b.scale)&&this._differs(c.finalHeight,c.finalHeight=Ei(c))&&(b.finalHeight=!0)};let pf=Lb(".3f");var Ub=pf;q(Kb.prototype,z);q(Kb.prototype,{home(b){this.refs.atlas.home(b)},zoomTo(b,c,d,e=1E3){this.refs.atlas.zoomTo(b,c,d,e)},toggle(){let {showOptions:b}=this.get();this.set({showOptions:!b})},copyShareLink(){var {layerName:b}=this.get();let {gcx:c,gcy:d,scale:e}=this.refs.atlas.get();b=`layer=${encodeURIComponent(b)}&poi=${[c,d,e].map(pf).join(",")}`;navigator.clipboard.writeText(location.protocol+
"//"+location.hostname+(location.port?":"+location.port:"")+location.pathname+"?"+b).then(function(){console.log("Copied to clipboard")},function(){console.error("Unable to copy to clipboard")})}});Kb.prototype._recompute=function(b,c){b.gridSize&&this._differs(c.realGridSize,c.realGridSize=Gi(c))&&(b.realGridSize=!0);(b.iconScaleFactor||b.realGridSize)&&this._differs(c.scaleCountFactor,c.scaleCountFactor=Hi(c))&&(b.scaleCountFactor=!0)};q(Te.prototype,z);q(Ra.prototype,z);q(Ra.prototype,{mousemove:function(b){let {visible:c}=
this.get();c&&this.set({x:b.clientX,y:b.clientY})},show:function(b){this.set({visible:!0});this.refs.component.set(b)},hide:function(){this.set({visible:!1})}});Ra.prototype._recompute=function(b,c){(b.x||b.width||b.y||b.clientHeight||b.visible)&&this._differs(c.style,c.style=Mi(c))&&(b.style=!0)};var Ze=Lb(".2f"),We=Lb(",");q($e.prototype,z);fb.set({scroll:!0});fb.set({tooltip:new Ra({target:document.body,store:fb,data:{width:250,component:$e}})});new Te({target:document.querySelector("#app"),store:fb,
data:{}})})();
//# sourceMappingURL=app.min.js.map
