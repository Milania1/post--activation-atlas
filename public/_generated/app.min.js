'use strict';(function(){function M(){}function r(a,b){for(var c in b)a[c]=b[c];return a}function da(a,b){for(var c in b)a[c]=1;return a}function v(a){a.parentNode.removeChild(a)}function Fc(a){for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling)}function xa(a,b){for(;a.firstChild;)b.appendChild(a.firstChild)}function Mb(a,b){for(var c=0;c<a.length;c+=1)a[c]&&a[c].d(b)}function X(){return document.createDocumentFragment()}function l(a){return document.createElement(a)}function H(a){return document.createElementNS("http://www.w3.org/2000/svg",
a)}function q(a){return document.createTextNode(a)}function t(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function Gc(a){return""===a?void 0:+a}function n(a,b,c){a.style.setProperty(b,c)}function ya(a,b){"static"===getComputedStyle(a).position&&(a.style.position="relative");let c=document.createElement("object");c.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;");c.type="text/html";
let d;c.onload=()=>{d=c.contentDocument.defaultView;d.addEventListener("resize",b)};/Trident/.test(navigator.userAgent)?(a.appendChild(c),c.data="about:blank"):(c.data="about:blank",a.appendChild(c));return{cancel:()=>{d&&d.removeEventListener&&d.removeEventListener("resize",b);a.removeChild(c)}}}function kd(a,b){return a!=a?b==b:a!==b||a&&"object"===typeof a||"function"===typeof a}function of(a,b){return a!=a?b==b:a!==b}function ld(a,b){if(a=a in this._handlers&&this._handlers[a].slice())for(var c=
0;c<a.length;c+=1){var d=a[c];if(!d.__calling)try{d.__calling=!0,d.call(this,b)}finally{d.__calling=!1}}}function D(a){a._lock=!0;lb(a._beforecreate);lb(a._oncreate);lb(a._aftercreate);a._lock=!1}function md(){return this._state}function x(a,b){a._handlers=Object.create(null);a._slots=Object.create(null);a._bind=b._bind;a._staged={};a.options=b;a.root=b.root||a;a.store=b.store||a.root.store;b.root||(a._beforecreate=[],a._oncreate=[],a._aftercreate=[])}function nd(a,b){var c=this._handlers[a]||(this._handlers[a]=
[]);c.push(b);return{cancel:function(){var a=c.indexOf(b);~a&&c.splice(a,1)}}}function lb(a){for(;a&&a.length;)a.shift()()}function od(){this.store._remove(this)}function pd(a,b){this._handlers={};this._dependents=[];this._computed=Object.create(null);this._sortedComputedProperties=[];this._state=r({},a);this._differs=b&&b.immutable?of:kd}function mb(a,b){if(0>(b=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e")))return null;var c=a.slice(0,b);return[1<c.length?c[0]+c.slice(2):c,+a.slice(b+
1)]}function pf(a){return a=mb(Math.abs(a)),a?a[1]:NaN}function qf(a,b){return function(c,d){for(var e=c.length,g=[],f=0,h=a[0],k=0;0<e&&0<h;){k+h+1>d&&(h=Math.max(1,d-k));g.push(c.substring(e-=h,e+h));if((k+=h+1)>d)break;h=a[f=(f+1)%a.length]}return g.reverse().join(b)}}function rf(a){return function(b){return b.replace(/[0-9]/g,function(b){return a[+b]})}}function Nb(a){return new Ob(a)}function Ob(a){if(!(b=sf.exec(a)))throw Error("invalid format: "+a);var b;this.fill=b[1]||" ";this.align=b[2]||
">";this.sign=b[3]||"-";this.symbol=b[4]||"";this.zero=!!b[5];this.width=b[6]&&+b[6];this.comma=!!b[7];this.precision=b[8]&&+b[8].slice(1);this.trim=!!b[9];this.type=b[10]||""}function qd(a,b){b=mb(a,b);if(!b)return a+"";a=b[0];b=b[1];return 0>b?"0."+Array(-b).join("0")+a:a.length>b+1?a.slice(0,b+1)+"."+a.slice(b+1):a+Array(b-a.length+2).join("0")}function rd(a){return a}function tf(a){function b(a){function b(a){var b=r,d=t,f,k;if("c"===n)d=v(a)+d,a="";else{a=+a;var p=0>a;a=v(Math.abs(a),z);if(sd){var A=
a.length,N=1,nb=-1;a:for(;N<A;++N)switch(a[N]){case ".":nb=f=N;break;case "0":0===nb&&(nb=N);f=N;break;default:if(0<nb){if(!+a[N])break a;nb=0}}a=0<nb?a.slice(0,nb)+a.slice(f+1):a}p&&0===+a&&(p=!1);b=(p?"("===C?C:"-":"-"===C||"("===C?"":C)+b;d=("s"===n?td[8+ud/3]:"")+d+(p&&"("===C?")":"");if(u)for(p=-1,f=a.length;++p<f;)if(k=a.charCodeAt(p),48>k||57<k){d=(46===k?e+a.slice(p+1):a.slice(p))+d;a=a.slice(0,p);break}}q&&!ra&&(a=c(a,Infinity));k=b.length+a.length+d.length;p=k<l?Array(l-k+1).join(h):"";
q&&ra&&(a=c(p+a,p.length?l-d.length:Infinity),p="");switch(m){case "<":a=b+a+d+p;break;case "=":a=b+p+a+d;break;case "^":a=p.slice(0,k=p.length>>1)+b+a+d+p.slice(k);break;default:a=p+b+a+d}return g(a)}a=Nb(a);var h=a.fill,m=a.align,C=a.sign,A=a.symbol,ra=a.zero,l=a.width,q=a.comma,z=a.precision,sd=a.trim,n=a.type;"n"===n?(q=!0,n="g"):vd[n]||(null==z&&(z=12),sd=!0,n="g");if(ra||"0"===h&&"="===m)ra=!0,h="0",m="=";var r="$"===A?d[0]:"#"===A&&/[boxX]/.test(n)?"0"+n.toLowerCase():"",t="$"===A?d[1]:/[%p]/.test(n)?
f:"",v=vd[n],u=/[defgprs%]/.test(n);z=null==z?6:/[gprs]/.test(n)?Math.max(1,Math.min(21,z)):Math.max(0,Math.min(20,z));b.toString=function(){return a+""};return b}var c=a.grouping&&a.thousands?qf(a.grouping,a.thousands):rd,d=a.currency,e=a.decimal,g=a.numerals?rf(a.numerals):rd,f=a.percent||"%";return{format:b,formatPrefix:function(a,c){var d=b((a=Nb(a),a.type="f",a));a=3*Math.max(-8,Math.min(8,Math.floor(pf(c)/3)));var e=Math.pow(10,-a),f=td[8+a/3];return function(a){return d(e*a)+f}}}}function uf(a,
b){function c(b){a.fire("click")}var d,e=a._slotted.default;return{c(){d=l("button");d.addEventListener("click",c,void 0);n(d,"background-color",b.backgroundColor);n(d,"color",b.color);d.className="svelte-nm66xb"},m(a,b){a.insertBefore(d,b);e&&d.appendChild(e)},p(a,b){a.backgroundColor&&n(d,"background-color",b.backgroundColor);a.color&&n(d,"color",b.color)},d(a){a&&v(d);e&&xa(d,e);d.removeEventListener("click",c,void 0)}}}function zc(a){x(this,a);this._state=r({backgroundColor:"rgb(255, 130, 0)",
color:"white"},a.data);this._intro=!0;this._slotted=a.slots||{};this._fragment=uf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function vf(a,b){var c,d,e;return{c(){c=H("svg");d=H("path");e=H("path");t(d,"d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z");t(e,"d","M0 0h24v24H0z");t(e,"fill","none");t(c,"xmlns","http://www.w3.org/2000/svg");t(c,"width","24");t(c,"height","24");t(c,"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:M,d(a){a&&
v(c)}}}function wd(a){x(this,a);this._state=r({},a.data);this._intro=!0;this._fragment=vf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function wf(a,b){var c,d,e;return{c(){c=H("svg");d=H("path");e=H("path");t(d,"d","M19 13H5v-2h14v2z");t(e,"d","M0 0h24v24H0z");t(e,"fill","none");t(c,"xmlns","http://www.w3.org/2000/svg");t(c,"width","24");t(c,"height","24");t(c,"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:M,d(a){a&&v(c)}}}
function xd(a){x(this,a);this._state=r({},a.data);this._intro=!0;this._fragment=wf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function xf(a,b){var c,d,e;return{c(){c=H("svg");d=H("path");e=H("path");t(d,"d","M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z");t(e,"d","M0 0h24v24H0z");t(e,"fill","none");t(c,"xmlns","http://www.w3.org/2000/svg");t(c,"width","24");t(c,"height","24");t(c,"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:M,d(a){a&&
v(c)}}}function yd(a){x(this,a);this._state=r({},a.data);this._intro=!0;this._fragment=xf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function yf({name:a}){if("home"===a)return yd;if("add"===a)return wd;if("remove"===a)return xd}function zf(a,b){var c,d=b.Icon;if(d)var e=new d({root:a.root,store:a.store});return{c(){c=l("div");e&&e._fragment.c();n(c,"fill",b.color)},m(a,b){a.insertBefore(c,b);e&&e._mount(c,null)},p(b,f){d!==(d=f.Icon)&&(e&&e.destroy(),d?(e=new d({root:a.root,
store:a.store}),e._fragment.c(),e._mount(c,null)):e=null);b.color&&n(c,"fill",f.color)},d(a){a&&v(c);e&&e.destroy()}}}function Yb(a){x(this,a);this._state=r({color:"black"},a.data);this._recompute({name:1},this._state);this._intro=!0;this._fragment=zf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Af({clientWidth:a,extent:b}){return Math.min(a,Math.max(1E-6,b[0][0]*a))}function Bf({clientWidth:a,extent:b}){return Math.min(a,b[0][1]*a)}function Cf({clientHeight:a,
extent:b}){return Math.min(a,Math.max(1E-6,b[1][0]*a))}function Df({clientHeight:a,extent:b}){return Math.min(a,b[1][1]*a)}function Ef(a,b){function c(){a.set({clientWidth:e.clientWidth,clientHeight:e.clientHeight})}function d(b){a.mouseDown(b)}var e,g,f=b.extent&&zd(a,b);return{c(){e=l("div");f&&f.c();a.root._beforecreate.push(c);e.addEventListener("mousedown",d,void 0);e.className="root svelte-1pppif8"},m(a,b){a.insertBefore(e,b);f&&f.m(e,null);g=ya(e,c)},p(b,c){c.extent?f?f.p(b,c):(f=zd(a,c),f.c(),
f.m(e,null)):f&&(f.d(1),f=null)},d(a){a&&v(e);f&&f.d();g.cancel();e.removeEventListener("mousedown",d,void 0)}}}function zd(a,b){var c,d,e,g,f=b.left&&b.right&&b.top&&b.bottom&&Ad(a,b),h=b.annotationValue&&Bd(a,b);return{c(){c=H("svg");f&&f.c();d=q("\n    ");e=l("div");h&&h.c();t(c,"width",b.clientWidth);t(c,"height",b.clientHeight);t(c,"class","svelte-1pppif8");e.className=g="reticle "+(b.round?"round":"")+" svelte-1pppif8";n(e,"border-color",b.color);n(e,"top",""+(b.top-1)+"px");n(e,"left",""+(b.left-
1)+"px");n(e,"width",""+(b.right-b.left+2)+"px");n(e,"height",""+(b.bottom-b.top+2)+"px")},m(a,b){a.insertBefore(c,b);f&&f.m(c,null);a.insertBefore(d,b);a.insertBefore(e,b);h&&h.m(e,null)},p(b,d){d.left&&d.right&&d.top&&d.bottom?f?f.p(b,d):(f=Ad(a,d),f.c(),f.m(c,null)):f&&(f.d(1),f=null);b.clientWidth&&t(c,"width",d.clientWidth);b.clientHeight&&t(c,"height",d.clientHeight);d.annotationValue?h?h.p(b,d):(h=Bd(a,d),h.c(),h.m(e,null)):h&&(h.d(1),h=null);b.round&&g!==(g="reticle "+(d.round?"round":"")+
" svelte-1pppif8")&&(e.className=g);b.color&&n(e,"border-color",d.color);b.top&&n(e,"top",""+(d.top-1)+"px");b.left&&n(e,"left",""+(d.left-1)+"px");(b.right||b.left)&&n(e,"width",""+(d.right-d.left+2)+"px");(b.bottom||b.top)&&n(e,"height",""+(d.bottom-d.top+2)+"px")},d(a){a&&v(c);f&&f.d();a&&(v(d),v(e));h&&h.d()}}}function Ad(a,b){var c,d,e;return{c(){c=H("path");t(c,"class",d=(b.background?"":"transparent")+" svelte-1pppif8");t(c,"d",e="M0,0 L"+b.clientWidth+",0 L"+b.clientWidth+","+b.clientHeight+
" L0,"+b.clientHeight+" z M"+b.left+","+b.top+" L"+b.left+","+b.bottom+" L"+b.right+","+b.bottom+" L"+b.right+","+b.top+" z")},m(a,b){a.insertBefore(c,b)},p(a,b){a.background&&d!==(d=(b.background?"":"transparent")+" svelte-1pppif8")&&t(c,"class",d);(a.clientWidth||a.clientHeight||a.left||a.top||a.bottom||a.right)&&e!==(e="M0,0 L"+b.clientWidth+",0 L"+b.clientWidth+","+b.clientHeight+" L0,"+b.clientHeight+" z M"+b.left+","+b.top+" L"+b.left+","+b.bottom+" L"+b.right+","+b.bottom+" L"+b.right+","+
b.top+" z")&&t(c,"d",e)},d(a){a&&v(c)}}}function Bd(a,b){var c,d,e,g;return{c(){c=l("div");d=l("div");e=l("div");g=q(b.annotationValue);e.className="annotation";d.className="annotationTab svelte-1pppif8";n(d,"background",b.color);c.className="annotationTabParent svelte-1pppif8";n(c,"top",""+(b.w*b.width-2)/2+"px")},m(a,b){a.insertBefore(c,b);c.appendChild(d);d.appendChild(e);e.appendChild(g)},p(a,b){a.annotationValue&&(g.data=""+b.annotationValue);a.color&&n(d,"background",b.color);(a.w||a.width)&&
n(c,"top",""+(b.w*b.width-2)/2+"px")},d(a){a&&v(c)}}}function ob(a){x(this,a);this._state=r({dragging:!1,extent:[[0,0],[0,0]],background:!0,round:!1,color:"rgb(255, 130, 0)",enableDragging:!0,mouseUpListener:null,mouseMoveListener:null},a.data);this._recompute({clientWidth:1,extent:1,clientHeight:1},this._state);this._intro=!0;this._fragment=Ef(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Ff(){this.refs.element.addEventListener("ready",(a)=>{this.set({ready:!0})});
this.refs.element.addEventListener("onscreen",(a)=>{this.set({onscreen:!0});this.fire("onscreen")});this.refs.element.addEventListener("offscreen",(a)=>{this.set({onscreen:!1});this.fire("offscreen")})}function Gf(a,b){var c,d=a._slotted.default;return{c(){c=l("d-figure");n(c,"display",b.display);n(c,"height",b.height)},m(b,g){b.insertBefore(c,g);d&&c.appendChild(d);a.refs.element=c},p(a,b){a.display&&n(c,"display",b.display);a.height&&n(c,"height",b.height)},d(b){b&&v(c);d&&xa(c,d);a.refs.element===
c&&(a.refs.element=null)}}}function Pb(a){x(this,a);this.refs={};this._state=r({display:"block",ready:!1,height:"",onscreen:!1,offscreen:!0},a.data);this._intro=!0;this._slotted=a.slots||{};this._fragment=Gf(this,this._state);this.root._oncreate.push(()=>{Ff.call(this);this.fire("update",{changed:da({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Hf(a,b){var c;return{c(){c=l("div");c.innerHTML='<span class="svelte-19e83wz">Loading \u2026</span>';
c.className="svelte-19e83wz"},m(a,b){a.insertBefore(c,b)},p:M,d(a){a&&v(c)}}}function Cd(a){x(this,a);this._state=r({},a.data);this._intro=!0;this._fragment=Hf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function If({clientWidth:a}){return a}function Jf({width:a,aspectRatio:b}){return a/b}function Kf(a,b){function c(){a.set({clientWidth:d.clientWidth})}var d,e,g=a._slotted.default,f;return{c(){d=l("div");e=l("div");e.className="container svelte-xqvv98";a.root._beforecreate.push(c);
d.className="root svelte-xqvv98";n(d,"display",b.display);n(d,"padding-bottom",""+100/b.aspectRatio+"%")},m(a,b){a.insertBefore(d,b);d.appendChild(e);g&&e.appendChild(g);f=ya(d,c)},p(a,b){a.display&&n(d,"display",b.display);a.aspectRatio&&n(d,"padding-bottom",""+100/b.aspectRatio+"%")},d(a){a&&v(d);g&&xa(e,g);f.cancel()}}}function pb(a){x(this,a);this._state=r({display:"block",aspectRatio:1,clientWidth:0},a.data);this._recompute({clientWidth:1,width:1,aspectRatio:1},this._state);this._intro=!0;this._slotted=
a.slots||{};this._fragment=Kf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Lf(a,b){var c,d,e,g=b.ready?Dd:Ed,f=g(a,b),h={aspectRatio:b.aspectRatio},k=new pb({root:a.root,store:a.store,slots:{default:X()},data:h});h={};if(void 0!==b.ready){h.ready=b.ready;var p=!0}var m=new Pb({root:a.root,store:a.store,slots:{default:X()},data:h,_bind(b,c){var d={};!p&&b.ready&&(d.ready=c.ready);a._set(d);p=void 0}});a.root._beforecreate.push(()=>{m._bind({ready:1},
m.get())});return{c(){c=l("div");f.c();d=document.createComment("");k._fragment.c();m._fragment.c();c.className=e=(b.background?"background":"")+" "+(b.border?"border":"")+" svelte-1q1tvil svelte-ref-root"},m(b,e){b.insertBefore(c,e);f.m(k._slotted.default,null);k._slotted.default.appendChild(d);k._mount(m._slotted.default,null);m._mount(c,null);a.refs.root=c},p(h,A){b=A;g===(g=b.ready?Dd:Ed)&&f?f.p(h,b):(f.d(1),f=g(a,b),f.c(),f.m(d.parentNode,d));A={};h.aspectRatio&&(A.aspectRatio=b.aspectRatio);
k._set(A);A={};!p&&h.ready&&(A.ready=b.ready,p=void 0!==b.ready);m._set(A);p=void 0;(h.background||h.border)&&e!==(e=(b.background?"background":"")+" "+(b.border?"border":"")+" svelte-1q1tvil svelte-ref-root")&&(c.className=e)},d(b){b&&v(c);f.d();k.destroy();m.destroy();a.refs.root===c&&(a.refs.root=null)}}}function Ed(a,b){var c=new Cd({root:a.root,store:a.store});return{c(){c._fragment.c()},m(a,b){c._mount(a,b)},p:M,d(a){c.destroy(a)}}}function Dd(a,b){var c;return{c(){c=l("img");c.src=b.src;c.alt=
b.alt;c.style.cssText=b.style;c.className="svelte-1q1tvil svelte-ref-image"},m(b,e){b.insertBefore(c,e);a.refs.image=c},p(a,b){a.src&&(c.src=b.src);a.alt&&(c.alt=b.alt);a.style&&(c.style.cssText=b.style)},d(b){b&&v(c);a.refs.image===c&&(a.refs.image=null)}}}function Fd(a){x(this,a);this.refs={};this._state=r({ready:!1,src:"",alt:"",style:"",display:"block",aspectRatio:1,border:!0,background:!1},a.data);this._intro=!0;this._fragment=Lf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,
a.anchor),D(this))}function Mf(a,b){var c,d,e,g=new Fd({root:a.root,store:a.store,data:{aspectRatio:1,src:"assets/images/renders/thumbnail-"+b.layerName+".jpg",border:!1,alt:"thumbnail for "+b.layerName}}),f={enableDragging:!0};if(void 0!==b.extent){f.extent=b.extent;var h=!0}var k=new ob({root:a.root,store:a.store,data:f,_bind(b,c){var d={};!h&&b.extent&&(d.extent=c.extent);a._set(d);h=void 0}});a.root._beforecreate.push(()=>{k._bind({extent:1},k.get())});k.on("drag",function(b){a.fire("drag",b)});
var p=new pb({root:a.root,store:a.store,slots:{default:X()}});return{c(){c=l("div");d=l("div");g._fragment.c();e=q("\n    ");k._fragment.c();p._fragment.c();n(d,"opacity","0.4");c.className="svelte-15ooxw3 svelte-ref-root"},m(b,f){b.insertBefore(c,f);p._slotted.default.appendChild(d);g._mount(d,null);p._slotted.default.appendChild(e);k._mount(p._slotted.default,null);p._mount(c,null);a.refs.root=c},p(a,c){b=c;c={};a.layerName&&(c.src="assets/images/renders/thumbnail-"+b.layerName+".jpg");a.layerName&&
(c.alt="thumbnail for "+b.layerName);g._set(c);c={};!h&&a.extent&&(c.extent=b.extent,h=void 0!==b.extent);k._set(c);h=void 0},d(b){b&&v(c);g.destroy();k.destroy();p.destroy();a.refs.root===c&&(a.refs.root=null)}}}function Gd(a){x(this,a);this.refs={};this._state=r({scaleCountFactor:200},a.data);this._intro=!0;this._fragment=Mf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function qb(){}function rb(a){for(var b,c,d=1,e=arguments.length;d<e;d++)for(b in c=
arguments[d],c)a[b]=c[b];return a}function Hd(a){this.destroy=qb;this.fire("destroy");this.set=this.get=qb;!1!==a&&this._fragment.u();this._fragment.d();this._fragment=this._state=null}function Id(a,b,c,d,e){for(var g in b)if(c[g]){var f=d[g],h=e[g],k=b[g];if(k)for(var p=0;p<k.length;p+=1){var m=k[p];m.__calling||(m.__calling=!0,m.call(a,f,h),m.__calling=!1)}}}function sb(a){for(;a&&a.length;)a.shift()()}function Nf(a,b){return b?b:a}function Of(){let a=(b)=>{this.set({loaded:!0});var {img:b}=this.get();
b.removeEventListener("loaded",a)};this.observe("index",(a)=>{this.draw()},{init:!1});this.observe("img",(a)=>{this.draw()},{init:!1});this.observe("loaded",(a)=>{this.draw()},{init:!1});this.observe("url",(b)=>{let c=this.get("img");c&&c.removeEventListener("load",a);if(tb.has(b))b=tb.get(b),b.loaded?this.set({loaded:!0,img:b.img}):(this.set({loaded:!1,img:b.img}),b.img.addEventListener("load",a));else{let c=new Image;this.set({loaded:!1,img:c});let e={img:c},g=(a)=>{e.loaded=!0;c.removeEventListener("load",
g)};c.addEventListener("load",g);c.addEventListener("load",a);tb.set(b,e);c.src=b}})}function Pf(a,b){var c;return{c:function(){c=document.createElement("canvas");this.h()},h:function(){c.width=b.width;c.height=b.realHeight},m:function(b,e){b.insertBefore(c,e);a.refs.canvas=c},p:function(a,b){a.width&&(c.width=b.width);a.realHeight&&(c.height=b.realHeight)},u:function(){c.parentNode.removeChild(c)},d:function(){a.refs.canvas===c&&(a.refs.canvas=null)}}}function Jd(a){this._observers={pre:Object.create(null),
post:Object.create(null)};this._handlers=Object.create(null);this._bind=a._bind;this.options=a;this.root=a.root||this;this.store=this.root.store||a.store;this.refs={};this._state=rb({url:"",index:0,width:100,loaded:null,columns:Infinity,height:null,img:null},a.data);this._recompute({width:1,height:1},this._state);var b=Of.bind(this);a.root||(this._oncreate=[]);this._fragment=Pf(this,this._state);this.root._oncreate.push(b);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),sb(this._oncreate))}
function Kd(a){return new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}")}function Qf(a,b){var c=Kd(a);return function(d,e){return b(c(d),e,a)}}function Rf(a){var b=Object.create(null),c=[];a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)});return c}function Ld(a){function b(a,b){function c(){if(N)return ub;if(n)return n=!1,Md;var b,c=f,d;if(34===a.charCodeAt(c)){for(;f++<e&&34!==a.charCodeAt(f)||34===a.charCodeAt(++f););(b=f)>=e?N=!0:
10===(d=a.charCodeAt(f++))?n=!0:13===d&&(n=!0,10===a.charCodeAt(f)&&++f);return a.slice(c+1,b-1).replace(/""/g,'"')}for(;f<e;){if(10===(d=a.charCodeAt(b=f++)))n=!0;else if(13===d)n=!0,10===a.charCodeAt(f)&&++f;else if(d!==g)continue;return a.slice(c,b)}return N=!0,a.slice(c,e)}var d=[],e=a.length,f=0,h=0,l,N=0>=e,n=!1;10===a.charCodeAt(e-1)&&--e;for(13===a.charCodeAt(e-1)&&--e;(l=c())!==ub;){for(var q=[];l!==Md&&l!==ub;)q.push(l),l=c();b&&null==(q=b(q,h++))||d.push(q)}return d}function c(b){return b.map(d).join(a)}
function d(a){return null==a?"":e.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}var e=new RegExp('["'+a+"\n\r]"),g=a.charCodeAt(0);return{parse:function(a,c){var d,e;a=b(a,function(a,b){if(d)return d(a,b-1);e=a;d=c?Qf(a,c):Kd(a)});a.columns=e||[];return a},parseRows:b,format:function(b,c){null==c&&(c=Rf(b));return[c.map(d).join(a)].concat(b.map(function(b){return c.map(function(a){return d(b[a])}).join(a)})).join("\n")},formatRows:function(a){return a.map(c).join("\n")}}}function Nd(a){if(a.ok)return a;
throw Error(a.status+":"+a.statusText);}function vb(a){return new Promise((b,c)=>{let d=new Image;d.onload=(a)=>b(d);d.onerror=(a)=>c(a);d.src=a})}function Ea(a){return fetch(a).then(Nd).then((a)=>a.text())}function Sf(a,b){b=null!=b?b:Date.now()+""+Math.random();let c="namespace:"+b+", url:"+a+", random:"+Date.now()+Math.random();wb.set(c,!1);if(Zb.has(b)){let a=Zb.get(b);wb.set(a,!0)}Zb.set(b,c);return new Promise((b,e)=>{if(Array.isArray(a)){var d=a.map((a)=>Od(a));d=Promise.all(d)}else d=Od(a);
d.then((a)=>{wb.get(c)||b(a)}).catch((a)=>{wb.get(c)||e(a)})})}function Od(a){if(Hc.has(a))return Hc.get(a);var b=Pd;var c=a.split(".");c=c[c.length-1];b.has(c)||console.warn("Trying to load url: "+a+' with an unknown filetype. Assuming "text".');b=b.has(c)?c:"text";b=Pd.get(b)(a);Hc.set(a,b);return b}function Tf({clientWidth:a}){return a}function Uf({model:a,layerName:b}){return a+"_"+b}function Vf(){let {root:a,id:b,grid:c}=this.get(),d=Wf[b];null==d.class_filter&&(d.class_filter="None");null==
d.filter&&(d.filter="None");Array.isArray(d.layout)||(d.layout=[d.layout]);Array.isArray(d.layer)||(d.layer=[d.layer]);Array.isArray(d.filter)||(d.filter=[d.filter]);this.set({gridSize:d.grid_size[c],layerName:d.layer[0]});Sf(`${a}/${b}/web/web--grid_size=${d.grid_size[c]}--layout=${d.layout[0]}--class_filter=${d.class_filter}--filter=${d.filter[0]}--layer=${d.layer[0]}--model=${d.model}--sample_images=${d.sample_images}--sample_type=${d.sample_type}.json`).then((a)=>{this.set({icons:a});this.render()})}
function Xf({changed:a}){a.classHeatmap&&this.render()}function Yf(a,b){function c(){a.set({clientWidth:d.clientWidth})}var d,e,g;return{c(){d=l("div");e=l("canvas");e.width=b.gridSize;e.height=b.gridSize;n(e,"width",""+b.clientWidth+"px");n(e,"height",""+b.height+"px");e.className="svelte-sjakuy";a.root._beforecreate.push(c);n(d,"height",""+b.height+"px")},m(b,h){b.insertBefore(d,h);d.appendChild(e);a.refs.canvas=e;g=ya(d,c)},p(a,b){a.gridSize&&(e.width=b.gridSize,e.height=b.gridSize);a.clientWidth&&
n(e,"width",""+b.clientWidth+"px");a.height&&(n(e,"height",""+b.height+"px"),n(d,"height",""+b.height+"px"))},d(b){b&&v(d);a.refs.canvas===e&&(a.refs.canvas=null);g.cancel()}}}function xb(a){x(this,a);this.refs={};this._state=r({root:"https://storage.googleapis.com/activation-atlas/build",model:"inceptionv1",layerName:"mixed4d",grid:1,layout:0,gridSize:10,classHeatmap:-1,icons:[]},a.data);this._recompute({clientWidth:1,model:1,layerName:1},this._state);this._intro=!0;this._handlers.update=[Xf];this._fragment=
Yf(this,this._state);this.root._oncreate.push(()=>{Vf.call(this);this.fire("update",{changed:da({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Qd(a,b,c){a=Object.create(a);a.layer=b[c];a.i=c;return a}function Zf(a,b){for(var c,d=b.layers,e=[],g=0;g<d.length;g+=1)e[g]=Rd(a,Qd(b,d,g));return{c(){c=l("div");for(var a=0;a<e.length;a+=1)e[a].c();c.className="stack"},m(a,b){a.insertBefore(c,b);for(a=0;a<e.length;a+=1)e[a].m(c,null)},
p(b,g){if(b.layerName||b.layers||b.classHeatmap){d=g.layers;for(var f=0;f<d.length;f+=1){let h=Qd(g,d,f);e[f]?e[f].p(b,h):(e[f]=Rd(a,h),e[f].c(),e[f].m(c,null))}for(;f<e.length;f+=1)e[f].d(1);e.length=d.length}},d(a){a&&v(c);Mb(e,a)}}}function Rd(a,b){function c(){a.set({layerName:e.__value})}var d,e,g,f,h,k,p,m=b.layer,C,A,ra,N=new xb({root:a.root,store:a.store,data:{grid:0,layerName:b.layer,classHeatmap:b.classHeatmap}});return{c(){d=l("label");e=l("input");f=q("\n    ");h=l("div");N._fragment.c();
k=q("\n    ");p=l("span");C=q(m);A=q("\n  ");a._bindingGroups[0].push(e);e.addEventListener("change",c,void 0);t(e,"type","radio");e.__value=g=b.layer;e.value=e.__value;e.className="svelte-1tpwqxh";h.className="thumb svelte-1tpwqxh";n(h,"position","relative");p.className="svelte-1tpwqxh";d.className=ra="layer "+(b.layerName==b.layer?"selected":"")+" svelte-1tpwqxh"},m(a,c){a.insertBefore(d,c);d.appendChild(e);e.checked=e.__value===b.layerName;d.appendChild(f);d.appendChild(h);N._mount(h,null);d.appendChild(k);
d.appendChild(p);p.appendChild(C);d.appendChild(A)},p(a,b){a.layerName&&(e.checked=e.__value===b.layerName);a.layers&&g!==(g=b.layer)&&(e.__value=g);e.value=e.__value;var c={};a.layers&&(c.layerName=b.layer);a.classHeatmap&&(c.classHeatmap=b.classHeatmap);N._set(c);a.layers&&m!==(m=b.layer)&&(C.data=""+m);(a.layerName||a.layers)&&ra!==(ra="layer "+(b.layerName==b.layer?"selected":"")+" svelte-1tpwqxh")&&(d.className=ra)},d(b){b&&v(d);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(e),1);e.removeEventListener("change",
c,void 0);N.destroy()}}}function Sd(a){x(this,a);this._state=r({layerName:"mixed4c",layers:"mixed3a mixed3b mixed4a mixed4b mixed4c mixed4d mixed4e mixed5a mixed5b".split(" "),classHeatmap:-1},a.data);this._bindingGroups=[[]];this._intro=!0;this._fragment=Zf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function $f({inceptionLabels:a}){let b=yb.map((b)=>({label:a.inception[b],i:b}));return[{label:"show all",i:-1}].concat(b)}function Td(a,b,c){a=Object.create(a);
a.l=b[c];return a}function ag(a,b){for(var c,d=b.labels,e=[],g=0;g<d.length;g+=1)e[g]=Ud(a,Td(b,d,g));return{c(){c=l("div");for(var a=0;a<e.length;a+=1)e[a].c();c.className="chooser svelte-h2ed57"},m(a,b){a.insertBefore(c,b);for(a=0;a<e.length;a+=1)e[a].m(c,null)},p(b,g){if(b.classHeatmap||b.labels){d=g.labels;for(var f=0;f<d.length;f+=1){let h=Td(g,d,f);e[f]?e[f].p(b,h):(e[f]=Ud(a,h),e[f].c(),e[f].m(c,null))}for(;f<e.length;f+=1)e[f].d(1);e.length=d.length}},d(a){a&&v(c);Mb(e,a)}}}function Ud(a,
b){function c(){a.set({classHeatmap:e.__value})}var d,e,g,f,h,k=b.l.label,p,m,C,A;return{c(){d=l("label");e=l("input");f=q("\n      ");h=l("span");p=q(k);C=q("\n    ");a._bindingGroups[0].push(e);e.addEventListener("change",c,void 0);t(e,"type","radio");e.__value=g=b.l.i;e.value=e.__value;e.className="svelte-h2ed57";h.title=m=b.l.i;d.className=A=(b.classHeatmap===b.l.i?"selected":"")+" svelte-h2ed57"},m(a,c){a.insertBefore(d,c);d.appendChild(e);e.checked=e.__value===b.classHeatmap;d.appendChild(f);
d.appendChild(h);h.appendChild(p);d.appendChild(C)},p(a,b){a.classHeatmap&&(e.checked=e.__value===b.classHeatmap);a.labels&&g!==(g=b.l.i)&&(e.__value=g);e.value=e.__value;a.labels&&k!==(k=b.l.label)&&(p.data=""+k);a.labels&&m!==(m=b.l.i)&&(h.title=m);(a.classHeatmap||a.labels)&&A!==(A=(b.classHeatmap===b.l.i?"selected":"")+" svelte-h2ed57")&&(d.className=A)},d(b){b&&v(d);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(e),1);e.removeEventListener("change",c,void 0)}}}function Ic(a){x(this,a);
this._state=r({classesToKeep:yb,inceptionLabels:Wa,classHeatmap:235},a.data);this._recompute({inceptionLabels:1},this._state);this._bindingGroups=[[]];this._intro=!0;this._fragment=ag(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Vd(a){return new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}")}function bg(a,b){var c=Vd(a);return function(d,e){return b(c(d),e,a)}}function cg(a){var b=Object.create(null),c=
[];a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)});return c}function Wd(a){function b(a,b){function c(){if(n)return Jc;if(q)return q=!1,Xd;var b,c=f,d;if(34===a.charCodeAt(c)){for(;f++<e&&34!==a.charCodeAt(f)||34===a.charCodeAt(++f););(b=f)>=e?n=!0:10===(d=a.charCodeAt(f++))?q=!0:13===d&&(q=!0,10===a.charCodeAt(f)&&++f);return a.slice(c+1,b-1).replace(/""/g,'"')}for(;f<e;){if(10===(d=a.charCodeAt(b=f++)))q=!0;else if(13===d)q=!0,10===a.charCodeAt(f)&&++f;else if(d!==g)continue;return a.slice(c,
b)}return n=!0,a.slice(c,e)}var d=[],e=a.length,f=0,h=0,l,n=0>=e,q=!1;10===a.charCodeAt(e-1)&&--e;for(13===a.charCodeAt(e-1)&&--e;(l=c())!==Jc;){for(var z=[];l!==Xd&&l!==Jc;)z.push(l),l=c();b&&null==(z=b(z,h++))||d.push(z)}return d}function c(b){return b.map(d).join(a)}function d(a){return null==a?"":e.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}var e=new RegExp('["'+a+"\n\r]"),g=a.charCodeAt(0);return{parse:function(a,c){var d,e;a=b(a,function(a,b){if(d)return d(a,b-1);e=a;d=c?bg(a,c):Vd(a)});a.columns=
e||[];return a},parseRows:b,format:function(b,c){null==c&&(c=cg(b));return[c.map(d).join(a)].concat(b.map(function(b){return c.map(function(a){return d(b[a])}).join(a)})).join("\n")},formatRows:function(a){return a.map(c).join("\n")}}}function Yd(a){if(a.ok)return a;throw Error(a.status+":"+a.statusText);}function zb(a){return new Promise((b,c)=>{let d=new Image;d.onload=(a)=>b(d);d.onerror=(a)=>c(a);d.src=a})}function Ab(a){return fetch(a).then(Yd).then((a)=>a.text())}function Zd(a,b){b=null!=b?
b:Date.now()+""+Math.random();let c="namespace:"+b+", url:"+a+", random:"+Date.now()+Math.random();Fa.set(c,!1);if(Kc.has(b)){let a=Kc.get(b);Fa.set(a,!0)}Kc.set(b,c);return new Promise((b,e)=>{if(Array.isArray(a)){var d=a.map((a)=>$d(a));d=Promise.all(d)}else d=$d(a);d.then((a)=>{Fa.get(c)||b(a)}).catch((a)=>{Fa.get(c)||e(a)})})}function $d(a){if(Lc.has(a))return Lc.get(a);var b=ae;var c=a.split(".");c=c[c.length-1];b.has(c)||console.warn("Trying to load url: "+a+' with an unknown filetype. Assuming "text".');
b=b.has(c)?c:"text";b=ae.get(b)(a);Lc.set(a,b);return b}function be(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function dg(a){return function(b,c){return be(a(b),c)}}function eg({changed:a}){if(a.layer||a.classFilter||a.id||a.layout||a.filter){let {root:b,id:c,layer:d,classFilter:e,filter:g,layout:f}=this.get();this.set({loading:!0});let h=fg[c];this.set({config:h});let k=!1,p=!1;switch(h.layer[d]){case "mixed4a":p=k=!0;break;case "mixed4d":k=!0;p=!1;break;case "mixed5a":k=!0;p=!1;break;case "mixed5b":k=
!0,p=!1}null!==e&&(null==h.class_filter&&(h.class_filter="None"),null==h.filter&&(h.filter="None"),Array.isArray(h.grid_size)||(h.grid_size=[h.grid_size]),Array.isArray(h.class_filter)||(h.class_filter=[h.class_filter]),Array.isArray(h.layer)||(h.layer=[h.layer]),Array.isArray(h.layout)||(h.layout=[h.layout]),Array.isArray(h.filter)||(h.filter=[h.filter]),a=h.grid_size.map((a)=>`${b}/${c}/web/web--grid_size=${a}--layout=${h.layout[f]}--class_filter=${h.class_filter[e]}--filter=${h.filter[g]}--layer=${h.layer[d]}--model=${h.model}--sample_images=${h.sample_images}--sample_type=${h.sample_type}.json`),
Zd(a).then((a)=>{let m=Array(a.length);a.forEach((a,C)=>{let l=h.grid_size[C],A=h.tile_size;Array(l/A).keys();let n=[...Array(l).keys()].map((a)=>Array(l));for(let m of a){void 0!==m.x&&(m.grid_x=m.x);void 0!==m.y&&(m.grid_y=m.y);void 0!==m.n&&(m.num_activations=m.n);void 0!==m.i&&(m.top_class_indices=m.i);void 0!==m.v&&(m.top_class_values=m.v);void 0!==m.f&&(m.full_class_values=m.f,m.full_class_indices=yb);a=k?l-m.grid_x-1:m.grid_x;let C=p?l-m.grid_y-1:m.grid_y;m.gx=a/l;m.gy=C/l;m.gw=1/l;let q=Math.floor(m.grid_x/
A),ra=Math.floor(m.grid_y/A);m.localX=m.grid_x%A;m.localY=m.grid_y%A;m.url=`${b}/${c}/render/render--x=${q}--y=${ra}--tries=${h.tries}--alpha=${h.alpha?"True":"False"}--tile_size=${h.tile_size}--whiten=${h.whiten}--steps=${h.steps}--icon_size=${h.icon_size}--grid_size=${l}--layout=${h.layout[f]}--class_filter=${h.class_filter[e]}--filter=${h.filter[g]}--layer=${h.layer[d]}--model=${h.model}--sample_images=${h.sample_images}--sample_type=${h.sample_type}.jpg`;n[a][C]=m}m[C]=n});this.set({layers:m,
loading:!1})}))}}function ce(a){x(this,a);this._state=r({fingerprint:Math.random()+Date.now(),root:"https://storage.googleapis.com/activation-atlas/build",id:"inceptionv1",labels:Wa.inception,layer:0,classFilter:0,filter:0,layout:0,config:null,layers:null,loading:!1},a.data);this._intro=!0;this._handlers.update=[eg];this._fragment={c:M,m:M,p:M,d:M};this.root._oncreate.push(()=>{this.fire("update",{changed:da({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,
a.anchor),D(this))}function Mc(){for(var a=0,b=arguments.length,c={},d;a<b;++a){if(!(d=arguments[a]+"")||d in c)throw Error("illegal type: "+d);c[d]=[]}return new Bb(c)}function Bb(a){this._=a}function gg(a,b){return a.trim().split(/^|\s+/).map(function(a){var c="",e=a.indexOf(".");0<=e&&(c=a.slice(e+1),a=a.slice(0,e));if(a&&!b.hasOwnProperty(a))throw Error("unknown type: "+a);return{type:a,name:c}})}function de(a,b,c){for(var d=0,e=a.length;d<e;++d)if(a[d].name===b){a[d]=hg;a=a.slice(0,d).concat(a.slice(d+
1));break}null!=c&&a.push({name:b,value:c});return a}function Cb(a){var b=a+="",c=b.indexOf(":");0<=c&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1));return ee.hasOwnProperty(b)?{space:ee[b],local:a}:a}function ig(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===c&&"http://www.w3.org/1999/xhtml"===b.documentElement.namespaceURI?b.createElement(a):b.createElementNS(c,a)}}function jg(a){return function(){return this.ownerDocument.createElementNS(a.space,
a.local)}}function fe(a){a=Cb(a);return(a.local?jg:ig)(a)}function kg(){}function Nc(a){return null==a?kg:function(){return this.querySelector(a)}}function lg(){return[]}function ge(a){return null==a?lg:function(){return this.querySelectorAll(a)}}function he(a){return Array(a.length)}function Db(a,b){this.ownerDocument=a.ownerDocument;this.namespaceURI=a.namespaceURI;this._next=null;this._parent=a;this.__data__=b}function mg(a){return function(){return a}}function ng(a,b,c,d,e,g){for(var f=0,h,k=
b.length,p=g.length;f<p;++f)(h=b[f])?(h.__data__=g[f],d[f]=h):c[f]=new Db(a,g[f]);for(;f<k;++f)if(h=b[f])e[f]=h}function og(a,b,c,d,e,g,f){var h,k,p={},m=b.length,C=g.length,l=Array(m),n;for(h=0;h<m;++h)if(k=b[h])l[h]=n="$"+f.call(k,k.__data__,h,b),n in p?e[h]=k:p[n]=k;for(h=0;h<C;++h)n="$"+f.call(a,g[h],h,g),(k=p[n])?(d[h]=k,k.__data__=g[h],p[n]=null):c[h]=new Db(a,g[h]);for(h=0;h<m;++h)(k=b[h])&&p[l[h]]===k&&(e[h]=k)}function pg(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function qg(a){return function(){this.removeAttribute(a)}}
function rg(a){return function(){this.removeAttributeNS(a.space,a.local)}}function sg(a,b){return function(){this.setAttribute(a,b)}}function tg(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}function ug(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}}function vg(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}function wg(a){return function(){this.style.removeProperty(a)}}
function xg(a,b,c){return function(){this.style.setProperty(a,b,c)}}function yg(a,b,c){return function(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}}function Ga(a,b){return a.style.getPropertyValue(b)||(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView).getComputedStyle(a,null).getPropertyValue(b)}function zg(a){return function(){delete this[a]}}function Ag(a,b){return function(){this[a]=b}}function Bg(a,b){return function(){var c=
b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}function Oc(a){return a.classList||new ie(a)}function ie(a){this._node=a;this._names=(a.getAttribute("class")||"").trim().split(/^|\s+/)}function je(a,b){a=Oc(a);for(var c=-1,d=b.length;++c<d;)a.add(b[c])}function ke(a,b){a=Oc(a);for(var c=-1,d=b.length;++c<d;)a.remove(b[c])}function Cg(a){return function(){je(this,a)}}function Dg(a){return function(){ke(this,a)}}function Eg(a,b){return function(){(b.apply(this,arguments)?je:ke)(this,a)}}function Fg(){this.textContent=
""}function Gg(a){return function(){this.textContent=a}}function Hg(a){return function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}}function Ig(){this.innerHTML=""}function Jg(a){return function(){this.innerHTML=a}}function Kg(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}function Lg(){this.nextSibling&&this.parentNode.appendChild(this)}function Mg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ng(){return null}
function Og(){var a=this.parentNode;a&&a.removeChild(this)}function Pg(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Qg(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function Rg(a,b,c){a=le(a,b,c);return function(b){var c=b.relatedTarget;c&&(c===this||c.compareDocumentPosition(this)&8)||a.call(this,b)}}function le(a,b,c){return function(d){var e=u;u=d;try{a.call(this,this.__data__,b,c)}finally{u=e}}}function Sg(a){return a.trim().split(/^|\s+/).map(function(a){var b=
"",d=a.indexOf(".");0<=d&&(b=a.slice(d+1),a=a.slice(0,d));return{type:a,name:b}})}function Tg(a){return function(){var b=this.__on;if(b){for(var c=0,d=-1,e=b.length,g;c<e;++c)(g=b[c],a.type&&g.type!==a.type||g.name!==a.name)?b[++d]=g:this.removeEventListener(g.type,g.listener,g.capture);++d?b.length=d:delete this.__on}}}function Ug(a,b,c){var d=me.hasOwnProperty(a.type)?Rg:le;return function(e,g,f){e=this.__on;var h;g=d(b,g,f);if(e){f=0;for(var k=e.length;f<k;++f)if((h=e[f]).type===a.type&&h.name===
a.name){this.removeEventListener(h.type,h.listener,h.capture);this.addEventListener(h.type,h.listener=g,h.capture=c);h.value=b;return}}this.addEventListener(a.type,g,c);h={type:a.type,name:a.name,value:b,listener:g,capture:c};e?e.push(h):this.__on=[h]}}function ne(a,b,c){var d=a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView,e=d.CustomEvent;"function"===typeof e?e=new e(b,c):(e=d.document.createEvent("Event"),c?(e.initEvent(b,c.bubbles,c.cancelable),e.detail=c.detail):e.initEvent(b,
!1,!1));a.dispatchEvent(e)}function Vg(a,b){return function(){return ne(this,a,b)}}function Wg(a,b){return function(){return ne(this,a,b.apply(this,arguments))}}function F(a,b){this._groups=a;this._parents=b}function Ha(){return new F([[document.documentElement]],oe)}function Z(a){return"string"===typeof a?new F([[document.querySelector(a)]],[document.documentElement]):new F([[a]],oe)}function pe(){for(var a=u,b;b=a.sourceEvent;)a=b;return a}function qe(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint)return c=
c.createSVGPoint(),c.x=b.clientX,c.y=b.clientY,c=c.matrixTransform(a.getScreenCTM().inverse()),[c.x,c.y];c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function Ia(a){var b=pe();b.changedTouches&&(b=b.changedTouches[0]);return qe(a,b)}function re(a,b,c){3>arguments.length&&(c=b,b=pe().changedTouches);for(var d=0,e=b?b.length:0,g;d<e;++d)if((g=b[d]).identifier===c)return qe(a,g);return null}function Pc(){u.preventDefault();u.stopImmediatePropagation()}
function Xg(a){var b=a.document.documentElement;a=Z(a).on("dragstart.drag",Pc,!0);if("onselectstart"in b)a.on("selectstart.drag",Pc,!0);else b.__noselect=b.style.MozUserSelect,b.style.MozUserSelect="none"}function Yg(a,b){var c=a.document.documentElement,d=Z(a).on("dragstart.drag",null);b&&(d.on("click.drag",Pc,!0),setTimeout(function(){d.on("click.drag",null)},0));if("onselectstart"in c)d.on("selectstart.drag",null);else c.style.MozUserSelect=c.__noselect,delete c.__noselect}function ma(a,b,c){a.prototype=
b.prototype=c;c.constructor=a}function sa(a,b){a=Object.create(a.prototype);for(var c in b)a[c]=b[c];return a}function ta(){}function Xa(a){var b;a=(a+"").trim().toLowerCase();return(b=Zg.exec(a))?(b=parseInt(b[1],16),new B(b>>8&15|b>>4&240,b>>4&15|b&240,(b&15)<<4|b&15,1)):(b=$g.exec(a))?se(parseInt(b[1],16)):(b=ah.exec(a))?new B(b[1],b[2],b[3],1):(b=bh.exec(a))?new B(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=ch.exec(a))?te(b[1],b[2],b[3],b[4]):(b=dh.exec(a))?te(255*b[1]/100,255*b[2]/100,255*b[3]/
100,b[4]):(b=eh.exec(a))?ue(b[1],b[2]/100,b[3]/100,1):(b=fh.exec(a))?ue(b[1],b[2]/100,b[3]/100,b[4]):ve.hasOwnProperty(a)?se(ve[a]):"transparent"===a?new B(NaN,NaN,NaN,0):null}function se(a){return new B(a>>16&255,a>>8&255,a&255,1)}function te(a,b,c,d){0>=d&&(a=b=c=NaN);return new B(a,b,c,d)}function Qc(a){a instanceof ta||(a=Xa(a));if(!a)return new B;a=a.rgb();return new B(a.r,a.g,a.b,a.opacity)}function Rc(a,b,c,d){return 1===arguments.length?Qc(a):new B(a,b,c,null==d?1:d)}function B(a,b,c,d){this.r=
+a;this.g=+b;this.b=+c;this.opacity=+d}function Sc(a){a=Math.max(0,Math.min(255,Math.round(a)||0));return(16>a?"0":"")+a.toString(16)}function ue(a,b,c,d){0>=d?a=b=c=NaN:0>=c||1<=c?a=b=NaN:0>=b&&(a=NaN);return new ea(a,b,c,d)}function gh(a){if(a instanceof ea)return new ea(a.h,a.s,a.l,a.opacity);a instanceof ta||(a=Xa(a));if(!a)return new ea;if(a instanceof ea)return a;a=a.rgb();var b=a.r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),g=Math.max(b,c,d),f=NaN,h=g-e,k=(g+e)/2;h?(f=b===g?(c-d)/h+6*(c<d):
c===g?(d-b)/h+2:(b-c)/h+4,h/=.5>k?g+e:2-g-e,f*=60):h=0<k&&1>k?0:f;return new ea(f,h,k,a.opacity)}function ea(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}function Tc(a,b,c){return 255*(60>a?b+(c-b)*a/60:180>a?c:240>a?b+(c-b)*(240-a)/60:b)}function Uc(a){if(a instanceof fa)return new fa(a.l,a.a,a.b,a.opacity);if(a instanceof na){if(isNaN(a.h))return new fa(a.l,0,0,a.opacity);var b=a.h*we;return new fa(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}a instanceof B||(a=Qc(a));var c=Vc(a.r),
d=Vc(a.g),e=Vc(a.b);b=Wc(.2225045*c+.7168786*d+.0606169*e);if(c===d&&d===e)var g=c=b;else g=Wc((.4360747*c+.3850649*d+.1430804*e)/.96422),c=Wc((.0139322*c+.0971045*d+.7141733*e)/.82521);return new fa(116*b-16,500*(g-b),200*(b-c),a.opacity)}function fa(a,b,c,d){this.l=+a;this.a=+b;this.b=+c;this.opacity=+d}function Wc(a){return a>hh?Math.pow(a,1/3):a/xe+ye}function Xc(a){return a>Ja?a*a*a:xe*(a-ye)}function Yc(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Vc(a){return.04045>=
(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function ih(a){if(a instanceof na)return new na(a.h,a.c,a.l,a.opacity);a instanceof fa||(a=Uc(a));if(0===a.a&&0===a.b)return new na(NaN,0,a.l,a.opacity);var b=Math.atan2(a.b,a.a)*ze;return new na(0>b?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function na(a,b,c,d){this.h=+a;this.c=+b;this.l=+c;this.opacity=+d}function oa(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}function Ae(a){return function(){return a}}function jh(a,b){return function(c){return a+
c*b}}function kh(a,b,c){return a=Math.pow(a,c),b=Math.pow(b,c)-a,c=1/c,function(d){return Math.pow(a+d*b,c)}}function lh(a){return 1===(a=+a)?Be:function(b,c){return c-b?kh(b,c,a):Ae(isNaN(b)?c:b)}}function Be(a,b){var c=b-a;return c?jh(a,c):Ae(isNaN(a)?b:a)}function ua(a,b){return a=+a,b-=a,function(c){return a+b*c}}function mh(a){return function(){return a}}function nh(a){return function(b){return a(b)+""}}function oh(a,b){var c=Zc.lastIndex=$c.lastIndex=0,d,e,g,f=-1,h=[],k=[];a+="";for(b+="";(d=
Zc.exec(a))&&(e=$c.exec(b));)(g=e.index)>c&&(g=b.slice(c,g),h[f]?h[f]+=g:h[++f]=g),(d=d[0])===(e=e[0])?h[f]?h[f]+=e:h[++f]=e:(h[++f]=null,k.push({i:f,x:ua(d,e)})),c=$c.lastIndex;c<b.length&&(g=b.slice(c),h[f]?h[f]+=g:h[++f]=g);return 2>h.length?k[0]?nh(k[0].x):mh(b):(b=k.length,function(a){for(var c=0,d;c<b;++c)h[(d=k[c]).i]=d.x(a);return h.join("")})}function Ce(a,b,c,d,e,g){var f,h,k;if(f=Math.sqrt(a*a+b*b))a/=f,b/=f;if(k=a*c+b*d)c-=a*k,d-=b*k;if(h=Math.sqrt(c*c+d*d))c/=h,d/=h,k/=h;a*d<b*c&&(a=
-a,b=-b,k=-k,f=-f);return{translateX:e,translateY:g,rotate:Math.atan2(b,a)*De,skewX:Math.atan(k)*De,scaleX:f,scaleY:h}}function Ee(a,b,c,d){function e(a){return a.length?a.pop()+" ":""}function g(a,d,e,f,g,h){a!==e||d!==f?(g=g.push("translate(",null,b,null,c),h.push({i:g-4,x:ua(a,e)},{i:g-2,x:ua(d,f)})):(e||f)&&g.push("translate("+e+b+f+c)}function f(a,b,c,f){a!==b?(180<a-b?b+=360:180<b-a&&(a+=360),f.push({i:c.push(e(c)+"rotate(",null,d)-2,x:ua(a,b)})):b&&c.push(e(c)+"rotate("+b+d)}function h(a,b,
c,f){a!==b?f.push({i:c.push(e(c)+"skewX(",null,d)-2,x:ua(a,b)}):b&&c.push(e(c)+"skewX("+b+d)}function k(a,b,c,d,f,g){a!==c||b!==d?(f=f.push(e(f)+"scale(",null,",",null,")"),g.push({i:f-4,x:ua(a,c)},{i:f-2,x:ua(b,d)})):1===c&&1===d||f.push(e(f)+"scale("+c+","+d+")")}return function(b,c){var d=[],e=[];b=a(b);c=a(c);g(b.translateX,b.translateY,c.translateX,c.translateY,d,e);f(b.rotate,c.rotate,d,e);h(b.skewX,c.skewX,d,e);k(b.scaleX,b.scaleY,c.scaleX,c.scaleY,d,e);b=c=null;return function(a){for(var b=
-1,c=e.length,f;++b<c;)d[(f=e[b]).i]=f.x(a);return d.join("")}}}function Fe(a){return((a=Math.exp(a))+1/a)/2}function ph(a,b){var c=a[0],d=a[1],e=a[2];a=b[2];var g=b[0]-c,f=b[1]-d,h=g*g+f*f;if(1E-12>h){var k=Math.log(a/e)/Ya;a=function(a){return[c+a*g,d+a*f,e*Math.exp(Ya*a*k)]}}else{var p=Math.sqrt(h);b=(a*a-e*e+4*h)/(4*e*p);a=(a*a-e*e-4*h)/(4*a*p);var m=Math.log(Math.sqrt(b*b+1)-b);k=(Math.log(Math.sqrt(a*a+1)-a)-m)/Ya;a=function(a){a*=k;var b=Fe(m),h=Ya*a+m;var l=((h=Math.exp(2*h))-1)/(h+1);var C=
m;h=((C=Math.exp(C))-1/C)/2;l=e/(2*p)*(b*l-h);return[c+l*g,d+l*f,e*b/Fe(Ya*a+m)]}}a.duration=1E3*k;return a}function Eb(){return Aa||(Ge(qh),Aa=va.now()+Ka)}function qh(){Aa=0}function Fb(){this._call=this._time=this._next=null}function He(a,b,c){var d=new Fb;d.restart(a,b,c);return d}function Ie(){Aa=(La=va.now())+Ka;Ma=Za=0;try{Eb();++Ma;for(var a=$a,b;a;)0<=(b=Aa-a._time)&&a._call.call(null,b),a=a._next;--Ma}finally{Ma=0;a=$a;for(var c=Infinity;a;)if(a._call){c>a._time&&(c=a._time);var d=a;a=a._next}else b=
a._next,a._next=null,a=d?d._next=b:$a=b;ab=d;ad(c);Aa=0}}function rh(){var a=va.now(),b=a-La;1E3<b&&(Ka-=b,La=a)}function ad(a){Ma||(Za&&(Za=clearTimeout(Za)),24<a-Aa?(Infinity>a&&(Za=setTimeout(Ie,a-va.now()-Ka)),wa&&(wa=clearInterval(wa))):(wa||(La=va.now(),wa=setInterval(rh,1E3)),Ma=1,Ge(Ie)))}function Je(a,b,c){var d=new Fb;b=null==b?0:+b;d.restart(function(c){d.stop();a(c+b)},b,c);return d}function Gb(a,b,c,d,e,g){var f=a.__transition;if(!f)a.__transition={};else if(c in f)return;sh(a,c,{name:b,
index:d,group:e,on:th,tween:uh,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:0})}function bd(a,b){a=aa(a,b);if(0<a.state)throw Error("too late; already scheduled");return a}function ha(a,b){a=aa(a,b);if(2<a.state)throw Error("too late; already started");return a}function aa(a,b){a=a.__transition;if(!a||!(a=a[b]))throw Error("transition not found");return a}function sh(a,b,c){function d(k){var p,m;if(1!==c.state)return g();for(n in f){var l=f[n];if(l.name===c.name){if(3===
l.state)return Je(d);4===l.state?(l.state=6,l.timer.stop(),l.on.call("interrupt",a,a.__data__,l.index,l.group),delete f[n]):+n<b&&(l.state=6,l.timer.stop(),delete f[n])}}Je(function(){3===c.state&&(c.state=4,c.timer.restart(e,c.delay,c.time),e(k))});c.state=2;c.on.call("start",a,a.__data__,c.index,c.group);if(2===c.state){c.state=3;h=Array(m=c.tween.length);var n=0;for(p=-1;n<m;++n)if(l=c.tween[n].value.call(a,a.__data__,c.index,c.group))h[++p]=l;h.length=p+1}}function e(b){b=b<c.duration?c.ease.call(null,
b/c.duration):(c.timer.restart(g),c.state=5,1);for(var d=-1,e=h.length;++d<e;)h[d].call(null,b);5===c.state&&(c.on.call("end",a,a.__data__,c.index,c.group),g())}function g(){c.state=6;c.timer.stop();delete f[b];for(var d in f)return;delete a.__transition}var f=a.__transition,h;f[b]=c;c.timer=He(function(a){c.state=1;c.timer.restart(d,c.delay,c.time);c.delay<=a&&d(a-c.delay)},0,c.time)}function Na(a,b){var c=a.__transition,d,e=!0,g;if(c){b=null==b?null:b+"";for(g in c)if((d=c[g]).name!==b)e=!1;else{var f=
2<d.state&&5>d.state;d.state=6;d.timer.stop();f&&d.on.call("interrupt",a,a.__data__,d.index,d.group);delete c[g]}e&&delete a.__transition}}function vh(a,b){var c,d;return function(){var e=ha(this,a),g=e.tween;if(g!==c){d=c=g;g=0;for(var f=d.length;g<f;++g)if(d[g].name===b){d=d.slice();d.splice(g,1);break}}e.tween=d}}function wh(a,b,c){var d,e;if("function"!==typeof c)throw Error();return function(){var g=ha(this,a),f=g.tween;if(f!==d){e=(d=f).slice();f={name:b,value:c};for(var h=0,k=e.length;h<k;++h)if(e[h].name===
b){e[h]=f;break}h===k&&e.push(f)}g.tween=e}}function cd(a,b,c){var d=a._id;a.each(function(){var a=ha(this,d);(a.value||(a.value={}))[b]=c.apply(this,arguments)});return function(a){return aa(a,d).value[b]}}function Ke(a,b){var c;return("number"===typeof b?ua:b instanceof Xa?Le:(c=Xa(b))?(b=c,Le):oh)(a,b)}function xh(a){return function(){this.removeAttribute(a)}}function yh(a){return function(){this.removeAttributeNS(a.space,a.local)}}function zh(a,b,c){var d,e;return function(){var g=this.getAttribute(a);
return g===c?null:g===d?e:e=b(d=g,c)}}function Ah(a,b,c){var d,e;return function(){var g=this.getAttributeNS(a.space,a.local);return g===c?null:g===d?e:e=b(d=g,c)}}function Bh(a,b,c){var d,e,g;return function(){var f=c(this);if(null==f)return void this.removeAttribute(a);var h=this.getAttribute(a);return h===f?null:h===d&&f===e?g:g=b(d=h,e=f)}}function Ch(a,b,c){var d,e,g;return function(){var f=c(this);if(null==f)return void this.removeAttributeNS(a.space,a.local);var h=this.getAttributeNS(a.space,
a.local);return h===f?null:h===d&&f===e?g:g=b(d=h,e=f)}}function Dh(a,b){function c(){var c=this,e=b.apply(c,arguments);return e&&function(b){c.setAttributeNS(a.space,a.local,e(b))}}c._value=b;return c}function Eh(a,b){function c(){var c=this,e=b.apply(c,arguments);return e&&function(b){c.setAttribute(a,e(b))}}c._value=b;return c}function Fh(a,b){return function(){bd(this,a).delay=+b.apply(this,arguments)}}function Gh(a,b){return b=+b,function(){bd(this,a).delay=b}}function Hh(a,b){return function(){ha(this,
a).duration=+b.apply(this,arguments)}}function Ih(a,b){return b=+b,function(){ha(this,a).duration=b}}function Jh(a,b){if("function"!==typeof b)throw Error();return function(){ha(this,a).ease=b}}function Kh(a){return(a+"").trim().split(/^|\s+/).every(function(a){var b=a.indexOf(".");0<=b&&(a=a.slice(0,b));return!a||"start"===a})}function Lh(a,b,c){var d,e,g=Kh(b)?bd:ha;return function(){var f=g(this,a),h=f.on;if(h!==d)(e=(d=h).copy()).on(b,c);f.on=e}}function Mh(a){return function(){var b=this.parentNode,
c;for(c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}}function Nh(a,b){var c,d,e;return function(){var g=Ga(this,a),f=(this.style.removeProperty(a),Ga(this,a));return g===f?null:g===c&&f===d?e:e=b(c=g,d=f)}}function Oh(a){return function(){this.style.removeProperty(a)}}function Ph(a,b,c){var d,e;return function(){var g=Ga(this,a);return g===c?null:g===d?e:e=b(d=g,c)}}function Qh(a,b,c){var d,e,g;return function(){var f=Ga(this,a),h=c(this);null==h&&(h=(this.style.removeProperty(a),
Ga(this,a)));return f===h?null:f===d&&h===e?g:g=b(d=f,e=h)}}function Rh(a,b,c){function d(){var d=this,g=b.apply(d,arguments);return g&&function(b){d.style.setProperty(a,g(b),c)}}d._value=b;return d}function Sh(a){return function(){this.textContent=a}}function Th(a){return function(){var b=a(this);this.textContent=null==b?"":b}}function pa(a,b,c,d){this._groups=a;this._parents=b;this._name=c;this._id=d}function Hb(a){return function(){return a}}function Uh(a,b,c){this.target=a;this.type=b;this.transform=
c}function O(a,b,c){this.k=a;this.x=b;this.y=c}function Me(a){return a.__zoom||Oa}function bb(){u.preventDefault();u.stopImmediatePropagation()}function Vh(){return!u.button}function Wh(){var a=this;if(a instanceof SVGElement){a=a.ownerSVGElement||a;var b=a.width.baseVal.value;a=a.height.baseVal.value}else b=a.clientWidth,a=a.clientHeight;return[[0,0],[b,a]]}function Ne(){return this.__zoom||Oa}function Xh(){return-u.deltaY*(u.deltaMode?120:1)/500}function Yh(){return"ontouchstart"in this}function Zh(a,
b,c){var d=a.invertX(b[0][0])-c[0][0],e=a.invertX(b[1][0])-c[1][0],g=a.invertY(b[0][1])-c[0][1];b=a.invertY(b[1][1])-c[1][1];return a.translate(e>d?(d+e)/2:Math.min(0,d)||Math.max(0,e),b>g?(g+b)/2:Math.min(0,g)||Math.max(0,b))}function $h(){function a(a){a.property("__zoom",Ne).on("wheel.zoom",h).on("mousedown.zoom",k).on("dblclick.zoom",p).filter(v).on("touchstart.zoom",m).on("touchmove.zoom",l).on("touchend.zoom touchcancel.zoom",n).style("touch-action","none").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)")}function b(a,b){b=Math.max(Ta[0],Math.min(Ta[1],b));return b===a.k?a:new O(b,a.x,a.y)}function c(a,b,c){var d=b[0]-c[0]*a.k;b=b[1]-c[1]*a.k;return d===a.x&&b===a.y?a:new O(a.k,d,b)}function d(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function e(a,b,c){a.on("start.zoom",function(){g(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){g(this,arguments).end()}).tween("zoom",function(){var a=arguments,e=g(this,a),f=r.apply(this,a),h=c||d(f),k=Math.max(f[1][0]-
f[0][0],f[1][1]-f[0][1]);f=this.__zoom;var p="function"===typeof b?b.apply(this,a):b,m=x(f.invert(h).concat(k/f.k),p.invert(h).concat(k/p.k));return function(a){if(1===a)a=p;else{a=m(a);var b=k/a[2];a=new O(b,h[0]-a[0]*b,h[1]-a[1]*b)}e.zoom(null,a)}})}function g(a,b){for(var c=0,d=w.length,e;c<d;++c)if((e=w[c]).that===a)return e;return new f(a,b)}function f(a,b){this.that=a;this.args=b;this.index=-1;this.active=0;this.extent=r.apply(a,b)}function h(){if(q.apply(this,arguments)){var a=g(this,arguments),
d=this.__zoom,e=Math.max(Ta[0],Math.min(Ta[1],d.k*Math.pow(2,z.apply(this,arguments)))),f=Ia(this);if(a.wheel){if(a.mouse[0][0]!==f[0]||a.mouse[0][1]!==f[1])a.mouse[1]=d.invert(a.mouse[0]=f);clearTimeout(a.wheel)}else{if(d.k===e)return;a.mouse=[f,d.invert(f)];Na(this);a.start()}bb();a.wheel=setTimeout(function(){a.wheel=null;a.end()},150);a.zoom("mouse",t(c(b(d,e),a.mouse[0],a.mouse[1]),a.extent,y))}}function k(){if(!B&&q.apply(this,arguments)){var a=g(this,arguments),b=Z(u.view).on("mousemove.zoom",
function(){bb();if(!a.moved){var b=u.clientX-e,d=u.clientY-f;a.moved=b*b+d*d>Y}a.zoom("mouse",t(c(a.that.__zoom,a.mouse[0]=Ia(a.that),a.mouse[1]),a.extent,y))},!0).on("mouseup.zoom",function(){b.on("mousemove.zoom mouseup.zoom",null);Yg(u.view,a.moved);bb();a.end()},!0),d=Ia(this),e=u.clientX,f=u.clientY;Xg(u.view);u.stopImmediatePropagation();a.mouse=[d,this.__zoom.invert(d)];Na(this);a.start()}}function p(){if(q.apply(this,arguments)){var d=this.__zoom,f=Ia(this),g=d.invert(f);d=t(c(b(d,d.k*(u.shiftKey?
.5:2)),f,g),r.apply(this,arguments),y);bb();0<J?Z(this).transition().duration(J).call(e,d,f):Z(this).call(a.transform,d)}}function m(){if(q.apply(this,arguments)){var a=g(this,arguments),b=u.changedTouches,c=b.length,d;u.stopImmediatePropagation();for(d=0;d<c;++d){var e=b[d];var f=re(this,b,e.identifier);f=[f,this.__zoom.invert(f),e.identifier];if(a.touch0)a.touch1||(a.touch1=f);else{a.touch0=f;var h=!0}}if(I&&(I=clearTimeout(I),!a.touch1)){a.end();(f=Z(this).on("dblclick.zoom"))&&f.apply(this,arguments);
return}h&&(I=setTimeout(function(){I=null},500),Na(this),a.start())}}function l(){var a=g(this,arguments),d=u.changedTouches,e=d.length,f;bb();I&&(I=clearTimeout(I));for(f=0;f<e;++f){var h=d[f];var k=re(this,d,h.identifier);a.touch0&&a.touch0[2]===h.identifier?a.touch0[0]=k:a.touch1&&a.touch1[2]===h.identifier&&(a.touch1[0]=k)}h=a.that.__zoom;if(a.touch1){k=a.touch0[0];d=a.touch0[1];f=a.touch1[0];e=a.touch1[1];var p=(p=f[0]-k[0])*p+(p=f[1]-k[1])*p;var m=(m=e[0]-d[0])*m+(m=e[1]-d[1])*m;h=b(h,Math.sqrt(p/
m));k=[(k[0]+f[0])/2,(k[1]+f[1])/2];p=[(d[0]+e[0])/2,(d[1]+e[1])/2]}else if(a.touch0)k=a.touch0[0],p=a.touch0[1];else return;a.zoom("touch",t(c(h,k,p),a.extent,y))}function n(){var a=g(this,arguments),b=u.changedTouches,c=b.length,d;u.stopImmediatePropagation();B&&clearTimeout(B);B=setTimeout(function(){B=null},500);for(d=0;d<c;++d){var e=b[d];a.touch0&&a.touch0[2]===e.identifier?delete a.touch0:a.touch1&&a.touch1[2]===e.identifier&&delete a.touch1}a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1);
a.touch0?a.touch0[1]=this.__zoom.invert(a.touch0[0]):a.end()}var q=Vh,r=Wh,t=Zh,z=Xh,v=Yh,Ta=[0,Infinity],y=[[-Infinity,-Infinity],[Infinity,Infinity]],J=250,x=ph,w=[],K=Mc("start","zoom","end"),I,B,Y=0;a.transform=function(a,b){var c=a.selection?a.selection():a;c.property("__zoom",Ne);a!==c?e(a,b):c.interrupt().each(function(){g(this,arguments).start().zoom(null,"function"===typeof b?b.apply(this,arguments):b).end()})};a.scaleBy=function(b,c){a.scaleTo(b,function(){var a=this.__zoom.k,b="function"===
typeof c?c.apply(this,arguments):c;return a*b})};a.scaleTo=function(e,f){a.transform(e,function(){var a=r.apply(this,arguments),e=this.__zoom,g=d(a),h=e.invert(g),k="function"===typeof f?f.apply(this,arguments):f;return t(c(b(e,k),g,h),a,y)})};a.translateBy=function(b,c,d){a.transform(b,function(){return t(this.__zoom.translate("function"===typeof c?c.apply(this,arguments):c,"function"===typeof d?d.apply(this,arguments):d),r.apply(this,arguments),y)})};a.translateTo=function(b,c,e){a.transform(b,
function(){var a=r.apply(this,arguments),b=this.__zoom,f=d(a);return t(Oa.translate(f[0],f[1]).scale(b.k).translate("function"===typeof c?-c.apply(this,arguments):-c,"function"===typeof e?-e.apply(this,arguments):-e),a,y)})};f.prototype={start:function(){1===++this.active&&(this.index=w.push(this)-1,this.emit("start"));return this},zoom:function(a,b){this.mouse&&"mouse"!==a&&(this.mouse[1]=b.invert(this.mouse[0]));this.touch0&&"touch"!==a&&(this.touch0[1]=b.invert(this.touch0[0]));this.touch1&&"touch"!==
a&&(this.touch1[1]=b.invert(this.touch1[0]));this.that.__zoom=b;this.emit("zoom");return this},end:function(){0===--this.active&&(w.splice(this.index,1),this.index=-1,this.emit("end"));return this},emit:function(b){var c=new Uh(a,b,this.that.__zoom),d=K.apply;b=[b,this.that,this.args];var e=u;c.sourceEvent=u;u=c;try{d.apply(K,b)}finally{u=e}}};a.wheelDelta=function(b){return arguments.length?(z="function"===typeof b?b:Hb(+b),a):z};a.filter=function(b){return arguments.length?(q="function"===typeof b?
b:Hb(!!b),a):q};a.touchable=function(b){return arguments.length?(v="function"===typeof b?b:Hb(!!b),a):v};a.extent=function(b){return arguments.length?(r="function"===typeof b?b:Hb([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),a):r};a.scaleExtent=function(b){return arguments.length?(Ta[0]=+b[0],Ta[1]=+b[1],a):[Ta[0],Ta[1]]};a.translateExtent=function(b){return arguments.length?(y[0][0]=+b[0][0],y[1][0]=+b[1][0],y[0][1]=+b[0][1],y[1][1]=+b[1][1],a):[[y[0][0],y[0][1]],[y[1][0],y[1][1]]]};a.constrain=function(b){return arguments.length?
(t=b,a):t};a.duration=function(b){return arguments.length?(J=+b,a):J};a.interpolate=function(b){return arguments.length?(x=b,a):x};a.on=function(){var b=K.on.apply(K,arguments);return b===K?a:b};a.clickDistance=function(b){return arguments.length?(Y=(b=+b)*b,a):Math.sqrt(Y)};return a}function ai(a){return function(){return a}}function dd(a,b){if(a===b||a!==a)return ai(a);var c=typeof a;if(c!==typeof b||Array.isArray(a)!==Array.isArray(b))throw Error("Cannot interpolate values of different type");
if(Array.isArray(a)){var d=b.map(function(b,c){return dd(a[c],b)});return function(a){return d.map(function(b){return b(a)})}}if("object"===c){if(!a||!b)throw Error("Object cannot be null");if("[object Date]"===Object.prototype.toString.call(a)&&"[object Date]"===Object.prototype.toString.call(b)){a=a.getTime();b=b.getTime();var e=b-a;return function(b){return new Date(a+b*e)}}var g=Object.keys(b),f={},h={};g.forEach(function(c){f[c]=dd(a[c],b[c])});return function(a){g.forEach(function(b){h[b]=f[b](a)});
return h}}if("number"===c){var k=b-a;return function(b){return a+b*k}}throw Error("Cannot interpolate "+c+" values");}function bi(a){return a}function ci({clientWidth:a,clientHeight:b}){return Math.min(a,b)}function di({msx:a,msy:b}){return void 0!=a&&void 0!=b}function ei({transform:a,msx:b,msy:c}){return a&&void 0!=b&&void 0!=c?[a.invertX(b),a.invertY(c)]:null}function fi({scale:a,translateX:b,translateY:c,minSize:d,clientWidth:e,clientHeight:g}){b=-b/a;c=-c/a;return[[b/d,(b+e/a)/d],[c/d,(c+g/a)/
d]]}function gi({extent:a}){return(a[0][0]+a[0][1])/2}function hi({extent:a}){return(a[1][0]+a[1][1])/2}function ii(){let {z:a,scaleExtent:b,minSize:c,homeScale:d,homeX:e,homeY:g,disableBehaviors:f}=this.get(),h=this;a.wheelDelta(()=>{let a=-u.deltaY*(u.deltaMode?120:1)/500;u.ctrlKey&&(a*=10);return a});a.scaleExtent(b);let k=Z(this.refs.root);this.set({selection:k,el:this.refs.root});f||a(k);a.filter(this.zoomEventFilter.bind(this));a.on("zoom",()=>{this.onzoom(h)});a.translateTo(k,e*c,g*c);a.scaleTo(k,
d)}function Oe({changed:a,current:b,previous:c}){void 0!=c&&(a.clientWidth||a.clientHeight)&&b.el&&this.update();let {}=this.get()}function ji(a,b){function c(){a.set({clientWidth:f.clientWidth,clientHeight:f.clientHeight})}function d(b){a.mouseMove(b)}function e(b){a.set({msx:null,msy:null})}function g(b){a.set({msx:null,msy:null})}var f,h=a._slotted.default,k;return{c(){f=l("div");a.root._beforecreate.push(c);f.addEventListener("mousemove",d,void 0);f.addEventListener("mousedown",e,void 0);f.addEventListener("mouseout",
g,void 0);f.className="d3zoom svelte-kaete3 svelte-ref-root"},m(b,d){b.insertBefore(f,d);h&&f.appendChild(h);k=ya(f,c);a.refs.root=f},p:M,d(b){b&&v(f);h&&xa(f,h);k.cancel();f.removeEventListener("mousemove",d,void 0);f.removeEventListener("mousedown",e,void 0);f.removeEventListener("mouseout",g,void 0);a.refs.root===f&&(a.refs.root=null)}}}function cb(a){x(this,a);this.refs={};this._state=r({z:$h(),el:null,selection:null,transform:null,scaleExtent:[1,48],homeScale:1,homeX:.5,homeY:.5,scale:null,translateX:null,
translateY:null,k:1,x:0,y:0,msx:null,msy:null,disableBehaviors:!1,scrollWheel:!1},a.data);this._recompute({clientWidth:1,clientHeight:1,msx:1,msy:1,transform:1,minSize:1,scale:1,translateX:1,translateY:1,extent:1},this._state);this._intro=!0;this._handlers.state=[Oe];this._slotted=a.slots||{};Oe.call(this,{changed:da({},this._state),current:this._state});this._fragment=ji(this,this._state);this.root._oncreate.push(()=>{ii.call(this);this.fire("update",{changed:da({},this._state),current:this._state})});
a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function ki({layers:a,layer:b}){if(null==a)return 0;let c=0;a[b].forEach((a)=>{a.forEach((a)=>{a&&500<a.num_activations&&(a=a.full_class_values[0],a>c&&(c=a))})});return c}function li({viewWidth:a,screenResolution:b}){return a*b}function mi({viewHeight:a,screenResolution:b}){return a*b}function ni({scale:a,gridSize:b,config:c,classHeatmap:d,w:e,h:g,autoGridSizeMultiplier:f}){a=-1<b?+b:Math.floor(Math.sqrt(Math.max(e,g)*a/80/f/20));
c&&(a=Math.min(c.grid_size.length-1,a));-1<d&&(a=Math.min(2,a));return a}function oi({currentZoomIndex:a,layers:b}){return b?b[a]:[[]]}function pi({labelsBufferContext:a,labels:b,fontSize:c,textColor:d,textShadowColor:e}){a&&b&&(a.globalAlpha=1,a.font=c+"px Helvetica",b.forEach((b,c)=>{a.lineWidth=3;a.lineJoin="round";a.strokeStyle=e;a.strokeText(b,c%10*150+10,20*Math.floor(c/10+1),80,15);a.fillStyle=d;a.fillStyle=d;a.fillText(b,c%10*150+10,20*Math.floor(c/10+1),80,15)}))}function qi({hoverIconData:a,
mouseGlobalPosition:b}){return b&&a&&a.gcx}function ri({currentLayerData:a,mouseGlobalPosition:b,w:c,h:d}){if(a){let e=a.length;if(b){let g=Math.floor(b[0]/Math.min(c,d)*e);b=Math.floor(b[1]/Math.min(c,d)*e);return a[b]&&a[b][g]?a[b][g]:{}}}return{}}function si({hoverIconData:a,scale:b,w:c,h:d,translateX:e}){return a.gy*b*Math.min(c,d)+e}function ti({hoverIconData:a,scale:b,w:c,h:d,translateY:e}){return a.gx*b*Math.min(c,d)+e}function ui({hoverIconData:a,scale:b,w:c,h:d}){return a.gw*b*Math.min(c,
d)}function vi({mouseGlobalPosition:a,hoverIconData:b,enableHover:c}){return c&&a&&b&&b.gw}function wi(){let {tooltip:a}=this.store.get();this.refs.d3Zoom.on("zoom",()=>{a.hide()});let b=document.createElement("canvas");b.width=1500;b.height=2040;let c=b.getContext("2d");this.set({labelsBufferCanvas:b,labelsBufferContext:c})}function xi({changed:a,current:b}){if(!b.context||a.viewWidth||a.viewHeight){var c=this.refs.labelsCanvas.getContext("2d");c.imageSmoothingEnabled=!1;this.set({context:this.refs.canvas.getContext("2d"),
labelsContext:c})}(a.loading||a.autoGridSizeMultiplier||a.labels||a.density||a.maxAttributionValue||a.classHeatmap||a.classHeatmapMultiplier||a.classHeatmapPositive||a.showLabels||a.viewWidth||a.viewHeight||a.scale||a.translateX||a.translateY||a.iconCrop||a.gridSize||a.layers)&&this.render();if(a.hoverIconData){var {tooltip:c}=this.store.get();let {showHoverIcon:a}=this.get();a?c.show(b.hoverIconData):c.hide()}if(a.showHoverIcon&&0==b.showHoverIcon){var {tooltip:a}=this.store.get();a.hide()}}function yi(a,
b){function c(){a.set({viewWidth:g.clientWidth,viewHeight:g.clientHeight})}var d,e,g,f,h,k,p,m,n,A,r,t,u,z={};if(void 0!==b.ready){z.ready=b.ready;var w=!0}var x=new Pb({root:a.root,store:a.store,data:z,_bind(b,c){var d={};!w&&b.ready&&(d.ready=c.ready);a._set(d);w=void 0}});a.root._beforecreate.push(()=>{x._bind({ready:1},x.get())});var y=b.ready&&Pe(a,b),J=b.showHoverIcon&&Qe(a,b);z={homeX:b.homeX,homeY:b.homeY,homeScale:b.homeScale};if(void 0!==b.scale){z.scale=b.scale;var B=!0}if(void 0!==b.translateX){z.translateX=
b.translateX;var Va=!0}if(void 0!==b.translateY){z.translateY=b.translateY;var K=!0}if(void 0!==b.mouseOver){z.mouseOver=b.mouseOver;var I=!0}if(void 0!==b.mouseGlobalPosition){z.mouseGlobalPosition=b.mouseGlobalPosition;var D=!0}if(void 0!==b.extent){z.extent=b.extent;var Y=!0}if(void 0!==b.scrollWheel){z.scrollWheel=b.scrollWheel;var Sa=!0}if(void 0!==b.disableBehaviors){z.disableBehaviors=b.disableBehaviors;var za=!0}if(void 0!==b.gcx){z.gcx=b.gcx;var la=!0}if(void 0!==b.gcy){z.gcy=b.gcy;var Ua=
!0}var E=new cb({root:a.root,store:a.store,slots:{default:X()},data:z,_bind(b,c){var d={};!B&&b.scale&&(d.scale=c.scale);!Va&&b.translateX&&(d.translateX=c.translateX);!K&&b.translateY&&(d.translateY=c.translateY);!I&&b.mouseOver&&(d.mouseOver=c.mouseOver);!D&&b.mouseGlobalPosition&&(d.mouseGlobalPosition=c.mouseGlobalPosition);!Y&&b.extent&&(d.extent=c.extent);!Sa&&b.scrollWheel&&(d.scrollWheel=c.scrollWheel);!za&&b.disableBehaviors&&(d.disableBehaviors=c.disableBehaviors);!la&&b.gcx&&(d.gcx=c.gcx);
!Ua&&b.gcy&&(d.gcy=c.gcy);a._set(d);Ua=la=za=Sa=Y=D=I=K=Va=B=void 0}});a.root._beforecreate.push(()=>{E._bind({scale:1,translateX:1,translateY:1,mouseOver:1,mouseGlobalPosition:1,extent:1,scrollWheel:1,disableBehaviors:1,gcx:1,gcy:1},E.get())});a.refs.d3Zoom=E;return{c(){x._fragment.c();d=q("\n\n");y&&y.c();e=q("\n\n");g=l("div");f=l("canvas");p=q("\n    ");m=l("canvas");r=q("\n    ");J&&J.c();t=document.createComment("");E._fragment.c();f.width=h=b.viewWidth*b.screenResolution;f.height=k=b.viewHeight*
b.screenResolution;f.className="svelte-w9b5xg svelte-ref-canvas";m.width=n=b.viewWidth*b.screenResolution;m.height=A=b.viewHeight*b.screenResolution;m.className="svelte-w9b5xg svelte-ref-labelsCanvas";a.root._beforecreate.push(c);g.className="svelte-w9b5xg svelte-ref-root"},m(b,h){x._mount(b,h);b.insertBefore(d,h);y&&y.m(b,h);b.insertBefore(e,h);b.insertBefore(g,h);E._slotted.default.appendChild(f);a.refs.canvas=f;E._slotted.default.appendChild(p);E._slotted.default.appendChild(m);a.refs.labelsCanvas=
m;E._slotted.default.appendChild(r);J&&J.m(E._slotted.default,null);E._slotted.default.appendChild(t);E._mount(g,null);u=ya(g,c);a.refs.root=g},p(c,d){b=d;d={};!w&&c.ready&&(d.ready=b.ready,w=void 0!==b.ready);x._set(d);w=void 0;b.ready?y?y.p(c,b):(y=Pe(a,b),y.c(),y.m(e.parentNode,e)):y&&(y.d(1),y=null);(c.viewWidth||c.screenResolution)&&h!==(h=b.viewWidth*b.screenResolution)&&(f.width=h);(c.viewHeight||c.screenResolution)&&k!==(k=b.viewHeight*b.screenResolution)&&(f.height=k);(c.viewWidth||c.screenResolution)&&
n!==(n=b.viewWidth*b.screenResolution)&&(m.width=n);(c.viewHeight||c.screenResolution)&&A!==(A=b.viewHeight*b.screenResolution)&&(m.height=A);b.showHoverIcon?J?J.p(c,b):(J=Qe(a,b),J.c(),J.m(t.parentNode,t)):J&&(J.d(1),J=null);d={};c.homeX&&(d.homeX=b.homeX);c.homeY&&(d.homeY=b.homeY);c.homeScale&&(d.homeScale=b.homeScale);!B&&c.scale&&(d.scale=b.scale,B=void 0!==b.scale);!Va&&c.translateX&&(d.translateX=b.translateX,Va=void 0!==b.translateX);!K&&c.translateY&&(d.translateY=b.translateY,K=void 0!==
b.translateY);!I&&c.mouseOver&&(d.mouseOver=b.mouseOver,I=void 0!==b.mouseOver);!D&&c.mouseGlobalPosition&&(d.mouseGlobalPosition=b.mouseGlobalPosition,D=void 0!==b.mouseGlobalPosition);!Y&&c.extent&&(d.extent=b.extent,Y=void 0!==b.extent);!Sa&&c.scrollWheel&&(d.scrollWheel=b.scrollWheel,Sa=void 0!==b.scrollWheel);!za&&c.disableBehaviors&&(d.disableBehaviors=b.disableBehaviors,za=void 0!==b.disableBehaviors);!la&&c.gcx&&(d.gcx=b.gcx,la=void 0!==b.gcx);!Ua&&c.gcy&&(d.gcy=b.gcy,Ua=void 0!==b.gcy);E._set(d);
Ua=la=za=Sa=Y=D=I=K=Va=B=void 0},d(b){x.destroy(b);b&&v(d);y&&y.d(b);b&&(v(e),v(g));a.refs.canvas===f&&(a.refs.canvas=null);a.refs.labelsCanvas===m&&(a.refs.labelsCanvas=null);J&&J.d();E.destroy();a.refs.d3Zoom===E&&(a.refs.d3Zoom=null);u.cancel();a.refs.root===g&&(a.refs.root=null)}}}function Pe(a,b){var c={id:b.id,layer:b.layer,layout:b.layout,classFilter:b.classFilter,filter:b.filter};if(void 0!==b.config){c.config=b.config;var d=!0}if(void 0!==b.layers){c.layers=b.layers;var e=!0}if(void 0!==
b.labels){c.labels=b.labels;var g=!0}if(void 0!==b.loading){c.loading=b.loading;var f=!0}var h=new ce({root:a.root,store:a.store,data:c,_bind(b,c){var h={};!d&&b.config&&(h.config=c.config);!e&&b.layers&&(h.layers=c.layers);!g&&b.labels&&(h.labels=c.labels);!f&&b.loading&&(h.loading=c.loading);a._set(h);f=g=e=d=void 0}});a.root._beforecreate.push(()=>{h._bind({config:1,layers:1,labels:1,loading:1},h.get())});return{c(){h._fragment.c()},m(a,b){h._mount(a,b)},p(a,c){b=c;c={};a.id&&(c.id=b.id);a.layer&&
(c.layer=b.layer);a.layout&&(c.layout=b.layout);a.classFilter&&(c.classFilter=b.classFilter);a.filter&&(c.filter=b.filter);!d&&a.config&&(c.config=b.config,d=void 0!==b.config);!e&&a.layers&&(c.layers=b.layers,e=void 0!==b.layers);!g&&a.labels&&(c.labels=b.labels,g=void 0!==b.labels);!f&&a.loading&&(c.loading=b.loading,f=void 0!==b.loading);h._set(c);f=g=e=d=void 0},d(a){h.destroy(a)}}}function Qe(a,b){var c;return{c(){c=l("div");n(c,"left",""+b.hoverIconX+"px");n(c,"top",""+b.hoverIconY+"px");n(c,
"width",""+b.hoverIconW+"px");n(c,"height",""+b.hoverIconW+"px");c.className="svelte-w9b5xg svelte-ref-hover"},m(b,e){b.insertBefore(c,e);a.refs.hover=c},p(a,b){a.hoverIconX&&n(c,"left",""+b.hoverIconX+"px");a.hoverIconY&&n(c,"top",""+b.hoverIconY+"px");a.hoverIconW&&(n(c,"width",""+b.hoverIconW+"px"),n(c,"height",""+b.hoverIconW+"px"))},d(b){b&&v(c);a.refs.hover===c&&(a.refs.hover=null)}}}function Bc(a){x(this,a);this.refs={};this._state=r({ready:!0,id:"inceptionv1_mixed4c",config:null,layers:null,
layer:0,layout:0,classFilter:0,filter:0,context:null,alphaAttributionFactor:.02,density:1,classHeatmap:-1,classHeatmapMultiplier:1,classHeatmapPositive:1,iconCrop:.02,autoGridSizeMultiplier:.5,gridSize:null,homeX:.5,homeY:.5,homeScale:1,enableClickToZoom:!0,enableHover:!0,enableDragToPan:!0,backgroundColor:"white",strokeColor:"rgb(220, 220, 220)",strokeThickness:1,imageSmoothing:!1,fontSize:10,textColor:"white",textShadowColor:"rgba(0, 0, 0, 0.6)",showLabels:!0,screenResolution:1},a.data);this._recompute({layers:1,
layer:1,viewWidth:1,screenResolution:1,viewHeight:1,scale:1,gridSize:1,config:1,classHeatmap:1,w:1,h:1,autoGridSizeMultiplier:1,currentZoomIndex:1,labelsBufferContext:1,labels:1,fontSize:1,textColor:1,textShadowColor:1,currentLayerData:1,mouseGlobalPosition:1,translateX:1,translateY:1,hoverIconData:1,enableHover:1},this._state);this._intro=!0;this._handlers.update=[xi];this._fragment=yi(this,this._state);this.root._oncreate.push(()=>{wi.call(this);this.fire("update",{changed:da({},this._state),current:this._state})});
a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function zi(a,b){var c,d,e=a._slotted.head,g,f,h=a._slotted.body;return{c(){c=l("div");d=l("div");g=q("\n  ");f=l("div");d.className="head svelte-l56anp";f.className="body svelte-l56anp";c.className="root svelte-l56anp"},m(a,b){a.insertBefore(c,b);c.appendChild(d);e&&d.appendChild(e);c.appendChild(g);c.appendChild(f);h&&f.appendChild(h)},p:M,d(a){a&&v(c);e&&xa(d,e);h&&xa(f,h)}}}function ed(a){x(this,a);this._state=r({},a.data);
this._intro=!0;this._slotted=a.slots||{};this._fragment=zi(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Ai({clientWidth:a,minWidth:b}){return a/Math.max(a,b)}function Bi({clientWidth:a,minWidth:b}){return Math.max(a,b)+"px"}function Ci({clientHeight:a,scale:b}){return a/b+"px"}function Di(a,b){var c,d,e=a._slotted.default;return{c(){c=l("div");d=l("div");n(d,"transform","scale("+b.scale+")");n(d,"width",b.finalWidth);n(d,"height",""+b.finalHeight+b.style+
"\n    ");d.className="svelte-fkjf8u svelte-ref-frame";c.className="svelte-fkjf8u svelte-ref-root"},m(b,f){b.insertBefore(c,f);c.appendChild(d);e&&d.appendChild(e);a.refs.frame=d;a.refs.root=c},p(a,b){a.scale&&n(d,"transform","scale("+b.scale+")");a.finalWidth&&n(d,"width",b.finalWidth);(a.finalHeight||a.style)&&n(d,"height",""+b.finalHeight+b.style+"\n    ")},d(b){b&&v(c);e&&xa(d,e);a.refs.frame===d&&(a.refs.frame=null);a.refs.root===c&&(a.refs.root=null)}}}function fd(a){x(this,a);this.refs={};
this._state=r({style:"",aspectRatio:1,minWidth:800,clientWidth:1E3,clientHeight:1E3},a.data);this._recompute({clientWidth:1,minWidth:1,width:1,clientHeight:1,scale:1},this._state);this._intro=!0;this._slotted=a.slots||{};this._fragment=Di(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Ei({gridSize:a}){return 20*(a+1)}function Fi({iconScaleFactor:a,realGridSize:b}){return 1E6/(b*b*a)}function Gi(a,b){function c(){a.set({showLabels:db.checked})}function d(){a.set({enableHover:eb.checked})}
function e(){a.store.set({scroll:fb.checked})}function g(){a.set({gridSize:P.__value})}function f(){a.set({gridSize:Q.__value})}function h(){a.set({gridSize:R.__value})}function k(){a.set({gridSize:S.__value})}function p(){a.set({gridSize:T.__value})}function m(){a.set({gridSize:U.__value})}function C(){a.set({autoGridSizeMultiplier:Gc(ia.value)})}function A(){a.set({density:Gc(ja.value)})}function r(){a.set({classHeatmapPositive:V.__value})}function v(){a.set({classHeatmapPositive:W.__value})}function u(){a.set({classHeatmapMultiplier:Gc(ka.value)})}
function z(b){a.toggle()}var x,w,y,B,D,Va,K,I,M,Y,Sa,za,la,Ua,E,F,Ac,H,aa,G,ea,fa,Re,Qb,gb,hb,db,na,pa,O,eb,ta,ua,da,fb,xa,ya,Z,Ba,L,oa,Aa,ha,P,Ga,Ha,ma,Q,Ja,Ma,qa,R,Ra,Wa,sa,S,Xa,Ya,va,T,Za,ab,wa,U,bb,jb,Ib,Da,mb,$b,ob,ia,pb,Rb,ac,rb,bc,sb,ja,vb,ba,Ea,wb,cc,V,xb,yb,dc,W,zb,Ab,Fa,Bb,ec,Cb,ka,Db,Ca,Ia,Eb,Ka,Fb,La=Sb(b.gcx),$a,Gb,Na,Hb,Oa=Sb(b.gcy),cb,Kb,Pa,Lb,Qa=Sb(b.scale),kb,Mb,Cc,Tb,Dc=b.showOptions?"fewer options":"more options",lb,Ec,Nb={};if(void 0!==b.classHeatmap){Nb.classHeatmap=b.classHeatmap;
var fc=!0}var Ub=new Ic({root:a.root,store:a.store,data:Nb,_bind(b,c){var d={};!fc&&b.classHeatmap&&(d.classHeatmap=c.classHeatmap);a._set(d);fc=void 0}});a.root._beforecreate.push(()=>{Ub._bind({classHeatmap:1},Ub.get())});var Vb=new ed({root:a.root,store:a.store,slots:{default:X(),body:X(),head:X()}}),Ob={classHeatmap:b.classHeatmap};if(void 0!==b.layerName){Ob.layerName=b.layerName;var gc=!0}var Wb=new Sd({root:a.root,store:a.store,data:Ob,_bind(b,c){var d={};!gc&&b.layerName&&(d.layerName=c.layerName);
a._set(d);gc=void 0}});a.root._beforecreate.push(()=>{Wb._bind({layerName:1},Wb.get())});var Xb=new ed({root:a.root,store:a.store,slots:{default:X(),body:X(),head:X()}}),ca={id:"inceptionv1_"+b.layerName,strokeColor:"#666",backgroundColor:"#dfdfdf",showHoverImage:!1,classHeatmap:b.classHeatmap,homeX:b.homeX,homeY:b.homeY,homeScale:b.homeScale};if(void 0!==b.density){ca.density=b.density;var hc=!0}if(void 0!==b.iconCrop){ca.iconCrop=b.iconCrop;var ic=!0}if(void 0!==b.classHeatmapMultiplier){ca.classHeatmapMultiplier=
b.classHeatmapMultiplier;var jc=!0}if(void 0!==b.classHeatmapPositive){ca.classHeatmapPositive=b.classHeatmapPositive;var kc=!0}if(void 0!==b.autoGridSizeMultiplier){ca.autoGridSizeMultiplier=b.autoGridSizeMultiplier;var lc=!0}if(void 0!==b.gridSize){ca.gridSize=b.gridSize;var mc=!0}if(void 0!==b.showLabels){ca.showLabels=b.showLabels;var nc=!0}if(void 0!==b.enableHover){ca.enableHover=b.enableHover;var oc=!0}if(void 0!==b.scale){ca.scale=b.scale;var pc=!0}if(void 0!==b.gcx){ca.gcx=b.gcx;var qc=!0}if(void 0!==
b.gcy){ca.gcy=b.gcy;var rc=!0}if(void 0!==b.extent){ca.extent=b.extent;var sc=!0}if(void 0!==b.$scroll){ca.scrollWheel=b.$scroll;var tc=!0}var ib=new Bc({root:a.root,store:a.store,data:ca,_bind(b,c){var d={},e={};!hc&&b.density&&(d.density=c.density);!ic&&b.iconCrop&&(d.iconCrop=c.iconCrop);!jc&&b.classHeatmapMultiplier&&(d.classHeatmapMultiplier=c.classHeatmapMultiplier);!kc&&b.classHeatmapPositive&&(d.classHeatmapPositive=c.classHeatmapPositive);!lc&&b.autoGridSizeMultiplier&&(d.autoGridSizeMultiplier=
c.autoGridSizeMultiplier);!mc&&b.gridSize&&(d.gridSize=c.gridSize);!nc&&b.showLabels&&(d.showLabels=c.showLabels);!oc&&b.enableHover&&(d.enableHover=c.enableHover);!pc&&b.scale&&(d.scale=c.scale);!qc&&b.gcx&&(d.gcx=c.gcx);!rc&&b.gcy&&(d.gcy=c.gcy);!sc&&b.extent&&(d.extent=c.extent);!tc&&b.scrollWheel&&(e.scroll=c.scrollWheel);a.store.set(e);a._set(d);tc=sc=rc=qc=pc=oc=nc=mc=lc=kc=jc=ic=hc=void 0}});a.root._beforecreate.push(()=>{ib._bind({density:1,iconCrop:1,classHeatmapMultiplier:1,classHeatmapPositive:1,
autoGridSizeMultiplier:1,gridSize:1,showLabels:1,enableHover:1,scale:1,gcx:1,gcy:1,extent:1,scrollWheel:1},ib.get())});a.refs.atlas=ib;var Pb={id:"inceptionv1_"+b.layerName,layerName:b.layerName,enableDragging:!0,classHeatmap:b.classHeatmap,scaleCountFactor:b.scaleCountFactor};if(void 0!==b.extent){Pb.extent=b.extent;var uc=!0}var Jb=new Gd({root:a.root,store:a.store,data:Pb,_bind(b,c){var d={};!uc&&b.extent&&(d.extent=c.extent);a._set(d);uc=void 0}});a.root._beforecreate.push(()=>{Jb._bind({extent:1},
Jb.get())});Jb.on("drag",function(b){a.refs.atlas.translateTo(b.gcx,b.gcy)});var qb=new Yb({root:a.root,store:a.store,data:{name:"home",color:"white"}}),vc=new zc({root:a.root,store:a.store,slots:{default:X()}});vc.on("click",function(b){a.refs.atlas.home(3E3)});var tb=new Yb({root:a.root,store:a.store,data:{name:"add",color:"white"}}),wc=new zc({root:a.root,store:a.store,slots:{default:X()}});wc.on("click",function(b){a.refs.atlas.scaleBy(2)});var ub=new Yb({root:a.root,store:a.store,data:{name:"remove",
color:"white"}}),xc=new zc({root:a.root,store:a.store,slots:{default:X()}});xc.on("click",function(b){a.refs.atlas.scaleBy(.5)});var Zb={clientWidth:b.clientWidth,clientHeight:b.clientHeight,minWidth:768},yc=new fd({root:a.root,store:a.store,slots:{default:X()},data:Zb});return{c(){x=l("div");w=l("div");y=l("h2");y.textContent="Class Filter";B=q("\n        ");D=l("div");Ub._fragment.c();Vb._fragment.c();Va=q("\n    ");K=l("div");I=l("h2");I.textContent="Layer";M=q("\n        ");Y=l("div");Wb._fragment.c();
Xb._fragment.c();Sa=q("\n  ");za=l("div");la=l("div");ib._fragment.c();Ua=q("\n        ");E=l("div");F=l("div");Ac=l("div");H=l("div");Jb._fragment.c();aa=q("\n            ");G=l("div");qb._fragment.c();vc._fragment.c();ea=q("\n              ");tb._fragment.c();wc._fragment.c();fa=q("\n              ");ub._fragment.c();xc._fragment.c();Re=q("\n          ");Qb=l("div");gb=l("div");hb=l("label");db=l("input");na=q(" attribution labels");pa=q("\n              ");O=l("label");eb=l("input");ta=q(" show tooltip");
ua=q("\n              ");da=l("label");fb=l("input");xa=q(" scroll to zoom");ya=q("\n            ");Z=l("div");Ba=l("div");L=l("div");oa=l("h3");oa.textContent="Grid size";Aa=q("\n                  ");ha=l("label");P=l("input");Ga=q(" 20x20");Ha=q("\n                  ");ma=l("label");Q=l("input");Ja=q(" 40x40");Ma=q("\n                  ");qa=l("label");R=l("input");Ra=q(" 80x80");Wa=q("\n                  ");sa=l("label");S=l("input");Xa=q(" 160x160");Ya=q("\n                  ");va=l("label");
T=l("input");Za=q(" 320x320");ab=q("\n                  ");wa=l("label");U=l("input");bb=q(" auto");jb=q("\n                  ");Ib=l("div");Da=l("div");mb=q("auto threshold: ");$b=l("noscript");ob=q("\n                    ");ia=l("input");pb=q("\n                ");Rb=l("div");ac=l("h3");rb=q("Icon density: ");bc=l("noscript");sb=q("\n                  ");ja=l("input");vb=q("\n                ");ba=l("div");Ea=l("h3");Ea.textContent="Class filter";wb=q("\n                  ");cc=l("label");V=l("input");
xb=q(" positive influence");yb=q("\n                  ");dc=l("label");W=l("input");zb=q(" negative influence");Ab=q("\n                  ");Fa=l("div");Bb=q("Intensity: ");ec=l("noscript");Cb=q("\n                  ");ka=l("input");Db=q("\n                ");Ca=l("div");Ia=l("h3");Ia.textContent="Location";Eb=q("\n                  ");Ka=l("div");Fb=q("x: ");$a=q(La);Gb=q("\n                  ");Na=l("div");Hb=q("y: ");cb=q(Oa);Kb=q("\n                  ");Pa=l("div");Lb=q("scale: ");kb=q(Qa);Mb=
q("\n          ");Cc=l("div");Tb=l("button");lb=q(Dc);yc._fragment.c();t(y,"slot","head");t(D,"slot","body");w.className="filter svelte-1mmgffy";n(w,"display",b.showClassFilter?"block":"none");t(I,"slot","head");t(Y,"slot","body");K.className="stack svelte-1mmgffy";n(K,"display",b.showLayerChooser?"block":"none");H.className="map-container svelte-1mmgffy";n(H,"width","100px");n(H,"height","100px");n(H,"position","absolute");Ac.className="map svelte-1mmgffy";G.className="buttons svelte-1mmgffy";F.className=
"nav svelte-1mmgffy";db.addEventListener("change",c,void 0);t(db,"type","checkbox");n(hb,"white-space","nowrap");n(hb,"text-overflow","ellipsis");n(hb,"overflow","hidden");hb.className="svelte-1mmgffy";eb.addEventListener("change",d,void 0);t(eb,"type","checkbox");O.className="svelte-1mmgffy";fb.addEventListener("change",e,void 0);t(fb,"type","checkbox");da.className="svelte-1mmgffy";gb.className="essential";oa.className="svelte-1mmgffy";a._bindingGroups[0].push(P);P.addEventListener("change",g,void 0);
t(P,"type","radio");P.__value=0;P.value=P.__value;ha.className="svelte-1mmgffy";a._bindingGroups[0].push(Q);Q.addEventListener("change",f,void 0);t(Q,"type","radio");Q.__value=1;Q.value=Q.__value;ma.className="svelte-1mmgffy";a._bindingGroups[0].push(R);R.addEventListener("change",h,void 0);t(R,"type","radio");R.__value=2;R.value=R.__value;qa.className="svelte-1mmgffy";a._bindingGroups[0].push(S);S.addEventListener("change",k,void 0);t(S,"type","radio");S.__value=3;S.value=S.__value;sa.className=
"svelte-1mmgffy";a._bindingGroups[0].push(T);T.addEventListener("change",p,void 0);t(T,"type","radio");T.__value=4;T.value=T.__value;va.className="svelte-1mmgffy";a._bindingGroups[0].push(U);U.addEventListener("change",m,void 0);t(U,"type","radio");U.__value=-1;U.value=U.__value;wa.className="svelte-1mmgffy";ia.addEventListener("change",C,void 0);ia.addEventListener("input",C,void 0);t(ia,"type","range");ia.min=.5;ia.max=1.4;ia.step=.01;n(Ib,"display","none");L.className="section svelte-1mmgffy";
ac.className="svelte-1mmgffy";ja.addEventListener("change",A,void 0);ja.addEventListener("input",A,void 0);t(ja,"type","range");ja.min=.2;ja.max=8;ja.step=.01;Rb.className="section svelte-1mmgffy";Ea.className="svelte-1mmgffy";a._bindingGroups[1].push(V);V.addEventListener("change",r,void 0);t(V,"type","radio");V.__value=1;V.value=V.__value;cc.className="svelte-1mmgffy";a._bindingGroups[1].push(W);W.addEventListener("change",v,void 0);t(W,"type","radio");W.__value=-1;W.value=W.__value;dc.className=
"svelte-1mmgffy";ka.addEventListener("change",u,void 0);ka.addEventListener("input",u,void 0);t(ka,"type","range");ka.min="0.5";ka.max="2";ka.step="0.1";ba.className="section svelte-1mmgffy";n(ba,"display",-1<b.classHeatmap?"block":"none");Ia.className="svelte-1mmgffy";Ca.className="section svelte-1mmgffy";Ba.className="grid-size";Z.className="expand svelte-1mmgffy";Qb.className="options svelte-1mmgffy";Tb.addEventListener("click",z,void 0);Tb.className="svelte-1mmgffy";Cc.className="expand-toggle svelte-1mmgffy";
E.className=Ec="controls "+(b.showOptions?"open":"closed")+" svelte-1mmgffy svelte-ref-controls";la.className="atlas svelte-1mmgffy";za.className="main svelte-1mmgffy";x.className="container svelte-1mmgffy"},m(c,d){yc._slotted.default.appendChild(x);x.appendChild(w);Vb._slotted.head.appendChild(y);Vb._slotted.default.appendChild(B);Vb._slotted.body.appendChild(D);Ub._mount(D,null);Vb._mount(w,null);x.appendChild(Va);x.appendChild(K);Xb._slotted.head.appendChild(I);Xb._slotted.default.appendChild(M);
Xb._slotted.body.appendChild(Y);Wb._mount(Y,null);Xb._mount(K,null);x.appendChild(Sa);x.appendChild(za);za.appendChild(la);ib._mount(la,null);la.appendChild(Ua);la.appendChild(E);E.appendChild(F);F.appendChild(Ac);Ac.appendChild(H);Jb._mount(H,null);F.appendChild(aa);F.appendChild(G);qb._mount(vc._slotted.default,null);vc._mount(G,null);G.appendChild(ea);tb._mount(wc._slotted.default,null);wc._mount(G,null);G.appendChild(fa);ub._mount(xc._slotted.default,null);xc._mount(G,null);E.appendChild(Re);
E.appendChild(Qb);Qb.appendChild(gb);gb.appendChild(hb);hb.appendChild(db);db.checked=b.showLabels;hb.appendChild(na);gb.appendChild(pa);gb.appendChild(O);O.appendChild(eb);eb.checked=b.enableHover;O.appendChild(ta);gb.appendChild(ua);gb.appendChild(da);da.appendChild(fb);fb.checked=b.$scroll;da.appendChild(xa);Qb.appendChild(ya);Qb.appendChild(Z);Z.appendChild(Ba);Ba.appendChild(L);L.appendChild(oa);L.appendChild(Aa);L.appendChild(ha);ha.appendChild(P);P.checked=P.__value===b.gridSize;ha.appendChild(Ga);
L.appendChild(Ha);L.appendChild(ma);ma.appendChild(Q);Q.checked=Q.__value===b.gridSize;ma.appendChild(Ja);L.appendChild(Ma);L.appendChild(qa);qa.appendChild(R);R.checked=R.__value===b.gridSize;qa.appendChild(Ra);L.appendChild(Wa);L.appendChild(sa);sa.appendChild(S);S.checked=S.__value===b.gridSize;sa.appendChild(Xa);L.appendChild(Ya);L.appendChild(va);va.appendChild(T);T.checked=T.__value===b.gridSize;va.appendChild(Za);L.appendChild(ab);L.appendChild(wa);wa.appendChild(U);U.checked=U.__value===b.gridSize;
wa.appendChild(bb);L.appendChild(jb);L.appendChild(Ib);Ib.appendChild(Da);Da.appendChild(mb);Da.appendChild($b);$b.insertAdjacentHTML("afterend",b.autoGridSizeMultiplier);Ib.appendChild(ob);Ib.appendChild(ia);ia.value=b.autoGridSizeMultiplier;Ba.appendChild(pb);Ba.appendChild(Rb);Rb.appendChild(ac);ac.appendChild(rb);ac.appendChild(bc);bc.insertAdjacentHTML("afterend",b.density);Rb.appendChild(sb);Rb.appendChild(ja);ja.value=b.density;Ba.appendChild(vb);Ba.appendChild(ba);ba.appendChild(Ea);ba.appendChild(wb);
ba.appendChild(cc);cc.appendChild(V);V.checked=V.__value===b.classHeatmapPositive;cc.appendChild(xb);ba.appendChild(yb);ba.appendChild(dc);dc.appendChild(W);W.checked=W.__value===b.classHeatmapPositive;dc.appendChild(zb);ba.appendChild(Ab);ba.appendChild(Fa);Fa.appendChild(Bb);Fa.appendChild(ec);ec.insertAdjacentHTML("afterend",b.classHeatmapMultiplier);ba.appendChild(Cb);ba.appendChild(ka);ka.value=b.classHeatmapMultiplier;Ba.appendChild(Db);Ba.appendChild(Ca);Ca.appendChild(Ia);Ca.appendChild(Eb);
Ca.appendChild(Ka);Ka.appendChild(Fb);Ka.appendChild($a);Ca.appendChild(Gb);Ca.appendChild(Na);Na.appendChild(Hb);Na.appendChild(cb);Ca.appendChild(Kb);Ca.appendChild(Pa);Pa.appendChild(Lb);Pa.appendChild(kb);a.refs.expand=Z;E.appendChild(Mb);E.appendChild(Cc);Cc.appendChild(Tb);Tb.appendChild(lb);a.refs.controls=E;yc._mount(c,d)},p(a,c){b=c;c={};!fc&&a.classHeatmap&&(c.classHeatmap=b.classHeatmap,fc=void 0!==b.classHeatmap);Ub._set(c);fc=void 0;a.showClassFilter&&n(w,"display",b.showClassFilter?
"block":"none");c={};a.classHeatmap&&(c.classHeatmap=b.classHeatmap);!gc&&a.layerName&&(c.layerName=b.layerName,gc=void 0!==b.layerName);Wb._set(c);gc=void 0;a.showLayerChooser&&n(K,"display",b.showLayerChooser?"block":"none");c={};a.layerName&&(c.id="inceptionv1_"+b.layerName);a.classHeatmap&&(c.classHeatmap=b.classHeatmap);a.homeX&&(c.homeX=b.homeX);a.homeY&&(c.homeY=b.homeY);a.homeScale&&(c.homeScale=b.homeScale);!hc&&a.density&&(c.density=b.density,hc=void 0!==b.density);!ic&&a.iconCrop&&(c.iconCrop=
b.iconCrop,ic=void 0!==b.iconCrop);!jc&&a.classHeatmapMultiplier&&(c.classHeatmapMultiplier=b.classHeatmapMultiplier,jc=void 0!==b.classHeatmapMultiplier);!kc&&a.classHeatmapPositive&&(c.classHeatmapPositive=b.classHeatmapPositive,kc=void 0!==b.classHeatmapPositive);!lc&&a.autoGridSizeMultiplier&&(c.autoGridSizeMultiplier=b.autoGridSizeMultiplier,lc=void 0!==b.autoGridSizeMultiplier);!mc&&a.gridSize&&(c.gridSize=b.gridSize,mc=void 0!==b.gridSize);!nc&&a.showLabels&&(c.showLabels=b.showLabels,nc=void 0!==
b.showLabels);!oc&&a.enableHover&&(c.enableHover=b.enableHover,oc=void 0!==b.enableHover);!pc&&a.scale&&(c.scale=b.scale,pc=void 0!==b.scale);!qc&&a.gcx&&(c.gcx=b.gcx,qc=void 0!==b.gcx);!rc&&a.gcy&&(c.gcy=b.gcy,rc=void 0!==b.gcy);!sc&&a.extent&&(c.extent=b.extent,sc=void 0!==b.extent);!tc&&a.$scroll&&(c.scrollWheel=b.$scroll,tc=void 0!==b.$scroll);ib._set(c);tc=sc=rc=qc=pc=oc=nc=mc=lc=kc=jc=ic=hc=void 0;c={};a.layerName&&(c.id="inceptionv1_"+b.layerName);a.layerName&&(c.layerName=b.layerName);a.classHeatmap&&
(c.classHeatmap=b.classHeatmap);a.scaleCountFactor&&(c.scaleCountFactor=b.scaleCountFactor);!uc&&a.extent&&(c.extent=b.extent,uc=void 0!==b.extent);Jb._set(c);uc=void 0;a.showLabels&&(db.checked=b.showLabels);a.enableHover&&(eb.checked=b.enableHover);a.$scroll&&(fb.checked=b.$scroll);a.gridSize&&(P.checked=P.__value===b.gridSize);a.gridSize&&(Q.checked=Q.__value===b.gridSize);a.gridSize&&(R.checked=R.__value===b.gridSize);a.gridSize&&(S.checked=S.__value===b.gridSize);a.gridSize&&(T.checked=T.__value===
b.gridSize);a.gridSize&&(U.checked=U.__value===b.gridSize);a.autoGridSizeMultiplier&&(Fc($b),$b.insertAdjacentHTML("afterend",b.autoGridSizeMultiplier));a.autoGridSizeMultiplier&&(ia.value=b.autoGridSizeMultiplier);a.gridSize&&n(Ib,"display","none");a.density&&(Fc(bc),bc.insertAdjacentHTML("afterend",b.density));a.density&&(ja.value=b.density);a.classHeatmapPositive&&(V.checked=V.__value===b.classHeatmapPositive);a.classHeatmapPositive&&(W.checked=W.__value===b.classHeatmapPositive);a.classHeatmapMultiplier&&
(Fc(ec),ec.insertAdjacentHTML("afterend",b.classHeatmapMultiplier));a.classHeatmapMultiplier&&(ka.value=b.classHeatmapMultiplier);a.classHeatmap&&n(ba,"display",-1<b.classHeatmap?"block":"none");a.gcx&&La!==(La=Sb(b.gcx))&&($a.data=""+La);a.gcy&&Oa!==(Oa=Sb(b.gcy))&&(cb.data=""+Oa);a.scale&&Qa!==(Qa=Sb(b.scale))&&(kb.data=""+Qa);a.showOptions&&Dc!==(Dc=b.showOptions?"fewer options":"more options")&&(lb.data=""+Dc);a.showOptions&&Ec!==(Ec="controls "+(b.showOptions?"open":"closed")+" svelte-1mmgffy svelte-ref-controls")&&
(E.className=Ec);c={};a.clientWidth&&(c.clientWidth=b.clientWidth);a.clientHeight&&(c.clientHeight=b.clientHeight);yc._set(c)},d(b){Ub.destroy();Vb.destroy();Wb.destroy();Xb.destroy();ib.destroy();a.refs.atlas===ib&&(a.refs.atlas=null);Jb.destroy();qb.destroy();vc.destroy();tb.destroy();wc.destroy();ub.destroy();xc.destroy();db.removeEventListener("change",c,void 0);eb.removeEventListener("change",d,void 0);fb.removeEventListener("change",e,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(P),
1);P.removeEventListener("change",g,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(Q),1);Q.removeEventListener("change",f,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(R),1);R.removeEventListener("change",h,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(S),1);S.removeEventListener("change",k,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(T),1);T.removeEventListener("change",p,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(U),
1);U.removeEventListener("change",m,void 0);ia.removeEventListener("change",C,void 0);ia.removeEventListener("input",C,void 0);ja.removeEventListener("change",A,void 0);ja.removeEventListener("input",A,void 0);a._bindingGroups[1].splice(a._bindingGroups[1].indexOf(V),1);V.removeEventListener("change",r,void 0);a._bindingGroups[1].splice(a._bindingGroups[1].indexOf(W),1);W.removeEventListener("change",v,void 0);ka.removeEventListener("change",u,void 0);ka.removeEventListener("input",u,void 0);a.refs.expand===
Z&&(a.refs.expand=null);Tb.removeEventListener("click",z,void 0);a.refs.controls===E&&(a.refs.controls=null);yc.destroy(b)}}}function Kb(a){x(this,a);this.refs={};this._state=r(r(this.store._init(["scroll"]),{layerName:"mixed4c",gridSize:1,classHeatmap:-1,iconScaleFactor:.8,iconCrop:.35,showClassFilter:!0,showLayerChooser:!0,showOptions:!0,homeX:.5,homeY:.5,homeScale:1}),a.data);this.store._add(this,["scroll"]);this._recompute({gridSize:1,iconScaleFactor:1,realGridSize:1},this._state);this._bindingGroups=
[[],[]];this._intro=!0;this._handlers.destroy=[od];this._fragment=Gi(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Hi(){setTimeout(()=>{this.refs.app.home(0)},100)}function Ii(a,b){function c(){a.set({clientWidth:d.clientWidth,clientHeight:d.clientHeight})}var d,e,g=new Kb({root:a.root,store:a.store,data:{clientWidth:b.clientWidth,clientHeight:b.clientHeight,gridSize:-1,showLabels:!0}});a.refs.app=g;return{c(){d=l("div");g._fragment.c();a.root._beforecreate.push(c);
n(d,"width","100%");n(d,"height","100%")},m(a,b){a.insertBefore(d,b);g._mount(d,null);e=ya(d,c)},p(a,b){var c={};a.clientWidth&&(c.clientWidth=b.clientWidth);a.clientHeight&&(c.clientHeight=b.clientHeight);g._set(c)},d(b){b&&v(d);g.destroy();a.refs.app===g&&(a.refs.app=null);e.cancel()}}}function Se(a){x(this,a);this.refs={};this._state=r({},a.data);this._intro=!0;this._fragment=Ii(this,this._state);this.root._oncreate.push(()=>{Hi.call(this);this.fire("update",{changed:da({},this._state),current:this._state})});
a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Ji({x:a,width:b,y:c,clientHeight:d,visible:e}){if(!1===e)return"visibility: hidden;";{e=document.documentElement.scrollLeft;let g=document.documentElement.scrollTop,f=document.documentElement.clientWidth-b;d=document.documentElement.clientHeight-d;let h=Math.min(a,f),k=Math.min(c,d);a>=f&&c>=d&&(h=a-b);return`width: ${b}px; top: ${k+g}px; left: ${h+e}px;`}}function Ki(a,b){function c(b){a.mousemove(b)}function d(b){a.hide()}
function e(){a.set({clientHeight:f.clientHeight})}var g,f,h;document.addEventListener("mousemove",c);document.addEventListener("scroll",d);var k=b.component&&Te(a,b);return{c(){g=q("\n\n");f=l("div");k&&k.c();a.root._beforecreate.push(e);f.style.cssText=b.style;f.className="svelte-14z2oof svelte-ref-root"},m(b,c){b.insertBefore(g,c);b.insertBefore(f,c);k&&k.m(f,null);h=ya(f,e);a.refs.root=f},p(b,c){c.component?k?k.p(b,c):(k=Te(a,c),k.c(),k.m(f,null)):k&&(k.d(1),k=null);b.style&&(f.style.cssText=c.style)},
d(b){document.removeEventListener("mousemove",c);document.removeEventListener("scroll",d);b&&(v(g),v(f));k&&k.d();h.cancel();a.refs.root===f&&(a.refs.root=null)}}}function Te(a,b){var c,d=b.component;if(d)var e=new d({root:a.root,store:a.store});return{c(){e&&e._fragment.c();c=document.createComment("")},m(b,d){e&&(e._mount(b,d),a.refs.component=e);b.insertBefore(c,d)},p(b,f){d!==(d=f.component)&&(e&&e.destroy(),d?(e=new d({root:a.root,store:a.store}),e._fragment.c(),e._mount(c.parentNode,c),a.refs.component=
e):(e=null,a.refs.component===e&&(a.refs.component=null)))},d(a){a&&v(c);e&&e.destroy(a)}}}function Pa(a){x(this,a);this.refs={};this._state=r({visible:!1,width:150,component:null},a.data);this._recompute({x:1,width:1,y:1,clientHeight:1,visible:1},this._state);this._intro=!0;this._fragment=Ki(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Ue(a,b,c){a=Object.create(a);a.top=b[c];a.i=c;return a}function Li(a,b){var c,d,e,g,f,h=Ve(b.num_activations),
k,p,m=b.top_class_indices&&We(a,b);return{c(){c=l("div");d=l("table");m&&m.c();e=q("\n  ");g=l("div");f=q("Average of ");k=q(h);p=q(" activations");d.className="svelte-1qbcldy";n(g,"font-size","10px");n(g,"margin-top","4px");n(g,"color","#999");n(g,"text-align","right");c.className="hover svelte-1qbcldy"},m(a,b){a.insertBefore(c,b);c.appendChild(d);m&&m.m(d,null);c.appendChild(e);c.appendChild(g);g.appendChild(f);g.appendChild(k);g.appendChild(p)},p(b,c){c.top_class_indices?m?m.p(b,c):(m=We(a,c),
m.c(),m.m(d,null)):m&&(m.d(1),m=null);b.num_activations&&h!==(h=Ve(c.num_activations))&&(k.data=""+h)},d(a){a&&v(c);m&&m.d()}}}function We(a,b){for(var c,d=b.top_class_indices.slice(0,5),e=[],g=0;g<d.length;g+=1)e[g]=Xe(a,Ue(b,d,g));return{c(){for(var a=0;a<e.length;a+=1)e[a].c();c=document.createComment("")},m(a,b){for(var d=0;d<e.length;d+=1)e[d].m(a,b);a.insertBefore(c,b)},p(b,g){if(b.top_class_values||b.$inceptionLabels||b.top_class_indices){d=g.top_class_indices.slice(0,5);for(var f=0;f<d.length;f+=
1){let h=Ue(g,d,f);e[f]?e[f].p(b,h):(e[f]=Xe(a,h),e[f].c(),e[f].m(c.parentNode,c))}for(;f<e.length;f+=1)e[f].d(1);e.length=d.length}},d(a){Mb(e,a);a&&v(c)}}}function Xe(a,b){var c,d,e=b.i+1,g,f,h,k,p=b.$inceptionLabels[b.top],m,C,r,t=Ye(b.top_class_values[b.i]),u;return{c(){c=l("tr");d=l("td");g=q(e);f=q(".");h=q("\n        ");k=l("td");m=q(p);C=q("\n        ");r=l("td");u=q(t);n(d,"width","10px");n(d,"text-align","right");n(d,"padding-right","4px");d.className="svelte-1qbcldy";k.className=(0==b.i?
"first":"")+" svelte-1qbcldy";n(r,"text-align","right");r.className="svelte-1qbcldy"},m(a,b){a.insertBefore(c,b);c.appendChild(d);d.appendChild(g);d.appendChild(f);c.appendChild(h);c.appendChild(k);k.appendChild(m);c.appendChild(C);c.appendChild(r);r.appendChild(u)},p(a,b){(a.$inceptionLabels||a.top_class_indices)&&p!==(p=b.$inceptionLabels[b.top])&&(m.data=""+p);a.top_class_values&&t!==(t=Ye(b.top_class_values[b.i]))&&(u.data=""+t)},d(a){a&&v(c)}}}function Ze(a){x(this,a);this._state=r(this.store._init(["inceptionLabels"]),
a.data);this.store._add(this,["inceptionLabels"]);this._intro=!0;this._handlers.destroy=[od];this._fragment=Li(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}var w={destroy:function(a){this.destroy=M;this.fire("destroy");this.set=M;this._fragment.d(!1!==a);this._fragment=null;this._state={}},get:md,fire:ld,on:nd,set:function(a){this._set(r({},a));this.root._lock||D(this.root)},_recompute:M,_set:function(a){var b=this._state,c={},d=!1;a=r(this._staged,a);this._staged=
{};for(var e in a)this._differs(a[e],b[e])&&(c[e]=d=!0);d&&(this._state=r(r({},b),a),this._recompute(c,this._state),this._bind&&this._bind(c,this._state),this._fragment&&(this.fire("state",{changed:c,current:this._state,previous:b}),this._fragment.p(c,this._state),this.fire("update",{changed:c,current:this._state,previous:b})))},_stage:function(a){r(this._staged,a)},_mount:function(a,b){this._fragment[this._fragment.i?"i":"m"](a,b||null)},_differs:kd};r(pd.prototype,{_add(a,b){this._dependents.push({component:a,
props:b})},_init(a){let b={};for(let c=0;c<a.length;c+=1){let d=a[c];b["$"+d]=this._state[d]}return b},_remove(a){let b=this._dependents.length;for(;b--;)if(this._dependents[b].component===a){this._dependents.splice(b,1);break}},_set(a,b){let c=this._state;this._state=r(r({},c),a);for(a=0;a<this._sortedComputedProperties.length;a+=1)this._sortedComputedProperties[a].update(this._state,b);this.fire("state",{changed:b,previous:c,current:this._state});this._dependents.filter((a)=>{let c={},d=!1;for(let e=
0;e<a.props.length;e+=1){let f=a.props[e];f in b&&(c["$"+f]=this._state[f],d=!0)}if(d)return a.component._stage(c),!0}).forEach((a)=>{a.component.set({})});this.fire("update",{changed:b,previous:c,current:this._state})},_sortComputedProperties(){function a(g){let f=b[g];f&&(f.deps.forEach((b)=>{if(b===e)throw Error(`Cyclical dependency detected between ${b} <-> ${g}`);a(b)}),d[g]||(d[g]=!0,c.push(f)))}let b=this._computed,c=this._sortedComputedProperties=[],d=Object.create(null),e;for(let b in this._computed)a(e=
b)},compute(a,b,c){let d,e={deps:b,update:(e,f,g)=>{var h=b.map((a)=>{a in f&&(g=!0);return e[a]});g&&(h=c.apply(null,h),this._differs(h,d)&&(d=h,f[a]=!0,e[a]=d))}};this._computed[a]=e;this._sortComputedProperties();let g=r({},this._state),f={};e.update(g,f,!0);this._set(g,f)},fire:ld,get:md,on:nd,set(a){let b=this._state,c=this._changed={},d=!1;for(let e in a){if(this._computed[e])throw Error(`'${e}' is a read-only computed property`);this._differs(a[e],b[e])&&(c[e]=d=!0)}d&&this._set(a,c)}});var Wa=
{inception:"dummy;kit fox;English setter;Siberian husky;Australian terrier;English springer;grey whale;lesser panda;Egyptian cat;ibex;Persian cat;cougar;gazelle;porcupine;sea lion;malamute;badger;Great Dane;Walker hound;Welsh springer spaniel;whippet;Scottish deerhound;killer whale;mink;African elephant;Weimaraner;soft - coated wheaten terrier;Dandie Dinmont;red wolf;Old English sheepdog;jaguar;otterhound;bloodhound;Airedale;hyena;meerkat;giant schnauzer;titi;three - toed sloth;sorrel;black - footed ferret;dalmatian;black - and - tan coonhound;papillon;skunk;Staffordshire bullterrier;Mexican hairless;Bouvier des Flandres;weasel;miniature poodle;Cardigan;malinois;bighorn;fox squirrel;colobus;tiger cat;Lhasa;impala;coyote;Yorkshire terrier;Newfoundland;brown bear;red fox;Norwegian elkhound;Rottweiler;hartebeest;Saluki;grey fox;schipperke;Pekinese;Brabancon griffon;West Highland white terrier;Sealyham terrier;guenon;mongoose;indri;tiger;Irish wolfhound;wild boar;EntleBucher;zebra;ram;French bulldog;orangutan;basenji;leopard;Bernese mountain dog;Maltese dog;Norfolk terrier;toy terrier;vizsla;cairn;squirrel monkey;groenendael;clumber;Siamese cat;chimpanzee;komondor;Afghan hound;Japanese spaniel;proboscis monkey;guinea pig;white wolf;ice bear;gorilla;borzoi;toy poodle;Kerry blue terrier;ox;Scotch terrier;Tibetan mastiff;spider monkey;Doberman;Boston bull;Greater Swiss Mountain dog;Appenzeller;Shih - Tzu;Irish water spaniel;Pomeranian;Bedlington terrier;warthog;Arabian camel;siamang;miniature schnauzer;collie;golden retriever;Irish terrier;affenpinscher;Border collie;hare;boxer;silky terrier;beagle;Leonberg;German short - haired pointer;patas;dhole;baboon;macaque;Chesapeake Bay retriever;bull mastiff;kuvasz;capuchin;pug;curly - coated retriever;Norwich terrier;flat - coated retriever;hog;keeshond;Eskimo dog;Brittany spaniel;standard poodle;Lakeland terrier;snow leopard;Gordon setter;dingo;standard schnauzer;hamster;Tibetan terrier;Arctic fox;wire - haired fox terrier;basset;water buffalo;American black bear;Angora;bison;howler monkey;hippopotamus;chow;giant panda;American Staffordshire terrier;Shetland sheepdog;Great Pyrenees;Chihuahua;tabby;marmoset;Labrador retriever;Saint Bernard;armadillo;Samoyed;bluetick;redbone;polecat;marmot;kelpie;gibbon;llama;miniature pinscher;wood rabbit;Italian greyhound;lion;cocker spaniel;Irish setter;dugong;Indian elephant;beaver;Sussex spaniel;Pembroke;Blenheim spaniel;Madagascar cat;Rhodesian ridgeback;lynx;African hunting dog;langur;Ibizan hound;timber wolf;cheetah;English foxhound;briard;sloth bear;Border terrier;German shepherd;otter;koala;tusker;echidna;wallaby;platypus;wombat;revolver;umbrella;schooner;soccer ball;accordion;ant;starfish;chambered nautilus;grand piano;laptop;strawberry;airliner;warplane;airship;balloon;space shuttle;fireboat;gondola;speedboat;lifeboat;canoe;yawl;catamaran;trimaran;container ship;liner;pirate;aircraft carrier;submarine;wreck;half track;tank;missile;bobsled;dogsled;bicycle - built -for-two;mountain bike;freight car;passenger car;barrow;shopping cart;motor scooter;forklift;electric locomotive;steam locomotive;amphibian;ambulance;beach wagon;cab;convertible;jeep;limousine;minivan;Model T;racer;sports car;go-kart;golfcart;moped;snowplow;fire engine;garbage truck;pickup;tow truck;trailer truck;moving van;police van;recreational vehicle;streetcar;snowmobile;tractor;mobile home;tricycle;unicycle;horse cart;jinrikisha;oxcart;bassinet;cradle;crib;four-poster;bookcase;china cabinet;medicine chest;chiffonier;table lamp;file;park bench;barber chair;throne;folding chair;rocking chair;studio couch;toilet seat;desk;pool table;dining table;entertainment center;wardrobe;Granny Smith;orange;lemon;fig;pineapple;banana;jackfruit;custard apple;pomegranate;acorn;hip;ear;rapeseed;corn;buckeye;organ;upright;chime;drum;gong;maraca;marimba;steel drum;banjo;cello;violin;harp;acoustic guitar;electric guitar;cornet;French horn;trombone;harmonica;ocarina;panpipe;bassoon;oboe;sax;flute;daisy;yellow lady's slipper;cliff;valley;alp;volcano;promontory;sandbar;coral reef;lakeside;seashore;geyser;hatchet;cleaver;letter opener;plane;power drill;lawn mower;hammer;corkscrew;can opener;plunger;screwdriver;shovel;plow;chain saw;cock;hen;ostrich;brambling;goldfinch;house finch;junco;indigo bunting;robin;bulbul;jay;magpie;chickadee;water ouzel;kite;bald eagle;vulture;great grey owl;black grouse;ptarmigan;ruffed grouse;prairie chicken;peacock;quail;partridge;African grey;macaw;sulphur-crested cockatoo;lorikeet;coucal;bee eater;hornbill;hummingbird;jacamar;toucan;drake;red-breasted merganser;goose;black swan;white stork;black stork;spoonbill;flamingo;American egret;little blue heron;bittern;crane;limpkin;American coot;bustard;ruddy turnstone;red - backed sandpiper;redshank;dowitcher;oystercatcher;European gallinule;pelican;king penguin;albatross;great white shark;tiger shark;hammerhead;electric ray;stingray;barracouta;coho;tench;goldfish;eel;rock beauty;anemone fish;lionfish;puffer;sturgeon;gar;loggerhead;leatherback turtle;mud turtle;terrapin;box turtle;banded gecko;common iguana;American chameleon;whiptail;agama;frilled lizard;alligator lizard;Gila monster;green lizard;African chameleon;Komodo dragon;triceratops;African crocodile;American alligator;thunder snake;ringneck snake;hognose snake;green snake;king snake;garter snake;water snake;vine snake;night snake;boa constrictor;rock python;Indian cobra;green mamba;sea snake;horned viper;diamondback;sidewinder;European fire salamander;common newt;eft;spotted salamander;axolotl;bullfrog;tree frog;tailed frog;whistle;wing;paintbrush;hand blower;oxygen mask;snorkel;loudspeaker;microphone;screen;mouse;electric fan;oil filter;strainer;space heater;stove;guillotine;barometer;rule;odometer;scale;analog clock;digital clock;wall clock;hourglass;sundial;parking meter;stopwatch;digital watch;stethoscope;syringe;magnetic compass;binoculars;projector;sunglasses;loupe;radio telescope;bow;cannon [ground];assault rifle;rifle;projectile;computer keyboard;typewriter keyboard;crane;lighter;abacus;cash machine;slide rule;desktop computer;hand - held computer;notebook;web site;harvester;thresher;printer;slot;vending machine;sewing machine;joystick;switch;hook;car wheel;paddlewheel;pinwheel;potter's wheel;gas pump;carousel;swing;reel;radiator;puck;hard disc;sunglass;pick;car mirror;solar dish;remote control;disk brake;buckle;hair slide;knot;combination lock;padlock;nail;safety pin;screw;muzzle;seat belt;ski;candle;jack - o'-lantern;spotlight;torch;neck brace;pier;tripod;maypole;mousetrap;spider web;trilobite;harvestman;scorpion;black and gold garden spider;barn spider;garden spider;black widow;tarantula;wolf spider;tick;centipede;isopod;Dungeness crab;rock crab;fiddler crab;king crab;American lobster;spiny lobster;crayfish;hermit crab;tiger beetle;ladybug;ground beetle;long - horned beetle;leaf beetle;dung beetle;rhinoceros beetle;weevil;fly;bee;grasshopper;cricket;walking stick;cockroach;mantis;cicada;leafhopper;lacewing;dragonfly;damselfly;admiral;ringlet;monarch;cabbage butterfly;sulphur butterfly;lycaenid;jellyfish;sea anemone;brain coral;flatworm;nematode;conch;snail;slug;sea slug;chiton;sea urchin;sea cucumber;iron;espresso maker;microwave;Dutch oven;rotisserie;toaster;waffle iron;vacuum;dishwasher;refrigerator;washer;Crock Pot;frying pan;wok;caldron;coffeepot;teapot;spatula;altar;triumphal arch;patio;steel arch bridge;suspension bridge;viaduct;barn;greenhouse;palace;monastery;library;apiary;boathouse;church;mosque;stupa;planetarium;restaurant;cinema;home theater;lumbermill;coil;obelisk;totem pole;castle;prison;grocery store;bakery;barbershop;bookshop;butcher shop;confectionery;shoe shop;tobacco shop;toyshop;fountain;cliff dwelling;yurt;dock;brass;megalith;bannister;breakwater;dam;chainlink fence;picket fence;worm fence;stone wall;grille;sliding door;turnstile;mountain tent;scoreboard;honeycomb;plate rack;pedestal;beacon;mashed potato;bell pepper;head cabbage;broccoli;cauliflower;zucchini;spaghetti squash;acorn squash;butternut squash;cucumber;artichoke;cardoon;mushroom;shower curtain;jean;carton;handkerchief;sandal;ashcan;safe;plate;necklace;croquet ball;fur coat;thimble;pajama;running shoe;cocktail shaker;chest;manhole cover;modem;tub;tray;balance beam;bagel;prayer rug;kimono;hot pot;whiskey jug;knee pad;book jacket;spindle;ski mask;beer bottle;crash helmet;bottlecap;tile roof;mask;maillot;Petri dish;football helmet;bathing cap;teddy bear;holster;pop bottle;photocopier;vestment;crossword puzzle;golf ball;trifle;suit;water tower;feather boa;cloak;red wine;drumstick;shield;Christmas stocking;hoopskirt;menu;stage;bonnet;meat loaf;baseball;face powder;scabbard;sunscreen;beer glass;hen-of - the - woods;guacamole;lampshade;wool;hay;bow tie;mailbag;water jug;bucket;dishrag;soup bowl;eggnog;mortar;trench coat;paddle;chain;swab;mixing bowl;potpie;wine bottle;shoji;bulletproof vest;drilling platform;binder;cardigan;sweatshirt;pot;birdhouse;hamper;ping-pong ball;pencil box;pay - phone;consomme;apron;punching bag;backpack;groom;bearskin;pencil sharpener;broom;mosquito net;abaya;mortarboard;poncho;crutch;Polaroid camera;space bar;cup;racket;traffic light;quill;radio;dough;cuirass;military uniform;lipstick;shower cap;monitor;oscilloscope;mitten;brassiere;French loaf;vase;milk can;rugby ball;paper towel;earthstar;envelope;miniskirt;cowboy hat;trolleybus;perfume;bathtub;hotdog;coral fungus;bullet train;pillow;toilet tissue;cassette;carpenter's kit;ladle;stinkhorn;lotion;hair spray;academic gown;dome;crate;wig;burrito;pill bottle;chain mail;theater curtain;window shade;barrel;washbasin;ballpoint;basketball;bath towel;cowboy boot;gown;window screen;agaric;cellular telephone;nipple;barbell;mailbox;lab coat;fire screen;minibus;packet;maze;pole;horizontal bar;sombrero;pickelhaube;rain barrel;wallet;cassette player;comic book;piggy bank;street sign;bell cote;fountain pen;Windsor tie;volleyball;overskirt;sarong;purse;bolo tie;bib;parachute;sleeping bag;television;swimming trunks;measuring cup;espresso;pizza;breastplate;shopping basket;wooden spoon;saltshaker;chocolate sauce;ballplayer;goblet;gyromitra;stretcher;water bottle;dial telephone;soap dispenser;jersey;school bus;jigsaw puzzle;plastic bag;reflex camera;diaper;Band Aid;ice lolly;velvet;tennis ball;gasmask;doormat;Loafer;ice cream;pretzel;quilt;maillot;tape player;clog;iPod;bolete;scuba diver;pitcher;matchstick;bikini;sock;CD player;lens cap;thatch;vault;beaker;bubble;cheeseburger;parallel bars;flagpole;coffee mug;rubber eraser;stole;carbonara;dumbbell".split(";")};
class Mi extends pd{}let Lb=new Mi({scroll:!1,inceptionLabels:Wa.inception,currentClass:62,currentClassAtlasIndex:507,currentClassAtlasCompareIndex:507,classChoices:[9,622,665,652,288,233,188,169,80,76,62,61,7,355,990,746,791],classAtlasIndices:[982,507,62,9,169,7,80,76,235,41,2,442,450,454,930,378,582,780,901,946,791,738,736,744,489,387,388,399,721,672,6,665,652,288,355,348,804,600,605,631,643],multipleLayers:{abacus:[{layerName:"mixed3b",homeX:.8086,homeY:.4295,gridSize:3,homeScale:48},{layerName:"mixed4c",
homeX:.8593,homeY:.5814},{layerName:"mixed5b",homeX:.8183,homeY:.79,gridSize:4,homeScale:96}],plant:[{layerName:"mixed3b",homeX:.59,homeY:.64,gridSize:3,homeScale:48,caption:"You'll immediately notice that the early layer is very nonspecific in comparison to the others. The icons that emerge are of patterns and splotches of color. It is suggestive of the final class, but not particularly evocative."},{layerName:"mixed4c",homeX:.15,homeY:.4,caption:"By the middle layer, icons definitely resemble leaves, but they could be any type of plant. Attributions are focused on plants, but are a little all over the board."},
{layerName:"mixed5b",homeX:.178,homeY:.72,caption:"Here we see foliage with textures that are specific to cabbage, and curved into rounded balls. There are full heads of cabbage rather than individual leaves."}],water:[{layerName:"mixed4c",homeX:.365,homeY:.673,caption:'In mixed4c we see two different regions that have high attribution toward "sandbar": an area of <b>sandy textures</b>\u2026'},{layerName:"mixed4c",homeX:.318,homeY:.764,caption:"\u2026and a separate area of <b>watery textures</b>."},
{layerName:"mixed5b",homeX:.74,homeY:.48,caption:'In a later layer we see activations that contain <b>both</b> of those concepts when detecting "sandbar".'}]},currentClassComparisonIndex:0,classComparisons:[{id:"507_982",leftLabel:"snorkel",rightLabel:"scuba diver",left:507,right:982,annotation:[{pos:{x:7,y:8},desc:"train?"}]},{id:"736_744",leftLabel:"head cabbage",rightLabel:"artichoke",left:736,right:744,annotation:[]},{id:"671_672",leftLabel:"frying pan",rightLabel:"wok",left:671,right:672,annotation:[{pos:{x:1,
y:7},desc:"noodles?"}]},{id:"777_831",leftLabel:"beer bottle",rightLabel:"wine bottle",left:777,right:831,annotation:[]},{id:"543_544",leftLabel:"computer keyboard",rightLabel:"typewriter keyboard",left:543,right:544,annotation:[]},{id:"28_205",leftLabel:"red wolf",rightLabel:"timber wolf",left:28,right:205,annotation:[]},{id:"67_62",leftLabel:"grey fox",rightLabel:"red fox",left:67,right:62,annotation:[]},{id:"1_62",leftLabel:"kit fox",rightLabel:"red fox",left:1,right:62,annotation:[]},{id:"6_442",
leftLabel:Wa.inception[6],rightLabel:Wa.inception[442],left:6,right:442,annotation:[{pos:{x:2,y:7},desc:"baseball?"}]}],focus1Highlight:{scale:6,x:.844,y:.49},focusHighlights:[{scale:10,x:.873,y:.585},{scale:10,x:.709,y:.579},{scale:10,x:.221,y:.862},{scale:10,x:.807,y:.667}],pois:{mammals:{layerName:"mixed4a",gridSize:2,gcx:.6295,gcy:1-.9475,scale:8},dogs:{layerName:"mixed5a",gridSize:3,gcx:.589,gcy:1-.946,scale:10},curves:{layerName:"mixed4b",gridSize:3,gcx:.5947,gcy:.3351,scale:14},cups:{layerName:"mixed5b",
gridSize:3,gcx:.35073,gcy:.862,scale:10},patterns:{layerName:"mixed4b",gridSize:3,gcx:.91579,gcy:.32406,scale:8},text:{layerName:"mixed5a",gridSize:3,gcx:.5281,gcy:.9766,scale:19},fabric:{layerName:"mixed4b",gridSize:3,gcx:.489,gcy:.2043,scale:12},clothing:{layerName:"mixed5a",gridSize:3,gcx:.743,gcy:.48,scale:12}}});var sf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Nb.prototype=Ob.prototype;Ob.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+
(this.zero?"0":"")+(null==this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var ud,vd={"%":function(a,b){return(100*a).toFixed(b)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:function(a){return Math.round(a).toString(10)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},g:function(a,b){return a.toPrecision(b)},o:function(a){return Math.round(a).toString(8)},
p:function(a,b){return qd(100*a,b)},r:qd,s:function(a,b){var c=mb(a,b);if(!c)return a+"";var d=c[0];c=c[1];c=c-(ud=3*Math.max(-8,Math.min(8,Math.floor(c/3))))+1;var e=d.length;return c===e?d:c>e?d+Array(c-e+1).join("0"):0<c?d.slice(0,c)+"."+d.slice(c):"0."+Array(1-c).join("0")+mb(a,Math.max(0,b+c-1))[0]},X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}},td="y z a f p n \u00b5 m  k M G T P E Z Y".split(" "),gd,Qa;(function(a){gd=tf(a);
Qa=gd.format;return gd})({decimal:".",thousands:",",grouping:[3],currency:["$",""]});r(zc.prototype,w);r(wd.prototype,w);r(xd.prototype,w);r(yd.prototype,w);r(Yb.prototype,w);Yb.prototype._recompute=function(a,b){a.name&&this._differs(b.Icon,b.Icon=yf(b))&&(a.Icon=!0)};r(ob.prototype,w);r(ob.prototype,{mouseUp(){let {mouseMoveListener:a,mouseUpListener:b}=this.get();window.removeEventListener("mousemove",a);window.removeEventListener("mouseup",b)},mouseDown(a){a.preventDefault();var {enableDragging:b}=
this.get();b&&this.mouseMove(a);a=this.mouseUp.bind(this);b=this.mouseMove.bind(this);window.addEventListener("mousemove",b);window.addEventListener("mouseup",a);this.set({mouseMoveListener:b,mouseUpListener:a})},mouseMove(a){let {clientWidth:b,clientHeight:c}=this.get(),d=a.offsetX/b,e=a.offsetY/c;this.set({gcx:d,gcy:e,startPos:{x:a.screenX,y:a.screenY}});this.fire("drag",{gcx:d,gcy:e})}});ob.prototype._recompute=function(a,b){if(a.clientWidth||a.extent)this._differs(b.left,b.left=Af(b))&&(a.left=
!0),this._differs(b.right,b.right=Bf(b))&&(a.right=!0);if(a.clientHeight||a.extent)this._differs(b.top,b.top=Cf(b))&&(a.top=!0),this._differs(b.bottom,b.bottom=Df(b))&&(a.bottom=!0)};r(Pb.prototype,w);r(Cd.prototype,w);r(pb.prototype,w);pb.prototype._recompute=function(a,b){a.clientWidth&&this._differs(b.width,b.width=If(b))&&(a.width=!0);(a.width||a.aspectRatio)&&this._differs(b.height,b.height=Jf(b))&&(a.height=!0)};r(Fd.prototype,w);r(Gd.prototype,w);var Ni={destroy:Hd,get:function(a){return a?
this._state[a]:this._state},fire:function(a,b){if(a=a in this._handlers&&this._handlers[a].slice())for(var c=0;c<a.length;c+=1)a[c].call(this,b)},observe:function(a,b,c){var d=c&&c.defer?this._observers.post:this._observers.pre;(d[a]||(d[a]=[])).push(b);c&&!1===c.init||(b.__calling=!0,b.call(this,this._state[a]),b.__calling=!1);return{cancel:function(){var c=d[a].indexOf(b);~c&&d[a].splice(c,1)}}},on:function(a,b){if("teardown"===a)return this.on("destroy",b);var c=this._handlers[a]||(this._handlers[a]=
[]);c.push(b);return{cancel:function(){var a=c.indexOf(b);~a&&c.splice(a,1)}}},set:function(a){this._set(rb({},a));this.root._lock||(this.root._lock=!0,sb(this.root._beforecreate),sb(this.root._oncreate),sb(this.root._aftercreate),this.root._lock=!1)},teardown:Hd,_recompute:qb,_set:function(a){var b=this._state,c={},d=!1,e;for(e in a)this._differs(a[e],b[e])&&(c[e]=d=!0);d&&(this._state=rb({},b,a),this._recompute(c,this._state),this._bind&&this._bind(c,this._state),this._fragment&&(Id(this,this._observers.pre,
c,this._state,b),this._fragment.p(c,this._state),Id(this,this._observers.post,c,this._state,b)))},_mount:function(a,b){this._fragment[this._fragment.i?"i":"m"](a,b||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(a,b){return a!=a?b==b:a!==b||a&&"object"===typeof a||"function"===typeof a}};let tb=new Map;rb(Jd.prototype,{draw(){if(this.refs.canvas){let a=this.refs.canvas.getContext("2d"),{img:b,index:c,width:d,realHeight:e,columns:g,loaded:f}=this.get();a.clearRect(0,
0,d,e);let h=Array.isArray(c)?c[0]*d:c%g*d,k=Array.isArray(c)?c[1]*e:Math.floor(c/g)*e;f?a.drawImage(b,h,k,d,e,0,0,d,e):(a.fillStyle="#ccc",a.fillRect(0,0,d,e),a.fillStyle="#eee",a.textAlign="center",a.font="16px sans-serif",a.fillText("...",d/2,e/2))}}},Ni);Jd.prototype._recompute=function(a,b){(a.width||a.height)&&this._differs(b.realHeight,b.realHeight=Nf(b.width,b.height))&&(a.realHeight=!0)};var Md={},ub={},Oi=Ld(",").parse,Pi=Ld("\t").parse;let Hc=new Map,wb=new Map,Zb=new Map,Pd=new Map([["gif",
vb],["png",vb],["jpeg",vb],["jpg",vb],["csv",function(a){return Ea(a).then((a)=>Promise.resolve(Oi(a)))}],["tsv",function(a){return Ea(a).then((a)=>Promise.resolve(Pi(a)))}],["txt",Ea],["text",Ea],["json",function(a){return fetch(a).then(Nd).then((a)=>a.json())}]]);var yb=[235,287,237,982,507,41,176,3,2,112,158,14,442,450,454,513,523,529,930,600,605,736,744,358,756,936,942,943,366,365,367,484,483,488,489,387,388,399,411,405],$e={vm:"shan-gpu-06-vm",id:"inceptionv1_mixed3a",build_dir:"build",cloud_dir:"gs://activation-atlas-public",
model:"inceptionv1",layer:"mixed3a",sample_type:"random",sample_images:1E6,filter:4E5,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"false",steps:1024,icon_size:80,layout:"200_0.05_euclidean",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},af={vm:"shan-gpu-06-vm",id:"inceptionv1_mixed3b",build_dir:"build",cloud_dir:"gs://activation-atlas-public",model:"inceptionv1",layer:"mixed3b",sample_type:"random",sample_images:1E6,filter:4E5,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"false",
steps:1024,icon_size:80,layout:"200_0.05_euclidean",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},bf={vm:"shan-gpu-08-vm",id:"inceptionv1_mixed4a",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4a"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},cf={vm:"shan-gpu-08-vm",
id:"inceptionv1_mixed4b",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4b"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},df={vm:"shan-gpu-08-vm",id:"inceptionv1_mixed4c",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4c"],
sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},ef={vm:"shan-gpu-07-vm",id:"inceptionv1_mixed4d",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4d"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,
layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},ff={vm:"shan-gpu-07-vm",id:"inceptionv1_mixed4e",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4e"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},gf={vm:"shan-gpu-08-vm",id:"inceptionv1_mixed5a",
build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed5a"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160,320],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},hf={vm:"shan-gpu-07-vm",id:"inceptionv1_mixed5b",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed5b"],sample_type:"random",
sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160,320],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1};let Wf={inceptionv1_mixed3a:$e,inceptionv1_mixed3b:af,inceptionv1_mixed4a:bf,inceptionv1_mixed4b:cf,inceptionv1_mixed4c:df,inceptionv1_mixed4d:ef,inceptionv1_mixed4e:ff,inceptionv1_mixed5a:gf,inceptionv1_mixed5b:hf};r(xb.prototype,w);r(xb.prototype,{render(){let {grid:a,gridSize:b,icons:c,classHeatmap:d,
layerName:e}=this.get(),g=this.refs.canvas.getContext("2d"),f=g.getImageData(0,0,b,b),h=f.data,k=!1,p=!1;switch(e){case "mixed4a":p=k=!0;break;case "mixed4d":k=!0;p=!1;break;case "mixed5a":k=!0;p=!1;break;case "mixed5b":k=!0,p=!1}for(let e of c){var m=1;-1<d&&(m=yb.indexOf(d),m=Math.max(.1,20*Math.max(0,e.f[m])));h[(k?b-e.x-1:e.x)*b*4+4*(p?b-e.y-1:e.y)+3]=40+e.n/Math.pow(a+1,2)*b*b*(20<b?8E-4:1.5E-4)*m}g.putImageData(f,0,0)}});xb.prototype._recompute=function(a,b){a.clientWidth&&this._differs(b.height,
b.height=Tf(b))&&(a.height=!0);(a.model||a.layerName)&&this._differs(b.id,b.id=Uf(b))&&(a.id=!0)};r(Sd.prototype,w);r(Ic.prototype,w);Ic.prototype._recompute=function(a,b){a.inceptionLabels&&this._differs(b.labels,b.labels=$f(b))&&(a.labels=!0)};var Xd={},Jc={},Qi=Wd(",").parse,Ri=Wd("\t").parse;let Lc=new Map,Fa=new Map,Kc=new Map,ae=new Map([["gif",zb],["png",zb],["jpeg",zb],["jpg",zb],["csv",function(a){return Ab(a).then((a)=>Promise.resolve(Qi(a)))}],["tsv",function(a){return Ab(a).then((a)=>
Promise.resolve(Ri(a)))}],["txt",Ab],["text",Ab],["json",function(a){return fetch(a).then(Yd).then((a)=>a.json())}]]);(function(a){1===a.length&&(a=dg(a));return{left:function(b,c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var g=d+e>>>1;0>a(b[g],c)?d=g+1:e=g}return d},right:function(b,c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var g=d+e>>>1;0<a(b[g],c)?e=g:d=g+1}return d}}})(be);let fg={inceptionv1_mixed3a:$e,inceptionv1_mixed3b:af,inceptionv1_mixed4a:bf,inceptionv1_mixed4b:cf,
inceptionv1_mixed4c:df,inceptionv1_mixed4d:ef,inceptionv1_mixed4e:ff,inceptionv1_mixed5a:gf,inceptionv1_mixed5b:hf};r(ce.prototype,w);var hg={value:function(){}};Bb.prototype=Mc.prototype={constructor:Bb,on:function(a,b){var c=this._,d=gg(a+"",c),e,g=-1,f=d.length;if(2>arguments.length)for(;++g<f;){var h;if(h=e=(a=d[g]).type){a:{h=c[e];for(var k=0,p=h.length;k<p;++k)if((e=h[k]).name===a.name){e=e.value;break a}e=void 0}h=e}if(h)return e}else{if(null!=b&&"function"!==typeof b)throw Error("invalid callback: "+
b);for(;++g<f;)if(e=(a=d[g]).type)c[e]=de(c[e],a.name,b);else if(null==b)for(e in c)c[e]=de(c[e],a.name,null);return this}},copy:function(){var a={},b=this._,c;for(c in b)a[c]=b[c].slice();return new Bb(a)},call:function(a,b){if(0<(e=arguments.length-2))for(var c=Array(e),d=0,e,g;d<e;++d)c[d]=arguments[d+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);g=this._[a];d=0;for(e=g.length;d<e;++d)g[d].value.apply(b,c)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+
a);a=this._[a];for(var d=0,e=a.length;d<e;++d)a[d].value.apply(b,c)}};var ee={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},jf=function(a){return function(){return this.matches(a)}};if("undefined"!==typeof document){var jb=document.documentElement;if(!jb.matches){var Si=jb.webkitMatchesSelector||jb.msMatchesSelector||jb.mozMatchesSelector||jb.oMatchesSelector;
jf=function(a){return function(){return Si.call(this,a)}}}}var kf=jf;Db.prototype={constructor:Db,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};ie.prototype={add:function(a){0>this._names.indexOf(a)&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},
remove:function(a){a=this._names.indexOf(a);0<=a&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return 0<=this._names.indexOf(a)}};var me={},u=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(me={mouseenter:"mouseover",mouseleave:"mouseout"}));var oe=[null];F.prototype=Ha.prototype={constructor:F,select:function(a){"function"!==typeof a&&(a=Nc(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var g=
b[e],f=g.length,h=d[e]=Array(f),k,p,m=0;m<f;++m)(k=g[m])&&(p=a.call(k,k.__data__,m,g))&&("__data__"in k&&(p.__data__=k.__data__),h[m]=p);return new F(d,this._parents)},selectAll:function(a){"function"!==typeof a&&(a=ge(a));for(var b=this._groups,c=b.length,d=[],e=[],g=0;g<c;++g)for(var f=b[g],h=f.length,k,p=0;p<h;++p)if(k=f[p])d.push(a.call(k,k.__data__,p,f)),e.push(k);return new F(d,e)},filter:function(a){"function"!==typeof a&&(a=kf(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var g=
b[e],f=g.length,h=d[e]=[],k,p=0;p<f;++p)(k=g[p])&&a.call(k,k.__data__,p,g)&&h.push(k);return new F(d,this._parents)},data:function(a,b){if(!a)return q=Array(this.size()),p=-1,this.each(function(a){q[++p]=a}),q;var c=b?og:ng,d=this._parents,e=this._groups;"function"!==typeof a&&(a=mg(a));for(var g=e.length,f=Array(g),h=Array(g),k=Array(g),p=0;p<g;++p){var m=d[p],l=e[p],n=l.length,q=a.call(m,m&&m.__data__,p,d),r=q.length,t=h[p]=Array(r),z=f[p]=Array(r);n=k[p]=Array(n);c(m,l,t,z,n,q,b);l=m=0;for(var u;m<
r;++m)if(n=t[m]){for(m>=l&&(l=m+1);!(u=z[l])&&++l<r;);n._next=u||null}}f=new F(f,d);f._enter=h;f._exit=k;return f},enter:function(){return new F(this._enter||this._groups.map(he),this._parents)},exit:function(){return new F(this._exit||this._groups.map(he),this._parents)},merge:function(a){var b=this._groups;a=a._groups;for(var c=b.length,d=Math.min(c,a.length),e=Array(c),g=0;g<d;++g)for(var f=b[g],h=a[g],k=f.length,p=e[g]=Array(k),m,l=0;l<k;++l)if(m=f[l]||h[l])p[l]=m;for(;g<c;++g)e[g]=b[g];return new F(e,
this._parents)},order:function(){for(var a=this._groups,b=-1,c=a.length;++b<c;)for(var d=a[b],e=d.length-1,g=d[e],f;0<=--e;)if(f=d[e])g&&g!==f.nextSibling&&g.parentNode.insertBefore(f,g),g=f;return this},sort:function(a){function b(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}a||(a=pg);for(var c=this._groups,d=c.length,e=Array(d),g=0;g<d;++g){for(var f=c[g],h=f.length,k=e[g]=Array(h),p,m=0;m<h;++m)if(p=f[m])k[m]=p;k.sort(b)}return(new F(e,this._parents)).order()},call:function(){var a=arguments[0];
arguments[0]=this;a.apply(null,arguments);return this},nodes:function(){var a=Array(this.size()),b=-1;this.each(function(){a[++b]=this});return a},node:function(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var d=a[b],e=0,g=d.length;e<g;++e){var f=d[e];if(f)return f}return null},size:function(){var a=0;this.each(function(){++a});return a},empty:function(){return!this.node()},each:function(a){for(var b=this._groups,c=0,d=b.length;c<d;++c)for(var e=b[c],g=0,f=e.length,h;g<f;++g)(h=e[g])&&a.call(h,
h.__data__,g,e);return this},attr:function(a,b){var c=Cb(a);if(2>arguments.length){var d=this.node();return c.local?d.getAttributeNS(c.space,c.local):d.getAttribute(c)}return this.each((null==b?c.local?rg:qg:"function"===typeof b?c.local?vg:ug:c.local?tg:sg)(c,b))},style:function(a,b,c){return 1<arguments.length?this.each((null==b?wg:"function"===typeof b?yg:xg)(a,b,null==c?"":c)):Ga(this.node(),a)},property:function(a,b){return 1<arguments.length?this.each((null==b?zg:"function"===typeof b?Bg:Ag)(a,
b)):this.node()[a]},classed:function(a,b){var c=(a+"").trim().split(/^|\s+/);if(2>arguments.length){for(var d=Oc(this.node()),e=-1,g=c.length;++e<g;)if(!d.contains(c[e]))return!1;return!0}return this.each(("function"===typeof b?Eg:b?Cg:Dg)(c,b))},text:function(a){return arguments.length?this.each(null==a?Fg:("function"===typeof a?Hg:Gg)(a)):this.node().textContent},html:function(a){return arguments.length?this.each(null==a?Ig:("function"===typeof a?Kg:Jg)(a)):this.node().innerHTML},raise:function(){return this.each(Lg)},
lower:function(){return this.each(Mg)},append:function(a){var b="function"===typeof a?a:fe(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},insert:function(a,b){var c="function"===typeof a?a:fe(a),d=null==b?Ng:"function"===typeof b?b:Nc(b);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})},remove:function(){return this.each(Og)},clone:function(a){return this.select(a?Qg:Pg)},datum:function(a){return arguments.length?
this.property("__data__",a):this.node().__data__},on:function(a,b,c){var d=Sg(a+""),e=d.length,g;if(2>arguments.length){var f=this.node().__on;if(f)for(var h=0,k=f.length,p;h<k;++h){var m=0;for(p=f[h];m<e;++m)if((g=d[m]).type===p.type&&g.name===p.name)return p.value}}else{f=b?Ug:Tg;null==c&&(c=!1);for(m=0;m<e;++m)this.each(f(d[m],b,c));return this}},dispatch:function(a,b){return this.each(("function"===typeof b?Wg:Vg)(a,b))}};var qa=1/.7,Zg=/^#([0-9a-f]{3})$/,$g=/^#([0-9a-f]{6})$/,ah=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,
bh=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,ch=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,dh=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,eh=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,
fh=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ve={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,
crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,
floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,
lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,
moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,
sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ma(ta,Xa,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}});ma(B,Rc,sa(ta,{brighter:function(a){a=
null==a?qa:Math.pow(qa,a);return new B(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new B(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},hex:function(){return"#"+Sc(this.r)+Sc(this.g)+Sc(this.b)},toString:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(1===a?"rgb(":
"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}}));ma(ea,function(a,b,c,d){return 1===arguments.length?gh(a):new ea(a,b,c,null==d?1:d)},sa(ta,{brighter:function(a){a=null==a?qa:Math.pow(qa,a);return new ea(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new ea(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=
this.h%360+360*(0>this.h),b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l;b=c+(.5>c?c:1-c)*b;c=2*c-b;return new B(Tc(240<=a?a-240:a+120,c,b),Tc(a,c,b),Tc(120>a?a+240:a-120,c,b),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var we=Math.PI/180,ze=180/Math.PI,ye=4/29,Ja=6/29,xe=3*Ja*Ja,hh=Ja*Ja*Ja;ma(fa,function(a,b,c,d){return 1===arguments.length?Uc(a):new fa(a,b,c,null==d?1:d)},sa(ta,{brighter:function(a){return new fa(this.l+
18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new fa(this.l-18*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;b=.96422*Xc(b);a=1*Xc(a);c=.82521*Xc(c);return new B(Yc(3.1338561*b-1.6168667*a-.4906146*c),Yc(-.9787684*b+1.9161415*a+.033454*c),Yc(.0719453*b-.2289914*a+1.4052427*c),this.opacity)}}));ma(na,function(a,b,c,d){return 1===arguments.length?ih(a):new na(a,b,c,null==d?1:d)},
sa(ta,{brighter:function(a){return new na(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function(a){return new na(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function(){return Uc(this).rgb()}}));var lf=1.78277*-.29227-.1347134789;ma(oa,function(a,b,c,d){if(1===arguments.length){var e=a;if(e instanceof oa)e=new oa(e.h,e.s,e.l,e.opacity);else{e instanceof B||(e=Qc(e));var g=e.g/255,f=e.b/255,h=(lf*f+e.r/255*-1.7884503806-3.5172982438*g)/(lf+-1.7884503806-3.5172982438);f-=
h;var k=(1.97294*(g-h)- -.29227*f)/-.90649;f=(g=Math.sqrt(k*k+f*f)/(1.97294*h*(1-h)))?Math.atan2(k,f)*ze-120:NaN;e=new oa(0>f?f+360:f,g,h,e.opacity)}}else e=new oa(a,b,c,null==d?1:d);return e},sa(ta,{brighter:function(a){a=null==a?qa:Math.pow(qa,a);return new oa(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new oa(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=isNaN(this.h)?0:(this.h+120)*we,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),d=Math.cos(a);
a=Math.sin(a);return new B(255*(b+c*(-.14861*d+1.78277*a)),255*(b+c*(-.29227*d+-.90649*a)),255*(b+1.97294*c*d),this.opacity)}}));var Le=function c(b){function d(b,c){var d=e((b=Rc(b)).r,(c=Rc(c)).r),f=e(b.g,c.g),g=e(b.b,c.b),m=Be(b.opacity,c.opacity);return function(c){b.r=d(c);b.g=f(c);b.b=g(c);b.opacity=m(c);return b+""}}var e=lh(b);d.gamma=c;return d}(1),Zc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$c=new RegExp(Zc.source,"g"),De=180/Math.PI,hd={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,
scaleY:1},Da,id,mf,kb,Ti=Ee(function(b){if("none"===b)return hd;Da||(Da=document.createElement("DIV"),id=document.documentElement,mf=document.defaultView);Da.style.transform=b;b=mf.getComputedStyle(id.appendChild(Da),null).getPropertyValue("transform");id.removeChild(Da);b=b.slice(7,-1).split(",");return Ce(+b[0],+b[1],+b[2],+b[3],+b[4],+b[5])},"px, ","px)","deg)"),Ui=Ee(function(b){if(null==b)return hd;kb||(kb=document.createElementNS("http://www.w3.org/2000/svg","g"));kb.setAttribute("transform",
b);if(!(b=kb.transform.baseVal.consolidate()))return hd;b=b.matrix;return Ce(b.a,b.b,b.c,b.d,b.e,b.f)},", ",")",")"),Ya=Math.SQRT2,Ma=0,Za=0,wa=0,$a,ab,La=0,Aa=0,Ka=0,va="object"===typeof performance&&performance.now?performance:Date,Ge="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(b){setTimeout(b,17)};Fb.prototype=He.prototype={constructor:Fb,restart:function(b,c,d){if("function"!==typeof b)throw new TypeError("callback is not a function");
d=(null==d?Eb():+d)+(null==c?0:+c);this._next||ab===this||(ab?ab._next=this:$a=this,ab=this);this._call=b;this._time=d;ad()},stop:function(){this._call&&(this._call=null,this._time=Infinity,ad())}};var th=Mc("start","end","interrupt"),uh=[],Vi=Ha.prototype.constructor,nf=0,Ra=Ha.prototype;pa.prototype=function(b){return Ha().transition(b)}.prototype={constructor:pa,select:function(b){var c=this._name,d=this._id;"function"!==typeof b&&(b=Nc(b));for(var e=this._groups,g=e.length,f=Array(g),h=0;h<g;++h)for(var k=
e[h],p=k.length,m=f[h]=Array(p),l,n,q=0;q<p;++q)(l=k[q])&&(n=b.call(l,l.__data__,q,k))&&("__data__"in l&&(n.__data__=l.__data__),m[q]=n,Gb(m[q],c,d,q,m,aa(l,d)));return new pa(f,this._parents,c,d)},selectAll:function(b){var c=this._name,d=this._id;"function"!==typeof b&&(b=ge(b));for(var e=this._groups,g=e.length,f=[],h=[],k=0;k<g;++k)for(var p=e[k],m=p.length,l,n=0;n<m;++n)if(l=p[n]){for(var q=b.call(l,l.__data__,n,p),r,t=aa(l,d),u=0,v=q.length;u<v;++u)(r=q[u])&&Gb(r,c,d,u,q,t);f.push(q);h.push(l)}return new pa(f,
h,c,d)},filter:function(b){"function"!==typeof b&&(b=kf(b));for(var c=this._groups,d=c.length,e=Array(d),g=0;g<d;++g)for(var f=c[g],h=f.length,k=e[g]=[],l,m=0;m<h;++m)(l=f[m])&&b.call(l,l.__data__,m,f)&&k.push(l);return new pa(e,this._parents,this._name,this._id)},merge:function(b){if(b._id!==this._id)throw Error();var c=this._groups;b=b._groups;for(var d=c.length,e=Math.min(d,b.length),g=Array(d),f=0;f<e;++f)for(var h=c[f],k=b[f],l=h.length,m=g[f]=Array(l),n,q=0;q<l;++q)if(n=h[q]||k[q])m[q]=n;for(;f<
d;++f)g[f]=c[f];return new pa(g,this._parents,this._name,this._id)},selection:function(){return new Vi(this._groups,this._parents)},transition:function(){for(var b=this._name,c=this._id,d=++nf,e=this._groups,g=e.length,f=0;f<g;++f)for(var h=e[f],k=h.length,l,m=0;m<k;++m)if(l=h[m]){var n=aa(l,c);Gb(l,b,d,m,h,{time:n.time+n.delay+n.duration,delay:0,duration:n.duration,ease:n.ease})}return new pa(e,this._parents,b,d)},call:Ra.call,nodes:Ra.nodes,node:Ra.node,size:Ra.size,empty:Ra.empty,each:Ra.each,
on:function(b,c){var d=this._id;return 2>arguments.length?aa(this.node(),d).on.on(b):this.each(Lh(d,b,c))},attr:function(b,c){var d=Cb(b),e="transform"===d?Ui:Ke;return this.attrTween(b,"function"===typeof c?(d.local?Ch:Bh)(d,e,cd(this,"attr."+b,c)):null==c?(d.local?yh:xh)(d):(d.local?Ah:zh)(d,e,c+""))},attrTween:function(b,c){var d="attr."+b;if(2>arguments.length)return(d=this.tween(d))&&d._value;if(null==c)return this.tween(d,null);if("function"!==typeof c)throw Error();var e=Cb(b);return this.tween(d,
(e.local?Dh:Eh)(e,c))},style:function(b,c,d){var e="transform"===(b+="")?Ti:Ke;return null==c?this.styleTween(b,Nh(b,e)).on("end.style."+b,Oh(b)):this.styleTween(b,"function"===typeof c?Qh(b,e,cd(this,"style."+b,c)):Ph(b,e,c+""),d)},styleTween:function(b,c,d){var e="style."+(b+="");if(2>arguments.length)return(e=this.tween(e))&&e._value;if(null==c)return this.tween(e,null);if("function"!==typeof c)throw Error();return this.tween(e,Rh(b,c,null==d?"":d))},text:function(b){return this.tween("text","function"===
typeof b?Th(cd(this,"text",b)):Sh(null==b?"":b+""))},remove:function(){return this.on("end.remove",Mh(this._id))},tween:function(b,c){var d=this._id;b+="";if(2>arguments.length){d=aa(this.node(),d).tween;for(var e=0,g=d.length,f;e<g;++e)if((f=d[e]).name===b)return f.value;return null}return this.each((null==c?vh:wh)(d,b,c))},delay:function(b){var c=this._id;return arguments.length?this.each(("function"===typeof b?Fh:Gh)(c,b)):aa(this.node(),c).delay},duration:function(b){var c=this._id;return arguments.length?
this.each(("function"===typeof b?Hh:Ih)(c,b)):aa(this.node(),c).duration},ease:function(b){var c=this._id;return arguments.length?this.each(Jh(c,b)):aa(this.node(),c).ease}};var jd={time:null,delay:0,duration:250,ease:function(b){return(1>=(b*=2)?b*b*b:(b-=2)*b*b+2)/2}};Ha.prototype.interrupt=function(b){return this.each(function(){Na(this,b)})};Ha.prototype.transition=function(b){var c;if(b instanceof pa){var d=b._id;b=b._name}else d=++nf,(c=jd).time=Eb(),b=null==b?null:b+"";for(var e=this._groups,
g=e.length,f=0;f<g;++f)for(var h=e[f],k=h.length,l,m=0;m<k;++m)if(l=h[m]){var n=l,q=b,r=d,t=m,u=h,v;if(!(v=c))a:{v=void 0;for(var x=d;!(v=l.__transition)||!(v=v[x]);)if(!(l=l.parentNode)){v=(jd.time=Eb(),jd);break a}}Gb(n,q,r,t,u,v)}return new pa(e,this._parents,b,d)};O.prototype={constructor:O,scale:function(b){return 1===b?this:new O(this.k*b,this.x,this.y)},translate:function(b,c){return 0===b&0===c?this:new O(this.k,this.x+this.k*b,this.y+this.k*c)},apply:function(b){return[b[0]*this.k+this.x,
b[1]*this.k+this.y]},applyX:function(b){return b*this.k+this.x},applyY:function(b){return b*this.k+this.y},invert:function(b){return[(b[0]-this.x)/this.k,(b[1]-this.y)/this.k]},invertX:function(b){return(b-this.x)/this.k},invertY:function(b){return(b-this.y)/this.k},rescaleX:function(b){return b.copy().domain(b.range().map(this.invertX,this).map(b.invert,b))},rescaleY:function(b){return b.copy().domain(b.range().map(this.invertY,this).map(b.invert,b))},toString:function(){return"translate("+this.x+
","+this.y+") scale("+this.k+")"}};var Oa=new O(1,0,0);Me.prototype=O.prototype;var G={components:[],running:!1,add:function(b){~G.components.indexOf(b)||(G.components.push(b),G.running||(G.running=!0,requestAnimationFrame(G.next)))},next:function(){for(var b=window.performance.now(),c=!1,d=G.components.length;d--;){var e=G.components[d],g={},f=!1,h;for(h in e._currentTweens){var k=e._currentTweens[h];b>=k.end?(g[h]=k.to,delete e._currentTweens[h],k.fulfil()):(c=f=!0,b>=k.start&&(g[h]=k.value(k.ease((b-
k.start)/k.duration))))}e._tweening=!0;e.set(g);e._tweening=!1;f||G.components.splice(d,1)}c?requestAnimationFrame(G.next):G.running=!1}};r(cb.prototype,w);r(cb.prototype,{tween:function(b,c,d){var e=this;void 0===d&&(d={});if(!this._currentTweens){this._currentTweens=Object.create(null);this._tweening=!1;var g=this.set;this.set=function(b){if(!e._tweening)for(var c in b)e._currentTweens[c]&&e._currentTweens[c].abort();g.call(e,b)}}this._currentTweens[b]&&this._currentTweens[b].abort();var f=window.performance.now()+
(d.delay||0),h=d.duration||400,k=f+h,l={key:b,value:(d.interpolate||dd)(this.get()[b],c),to:c,start:f,end:k,duration:h,ease:d.easing||bi,running:!0,abort:function(){l.running=!1;delete e._currentTweens[b]}};this._currentTweens[b]=l;G.add(this);c=new Promise(function(b){l.fulfil=b});c.abort=l.abort;return c},zoomEventFilter:function(){let {scrollWheel:b,disableBehaviors:c}=this.get();return c?!1:b?!u.button:!("wheel"===u.type&&!1===u.ctrlKey)&&!u.button},mouseMove:function(b){this.set({msx:b.offsetX,
msy:b.offsetY});let {}=this.get()},update:function(){var {el:b}=this.get();b=Me(b);this.set({scale:b.k,transform:b,translateX:b.x,translateY:b.y})},onzoom:function(b){b.update();b.fire("zoom")},zoomTo:function(b,c,d=1,e=1E3){let {selection:g,z:f,minSize:h,clientWidth:k,clientHeight:l}=this.get();g.transition().duration(e).call(f.transform,Oa.translate(k/2,l/2).scale(d).translate(-b*h,-c*h))},translateTo:function(b,c){let {z:d,selection:e,minSize:g}=this.get();d.translateTo(e,b*g,c*g)},home:function(b=
0){let {homeX:c,homeY:d,homeScale:e}=this.get();this.zoomTo(c,d,e,b)},scaleTo:function(b,c=0){let {z:d,selection:e}=this.get();e.transition().duration(c).call(d.scaleTo,b)}});cb.prototype._recompute=function(b,c){(b.clientWidth||b.clientHeight)&&this._differs(c.minSize,c.minSize=ci(c))&&(b.minSize=!0);(b.msx||b.msy)&&this._differs(c.mouseOver,c.mouseOver=di(c))&&(b.mouseOver=!0);(b.transform||b.msx||b.msy||b.clientHeight||b.clientWidth||b.minSize)&&this._differs(c.mouseGlobalPosition,c.mouseGlobalPosition=
ei(c))&&(b.mouseGlobalPosition=!0);(b.scale||b.translateX||b.translateY||b.minSize||b.clientWidth||b.clientHeight)&&this._differs(c.extent,c.extent=fi(c))&&(b.extent=!0);b.extent&&(this._differs(c.gcx,c.gcx=gi(c))&&(b.gcx=!0),this._differs(c.gcy,c.gcy=hi(c))&&(b.gcy=!0))};r(Bc.prototype,w);r(Bc.prototype,{fullscreen(){this.refs.root.webkitRequestFullscreen()},home(b=0){this.refs.d3Zoom.home(b)},translateTo(b,c){this.refs.d3Zoom.translateTo(b,c)},zoomTo(b,c,d,e=1E3){this.refs.d3Zoom.zoomTo(b,c,d,e)},
transitionTo(b,c,d,e=0){this.refs.d3Zoom.transformTo(b,c,d,e)},scaleBy(b){let {scale:c}=this.get();this.refs.d3Zoom.scaleTo(c*b,300)},iconToGlobalPosition(b,c){let {density:d,scale:e,translateX:g,translateY:f,config:h,w:k,h:l}=this.get();var m=h.grid_size[c];c=b.gw*e*Math.min(k,l);m=c*Math.min(1,Math.sqrt(d*b.num_activations/(("number"==typeof h.filter[0]?h.filter[0]:h.sample_images)/(m*m))));return{sourceX:b.localX*h.icon_size,sourceY:b.localY*h.icon_size,iconX:b.gy*e*Math.min(k,l)+g+(c-m)/2,iconY:b.gx*
e*Math.min(k,l)+f+(c-m)/2,iconWidth:m}},clear(){let {viewHeight:b,viewWidth:c,context:d,backgroundColor:e,labelsContext:g}=this.get();d.globalAlpha=1;d.fillStyle=e;d.clearRect(0,0,c,b);d.fillRect(0,0,c,b);g.globalAlpha=1;g.clearRect(0,0,c,b)},render(){let {id:b,labelsContext:c,loading:d,classHeatmap:e,showLabels:g,labels:f,labelsBufferCanvas:h,imageSmoothing:k,scale:l,w:m,h:n,translateX:q,translateY:r,context:t,config:u,layers:v,currentZoomIndex:x,strokeColor:w,strokeThickness:y,maxAttributionValue:B}=
this.get();this.clear();t.imageSmoothingEnabled=k;c.strokeStyle=w;c.lineWidth=y;t.fillStyle="white";if(u&&v&&!d){let d=[{i:x,opacity:1}];this.set({visibleLayers:d});d.forEach((d)=>{let k=d.i;d=v[k];var p=Math.min(m,n);let u=Math.max(0,Math.floor(-(q/l/p)*d.length)),x=u+Math.ceil(m/l/p*d.length);var w=Math.max(0,Math.floor(-(r/l/p)*d.length));for(p=w+Math.ceil(n/l/p*d.length);w<=p;w++)for(let l=u;l<=x;l++)if(d[w]&&d[w][l]){let m=d[w][l],{iconX:p,iconY:n,iconWidth:q}=this.iconToGlobalPosition(m,k),
r=b;{c.globalAlpha=.3;c.strokeRect(p,n,q,q);c.globalAlpha=1;var y=Math.ceil(40/q);let b=Math.ceil(60/q);g&&f&&-1===e&&0==m.y%b&&0==m.x%y&&(c.globalAlpha=1,y=m.top_class_indices[0],c.drawImage(h,y%10*150,20*Math.floor(y/10)+4,Math.min(q*b-5,100),20,p,n+q-20-2,Math.min(q*b-5,100),20));Zd(m.url).then((b)=>{let {id:c,visibleLayers:d}=this.get();if(d.reduce((b,c)=>c.i===k?b+1:b,0)&&r===c){let {config:c,classHeatmap:d,classHeatmapMultiplier:g,classHeatmapPositive:h}=this.get(),{sourceX:l,sourceY:p,iconX:n,
iconY:q,iconWidth:r}=this.iconToGlobalPosition(m,k);var e=1;-1<d&&(e=m.full_class_indices.indexOf(d),-1<e?(e=m.full_class_values[e]/B,e*=h,e=Math.max(0,e)*g):e=0);var f=Math.min(8/r,.6);t.globalAlpha=1;f=f*c.icon_size/2;-1<d&&t.fillRect(n,q,r,r);t.globalAlpha=e;t.drawImage(b,p+f,l+f,c.icon_size-2*f,c.icon_size-2*f,n,q,r,r)}})}}})}}});Bc.prototype._recompute=function(b,c){(b.layers||b.layer)&&this._differs(c.maxAttributionValue,c.maxAttributionValue=ki(c))&&(b.maxAttributionValue=!0);(b.viewWidth||
b.screenResolution)&&this._differs(c.w,c.w=li(c))&&(b.w=!0);(b.viewHeight||b.screenResolution)&&this._differs(c.h,c.h=mi(c))&&(b.h=!0);(b.scale||b.gridSize||b.config||b.classHeatmap||b.w||b.h||b.autoGridSizeMultiplier)&&this._differs(c.currentZoomIndex,c.currentZoomIndex=ni(c))&&(b.currentZoomIndex=!0);(b.currentZoomIndex||b.layers)&&this._differs(c.currentLayerData,c.currentLayerData=oi(c))&&(b.currentLayerData=!0);(b.labelsBufferContext||b.labels||b.fontSize||b.textColor||b.textShadowColor)&&this._differs(c.labelsBuffer,
c.labelsBuffer=pi(c))&&(b.labelsBuffer=!0);(b.currentLayerData||b.config||b.mouseGlobalPosition||b.w||b.h||b.translateX||b.translateY)&&this._differs(c.hoverIconData,c.hoverIconData=ri(c))&&(b.hoverIconData=!0);(b.hoverIconData||b.mouseGlobalPosition)&&this._differs(c.showHover,c.showHover=qi(c))&&(b.showHover=!0);(b.hoverIconData||b.scale||b.w||b.h||b.translateX)&&this._differs(c.hoverIconX,c.hoverIconX=si(c))&&(b.hoverIconX=!0);(b.hoverIconData||b.scale||b.w||b.h||b.translateY)&&this._differs(c.hoverIconY,
c.hoverIconY=ti(c))&&(b.hoverIconY=!0);(b.hoverIconData||b.scale||b.w||b.h)&&this._differs(c.hoverIconW,c.hoverIconW=ui(c))&&(b.hoverIconW=!0);(b.mouseGlobalPosition||b.hoverIconData||b.enableHover)&&this._differs(c.showHoverIcon,c.showHoverIcon=vi(c))&&(b.showHoverIcon=!0)};r(ed.prototype,w);r(fd.prototype,w);fd.prototype._recompute=function(b,c){(b.clientWidth||b.minWidth)&&this._differs(c.scale,c.scale=Ai(c))&&(b.scale=!0);(b.clientWidth||b.width||b.minWidth)&&this._differs(c.finalWidth,c.finalWidth=
Bi(c))&&(b.finalWidth=!0);(b.clientHeight||b.scale)&&this._differs(c.finalHeight,c.finalHeight=Ci(c))&&(b.finalHeight=!0)};var Sb=Qa(".3f");r(Kb.prototype,w);r(Kb.prototype,{home(b){this.refs.atlas.home(b)},zoomTo(b,c,d,e=1E3){this.refs.atlas.zoomTo(b,c,d,e)},toggle(){let {showOptions:b}=this.get();this.set({showOptions:!b})}});Kb.prototype._recompute=function(b,c){b.gridSize&&this._differs(c.realGridSize,c.realGridSize=Ei(c))&&(b.realGridSize=!0);(b.iconScaleFactor||b.realGridSize)&&this._differs(c.scaleCountFactor,
c.scaleCountFactor=Fi(c))&&(b.scaleCountFactor=!0)};r(Se.prototype,w);r(Pa.prototype,w);r(Pa.prototype,{mousemove:function(b){let {visible:c}=this.get();c&&this.set({x:b.clientX,y:b.clientY})},show:function(b){this.set({visible:!0});this.refs.component.set(b)},hide:function(){this.set({visible:!1})}});Pa.prototype._recompute=function(b,c){(b.x||b.width||b.y||b.clientHeight||b.visible)&&this._differs(c.style,c.style=Ji(c))&&(b.style=!0)};var Ye=Qa(".2f"),Ve=Qa(",");r(Ze.prototype,w);Lb.set({scroll:!0});
Lb.set({tooltip:new Pa({target:document.body,store:Lb,data:{width:250,component:Ze}})});new Se({target:document.querySelector("#app"),store:Lb,data:{}})})();
//# sourceMappingURL=app.min.js.map
