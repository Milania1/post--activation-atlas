'use strict';(function(){function M(){}function r(a,b){for(var c in b)a[c]=b[c];return a}function Da(a,b){for(var c in b)a[c]=1;return a}function w(a){a.parentNode.removeChild(a)}function yc(a){for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling)}function ja(a,b){for(;a.firstChild;)b.appendChild(a.firstChild)}function Gb(a,b){for(var c=0;c<a.length;c+=1)a[c]&&a[c].d(b)}function ra(){return document.createDocumentFragment()}function l(a){return document.createElement(a)}function Z(a){return document.createElementNS("http://www.w3.org/2000/svg",
a)}function p(a){return document.createTextNode(a)}function t(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function zc(a){return""===a?void 0:+a}function q(a,b,c){a.style.setProperty(b,c)}function Ea(a,b){"static"===getComputedStyle(a).position&&(a.style.position="relative");let c=document.createElement("object");c.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;");c.type="text/html";
let d;c.onload=()=>{d=c.contentDocument.defaultView;d.addEventListener("resize",b)};/Trident/.test(navigator.userAgent)?(a.appendChild(c),c.data="about:blank"):(c.data="about:blank",a.appendChild(c));return{cancel:()=>{d&&d.removeEventListener&&d.removeEventListener("resize",b);a.removeChild(c)}}}function dd(a,b){return a!=a?b==b:a!==b||a&&"object"===typeof a||"function"===typeof a}function Te(a,b){return a!=a?b==b:a!==b}function ed(a,b){if(a=a in this._handlers&&this._handlers[a].slice())for(var c=
0;c<a.length;c+=1){var d=a[c];if(!d.__calling)try{d.__calling=!0,d.call(this,b)}finally{d.__calling=!1}}}function G(a){a._lock=!0;hb(a._beforecreate);hb(a._oncreate);hb(a._aftercreate);a._lock=!1}function fd(){return this._state}function z(a,b){a._handlers=Object.create(null);a._slots=Object.create(null);a._bind=b._bind;a._staged={};a.options=b;a.root=b.root||a;a.store=b.store||a.root.store;b.root||(a._beforecreate=[],a._oncreate=[],a._aftercreate=[])}function gd(a,b){var c=this._handlers[a]||(this._handlers[a]=
[]);c.push(b);return{cancel:function(){var a=c.indexOf(b);~a&&c.splice(a,1)}}}function hb(a){for(;a&&a.length;)a.shift()()}function hd(){this.store._remove(this)}function id(a,b){this._handlers={};this._dependents=[];this._computed=Object.create(null);this._sortedComputedProperties=[];this._state=r({},a);this._differs=b&&b.immutable?Te:dd}function ib(a,b){if(0>(b=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e")))return null;var c=a.slice(0,b);return[1<c.length?c[0]+c.slice(2):c,+a.slice(b+
1)]}function Ue(a){return a=ib(Math.abs(a)),a?a[1]:NaN}function Ve(a,b){return function(c,d){for(var e=c.length,g=[],f=0,h=a[0],k=0;0<e&&0<h;){k+h+1>d&&(h=Math.max(1,d-k));g.push(c.substring(e-=h,e+h));if((k+=h+1)>d)break;h=a[f=(f+1)%a.length]}return g.reverse().join(b)}}function We(a){return function(b){return b.replace(/[0-9]/g,function(b){return a[+b]})}}function Hb(a){return new Ib(a)}function Ib(a){if(!(b=Xe.exec(a)))throw Error("invalid format: "+a);var b;this.fill=b[1]||" ";this.align=b[2]||
">";this.sign=b[3]||"-";this.symbol=b[4]||"";this.zero=!!b[5];this.width=b[6]&&+b[6];this.comma=!!b[7];this.precision=b[8]&&+b[8].slice(1);this.trim=!!b[9];this.type=b[10]||""}function jd(a,b){b=ib(a,b);if(!b)return a+"";a=b[0];b=b[1];return 0>b?"0."+Array(-b).join("0")+a:a.length>b+1?a.slice(0,b+1)+"."+a.slice(b+1):a+Array(b-a.length+2).join("0")}function kd(a){return a}function Ye(a){function b(a){function b(a){var b=r,d=t,f,k;if("c"===q)d=u(a)+d,a="";else{a=+a;var m=0>a;a=u(Math.abs(a),v);if(p){var Q=
a.length,D=1,la=-1;a:for(;D<Q;++D)switch(a[D]){case ".":la=f=D;break;case "0":0===la&&(la=D);f=D;break;default:if(0<la){if(!+a[D])break a;la=0}}a=0<la?a.slice(0,la)+a.slice(f+1):a}m&&0===+a&&(m=!1);b=(m?"("===y?y:"-":"-"===y||"("===y?"":y)+b;d=("s"===q?ld[8+md/3]:"")+d+(m&&"("===y?")":"");if(w)for(m=-1,f=a.length;++m<f;)if(k=a.charCodeAt(m),48>k||57<k){d=(46===k?e+a.slice(m+1):a.slice(m))+d;a=a.slice(0,m);break}}F&&!C&&(a=c(a,Infinity));k=b.length+a.length+d.length;m=k<l?Array(l-k+1).join(h):"";F&&
C&&(a=c(m+a,m.length?l-d.length:Infinity),m="");switch(n){case "<":a=b+a+d+m;break;case "=":a=b+m+a+d;break;case "^":a=m.slice(0,k=m.length>>1)+b+a+d+m.slice(k);break;default:a=m+b+a+d}return g(a)}a=Hb(a);var h=a.fill,n=a.align,y=a.sign,Q=a.symbol,C=a.zero,l=a.width,F=a.comma,v=a.precision,p=a.trim,q=a.type;"n"===q?(F=!0,q="g"):nd[q]||(null==v&&(v=12),p=!0,q="g");if(C||"0"===h&&"="===n)C=!0,h="0",n="=";var r="$"===Q?d[0]:"#"===Q&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",t="$"===Q?d[1]:/[%p]/.test(q)?
f:"",u=nd[q],w=/[defgprs%]/.test(q);v=null==v?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));b.toString=function(){return a+""};return b}var c=a.grouping&&a.thousands?Ve(a.grouping,a.thousands):kd,d=a.currency,e=a.decimal,g=a.numerals?We(a.numerals):kd,f=a.percent||"%";return{format:b,formatPrefix:function(a,c){var d=b((a=Hb(a),a.type="f",a));a=3*Math.max(-8,Math.min(8,Math.floor(Ue(c)/3)));var e=Math.pow(10,-a),f=ld[8+a/3];return function(a){return d(e*a)+f}}}}function Ze(a,
b){function c(b){a.fire("click")}var d,e=a._slotted.default;return{c(){d=l("button");d.addEventListener("click",c,void 0);q(d,"background-color",b.backgroundColor);q(d,"color",b.color);d.className="svelte-1cv5054"},m(a,b){a.insertBefore(d,b);e&&d.appendChild(e)},p(a,b){a.backgroundColor&&q(d,"background-color",b.backgroundColor);a.color&&q(d,"color",b.color)},d(a){a&&w(d);e&&ja(d,e);d.removeEventListener("click",c,void 0)}}}function tc(a){z(this,a);this._state=r({backgroundColor:"rgb(255, 130, 0)",
color:"white"},a.data);this._intro=!0;this._slotted=a.slots||{};this._fragment=Ze(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function $e(a,b){var c,d,e;return{c(){c=Z("svg");d=Z("path");e=Z("path");t(d,"d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z");t(e,"d","M0 0h24v24H0z");t(e,"fill","none");t(c,"xmlns","http://www.w3.org/2000/svg");t(c,"width","24");t(c,"height","24");t(c,"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:M,d(a){a&&
w(c)}}}function od(a){z(this,a);this._state=r({},a.data);this._intro=!0;this._fragment=$e(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function af(a,b){var c,d,e;return{c(){c=Z("svg");d=Z("path");e=Z("path");t(d,"d","M19 13H5v-2h14v2z");t(e,"d","M0 0h24v24H0z");t(e,"fill","none");t(c,"xmlns","http://www.w3.org/2000/svg");t(c,"width","24");t(c,"height","24");t(c,"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:M,d(a){a&&w(c)}}}
function pd(a){z(this,a);this._state=r({},a.data);this._intro=!0;this._fragment=af(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function bf(a,b){var c,d,e;return{c(){c=Z("svg");d=Z("path");e=Z("path");t(d,"d","M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z");t(e,"d","M0 0h24v24H0z");t(e,"fill","none");t(c,"xmlns","http://www.w3.org/2000/svg");t(c,"width","24");t(c,"height","24");t(c,"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:M,d(a){a&&
w(c)}}}function qd(a){z(this,a);this._state=r({},a.data);this._intro=!0;this._fragment=bf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function cf({name:a}){if("home"===a)return qd;if("add"===a)return od;if("remove"===a)return pd}function df(a,b){var c,d=b.Icon;if(d)var e=new d({root:a.root,store:a.store});return{c(){c=l("div");e&&e._fragment.c();q(c,"fill",b.color)},m(a,b){a.insertBefore(c,b);e&&e._mount(c,null)},p(b,f){d!==(d=f.Icon)&&(e&&e.destroy(),d?(e=new d({root:a.root,
store:a.store}),e._fragment.c(),e._mount(c,null)):e=null);b.color&&q(c,"fill",f.color)},d(a){a&&w(c);e&&e.destroy()}}}function Ub(a){z(this,a);this._state=r({color:"black"},a.data);this._recompute({name:1},this._state);this._intro=!0;this._fragment=df(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),G(this))}function ef({clientWidth:a,extent:b}){return Math.min(a,Math.max(0,b[0][0]*a))}function ff({clientWidth:a,extent:b}){return Math.min(a,b[0][1]*a)}function gf({clientHeight:a,
extent:b}){return Math.min(a,Math.max(0,b[1][0]*a))}function hf({clientHeight:a,extent:b}){return Math.min(a,b[1][1]*a)}function jf(a,b){function c(){a.set({clientWidth:e.clientWidth,clientHeight:e.clientHeight})}function d(b){a.mouseDown(b)}var e,g,f=b.extent&&rd(a,b);return{c(){e=l("div");f&&f.c();a.root._beforecreate.push(c);e.addEventListener("mousedown",d,void 0);e.className="root svelte-xo8icp"},m(a,b){a.insertBefore(e,b);f&&f.m(e,null);g=Ea(e,c)},p(b,c){c.extent?f?f.p(b,c):(f=rd(a,c),f.c(),
f.m(e,null)):f&&(f.d(1),f=null)},d(a){a&&w(e);f&&f.d();g.cancel();e.removeEventListener("mousedown",d,void 0)}}}function rd(a,b){var c,d,e,g,f=b.left&&b.right&&b.top&&b.bottom&&sd(a,b),h=b.annotationValue&&td(a,b);return{c(){c=Z("svg");f&&f.c();d=p("\n    ");e=l("div");h&&h.c();t(c,"width",b.clientWidth);t(c,"height",b.clientHeight);t(c,"class","svelte-xo8icp");e.className=g="reticle "+(b.round?"round":"")+" svelte-xo8icp";q(e,"border-color",b.color);q(e,"top",""+(b.top-1)+"px");q(e,"left",""+(b.left-
1)+"px");q(e,"width",""+(b.right-b.left+2)+"px");q(e,"height",""+(b.bottom-b.top+2)+"px")},m(a,b){a.insertBefore(c,b);f&&f.m(c,null);a.insertBefore(d,b);a.insertBefore(e,b);h&&h.m(e,null)},p(b,d){d.left&&d.right&&d.top&&d.bottom?f?f.p(b,d):(f=sd(a,d),f.c(),f.m(c,null)):f&&(f.d(1),f=null);b.clientWidth&&t(c,"width",d.clientWidth);b.clientHeight&&t(c,"height",d.clientHeight);d.annotationValue?h?h.p(b,d):(h=td(a,d),h.c(),h.m(e,null)):h&&(h.d(1),h=null);b.round&&g!==(g="reticle "+(d.round?"round":"")+
" svelte-xo8icp")&&(e.className=g);b.color&&q(e,"border-color",d.color);b.top&&q(e,"top",""+(d.top-1)+"px");b.left&&q(e,"left",""+(d.left-1)+"px");(b.right||b.left)&&q(e,"width",""+(d.right-d.left+2)+"px");(b.bottom||b.top)&&q(e,"height",""+(d.bottom-d.top+2)+"px")},d(a){a&&w(c);f&&f.d();a&&(w(d),w(e));h&&h.d()}}}function sd(a,b){var c,d,e;return{c(){c=Z("path");t(c,"class",d=(b.background?"":"transparent")+" svelte-xo8icp");t(c,"d",e="M0,0 L"+b.clientWidth+",0 L"+b.clientWidth+","+b.clientHeight+
" L0,"+b.clientHeight+" z M"+b.left+","+b.top+" L"+b.left+","+b.bottom+" L"+b.right+","+b.bottom+" L"+b.right+","+b.top+" z")},m(a,b){a.insertBefore(c,b)},p(a,b){a.background&&d!==(d=(b.background?"":"transparent")+" svelte-xo8icp")&&t(c,"class",d);(a.clientWidth||a.clientHeight||a.left||a.top||a.bottom||a.right)&&e!==(e="M0,0 L"+b.clientWidth+",0 L"+b.clientWidth+","+b.clientHeight+" L0,"+b.clientHeight+" z M"+b.left+","+b.top+" L"+b.left+","+b.bottom+" L"+b.right+","+b.bottom+" L"+b.right+","+b.top+
" z")&&t(c,"d",e)},d(a){a&&w(c)}}}function td(a,b){var c,d,e,g;return{c(){c=l("div");d=l("div");e=l("p");g=p(b.annotationValue);e.className="annotation svelte-xo8icp";d.className="annotationTab svelte-xo8icp";q(d,"background",b.color);c.className="annotationTabParent svelte-xo8icp";q(c,"top",""+(b.w*b.width-2)/2+"px")},m(a,b){a.insertBefore(c,b);c.appendChild(d);d.appendChild(e);e.appendChild(g)},p(a,b){a.annotationValue&&(g.data=""+b.annotationValue);a.color&&q(d,"background",b.color);(a.w||a.width)&&
q(c,"top",""+(b.w*b.width-2)/2+"px")},d(a){a&&w(c)}}}function jb(a){z(this,a);this._state=r({dragging:!1,extent:[[0,0],[0,0]],background:!0,round:!1,color:"rgb(255, 130, 0)",enableDragging:!0,mouseUpListener:null,mouseMoveListener:null},a.data);this._recompute({clientWidth:1,extent:1,clientHeight:1},this._state);this._intro=!0;this._fragment=jf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),G(this))}function kf({clientWidth:a}){return a}function lf({width:a,aspectRatio:b}){return a/
b}function mf(a,b){function c(){a.set({clientWidth:d.clientWidth})}var d,e,g=a._slotted.default,f;return{c(){d=l("div");e=l("div");e.className="container svelte-xqvv98";a.root._beforecreate.push(c);d.className="root svelte-xqvv98";q(d,"display",b.display);q(d,"padding-bottom",""+100/b.aspectRatio+"%")},m(a,b){a.insertBefore(d,b);d.appendChild(e);g&&e.appendChild(g);f=Ea(d,c)},p(a,b){a.display&&q(d,"display",b.display);a.aspectRatio&&q(d,"padding-bottom",""+100/b.aspectRatio+"%")},d(a){a&&w(d);g&&
ja(e,g);f.cancel()}}}function Jb(a){z(this,a);this._state=r({display:"block",aspectRatio:1,clientWidth:0},a.data);this._recompute({clientWidth:1,width:1,aspectRatio:1},this._state);this._intro=!0;this._slotted=a.slots||{};this._fragment=mf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),G(this))}function nf(a,b){var c,d,e,g,f,h={enableDragging:!0};if(void 0!==b.extent){h.extent=b.extent;var k=!0}var m=new jb({root:a.root,store:a.store,data:h,_bind(b,c){var d={};!k&&
b.extent&&(d.extent=c.extent);a._set(d);k=void 0}});a.root._beforecreate.push(()=>{m._bind({extent:1},m.get())});m.on("drag",function(b){a.fire("drag",b)});var n=new Jb({root:a.root,store:a.store,slots:{default:ra()}});return{c(){c=l("div");d=l("img");f=p("\n    ");m._fragment.c();n._fragment.c();d.src=e="assets/images/renders/thumbnail-"+b.layerName+".jpg";d.alt=g="thumbnail for "+b.layerName;d.className="svelte-10b429t";c.className="svelte-10b429t svelte-ref-root"},m(b,e){b.insertBefore(c,e);n._slotted.default.appendChild(d);
n._slotted.default.appendChild(f);m._mount(n._slotted.default,null);n._mount(c,null);a.refs.root=c},p(a,c){b=c;a.layerName&&e!==(e="assets/images/renders/thumbnail-"+b.layerName+".jpg")&&(d.src=e);a.layerName&&g!==(g="thumbnail for "+b.layerName)&&(d.alt=g);c={};!k&&a.extent&&(c.extent=b.extent,k=void 0!==b.extent);m._set(c);k=void 0},d(b){b&&w(c);m.destroy();n.destroy();a.refs.root===c&&(a.refs.root=null)}}}function ud(a){z(this,a);this.refs={};this._state=r({scaleCountFactor:200},a.data);this._intro=
!0;this._fragment=nf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),G(this))}function kb(){}function lb(a){for(var b,c,d=1,e=arguments.length;d<e;d++)for(b in c=arguments[d],c)a[b]=c[b];return a}function vd(a){this.destroy=kb;this.fire("destroy");this.set=this.get=kb;!1!==a&&this._fragment.u();this._fragment.d();this._fragment=this._state=null}function wd(a,b,c,d,e){for(var g in b)if(c[g]){var f=d[g],h=e[g],k=b[g];if(k)for(var m=0;m<k.length;m+=1){var n=k[m];n.__calling||
(n.__calling=!0,n.call(a,f,h),n.__calling=!1)}}}function mb(a){for(;a&&a.length;)a.shift()()}function of(a,b){return b?b:a}function pf(){let a=(b)=>{this.set({loaded:!0});var {img:b}=this.get();b.removeEventListener("loaded",a)};this.observe("index",(a)=>{this.draw()},{init:!1});this.observe("img",(a)=>{this.draw()},{init:!1});this.observe("loaded",(a)=>{this.draw()},{init:!1});this.observe("url",(b)=>{let c=this.get("img");c&&c.removeEventListener("load",a);if(nb.has(b))b=nb.get(b),b.loaded?this.set({loaded:!0,
img:b.img}):(this.set({loaded:!1,img:b.img}),b.img.addEventListener("load",a));else{let c=new Image;this.set({loaded:!1,img:c});let e={img:c},g=(a)=>{e.loaded=!0;c.removeEventListener("load",g)};c.addEventListener("load",g);c.addEventListener("load",a);nb.set(b,e);c.src=b}})}function qf(a,b){var c;return{c:function(){c=document.createElement("canvas");this.h()},h:function(){c.width=b.width;c.height=b.realHeight},m:function(b,e){b.insertBefore(c,e);a.refs.canvas=c},p:function(a,b){a.width&&(c.width=
b.width);a.realHeight&&(c.height=b.realHeight)},u:function(){c.parentNode.removeChild(c)},d:function(){a.refs.canvas===c&&(a.refs.canvas=null)}}}function xd(a){this._observers={pre:Object.create(null),post:Object.create(null)};this._handlers=Object.create(null);this._bind=a._bind;this.options=a;this.root=a.root||this;this.store=this.root.store||a.store;this.refs={};this._state=lb({url:"",index:0,width:100,loaded:null,columns:Infinity,height:null,img:null},a.data);this._recompute({width:1,height:1},
this._state);var b=pf.bind(this);a.root||(this._oncreate=[]);this._fragment=qf(this,this._state);this.root._oncreate.push(b);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),mb(this._oncreate))}function yd(a){return new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}")}function rf(a,b){var c=yd(a);return function(d,e){return b(c(d),e,a)}}function sf(a){var b=Object.create(null),c=[];a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=
d)});return c}function zd(a){function b(a,b){function c(){if(l)return ob;if(F)return F=!1,Ad;var b,c=f,d;if(34===a.charCodeAt(c)){for(;f++<e&&34!==a.charCodeAt(f)||34===a.charCodeAt(++f););(b=f)>=e?l=!0:10===(d=a.charCodeAt(f++))?F=!0:13===d&&(F=!0,10===a.charCodeAt(f)&&++f);return a.slice(c+1,b-1).replace(/""/g,'"')}for(;f<e;){if(10===(d=a.charCodeAt(b=f++)))F=!0;else if(13===d)F=!0,10===a.charCodeAt(f)&&++f;else if(d!==g)continue;return a.slice(c,b)}return l=!0,a.slice(c,e)}var d=[],e=a.length,
f=0,h=0,C,l=0>=e,F=!1;10===a.charCodeAt(e-1)&&--e;for(13===a.charCodeAt(e-1)&&--e;(C=c())!==ob;){for(var v=[];C!==Ad&&C!==ob;)v.push(C),C=c();b&&null==(v=b(v,h++))||d.push(v)}return d}function c(b){return b.map(d).join(a)}function d(a){return null==a?"":e.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}var e=new RegExp('["'+a+"\n\r]"),g=a.charCodeAt(0);return{parse:function(a,c){var d,e;a=b(a,function(a,b){if(d)return d(a,b-1);e=a;d=c?rf(a,c):yd(a)});a.columns=e||[];return a},parseRows:b,format:function(b,
c){null==c&&(c=sf(b));return[c.map(d).join(a)].concat(b.map(function(b){return c.map(function(a){return d(b[a])}).join(a)})).join("\n")},formatRows:function(a){return a.map(c).join("\n")}}}function Bd(a){if(a.ok)return a;throw Error(a.status+":"+a.statusText);}function pb(a){return new Promise((b,c)=>{let d=new Image;d.onload=(a)=>b(d);d.onerror=(a)=>c(a);d.src=a})}function Fa(a){return fetch(a).then(Bd).then((a)=>a.text())}function Cd(a,b){b=null!=b?b:Date.now()+""+Math.random();let c="namespace:"+
b+", url:"+a+", random:"+Date.now()+Math.random();qb.set(c,!1);if(Ac.has(b)){let a=Ac.get(b);qb.set(a,!0)}Ac.set(b,c);return new Promise((b,e)=>{if(Array.isArray(a)){var d=a.map((a)=>Dd(a));d=Promise.all(d)}else d=Dd(a);d.then((a)=>{qb.get(c)||b(a)}).catch((a)=>{qb.get(c)||e(a)})})}function Dd(a){if(Bc.has(a))return Bc.get(a);var b=Ed;var c=a.split(".");c=c[c.length-1];b.has(c)||console.warn("Trying to load url: "+a+' with an unknown filetype. Assuming "text".');b=b.has(c)?c:"text";b=Ed.get(b)(a);
Bc.set(a,b);return b}function tf({clientWidth:a}){return a}function uf({model:a,layerName:b}){return a+"_"+b}function vf(){let {root:a,id:b,grid:c}=this.get();Cd(`${a}/${b}/${b}.json`).then((d)=>{null==d.class_filter&&(d.class_filter="None");null==d.filter&&(d.filter="None");Array.isArray(d.layout)||(d.layout=[d.layout]);Array.isArray(d.layer)||(d.layer=[d.layer]);Array.isArray(d.filter)||(d.filter=[d.filter]);this.set({gridSize:d.grid_size[c]});Cd(`${a}/${b}/web/web--grid_size=${d.grid_size[c]}--layout=${d.layout[0]}--class_filter=${d.class_filter}--filter=${d.filter[0]}--layer=${d.layer[0]}--model=${d.model}--sample_images=${d.sample_images}--sample_type=${d.sample_type}.json`).then((a)=>
{this.set({icons:a});this.render()})})}function wf({changed:a}){a.classHeatmap&&this.render()}function xf(a,b){function c(){a.set({clientWidth:d.clientWidth})}var d,e,g;return{c(){d=l("div");e=l("canvas");e.width=b.gridSize;e.height=b.gridSize;q(e,"width",""+b.clientWidth+"px");q(e,"height",""+b.height+"px");e.className="svelte-sjakuy";a.root._beforecreate.push(c);q(d,"height",""+b.height+"px")},m(b,h){b.insertBefore(d,h);d.appendChild(e);a.refs.canvas=e;g=Ea(d,c)},p(a,b){a.gridSize&&(e.width=b.gridSize,
e.height=b.gridSize);a.clientWidth&&q(e,"width",""+b.clientWidth+"px");a.height&&(q(e,"height",""+b.height+"px"),q(d,"height",""+b.height+"px"))},d(b){b&&w(d);a.refs.canvas===e&&(a.refs.canvas=null);g.cancel()}}}function rb(a){z(this,a);this.refs={};this._state=r({root:"https://storage.googleapis.com/activation-atlas/build",model:"inceptionv1",layerName:"mixed4d",grid:1,layout:0,gridSize:10,classHeatmap:-1,icons:[]},a.data);this._recompute({clientWidth:1,model:1,layerName:1},this._state);this._intro=
!0;this._handlers.update=[wf];this._fragment=xf(this,this._state);this.root._oncreate.push(()=>{vf.call(this);this.fire("update",{changed:Da({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),G(this))}function Fd(a,b,c){a=Object.create(a);a.layer=b[c];a.i=c;return a}function yf(a,b){for(var c,d=b.layers,e=[],g=0;g<d.length;g+=1)e[g]=Gd(a,Fd(b,d,g));return{c(){c=l("div");for(var a=0;a<e.length;a+=1)e[a].c();c.className="stack"},m(a,b){a.insertBefore(c,
b);for(a=0;a<e.length;a+=1)e[a].m(c,null)},p(b,g){if(b.layerName||b.layers||b.classHeatmap){d=g.layers;for(var f=0;f<d.length;f+=1){let h=Fd(g,d,f);e[f]?e[f].p(b,h):(e[f]=Gd(a,h),e[f].c(),e[f].m(c,null))}for(;f<e.length;f+=1)e[f].d(1);e.length=d.length}},d(a){a&&w(c);Gb(e,a)}}}function Gd(a,b){function c(){a.set({layerName:e.__value})}var d,e,g,f,h,k,m,n=b.layer,y,Q,C,la=new rb({root:a.root,store:a.store,data:{layerName:b.layer,classHeatmap:b.classHeatmap}});return{c(){d=l("label");e=l("input");f=
p("\n    ");h=l("div");la._fragment.c();k=p("\n    ");m=l("span");y=p(n);Q=p("\n  ");a._bindingGroups[0].push(e);e.addEventListener("change",c,void 0);t(e,"type","radio");e.__value=g=b.layer;e.value=e.__value;e.className="svelte-hzvbih";q(h,"width","50px");q(h,"position","relative");m.className="svelte-hzvbih";d.className=C="layer "+(b.layerName==b.layer?"selected":"")+" svelte-hzvbih"},m(a,c){a.insertBefore(d,c);d.appendChild(e);e.checked=e.__value===b.layerName;d.appendChild(f);d.appendChild(h);
la._mount(h,null);d.appendChild(k);d.appendChild(m);m.appendChild(y);d.appendChild(Q)},p(a,b){a.layerName&&(e.checked=e.__value===b.layerName);a.layers&&g!==(g=b.layer)&&(e.__value=g);e.value=e.__value;var c={};a.layers&&(c.layerName=b.layer);a.classHeatmap&&(c.classHeatmap=b.classHeatmap);la._set(c);a.layers&&n!==(n=b.layer)&&(y.data=""+n);(a.layerName||a.layers)&&C!==(C="layer "+(b.layerName==b.layer?"selected":"")+" svelte-hzvbih")&&(d.className=C)},d(b){b&&w(d);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(e),
1);e.removeEventListener("change",c,void 0);la.destroy()}}}function Hd(a){z(this,a);this._state=r({layerName:"mixed4c",layers:"mixed3b mixed4a mixed4b mixed4c mixed4d mixed4e mixed5a mixed5b".split(" "),classHeatmap:-1},a.data);this._bindingGroups=[[]];this._intro=!0;this._fragment=yf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),G(this))}function zf({inceptionLabels:a}){let b=sb.map((b)=>({label:a.inception[b],i:b}));return[{label:"show all",i:-1}].concat(b)}function Id(a,
b,c){a=Object.create(a);a.l=b[c];return a}function Af(a,b){for(var c,d=b.labels,e=[],g=0;g<d.length;g+=1)e[g]=Jd(a,Id(b,d,g));return{c(){c=l("div");for(var a=0;a<e.length;a+=1)e[a].c();c.className="chooser svelte-h2ed57"},m(a,b){a.insertBefore(c,b);for(a=0;a<e.length;a+=1)e[a].m(c,null)},p(b,g){if(b.classHeatmap||b.labels){d=g.labels;for(var f=0;f<d.length;f+=1){let h=Id(g,d,f);e[f]?e[f].p(b,h):(e[f]=Jd(a,h),e[f].c(),e[f].m(c,null))}for(;f<e.length;f+=1)e[f].d(1);e.length=d.length}},d(a){a&&w(c);
Gb(e,a)}}}function Jd(a,b){function c(){a.set({classHeatmap:e.__value})}var d,e,g,f,h,k=b.l.label,m,n,y,Q;return{c(){d=l("label");e=l("input");f=p("\n      ");h=l("span");m=p(k);y=p("\n    ");a._bindingGroups[0].push(e);e.addEventListener("change",c,void 0);t(e,"type","radio");e.__value=g=b.l.i;e.value=e.__value;e.className="svelte-h2ed57";h.title=n=b.l.i;d.className=Q=(b.classHeatmap===b.l.i?"selected":"")+" svelte-h2ed57"},m(a,c){a.insertBefore(d,c);d.appendChild(e);e.checked=e.__value===b.classHeatmap;
d.appendChild(f);d.appendChild(h);h.appendChild(m);d.appendChild(y)},p(a,b){a.classHeatmap&&(e.checked=e.__value===b.classHeatmap);a.labels&&g!==(g=b.l.i)&&(e.__value=g);e.value=e.__value;a.labels&&k!==(k=b.l.label)&&(m.data=""+k);a.labels&&n!==(n=b.l.i)&&(h.title=n);(a.classHeatmap||a.labels)&&Q!==(Q=(b.classHeatmap===b.l.i?"selected":"")+" svelte-h2ed57")&&(d.className=Q)},d(b){b&&w(d);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(e),1);e.removeEventListener("change",c,void 0)}}}function Cc(a){z(this,
a);this._state=r({classesToKeep:sb,inceptionLabels:sa,classHeatmap:235},a.data);this._recompute({inceptionLabels:1},this._state);this._bindingGroups=[[]];this._intro=!0;this._fragment=Af(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Kd(a){return new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}")}function Bf(a,b){var c=Kd(a);return function(d,e){return b(c(d),e,a)}}function Cf(a){var b=Object.create(null),
c=[];a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)});return c}function Ld(a){function b(a,b){function c(){if(p)return Dc;if(F)return F=!1,Md;var b,c=f,d;if(34===a.charCodeAt(c)){for(;f++<e&&34!==a.charCodeAt(f)||34===a.charCodeAt(++f););(b=f)>=e?p=!0:10===(d=a.charCodeAt(f++))?F=!0:13===d&&(F=!0,10===a.charCodeAt(f)&&++f);return a.slice(c+1,b-1).replace(/""/g,'"')}for(;f<e;){if(10===(d=a.charCodeAt(b=f++)))F=!0;else if(13===d)F=!0,10===a.charCodeAt(f)&&++f;else if(d!==g)continue;return a.slice(c,
b)}return p=!0,a.slice(c,e)}var d=[],e=a.length,f=0,h=0,l,p=0>=e,F=!1;10===a.charCodeAt(e-1)&&--e;for(13===a.charCodeAt(e-1)&&--e;(l=c())!==Dc;){for(var v=[];l!==Md&&l!==Dc;)v.push(l),l=c();b&&null==(v=b(v,h++))||d.push(v)}return d}function c(b){return b.map(d).join(a)}function d(a){return null==a?"":e.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}var e=new RegExp('["'+a+"\n\r]"),g=a.charCodeAt(0);return{parse:function(a,c){var d,e;a=b(a,function(a,b){if(d)return d(a,b-1);e=a;d=c?Bf(a,c):Kd(a)});a.columns=
e||[];return a},parseRows:b,format:function(b,c){null==c&&(c=Cf(b));return[c.map(d).join(a)].concat(b.map(function(b){return c.map(function(a){return d(b[a])}).join(a)})).join("\n")},formatRows:function(a){return a.map(c).join("\n")}}}function Nd(a){if(a.ok)return a;throw Error(a.status+":"+a.statusText);}function tb(a){return new Promise((b,c)=>{let d=new Image;d.onload=(a)=>b(d);d.onerror=(a)=>c(a);d.src=a})}function ub(a){return fetch(a).then(Nd).then((a)=>a.text())}function Od(a,b){b=null!=b?
b:Date.now()+""+Math.random();let c="namespace:"+b+", url:"+a+", random:"+Date.now()+Math.random();Ga.set(c,!1);if(Ec.has(b)){let a=Ec.get(b);Ga.set(a,!0)}Ec.set(b,c);return new Promise((b,e)=>{if(Array.isArray(a)){var d=a.map((a)=>Pd(a));d=Promise.all(d)}else d=Pd(a);d.then((a)=>{Ga.get(c)||b(a)}).catch((a)=>{Ga.get(c)||e(a)})})}function Pd(a){if(Fc.has(a))return Fc.get(a);var b=Qd;var c=a.split(".");c=c[c.length-1];b.has(c)||console.warn("Trying to load url: "+a+' with an unknown filetype. Assuming "text".');
b=b.has(c)?c:"text";b=Qd.get(b)(a);Fc.set(a,b);return b}function Rd(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function Df(a){return function(b,c){return Rd(a(b),c)}}function Ef({changed:a}){if(a.layer||a.classFilter||a.id||a.layout||a.filter){let {root:b,id:c,layer:d,classFilter:e,filter:g,layout:f}=this.get();this.set({loading:!0});let h=Ff[c];this.set({config:h});null!==e&&(null==h.class_filter&&(h.class_filter="None"),null==h.filter&&(h.filter="None"),Array.isArray(h.grid_size)||(h.grid_size=[h.grid_size]),
Array.isArray(h.class_filter)||(h.class_filter=[h.class_filter]),Array.isArray(h.layer)||(h.layer=[h.layer]),Array.isArray(h.layout)||(h.layout=[h.layout]),Array.isArray(h.filter)||(h.filter=[h.filter]),a=h.grid_size.map((a)=>`${b}/${c}/web/web--grid_size=${a}--layout=${h.layout[f]}--class_filter=${h.class_filter[e]}--filter=${h.filter[g]}--layer=${h.layer[d]}--model=${h.model}--sample_images=${h.sample_images}--sample_type=${h.sample_type}.json`),Od(a).then((a)=>{let k=Array(a.length);a.forEach((a,
m)=>{let n=h.grid_size[m],y=h.tile_size;Array(n/y).keys();let l=[...Array(n).keys()].map((a)=>Array(n));for(let k of a){void 0!==k.x&&(k.grid_x=k.x);void 0!==k.y&&(k.grid_y=k.y);void 0!==k.n&&(k.num_activations=k.n);void 0!==k.i&&(k.top_class_indices=k.i);void 0!==k.v&&(k.top_class_values=k.v);void 0!==k.f&&(k.full_class_values=k.f,k.full_class_indices=sb);a=k.grid_x;let m=k.grid_y;k.gx=a/n;k.gy=m/n;k.gw=1/n;let Q=Math.floor(a/y),C=Math.floor(m/y);k.localX=a%y;k.localY=m%y;k.url=`${b}/${c}/render/render--x=${Q}--y=${C}--tries=${h.tries}--alpha=${h.alpha?
"True":"False"}--tile_size=${h.tile_size}--whiten=${h.whiten}--steps=${h.steps}--icon_size=${h.icon_size}--grid_size=${n}--layout=${h.layout[f]}--class_filter=${h.class_filter[e]}--filter=${h.filter[g]}--layer=${h.layer[d]}--model=${h.model}--sample_images=${h.sample_images}--sample_type=${h.sample_type}.jpg`;l[k.grid_x][k.grid_y]=k}k[m]=l});this.set({layers:k,loading:!1})}))}}function Sd(a){z(this,a);this._state=r({fingerprint:Math.random()+Date.now(),root:"https://storage.googleapis.com/activation-atlas/build",
id:"inceptionv1",labels:sa.inception,layer:0,classFilter:0,filter:0,layout:0,config:null,layers:null,loading:!1},a.data);this._intro=!0;this._handlers.update=[Ef];this._fragment={c:M,m:M,p:M,d:M};this.root._oncreate.push(()=>{this.fire("update",{changed:Da({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),G(this))}function Gc(){for(var a=0,b=arguments.length,c={},d;a<b;++a){if(!(d=arguments[a]+"")||d in c)throw Error("illegal type: "+d);c[d]=[]}return new vb(c)}
function vb(a){this._=a}function Gf(a,b){return a.trim().split(/^|\s+/).map(function(a){var c="",e=a.indexOf(".");0<=e&&(c=a.slice(e+1),a=a.slice(0,e));if(a&&!b.hasOwnProperty(a))throw Error("unknown type: "+a);return{type:a,name:c}})}function Td(a,b,c){for(var d=0,e=a.length;d<e;++d)if(a[d].name===b){a[d]=Hf;a=a.slice(0,d).concat(a.slice(d+1));break}null!=c&&a.push({name:b,value:c});return a}function wb(a){var b=a+="",c=b.indexOf(":");0<=c&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1));return Ud.hasOwnProperty(b)?
{space:Ud[b],local:a}:a}function If(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===c&&"http://www.w3.org/1999/xhtml"===b.documentElement.namespaceURI?b.createElement(a):b.createElementNS(c,a)}}function Jf(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}function Vd(a){a=wb(a);return(a.local?Jf:If)(a)}function Kf(){}function Hc(a){return null==a?Kf:function(){return this.querySelector(a)}}function Lf(){return[]}
function Wd(a){return null==a?Lf:function(){return this.querySelectorAll(a)}}function Xd(a){return Array(a.length)}function xb(a,b){this.ownerDocument=a.ownerDocument;this.namespaceURI=a.namespaceURI;this._next=null;this._parent=a;this.__data__=b}function Mf(a){return function(){return a}}function Nf(a,b,c,d,e,g){for(var f=0,h,k=b.length,m=g.length;f<m;++f)(h=b[f])?(h.__data__=g[f],d[f]=h):c[f]=new xb(a,g[f]);for(;f<k;++f)if(h=b[f])e[f]=h}function Of(a,b,c,d,e,g,f){var h,k,m={},n=b.length,y=g.length,
l=Array(n),C;for(h=0;h<n;++h)if(k=b[h])l[h]=C="$"+f.call(k,k.__data__,h,b),C in m?e[h]=k:m[C]=k;for(h=0;h<y;++h)C="$"+f.call(a,g[h],h,g),(k=m[C])?(d[h]=k,k.__data__=g[h],m[C]=null):c[h]=new xb(a,g[h]);for(h=0;h<n;++h)(k=b[h])&&m[l[h]]===k&&(e[h]=k)}function Pf(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function Qf(a){return function(){this.removeAttribute(a)}}function Rf(a){return function(){this.removeAttributeNS(a.space,a.local)}}function Sf(a,b){return function(){this.setAttribute(a,b)}}function Tf(a,
b){return function(){this.setAttributeNS(a.space,a.local,b)}}function Uf(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}}function Vf(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}function Wf(a){return function(){this.style.removeProperty(a)}}function Xf(a,b,c){return function(){this.style.setProperty(a,b,c)}}function Yf(a,b,c){return function(){var d=
b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}}function Ha(a,b){return a.style.getPropertyValue(b)||(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView).getComputedStyle(a,null).getPropertyValue(b)}function Zf(a){return function(){delete this[a]}}function $f(a,b){return function(){this[a]=b}}function ag(a,b){return function(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}function Ic(a){return a.classList||new Yd(a)}
function Yd(a){this._node=a;this._names=(a.getAttribute("class")||"").trim().split(/^|\s+/)}function Zd(a,b){a=Ic(a);for(var c=-1,d=b.length;++c<d;)a.add(b[c])}function $d(a,b){a=Ic(a);for(var c=-1,d=b.length;++c<d;)a.remove(b[c])}function bg(a){return function(){Zd(this,a)}}function cg(a){return function(){$d(this,a)}}function dg(a,b){return function(){(b.apply(this,arguments)?Zd:$d)(this,a)}}function eg(){this.textContent=""}function fg(a){return function(){this.textContent=a}}function gg(a){return function(){var b=
a.apply(this,arguments);this.textContent=null==b?"":b}}function hg(){this.innerHTML=""}function ig(a){return function(){this.innerHTML=a}}function jg(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}function kg(){this.nextSibling&&this.parentNode.appendChild(this)}function lg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mg(){return null}function ng(){var a=this.parentNode;a&&a.removeChild(this)}function og(){return this.parentNode.insertBefore(this.cloneNode(!1),
this.nextSibling)}function pg(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function qg(a,b,c){a=ae(a,b,c);return function(b){var c=b.relatedTarget;c&&(c===this||c.compareDocumentPosition(this)&8)||a.call(this,b)}}function ae(a,b,c){return function(d){var e=u;u=d;try{a.call(this,this.__data__,b,c)}finally{u=e}}}function rg(a){return a.trim().split(/^|\s+/).map(function(a){var b="",d=a.indexOf(".");0<=d&&(b=a.slice(d+1),a=a.slice(0,d));return{type:a,name:b}})}function sg(a){return function(){var b=
this.__on;if(b){for(var c=0,d=-1,e=b.length,g;c<e;++c)(g=b[c],a.type&&g.type!==a.type||g.name!==a.name)?b[++d]=g:this.removeEventListener(g.type,g.listener,g.capture);++d?b.length=d:delete this.__on}}}function tg(a,b,c){var d=be.hasOwnProperty(a.type)?qg:ae;return function(e,g,f){e=this.__on;var h;g=d(b,g,f);if(e){f=0;for(var k=e.length;f<k;++f)if((h=e[f]).type===a.type&&h.name===a.name){this.removeEventListener(h.type,h.listener,h.capture);this.addEventListener(h.type,h.listener=g,h.capture=c);h.value=
b;return}}this.addEventListener(a.type,g,c);h={type:a.type,name:a.name,value:b,listener:g,capture:c};e?e.push(h):this.__on=[h]}}function ce(a,b,c){var d=a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView,e=d.CustomEvent;"function"===typeof e?e=new e(b,c):(e=d.document.createEvent("Event"),c?(e.initEvent(b,c.bubbles,c.cancelable),e.detail=c.detail):e.initEvent(b,!1,!1));a.dispatchEvent(e)}function ug(a,b){return function(){return ce(this,a,b)}}function vg(a,b){return function(){return ce(this,
a,b.apply(this,arguments))}}function E(a,b){this._groups=a;this._parents=b}function ma(){return new E([[document.documentElement]],de)}function ca(a){return"string"===typeof a?new E([[document.querySelector(a)]],[document.documentElement]):new E([[a]],de)}function ee(){for(var a=u,b;b=a.sourceEvent;)a=b;return a}function fe(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint)return c=c.createSVGPoint(),c.x=b.clientX,c.y=b.clientY,c=c.matrixTransform(a.getScreenCTM().inverse()),[c.x,c.y];c=a.getBoundingClientRect();
return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function Ia(a){var b=ee();b.changedTouches&&(b=b.changedTouches[0]);return fe(a,b)}function ge(a,b,c){3>arguments.length&&(c=b,b=ee().changedTouches);for(var d=0,e=b?b.length:0,g;d<e;++d)if((g=b[d]).identifier===c)return fe(a,g);return null}function Jc(){u.preventDefault();u.stopImmediatePropagation()}function wg(a){var b=a.document.documentElement;a=ca(a).on("dragstart.drag",Jc,!0);if("onselectstart"in b)a.on("selectstart.drag",Jc,
!0);else b.__noselect=b.style.MozUserSelect,b.style.MozUserSelect="none"}function xg(a,b){var c=a.document.documentElement,d=ca(a).on("dragstart.drag",null);b&&(d.on("click.drag",Jc,!0),setTimeout(function(){d.on("click.drag",null)},0));if("onselectstart"in c)d.on("selectstart.drag",null);else c.style.MozUserSelect=c.__noselect,delete c.__noselect}function Ja(a,b,c){a.prototype=b.prototype=c;c.constructor=a}function Va(a,b){a=Object.create(a.prototype);for(var c in b)a[c]=b[c];return a}function ta(){}
function Wa(a){var b;a=(a+"").trim().toLowerCase();return(b=yg.exec(a))?(b=parseInt(b[1],16),new B(b>>8&15|b>>4&240,b>>4&15|b&240,(b&15)<<4|b&15,1)):(b=zg.exec(a))?he(parseInt(b[1],16)):(b=Ag.exec(a))?new B(b[1],b[2],b[3],1):(b=Bg.exec(a))?new B(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=Cg.exec(a))?ie(b[1],b[2],b[3],b[4]):(b=Dg.exec(a))?ie(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=Eg.exec(a))?je(b[1],b[2]/100,b[3]/100,1):(b=Fg.exec(a))?je(b[1],b[2]/100,b[3]/100,b[4]):ke.hasOwnProperty(a)?
he(ke[a]):"transparent"===a?new B(NaN,NaN,NaN,0):null}function he(a){return new B(a>>16&255,a>>8&255,a&255,1)}function ie(a,b,c,d){0>=d&&(a=b=c=NaN);return new B(a,b,c,d)}function Kc(a){a instanceof ta||(a=Wa(a));if(!a)return new B;a=a.rgb();return new B(a.r,a.g,a.b,a.opacity)}function Lc(a,b,c,d){return 1===arguments.length?Kc(a):new B(a,b,c,null==d?1:d)}function B(a,b,c,d){this.r=+a;this.g=+b;this.b=+c;this.opacity=+d}function Mc(a){a=Math.max(0,Math.min(255,Math.round(a)||0));return(16>a?"0":"")+
a.toString(16)}function je(a,b,c,d){0>=d?a=b=c=NaN:0>=c||1<=c?a=b=NaN:0>=b&&(a=NaN);return new J(a,b,c,d)}function Gg(a){if(a instanceof J)return new J(a.h,a.s,a.l,a.opacity);a instanceof ta||(a=Wa(a));if(!a)return new J;if(a instanceof J)return a;a=a.rgb();var b=a.r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),g=Math.max(b,c,d),f=NaN,h=g-e,k=(g+e)/2;h?(f=b===g?(c-d)/h+6*(c<d):c===g?(d-b)/h+2:(b-c)/h+4,h/=.5>k?g+e:2-g-e,f*=60):h=0<k&&1>k?0:f;return new J(f,h,k,a.opacity)}function J(a,b,c,d){this.h=+a;
this.s=+b;this.l=+c;this.opacity=+d}function Nc(a,b,c){return 255*(60>a?b+(c-b)*a/60:180>a?c:240>a?b+(c-b)*(240-a)/60:b)}function Oc(a){if(a instanceof da)return new da(a.l,a.a,a.b,a.opacity);if(a instanceof na){if(isNaN(a.h))return new da(a.l,0,0,a.opacity);var b=a.h*le;return new da(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}a instanceof B||(a=Kc(a));var c=Pc(a.r),d=Pc(a.g),e=Pc(a.b);b=Qc(.2225045*c+.7168786*d+.0606169*e);if(c===d&&d===e)var g=c=b;else g=Qc((.4360747*c+.3850649*d+.1430804*e)/
.96422),c=Qc((.0139322*c+.0971045*d+.7141733*e)/.82521);return new da(116*b-16,500*(g-b),200*(b-c),a.opacity)}function da(a,b,c,d){this.l=+a;this.a=+b;this.b=+c;this.opacity=+d}function Qc(a){return a>Hg?Math.pow(a,1/3):a/me+ne}function Rc(a){return a>Ka?a*a*a:me*(a-ne)}function Sc(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Pc(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Ig(a){if(a instanceof na)return new na(a.h,a.c,a.l,a.opacity);a instanceof
da||(a=Oc(a));if(0===a.a&&0===a.b)return new na(NaN,0,a.l,a.opacity);var b=Math.atan2(a.b,a.a)*oe;return new na(0>b?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function na(a,b,c,d){this.h=+a;this.c=+b;this.l=+c;this.opacity=+d}function ya(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}function pe(a){return function(){return a}}function Jg(a,b){return function(c){return a+c*b}}function Kg(a,b,c){return a=Math.pow(a,c),b=Math.pow(b,c)-a,c=1/c,function(d){return Math.pow(a+d*b,c)}}function Lg(a){return 1===
(a=+a)?qe:function(b,c){return c-b?Kg(b,c,a):pe(isNaN(b)?c:b)}}function qe(a,b){var c=b-a;return c?Jg(a,c):pe(isNaN(a)?b:a)}function ua(a,b){return a=+a,b-=a,function(c){return a+b*c}}function Mg(a){return function(){return a}}function Ng(a){return function(b){return a(b)+""}}function Og(a,b){var c=Tc.lastIndex=Uc.lastIndex=0,d,e,g,f=-1,h=[],k=[];a+="";for(b+="";(d=Tc.exec(a))&&(e=Uc.exec(b));)(g=e.index)>c&&(g=b.slice(c,g),h[f]?h[f]+=g:h[++f]=g),(d=d[0])===(e=e[0])?h[f]?h[f]+=e:h[++f]=e:(h[++f]=
null,k.push({i:f,x:ua(d,e)})),c=Uc.lastIndex;c<b.length&&(g=b.slice(c),h[f]?h[f]+=g:h[++f]=g);return 2>h.length?k[0]?Ng(k[0].x):Mg(b):(b=k.length,function(a){for(var c=0,d;c<b;++c)h[(d=k[c]).i]=d.x(a);return h.join("")})}function re(a,b,c,d,e,g){var f,h,k;if(f=Math.sqrt(a*a+b*b))a/=f,b/=f;if(k=a*c+b*d)c-=a*k,d-=b*k;if(h=Math.sqrt(c*c+d*d))c/=h,d/=h,k/=h;a*d<b*c&&(a=-a,b=-b,k=-k,f=-f);return{translateX:e,translateY:g,rotate:Math.atan2(b,a)*se,skewX:Math.atan(k)*se,scaleX:f,scaleY:h}}function te(a,
b,c,d){function e(a){return a.length?a.pop()+" ":""}function g(a,d,e,f,g,h){a!==e||d!==f?(g=g.push("translate(",null,b,null,c),h.push({i:g-4,x:ua(a,e)},{i:g-2,x:ua(d,f)})):(e||f)&&g.push("translate("+e+b+f+c)}function f(a,b,c,f){a!==b?(180<a-b?b+=360:180<b-a&&(a+=360),f.push({i:c.push(e(c)+"rotate(",null,d)-2,x:ua(a,b)})):b&&c.push(e(c)+"rotate("+b+d)}function h(a,b,c,f){a!==b?f.push({i:c.push(e(c)+"skewX(",null,d)-2,x:ua(a,b)}):b&&c.push(e(c)+"skewX("+b+d)}function k(a,b,c,d,f,g){a!==c||b!==d?(f=
f.push(e(f)+"scale(",null,",",null,")"),g.push({i:f-4,x:ua(a,c)},{i:f-2,x:ua(b,d)})):1===c&&1===d||f.push(e(f)+"scale("+c+","+d+")")}return function(b,c){var d=[],e=[];b=a(b);c=a(c);g(b.translateX,b.translateY,c.translateX,c.translateY,d,e);f(b.rotate,c.rotate,d,e);h(b.skewX,c.skewX,d,e);k(b.scaleX,b.scaleY,c.scaleX,c.scaleY,d,e);b=c=null;return function(a){for(var b=-1,c=e.length,f;++b<c;)d[(f=e[b]).i]=f.x(a);return d.join("")}}}function ue(a){return((a=Math.exp(a))+1/a)/2}function Pg(a,b){var c=
a[0],d=a[1],e=a[2];a=b[2];var g=b[0]-c,f=b[1]-d,h=g*g+f*f;if(1E-12>h){var k=Math.log(a/e)/va;a=function(a){return[c+a*g,d+a*f,e*Math.exp(va*a*k)]}}else{var m=Math.sqrt(h);b=(a*a-e*e+4*h)/(4*e*m);a=(a*a-e*e-4*h)/(4*a*m);var n=Math.log(Math.sqrt(b*b+1)-b);k=(Math.log(Math.sqrt(a*a+1)-a)-n)/va;a=function(a){a*=k;var b=ue(n),h=va*a+n;var l=((h=Math.exp(2*h))-1)/(h+1);var y=n;h=((y=Math.exp(y))-1/y)/2;l=e/(2*m)*(b*l-h);return[c+l*g,d+l*f,e*b/ue(va*a+n)]}}a.duration=1E3*k;return a}function yb(){return za||
(ve(Qg),za=Xa.now()+La)}function Qg(){za=0}function zb(){this._call=this._time=this._next=null}function we(a,b,c){var d=new zb;d.restart(a,b,c);return d}function xe(){za=(Ma=Xa.now())+La;oa=Ya=0;try{yb();++oa;for(var a=Za,b;a;)0<=(b=za-a._time)&&a._call.call(null,b),a=a._next;--oa}finally{oa=0;a=Za;for(var c=Infinity;a;)if(a._call){c>a._time&&(c=a._time);var d=a;a=a._next}else b=a._next,a._next=null,a=d?d._next=b:Za=b;wa=d;Vc(c);za=0}}function Rg(){var a=Xa.now(),b=a-Ma;1E3<b&&(La-=b,Ma=a)}function Vc(a){oa||
(Ya&&(Ya=clearTimeout(Ya)),24<a-za?(Infinity>a&&(Ya=setTimeout(xe,a-Xa.now()-La)),$a&&($a=clearInterval($a))):($a||(Ma=Xa.now(),$a=setInterval(Rg,1E3)),oa=1,ve(xe)))}function ye(a,b,c){var d=new zb;b=null==b?0:+b;d.restart(function(c){d.stop();a(c+b)},b,c);return d}function Ab(a,b,c,d,e,g){var f=a.__transition;if(!f)a.__transition={};else if(c in f)return;Sg(a,c,{name:b,index:d,group:e,on:Tg,tween:Ug,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:0})}function Wc(a,b){a=
K(a,b);if(0<a.state)throw Error("too late; already scheduled");return a}function pa(a,b){a=K(a,b);if(2<a.state)throw Error("too late; already started");return a}function K(a,b){a=a.__transition;if(!a||!(a=a[b]))throw Error("transition not found");return a}function Sg(a,b,c){function d(k){var m,n;if(1!==c.state)return g();for(p in f){var l=f[p];if(l.name===c.name){if(3===l.state)return ye(d);4===l.state?(l.state=6,l.timer.stop(),l.on.call("interrupt",a,a.__data__,l.index,l.group),delete f[p]):+p<b&&
(l.state=6,l.timer.stop(),delete f[p])}}ye(function(){3===c.state&&(c.state=4,c.timer.restart(e,c.delay,c.time),e(k))});c.state=2;c.on.call("start",a,a.__data__,c.index,c.group);if(2===c.state){c.state=3;h=Array(n=c.tween.length);var p=0;for(m=-1;p<n;++p)if(l=c.tween[p].value.call(a,a.__data__,c.index,c.group))h[++m]=l;h.length=m+1}}function e(b){b=b<c.duration?c.ease.call(null,b/c.duration):(c.timer.restart(g),c.state=5,1);for(var d=-1,e=h.length;++d<e;)h[d].call(null,b);5===c.state&&(c.on.call("end",
a,a.__data__,c.index,c.group),g())}function g(){c.state=6;c.timer.stop();delete f[b];for(var d in f)return;delete a.__transition}var f=a.__transition,h;f[b]=c;c.timer=we(function(a){c.state=1;c.timer.restart(d,c.delay,c.time);c.delay<=a&&d(a-c.delay)},0,c.time)}function Na(a,b){var c=a.__transition,d,e=!0,g;if(c){b=null==b?null:b+"";for(g in c)if((d=c[g]).name!==b)e=!1;else{var f=2<d.state&&5>d.state;d.state=6;d.timer.stop();f&&d.on.call("interrupt",a,a.__data__,d.index,d.group);delete c[g]}e&&delete a.__transition}}
function Vg(a,b){var c,d;return function(){var e=pa(this,a),g=e.tween;if(g!==c){d=c=g;g=0;for(var f=d.length;g<f;++g)if(d[g].name===b){d=d.slice();d.splice(g,1);break}}e.tween=d}}function Wg(a,b,c){var d,e;if("function"!==typeof c)throw Error();return function(){var g=pa(this,a),f=g.tween;if(f!==d){e=(d=f).slice();f={name:b,value:c};for(var h=0,k=e.length;h<k;++h)if(e[h].name===b){e[h]=f;break}h===k&&e.push(f)}g.tween=e}}function Xc(a,b,c){var d=a._id;a.each(function(){var a=pa(this,d);(a.value||
(a.value={}))[b]=c.apply(this,arguments)});return function(a){return K(a,d).value[b]}}function ze(a,b){var c;return("number"===typeof b?ua:b instanceof Wa?Ae:(c=Wa(b))?(b=c,Ae):Og)(a,b)}function Xg(a){return function(){this.removeAttribute(a)}}function Yg(a){return function(){this.removeAttributeNS(a.space,a.local)}}function Zg(a,b,c){var d,e;return function(){var g=this.getAttribute(a);return g===c?null:g===d?e:e=b(d=g,c)}}function $g(a,b,c){var d,e;return function(){var g=this.getAttributeNS(a.space,
a.local);return g===c?null:g===d?e:e=b(d=g,c)}}function ah(a,b,c){var d,e,g;return function(){var f=c(this);if(null==f)return void this.removeAttribute(a);var h=this.getAttribute(a);return h===f?null:h===d&&f===e?g:g=b(d=h,e=f)}}function bh(a,b,c){var d,e,g;return function(){var f=c(this);if(null==f)return void this.removeAttributeNS(a.space,a.local);var h=this.getAttributeNS(a.space,a.local);return h===f?null:h===d&&f===e?g:g=b(d=h,e=f)}}function ch(a,b){function c(){var c=this,e=b.apply(c,arguments);
return e&&function(b){c.setAttributeNS(a.space,a.local,e(b))}}c._value=b;return c}function dh(a,b){function c(){var c=this,e=b.apply(c,arguments);return e&&function(b){c.setAttribute(a,e(b))}}c._value=b;return c}function eh(a,b){return function(){Wc(this,a).delay=+b.apply(this,arguments)}}function fh(a,b){return b=+b,function(){Wc(this,a).delay=b}}function gh(a,b){return function(){pa(this,a).duration=+b.apply(this,arguments)}}function hh(a,b){return b=+b,function(){pa(this,a).duration=b}}function ih(a,
b){if("function"!==typeof b)throw Error();return function(){pa(this,a).ease=b}}function jh(a){return(a+"").trim().split(/^|\s+/).every(function(a){var b=a.indexOf(".");0<=b&&(a=a.slice(0,b));return!a||"start"===a})}function kh(a,b,c){var d,e,g=jh(b)?Wc:pa;return function(){var f=g(this,a),h=f.on;if(h!==d)(e=(d=h).copy()).on(b,c);f.on=e}}function lh(a){return function(){var b=this.parentNode,c;for(c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}}function mh(a,b){var c,d,e;return function(){var g=
Ha(this,a),f=(this.style.removeProperty(a),Ha(this,a));return g===f?null:g===c&&f===d?e:e=b(c=g,d=f)}}function nh(a){return function(){this.style.removeProperty(a)}}function oh(a,b,c){var d,e;return function(){var g=Ha(this,a);return g===c?null:g===d?e:e=b(d=g,c)}}function ph(a,b,c){var d,e,g;return function(){var f=Ha(this,a),h=c(this);null==h&&(h=(this.style.removeProperty(a),Ha(this,a)));return f===h?null:f===d&&h===e?g:g=b(d=f,e=h)}}function qh(a,b,c){function d(){var d=this,g=b.apply(d,arguments);
return g&&function(b){d.style.setProperty(a,g(b),c)}}d._value=b;return d}function rh(a){return function(){this.textContent=a}}function sh(a){return function(){var b=a(this);this.textContent=null==b?"":b}}function qa(a,b,c,d){this._groups=a;this._parents=b;this._name=c;this._id=d}function Bb(a){return function(){return a}}function th(a,b,c){this.target=a;this.type=b;this.transform=c}function P(a,b,c){this.k=a;this.x=b;this.y=c}function Be(a){return a.__zoom||Oa}function ab(){u.preventDefault();u.stopImmediatePropagation()}
function uh(){return!u.button}function vh(){var a=this;if(a instanceof SVGElement){a=a.ownerSVGElement||a;var b=a.width.baseVal.value;a=a.height.baseVal.value}else b=a.clientWidth,a=a.clientHeight;return[[0,0],[b,a]]}function Ce(){return this.__zoom||Oa}function wh(){return-u.deltaY*(u.deltaMode?120:1)/500}function xh(){return"ontouchstart"in this}function yh(a,b,c){var d=a.invertX(b[0][0])-c[0][0],e=a.invertX(b[1][0])-c[1][0],g=a.invertY(b[0][1])-c[0][1];b=a.invertY(b[1][1])-c[1][1];return a.translate(e>
d?(d+e)/2:Math.min(0,d)||Math.max(0,e),b>g?(g+b)/2:Math.min(0,g)||Math.max(0,b))}function zh(){function a(a){a.property("__zoom",Ce).on("wheel.zoom",h).on("mousedown.zoom",k).on("dblclick.zoom",m).filter(w).on("touchstart.zoom",n).on("touchmove.zoom",l).on("touchend.zoom touchcancel.zoom",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(a,b){b=Math.max(Ta[0],Math.min(Ta[1],b));return b===a.k?a:new P(b,a.x,a.y)}function c(a,b,c){var d=b[0]-c[0]*a.k;b=
b[1]-c[1]*a.k;return d===a.x&&b===a.y?a:new P(a.k,d,b)}function d(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function e(a,b,c){a.on("start.zoom",function(){g(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){g(this,arguments).end()}).tween("zoom",function(){var a=arguments,e=g(this,a),f=r.apply(this,a),h=c||d(f),k=Math.max(f[1][0]-f[0][0],f[1][1]-f[0][1]);f=this.__zoom;var m="function"===typeof b?b.apply(this,a):b,n=z(f.invert(h).concat(k/f.k),m.invert(h).concat(k/m.k));
return function(a){if(1===a)a=m;else{a=n(a);var b=k/a[2];a=new P(b,h[0]-a[0]*b,h[1]-a[1]*b)}e.zoom(null,a)}})}function g(a,b){for(var c=0,d=O.length,e;c<d;++c)if((e=O[c]).that===a)return e;return new f(a,b)}function f(a,b){this.that=a;this.args=b;this.index=-1;this.active=0;this.extent=r.apply(a,b)}function h(){if(q.apply(this,arguments)){var a=g(this,arguments),d=this.__zoom,e=Math.max(Ta[0],Math.min(Ta[1],d.k*Math.pow(2,v.apply(this,arguments)))),f=Ia(this);if(a.wheel){if(a.mouse[0][0]!==f[0]||
a.mouse[0][1]!==f[1])a.mouse[1]=d.invert(a.mouse[0]=f);clearTimeout(a.wheel)}else{if(d.k===e)return;a.mouse=[f,d.invert(f)];Na(this);a.start()}ab();a.wheel=setTimeout(function(){a.wheel=null;a.end()},150);a.zoom("mouse",t(c(b(d,e),a.mouse[0],a.mouse[1]),a.extent,A))}}function k(){if(!x&&q.apply(this,arguments)){var a=g(this,arguments),b=ca(u.view).on("mousemove.zoom",function(){ab();if(!a.moved){var b=u.clientX-e,d=u.clientY-f;a.moved=b*b+d*d>B}a.zoom("mouse",t(c(a.that.__zoom,a.mouse[0]=Ia(a.that),
a.mouse[1]),a.extent,A))},!0).on("mouseup.zoom",function(){b.on("mousemove.zoom mouseup.zoom",null);xg(u.view,a.moved);ab();a.end()},!0),d=Ia(this),e=u.clientX,f=u.clientY;wg(u.view);u.stopImmediatePropagation();a.mouse=[d,this.__zoom.invert(d)];Na(this);a.start()}}function m(){if(q.apply(this,arguments)){var d=this.__zoom,f=Ia(this),g=d.invert(f);d=t(c(b(d,d.k*(u.shiftKey?.5:2)),f,g),r.apply(this,arguments),A);ab();0<I?ca(this).transition().duration(I).call(e,d,f):ca(this).call(a.transform,d)}}function n(){if(q.apply(this,
arguments)){var a=g(this,arguments),b=u.changedTouches,c=b.length,d;u.stopImmediatePropagation();for(d=0;d<c;++d){var e=b[d];var f=ge(this,b,e.identifier);f=[f,this.__zoom.invert(f),e.identifier];if(a.touch0)a.touch1||(a.touch1=f);else{a.touch0=f;var h=!0}}if(N&&(N=clearTimeout(N),!a.touch1)){a.end();(f=ca(this).on("dblclick.zoom"))&&f.apply(this,arguments);return}h&&(N=setTimeout(function(){N=null},500),Na(this),a.start())}}function l(){var a=g(this,arguments),d=u.changedTouches,e=d.length,f;ab();
N&&(N=clearTimeout(N));for(f=0;f<e;++f){var h=d[f];var k=ge(this,d,h.identifier);a.touch0&&a.touch0[2]===h.identifier?a.touch0[0]=k:a.touch1&&a.touch1[2]===h.identifier&&(a.touch1[0]=k)}h=a.that.__zoom;if(a.touch1){k=a.touch0[0];d=a.touch0[1];f=a.touch1[0];e=a.touch1[1];var m=(m=f[0]-k[0])*m+(m=f[1]-k[1])*m;var n=(n=e[0]-d[0])*n+(n=e[1]-d[1])*n;h=b(h,Math.sqrt(m/n));k=[(k[0]+f[0])/2,(k[1]+f[1])/2];m=[(d[0]+e[0])/2,(d[1]+e[1])/2]}else if(a.touch0)k=a.touch0[0],m=a.touch0[1];else return;a.zoom("touch",
t(c(h,k,m),a.extent,A))}function p(){var a=g(this,arguments),b=u.changedTouches,c=b.length,d;u.stopImmediatePropagation();x&&clearTimeout(x);x=setTimeout(function(){x=null},500);for(d=0;d<c;++d){var e=b[d];a.touch0&&a.touch0[2]===e.identifier?delete a.touch0:a.touch1&&a.touch1[2]===e.identifier&&delete a.touch1}a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1);a.touch0?a.touch0[1]=this.__zoom.invert(a.touch0[0]):a.end()}var q=uh,r=vh,t=yh,v=wh,w=xh,Ta=[0,Infinity],A=[[-Infinity,-Infinity],
[Infinity,Infinity]],I=250,z=Pg,O=[],Tb=Gc("start","zoom","end"),N,x,B=0;a.transform=function(a,b){var c=a.selection?a.selection():a;c.property("__zoom",Ce);a!==c?e(a,b):c.interrupt().each(function(){g(this,arguments).start().zoom(null,"function"===typeof b?b.apply(this,arguments):b).end()})};a.scaleBy=function(b,c){a.scaleTo(b,function(){var a=this.__zoom.k,b="function"===typeof c?c.apply(this,arguments):c;return a*b})};a.scaleTo=function(e,f){a.transform(e,function(){var a=r.apply(this,arguments),
e=this.__zoom,g=d(a),h=e.invert(g),k="function"===typeof f?f.apply(this,arguments):f;return t(c(b(e,k),g,h),a,A)})};a.translateBy=function(b,c,d){a.transform(b,function(){return t(this.__zoom.translate("function"===typeof c?c.apply(this,arguments):c,"function"===typeof d?d.apply(this,arguments):d),r.apply(this,arguments),A)})};a.translateTo=function(b,c,e){a.transform(b,function(){var a=r.apply(this,arguments),b=this.__zoom,f=d(a);return t(Oa.translate(f[0],f[1]).scale(b.k).translate("function"===
typeof c?-c.apply(this,arguments):-c,"function"===typeof e?-e.apply(this,arguments):-e),a,A)})};f.prototype={start:function(){1===++this.active&&(this.index=O.push(this)-1,this.emit("start"));return this},zoom:function(a,b){this.mouse&&"mouse"!==a&&(this.mouse[1]=b.invert(this.mouse[0]));this.touch0&&"touch"!==a&&(this.touch0[1]=b.invert(this.touch0[0]));this.touch1&&"touch"!==a&&(this.touch1[1]=b.invert(this.touch1[0]));this.that.__zoom=b;this.emit("zoom");return this},end:function(){0===--this.active&&
(O.splice(this.index,1),this.index=-1,this.emit("end"));return this},emit:function(b){var c=new th(a,b,this.that.__zoom),d=Tb.apply;b=[b,this.that,this.args];var e=u;c.sourceEvent=u;u=c;try{d.apply(Tb,b)}finally{u=e}}};a.wheelDelta=function(b){return arguments.length?(v="function"===typeof b?b:Bb(+b),a):v};a.filter=function(b){return arguments.length?(q="function"===typeof b?b:Bb(!!b),a):q};a.touchable=function(b){return arguments.length?(w="function"===typeof b?b:Bb(!!b),a):w};a.extent=function(b){return arguments.length?
(r="function"===typeof b?b:Bb([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),a):r};a.scaleExtent=function(b){return arguments.length?(Ta[0]=+b[0],Ta[1]=+b[1],a):[Ta[0],Ta[1]]};a.translateExtent=function(b){return arguments.length?(A[0][0]=+b[0][0],A[1][0]=+b[1][0],A[0][1]=+b[0][1],A[1][1]=+b[1][1],a):[[A[0][0],A[0][1]],[A[1][0],A[1][1]]]};a.constrain=function(b){return arguments.length?(t=b,a):t};a.duration=function(b){return arguments.length?(I=+b,a):I};a.interpolate=function(b){return arguments.length?
(z=b,a):z};a.on=function(){var b=Tb.on.apply(Tb,arguments);return b===Tb?a:b};a.clickDistance=function(b){return arguments.length?(B=(b=+b)*b,a):Math.sqrt(B)};return a}function Ah(a){return function(){return a}}function Yc(a,b){if(a===b||a!==a)return Ah(a);var c=typeof a;if(c!==typeof b||Array.isArray(a)!==Array.isArray(b))throw Error("Cannot interpolate values of different type");if(Array.isArray(a)){var d=b.map(function(b,c){return Yc(a[c],b)});return function(a){return d.map(function(b){return b(a)})}}if("object"===
c){if(!a||!b)throw Error("Object cannot be null");if("[object Date]"===Object.prototype.toString.call(a)&&"[object Date]"===Object.prototype.toString.call(b)){a=a.getTime();b=b.getTime();var e=b-a;return function(b){return new Date(a+b*e)}}var g=Object.keys(b),f={},h={};g.forEach(function(c){f[c]=Yc(a[c],b[c])});return function(a){g.forEach(function(b){h[b]=f[b](a)});return h}}if("number"===c){var k=b-a;return function(b){return a+b*k}}throw Error("Cannot interpolate "+c+" values");}function Bh(a){return a}
function Ch({clientWidth:a,clientHeight:b}){return Math.min(a,b)}function Dh({msx:a,msy:b}){return void 0!=a&&void 0!=b}function Eh({transform:a,msx:b,msy:c}){return a&&void 0!=b&&void 0!=c?[a.invertX(b),a.invertY(c)]:null}function Fh({scale:a,translateX:b,translateY:c,minSize:d,clientWidth:e,clientHeight:g}){b=-b/a;c=-c/a;return[[b/d,(b+e/a)/d],[c/d,(c+g/a)/d]]}function Gh({extent:a}){return(a[0][0]+a[0][1])/2}function Hh({extent:a}){return(a[1][0]+a[1][1])/2}function Ih(){let {z:a,scaleExtent:b,
minSize:c,homeScale:d,homeX:e,homeY:g}=this.get(),f=this;a.wheelDelta(()=>{let a=-u.deltaY*(u.deltaMode?120:1)/500;u.ctrlKey&&(a*=10);return a});a.scaleExtent(b);let h=ca(this.refs.root);this.set({selection:h,el:this.refs.root});a(h);a.filter(this.zoomEventFilter.bind(this));a.on("zoom",()=>{this.onzoom(f)});a.translateTo(h,e*c,g*c);a.scaleTo(h,d)}function De({changed:a,current:b,previous:c}){void 0!=c&&(a.clientWidth||a.clientHeight)&&b.el&&this.update();let {}=this.get()}function Jh(a,b){function c(){a.set({clientWidth:f.clientWidth,
clientHeight:f.clientHeight})}function d(b){a.mouseMove(b)}function e(b){a.set({msx:null,msy:null})}function g(b){a.set({msx:null,msy:null})}var f,h=a._slotted.default,k;return{c(){f=l("div");a.root._beforecreate.push(c);f.addEventListener("mousemove",d,void 0);f.addEventListener("mousedown",e,void 0);f.addEventListener("mouseout",g,void 0);f.className="d3zoom svelte-kaete3 svelte-ref-root"},m(b,d){b.insertBefore(f,d);h&&f.appendChild(h);k=Ea(f,c);a.refs.root=f},p:M,d(b){b&&w(f);h&&ja(f,h);k.cancel();
f.removeEventListener("mousemove",d,void 0);f.removeEventListener("mousedown",e,void 0);f.removeEventListener("mouseout",g,void 0);a.refs.root===f&&(a.refs.root=null)}}}function bb(a){z(this,a);this.refs={};this._state=r({z:zh(),el:null,selection:null,transform:null,scaleExtent:[1,48],homeScale:1,homeX:.5,homeY:.5,scale:null,translateX:null,translateY:null,k:1,x:0,y:0,msx:null,msy:null,disableBehaviors:!1,scrollWheel:!1},a.data);this._recompute({clientWidth:1,clientHeight:1,msx:1,msy:1,transform:1,
minSize:1,scale:1,translateX:1,translateY:1,extent:1},this._state);this._intro=!0;this._handlers.state=[De];this._slotted=a.slots||{};De.call(this,{changed:Da({},this._state),current:this._state});this._fragment=Jh(this,this._state);this.root._oncreate.push(()=>{Ih.call(this);this.fire("update",{changed:Da({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),G(this))}function Kh(){this.refs.element.addEventListener("ready",(a)=>{this.set({ready:!0})});
this.refs.element.addEventListener("onscreen",(a)=>{this.set({onscreen:!0});this.fire("onscreen")});this.refs.element.addEventListener("offscreen",(a)=>{this.set({onscreen:!1});this.fire("offscreen")})}function Lh(a,b){var c,d=a._slotted.default;return{c(){c=l("d-figure");q(c,"display",b.display);q(c,"height",b.height)},m(b,g){b.insertBefore(c,g);d&&c.appendChild(d);a.refs.element=c},p(a,b){a.display&&q(c,"display",b.display);a.height&&q(c,"height",b.height)},d(b){b&&w(c);d&&ja(c,d);a.refs.element===
c&&(a.refs.element=null)}}}function Ee(a){z(this,a);this.refs={};this._state=r({display:"block",ready:!1,height:"",onscreen:!1,offscreen:!0},a.data);this._intro=!0;this._slotted=a.slots||{};this._fragment=Lh(this,this._state);this.root._oncreate.push(()=>{Kh.call(this);this.fire("update",{changed:Da({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),G(this))}function Mh({layers:a,layer:b}){if(null==a)return 0;let c=0;a[b].forEach((a)=>{a.forEach((a)=>
{a&&500<a.num_activations&&(a=a.full_class_values[0],a>c&&(c=a))})});return c}function Nh({viewWidth:a,screenResolution:b}){return a*b}function Oh({viewHeight:a,screenResolution:b}){return a*b}function Ph({scale:a,gridSize:b,config:c,classHeatmap:d,w:e,h:g,autoGridSizeMultiplier:f}){a=-1<b?+b:Math.floor(Math.sqrt(Math.max(e,g)*a/80/f/20));c&&(a=Math.min(c.grid_size.length-1,a));-1<d&&(a=Math.min(2,a));return a}function Qh({currentZoomIndex:a,layers:b}){return b?b[a]:[[]]}function Rh({labelsBufferContext:a,
labels:b,fontSize:c,textColor:d,textShadowColor:e}){a&&b&&(a.globalAlpha=1,a.font=c+"px Helvetica",b.forEach((b,c)=>{a.lineWidth=3;a.lineJoin="round";a.strokeStyle=e;a.strokeText(b,c%10*150+10,20*Math.floor(c/10+1),80,15);a.fillStyle=d;a.fillStyle=d;a.fillText(b,c%10*150+10,20*Math.floor(c/10+1),80,15)}))}function Sh({hoverIconData:a,mouseGlobalPosition:b}){return b&&a&&a.gcx}function Th({currentLayerData:a,mouseGlobalPosition:b,w:c,h:d}){if(a){let e=a.length;if(b){let g=Math.floor(b[0]/Math.min(c,
d)*e);b=Math.floor(b[1]/Math.min(c,d)*e);return a[b]&&a[b][g]?a[b][g]:{}}}return{}}function Uh({hoverIconData:a,scale:b,w:c,h:d,translateX:e}){return a.gy*b*Math.min(c,d)+e}function Vh({hoverIconData:a,scale:b,w:c,h:d,translateY:e}){return a.gx*b*Math.min(c,d)+e}function Wh({hoverIconData:a,scale:b,w:c,h:d}){return a.gw*b*Math.min(c,d)}function Xh({mouseGlobalPosition:a,hoverIconData:b,enableHover:c}){return c&&a&&b&&b.gw}function Yh({changed:a,current:b}){if(!b.context||a.viewWidth||a.viewHeight){var c=
this.refs.labelsCanvas.getContext("2d");c.imageSmoothingEnabled=!1;this.set({context:this.refs.canvas.getContext("2d"),labelsContext:c})}(a.loading||a.autoGridSizeMultiplier||a.labels||a.density||a.maxAttributionValue||a.classHeatmap||a.classHeatmapMultiplier||a.classHeatmapPositive||a.showLabels||a.viewWidth||a.viewHeight||a.scale||a.translateX||a.translateY||a.iconCrop||a.gridSize||a.layers)&&this.render();if(a.hoverIconData){var {tooltip:c}=this.store.get();let {showHoverIcon:a}=this.get();a?c.show(b.hoverIconData):
c.hide()}if(a.showHoverIcon&&0==b.showHoverIcon){var {tooltip:a}=this.store.get();a.hide()}}function Zh(a,b){function c(){a.set({viewWidth:g.clientWidth,viewHeight:g.clientHeight})}var d,e,g,f,h,k,m,n,y,q,r,t,F,v={};if(void 0!==b.ready){v.ready=b.ready;var u=!0}var x=new Ee({root:a.root,store:a.store,data:v,_bind(b,c){var d={};!u&&b.ready&&(d.ready=c.ready);a._set(d);u=void 0}});a.root._beforecreate.push(()=>{x._bind({ready:1},x.get())});var A=b.ready&&Fe(a,b),I=b.showHoverIcon&&Ge(a,b);v={homeX:b.homeX,
homeY:b.homeY,homeScale:b.homeScale};if(void 0!==b.scale){v.scale=b.scale;var z=!0}if(void 0!==b.translateX){v.translateX=b.translateX;var O=!0}if(void 0!==b.translateY){v.translateY=b.translateY;var B=!0}if(void 0!==b.mouseOver){v.mouseOver=b.mouseOver;var N=!0}if(void 0!==b.mouseGlobalPosition){v.mouseGlobalPosition=b.mouseGlobalPosition;var G=!0}if(void 0!==b.extent){v.extent=b.extent;var E=!0}if(void 0!==b.scrollWheel){v.scrollWheel=b.scrollWheel;var xa=!0}if(void 0!==b.disableBehaviors){v.disableBehaviors=
b.disableBehaviors;var ka=!0}if(void 0!==b.gcx){v.gcx=b.gcx;var Ua=!0}if(void 0!==b.gcy){v.gcy=b.gcy;var D=!0}var H=new bb({root:a.root,store:a.store,slots:{default:ra()},data:v,_bind(b,c){var d={};!z&&b.scale&&(d.scale=c.scale);!O&&b.translateX&&(d.translateX=c.translateX);!B&&b.translateY&&(d.translateY=c.translateY);!N&&b.mouseOver&&(d.mouseOver=c.mouseOver);!G&&b.mouseGlobalPosition&&(d.mouseGlobalPosition=c.mouseGlobalPosition);!E&&b.extent&&(d.extent=c.extent);!xa&&b.scrollWheel&&(d.scrollWheel=
c.scrollWheel);!ka&&b.disableBehaviors&&(d.disableBehaviors=c.disableBehaviors);!Ua&&b.gcx&&(d.gcx=c.gcx);!D&&b.gcy&&(d.gcy=c.gcy);a._set(d);D=Ua=ka=xa=E=G=N=B=O=z=void 0}});a.root._beforecreate.push(()=>{H._bind({scale:1,translateX:1,translateY:1,mouseOver:1,mouseGlobalPosition:1,extent:1,scrollWheel:1,disableBehaviors:1,gcx:1,gcy:1},H.get())});a.refs.d3Zoom=H;return{c(){x._fragment.c();d=p("\n\n");A&&A.c();e=p("\n\n");g=l("div");f=l("canvas");m=p("\n    ");n=l("canvas");r=p("\n    ");I&&I.c();t=
document.createComment("");H._fragment.c();f.width=h=b.viewWidth*b.screenResolution;f.height=k=b.viewHeight*b.screenResolution;f.className="svelte-w9b5xg svelte-ref-canvas";n.width=y=b.viewWidth*b.screenResolution;n.height=q=b.viewHeight*b.screenResolution;n.className="svelte-w9b5xg svelte-ref-labelsCanvas";a.root._beforecreate.push(c);g.className="svelte-w9b5xg svelte-ref-root"},m(b,h){x._mount(b,h);b.insertBefore(d,h);A&&A.m(b,h);b.insertBefore(e,h);b.insertBefore(g,h);H._slotted.default.appendChild(f);
a.refs.canvas=f;H._slotted.default.appendChild(m);H._slotted.default.appendChild(n);a.refs.labelsCanvas=n;H._slotted.default.appendChild(r);I&&I.m(H._slotted.default,null);H._slotted.default.appendChild(t);H._mount(g,null);F=Ea(g,c);a.refs.root=g},p(c,d){b=d;d={};!u&&c.ready&&(d.ready=b.ready,u=void 0!==b.ready);x._set(d);u=void 0;b.ready?A?A.p(c,b):(A=Fe(a,b),A.c(),A.m(e.parentNode,e)):A&&(A.d(1),A=null);(c.viewWidth||c.screenResolution)&&h!==(h=b.viewWidth*b.screenResolution)&&(f.width=h);(c.viewHeight||
c.screenResolution)&&k!==(k=b.viewHeight*b.screenResolution)&&(f.height=k);(c.viewWidth||c.screenResolution)&&y!==(y=b.viewWidth*b.screenResolution)&&(n.width=y);(c.viewHeight||c.screenResolution)&&q!==(q=b.viewHeight*b.screenResolution)&&(n.height=q);b.showHoverIcon?I?I.p(c,b):(I=Ge(a,b),I.c(),I.m(t.parentNode,t)):I&&(I.d(1),I=null);d={};c.homeX&&(d.homeX=b.homeX);c.homeY&&(d.homeY=b.homeY);c.homeScale&&(d.homeScale=b.homeScale);!z&&c.scale&&(d.scale=b.scale,z=void 0!==b.scale);!O&&c.translateX&&
(d.translateX=b.translateX,O=void 0!==b.translateX);!B&&c.translateY&&(d.translateY=b.translateY,B=void 0!==b.translateY);!N&&c.mouseOver&&(d.mouseOver=b.mouseOver,N=void 0!==b.mouseOver);!G&&c.mouseGlobalPosition&&(d.mouseGlobalPosition=b.mouseGlobalPosition,G=void 0!==b.mouseGlobalPosition);!E&&c.extent&&(d.extent=b.extent,E=void 0!==b.extent);!xa&&c.scrollWheel&&(d.scrollWheel=b.scrollWheel,xa=void 0!==b.scrollWheel);!ka&&c.disableBehaviors&&(d.disableBehaviors=b.disableBehaviors,ka=void 0!==b.disableBehaviors);
!Ua&&c.gcx&&(d.gcx=b.gcx,Ua=void 0!==b.gcx);!D&&c.gcy&&(d.gcy=b.gcy,D=void 0!==b.gcy);H._set(d);D=Ua=ka=xa=E=G=N=B=O=z=void 0},d(b){x.destroy(b);b&&w(d);A&&A.d(b);b&&(w(e),w(g));a.refs.canvas===f&&(a.refs.canvas=null);a.refs.labelsCanvas===n&&(a.refs.labelsCanvas=null);I&&I.d();H.destroy();a.refs.d3Zoom===H&&(a.refs.d3Zoom=null);F.cancel();a.refs.root===g&&(a.refs.root=null)}}}function Fe(a,b){var c={id:b.id,layer:b.layer,layout:b.layout,classFilter:b.classFilter,filter:b.filter};if(void 0!==b.config){c.config=
b.config;var d=!0}if(void 0!==b.layers){c.layers=b.layers;var e=!0}if(void 0!==b.labels){c.labels=b.labels;var g=!0}if(void 0!==b.loading){c.loading=b.loading;var f=!0}var h=new Sd({root:a.root,store:a.store,data:c,_bind(b,c){var h={};!d&&b.config&&(h.config=c.config);!e&&b.layers&&(h.layers=c.layers);!g&&b.labels&&(h.labels=c.labels);!f&&b.loading&&(h.loading=c.loading);a._set(h);f=g=e=d=void 0}});a.root._beforecreate.push(()=>{h._bind({config:1,layers:1,labels:1,loading:1},h.get())});return{c(){h._fragment.c()},
m(a,b){h._mount(a,b)},p(a,c){b=c;c={};a.id&&(c.id=b.id);a.layer&&(c.layer=b.layer);a.layout&&(c.layout=b.layout);a.classFilter&&(c.classFilter=b.classFilter);a.filter&&(c.filter=b.filter);!d&&a.config&&(c.config=b.config,d=void 0!==b.config);!e&&a.layers&&(c.layers=b.layers,e=void 0!==b.layers);!g&&a.labels&&(c.labels=b.labels,g=void 0!==b.labels);!f&&a.loading&&(c.loading=b.loading,f=void 0!==b.loading);h._set(c);f=g=e=d=void 0},d(a){h.destroy(a)}}}function Ge(a,b){var c;return{c(){c=l("div");q(c,
"left",""+b.hoverIconX+"px");q(c,"top",""+b.hoverIconY+"px");q(c,"width",""+b.hoverIconW+"px");q(c,"height",""+b.hoverIconW+"px");c.className="svelte-w9b5xg svelte-ref-hover"},m(b,e){b.insertBefore(c,e);a.refs.hover=c},p(a,b){a.hoverIconX&&q(c,"left",""+b.hoverIconX+"px");a.hoverIconY&&q(c,"top",""+b.hoverIconY+"px");a.hoverIconW&&(q(c,"width",""+b.hoverIconW+"px"),q(c,"height",""+b.hoverIconW+"px"))},d(b){b&&w(c);a.refs.hover===c&&(a.refs.hover=null)}}}function uc(a){z(this,a);this.refs={};this._state=
r({ready:!0,id:"inceptionv1_mixed4c",config:null,layers:null,layer:0,layout:0,classFilter:0,filter:0,context:null,alphaAttributionFactor:.02,density:1,classHeatmap:-1,classHeatmapMultiplier:1,classHeatmapPositive:1,iconCrop:.02,autoGridSizeMultiplier:.5,gridSize:null,homeX:.5,homeY:.5,homeScale:1,enableClickToZoom:!0,enableHover:!0,enableDragToPan:!0,backgroundColor:"white",strokeColor:"rgb(220, 220, 220)",strokeThickness:1,imageSmoothing:!1,fontSize:10,textColor:"white",textShadowColor:"rgba(0, 0, 0, 0.6)",
showLabels:!0,screenResolution:1},a.data);this._recompute({layers:1,layer:1,viewWidth:1,screenResolution:1,viewHeight:1,scale:1,gridSize:1,config:1,classHeatmap:1,w:1,h:1,autoGridSizeMultiplier:1,currentZoomIndex:1,labelsBufferContext:1,labels:1,fontSize:1,textColor:1,textShadowColor:1,currentLayerData:1,mouseGlobalPosition:1,translateX:1,translateY:1,hoverIconData:1,enableHover:1},this._state);this._intro=!0;this._handlers.update=[Yh];this._fragment=Zh(this,this._state);this.root._oncreate.push(()=>
{{let a=document.createElement("canvas");a.width=1500;a.height=2040;let c=a.getContext("2d");this.set({labelsBufferCanvas:a,labelsBufferContext:c})}this.fire("update",{changed:Da({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),G(this))}function $h(a,b){var c,d,e=a._slotted.head,g,f,h=a._slotted.body;return{c(){c=l("div");d=l("div");g=p("\n  ");f=l("div");d.className="head svelte-l56anp";f.className="body svelte-l56anp";c.className="root svelte-l56anp"},
m(a,b){a.insertBefore(c,b);c.appendChild(d);e&&d.appendChild(e);c.appendChild(g);c.appendChild(f);h&&f.appendChild(h)},p:M,d(a){a&&w(c);e&&ja(d,e);h&&ja(f,h)}}}function Zc(a){z(this,a);this._state=r({},a.data);this._intro=!0;this._slotted=a.slots||{};this._fragment=$h(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function ai({gridSize:a}){return 20*(a+1)}function bi({iconScaleFactor:a,realGridSize:b}){return 1E6/(b*b*a)}function ci(a,b){function c(){a.store.set({scroll:cb.checked})}
function d(){a.set({showLabels:db.checked})}function e(){a.set({gridSize:R.__value})}function g(){a.set({gridSize:S.__value})}function f(){a.set({gridSize:T.__value})}function h(){a.set({gridSize:U.__value})}function k(){a.set({gridSize:V.__value})}function m(){a.set({gridSize:W.__value})}function n(){a.set({autoGridSizeMultiplier:zc(ea.value)})}function y(){a.set({density:zc(fa.value)})}function r(){a.set({classHeatmapPositive:X.__value})}function C(){a.set({classHeatmapPositive:Y.__value})}function u(){a.set({classHeatmapMultiplier:zc(ha.value)})}
function F(b){a.toggle()}var v,x,z,A,B,G,O,E,N,M,Z,xa,ka,Ua,D,H,K,ba,J,da,na,qa,P,Kb,Vb,cb,ta,ua,ca,db,ya,za,Lb,Aa,L,pa,Da,ja,R,Ea,Ha,ma,S,Ja,Ka,oa,T,Ra,Sa,sa,U,Va,Wa,va,V,Xa,Ya,wa,W,$a,ab,Cb,Ca,fb,Wb,ib,ea,jb,Mb,Xb,lb,Yb,mb,fa,pb,aa,Fa,qb,Zb,X,rb,sb,$b,Y,tb,ub,Ga,vb,ac,wb,ha,xb,Ba,Ia,yb,La,zb,Ma=Nb(b.gcx),Za,Ab,Na,Bb,Oa=Nb(b.gcy),bb,Eb,Pa,Fb,Qa=Nb(b.scale),gb,Gb,vc,Ob,wc=b.showOptions?"fewer options":"more options",hb,xc,Hb={};if(void 0!==b.classHeatmap){Hb.classHeatmap=b.classHeatmap;var bc=!0}var Pb=
new Cc({root:a.root,store:a.store,data:Hb,_bind(b,c){var d={};!bc&&b.classHeatmap&&(d.classHeatmap=c.classHeatmap);a._set(d);bc=void 0}});a.root._beforecreate.push(()=>{Pb._bind({classHeatmap:1},Pb.get())});var Qb=new Zc({root:a.root,store:a.store,slots:{default:ra(),body:ra(),head:ra()}}),Ib={classHeatmap:b.classHeatmap};if(void 0!==b.layerName){Ib.layerName=b.layerName;var cc=!0}var Rb=new Hd({root:a.root,store:a.store,data:Ib,_bind(b,c){var d={};!cc&&b.layerName&&(d.layerName=c.layerName);a._set(d);
cc=void 0}});a.root._beforecreate.push(()=>{Rb._bind({layerName:1},Rb.get())});var Sb=new Zc({root:a.root,store:a.store,slots:{default:ra(),body:ra(),head:ra()}}),ia={id:"inceptionv1_"+b.layerName,strokeColor:"#666",backgroundColor:"#dfdfdf",showHoverImage:!1,classHeatmap:b.classHeatmap,homeX:b.homeX,homeY:b.homeY,homeScale:b.homeScale};if(void 0!==b.density){ia.density=b.density;var dc=!0}if(void 0!==b.iconCrop){ia.iconCrop=b.iconCrop;var ec=!0}if(void 0!==b.classHeatmapMultiplier){ia.classHeatmapMultiplier=
b.classHeatmapMultiplier;var fc=!0}if(void 0!==b.classHeatmapPositive){ia.classHeatmapPositive=b.classHeatmapPositive;var gc=!0}if(void 0!==b.autoGridSizeMultiplier){ia.autoGridSizeMultiplier=b.autoGridSizeMultiplier;var hc=!0}if(void 0!==b.gridSize){ia.gridSize=b.gridSize;var ic=!0}if(void 0!==b.showLabels){ia.showLabels=b.showLabels;var jc=!0}if(void 0!==b.scale){ia.scale=b.scale;var kc=!0}if(void 0!==b.gcx){ia.gcx=b.gcx;var lc=!0}if(void 0!==b.gcy){ia.gcy=b.gcy;var mc=!0}if(void 0!==b.extent){ia.extent=
b.extent;var nc=!0}if(void 0!==b.$scroll){ia.scrollWheel=b.$scroll;var oc=!0}var eb=new uc({root:a.root,store:a.store,data:ia,_bind(b,c){var d={},e={};!dc&&b.density&&(d.density=c.density);!ec&&b.iconCrop&&(d.iconCrop=c.iconCrop);!fc&&b.classHeatmapMultiplier&&(d.classHeatmapMultiplier=c.classHeatmapMultiplier);!gc&&b.classHeatmapPositive&&(d.classHeatmapPositive=c.classHeatmapPositive);!hc&&b.autoGridSizeMultiplier&&(d.autoGridSizeMultiplier=c.autoGridSizeMultiplier);!ic&&b.gridSize&&(d.gridSize=
c.gridSize);!jc&&b.showLabels&&(d.showLabels=c.showLabels);!kc&&b.scale&&(d.scale=c.scale);!lc&&b.gcx&&(d.gcx=c.gcx);!mc&&b.gcy&&(d.gcy=c.gcy);!nc&&b.extent&&(d.extent=c.extent);!oc&&b.scrollWheel&&(e.scroll=c.scrollWheel);a.store.set(e);a._set(d);oc=nc=mc=lc=kc=jc=ic=hc=gc=fc=ec=dc=void 0}});a.root._beforecreate.push(()=>{eb._bind({density:1,iconCrop:1,classHeatmapMultiplier:1,classHeatmapPositive:1,autoGridSizeMultiplier:1,gridSize:1,showLabels:1,scale:1,gcx:1,gcy:1,extent:1,scrollWheel:1},eb.get())});
a.refs.atlas=eb;var Jb={id:"inceptionv1_"+b.layerName,layerName:b.layerName,enableDragging:!0,classHeatmap:b.classHeatmap,scaleCountFactor:b.scaleCountFactor};if(void 0!==b.extent){Jb.extent=b.extent;var pc=!0}var Db=new ud({root:a.root,store:a.store,data:Jb,_bind(b,c){var d={};!pc&&b.extent&&(d.extent=c.extent);a._set(d);pc=void 0}});a.root._beforecreate.push(()=>{Db._bind({extent:1},Db.get())});Db.on("drag",function(b){a.refs.atlas.translateTo(b.gcx,b.gcy)});var kb=new Ub({root:a.root,store:a.store,
data:{name:"home",color:"white"}}),qc=new tc({root:a.root,store:a.store,slots:{default:ra()}});qc.on("click",function(b){a.refs.atlas.home(3E3)});var nb=new Ub({root:a.root,store:a.store,data:{name:"add",color:"white"}}),rc=new tc({root:a.root,store:a.store,slots:{default:ra()}});rc.on("click",function(b){a.refs.atlas.scaleBy(2)});var ob=new Ub({root:a.root,store:a.store,data:{name:"remove",color:"white"}}),sc=new tc({root:a.root,store:a.store,slots:{default:ra()}});sc.on("click",function(b){a.refs.atlas.scaleBy(.5)});
return{c(){v=l("div");x=l("div");z=l("h2");z.textContent="Class Filter";A=p("\n        ");B=l("div");Pb._fragment.c();Qb._fragment.c();G=p("\n    ");O=l("div");E=l("h2");E.textContent="Layer";N=p("\n        ");M=l("div");Rb._fragment.c();Sb._fragment.c();Z=p("\n  ");xa=l("div");ka=l("div");eb._fragment.c();Ua=p("\n        ");D=l("div");H=l("div");K=l("div");Db._fragment.c();ba=p("\n            ");J=l("div");kb._fragment.c();qc._fragment.c();da=p("\n              ");nb._fragment.c();rc._fragment.c();
na=p("\n              ");ob._fragment.c();sc._fragment.c();qa=p("\n          ");P=l("div");Kb=l("div");Vb=l("label");cb=l("input");ta=p(" scroll to zoom");ua=p("\n              ");ca=l("label");db=l("input");ya=p(" attribution labels");za=p("\n            ");Lb=l("div");Aa=l("div");L=l("div");pa=l("h3");pa.textContent="Grid size";Da=p("\n                  ");ja=l("label");R=l("input");Ea=p(" 20x20");Ha=p("\n                  ");ma=l("label");S=l("input");Ja=p(" 40x40");Ka=p("\n                  ");
oa=l("label");T=l("input");Ra=p(" 80x80");Sa=p("\n                  ");sa=l("label");U=l("input");Va=p(" 160x160");Wa=p("\n                  ");va=l("label");V=l("input");Xa=p(" 320x320");Ya=p("\n                  ");wa=l("label");W=l("input");$a=p(" auto");ab=p("\n                  ");Cb=l("div");Ca=l("div");fb=p("auto threshold: ");Wb=l("noscript");ib=p("\n                    ");ea=l("input");jb=p("\n                ");Mb=l("div");Xb=l("h3");lb=p("Icon density: ");Yb=l("noscript");mb=p("\n                  ");
fa=l("input");pb=p("\n                ");aa=l("div");Fa=l("h3");Fa.textContent="Class filter";qb=p("\n                  ");Zb=l("label");X=l("input");rb=p(" positive influence");sb=p("\n                  ");$b=l("label");Y=l("input");tb=p(" negative influence");ub=p("\n                  ");Ga=l("div");vb=p("Intensity: ");ac=l("noscript");wb=p("\n                  ");ha=l("input");xb=p("\n                ");Ba=l("div");Ia=l("h3");Ia.textContent="Location";yb=p("\n                  ");La=l("div");zb=
p("x: ");Za=p(Ma);Ab=p("\n                  ");Na=l("div");Bb=p("y: ");bb=p(Oa);Eb=p("\n                  ");Pa=l("div");Fb=p("scale: ");gb=p(Qa);Gb=p("\n          ");vc=l("div");Ob=l("button");hb=p(wc);t(z,"slot","head");t(B,"slot","body");x.className="filter svelte-1xmf6n";q(x,"display",b.showClassFilter?"block":"none");t(E,"slot","head");t(M,"slot","body");O.className="stack svelte-1xmf6n";q(O,"display",b.showLayerChooser?"block":"none");K.className="map svelte-1xmf6n";q(K,"display","block");J.className=
"buttons svelte-1xmf6n";H.className="nav svelte-1xmf6n";cb.addEventListener("change",c,void 0);t(cb,"type","checkbox");Vb.className="svelte-1xmf6n";db.addEventListener("change",d,void 0);t(db,"type","checkbox");ca.className="svelte-1xmf6n";Kb.className="essential";pa.className="svelte-1xmf6n";a._bindingGroups[0].push(R);R.addEventListener("change",e,void 0);t(R,"type","radio");R.__value=0;R.value=R.__value;ja.className="svelte-1xmf6n";a._bindingGroups[0].push(S);S.addEventListener("change",g,void 0);
t(S,"type","radio");S.__value=1;S.value=S.__value;ma.className="svelte-1xmf6n";a._bindingGroups[0].push(T);T.addEventListener("change",f,void 0);t(T,"type","radio");T.__value=2;T.value=T.__value;oa.className="svelte-1xmf6n";a._bindingGroups[0].push(U);U.addEventListener("change",h,void 0);t(U,"type","radio");U.__value=3;U.value=U.__value;sa.className="svelte-1xmf6n";a._bindingGroups[0].push(V);V.addEventListener("change",k,void 0);t(V,"type","radio");V.__value=4;V.value=V.__value;va.className="svelte-1xmf6n";
a._bindingGroups[0].push(W);W.addEventListener("change",m,void 0);t(W,"type","radio");W.__value=-1;W.value=W.__value;wa.className="svelte-1xmf6n";ea.addEventListener("change",n,void 0);ea.addEventListener("input",n,void 0);t(ea,"type","range");ea.min=.5;ea.max=1.4;ea.step=.01;q(Cb,"display","none");L.className="section svelte-1xmf6n";Xb.className="svelte-1xmf6n";fa.addEventListener("change",y,void 0);fa.addEventListener("input",y,void 0);t(fa,"type","range");fa.min=.2;fa.max=8;fa.step=.01;Mb.className=
"section svelte-1xmf6n";Fa.className="svelte-1xmf6n";a._bindingGroups[1].push(X);X.addEventListener("change",r,void 0);t(X,"type","radio");X.__value=1;X.value=X.__value;Zb.className="svelte-1xmf6n";a._bindingGroups[1].push(Y);Y.addEventListener("change",C,void 0);t(Y,"type","radio");Y.__value=-1;Y.value=Y.__value;$b.className="svelte-1xmf6n";ha.addEventListener("change",u,void 0);ha.addEventListener("input",u,void 0);t(ha,"type","range");ha.min="0.5";ha.max="2";ha.step="0.1";aa.className="section svelte-1xmf6n";
q(aa,"display",-1<b.classHeatmap?"block":"none");Ia.className="svelte-1xmf6n";Ba.className="section svelte-1xmf6n";Aa.className="grid-size";Lb.className="expand svelte-1xmf6n";P.className="options svelte-1xmf6n";Ob.addEventListener("click",F,void 0);Ob.className="svelte-1xmf6n";vc.className="expand-toggle svelte-1xmf6n";D.className=xc=(b.showOptions?"open":"closed")+" svelte-1xmf6n svelte-ref-controls";ka.className="atlas svelte-1xmf6n";xa.className="main svelte-1xmf6n";v.className="container svelte-1xmf6n"},
m(c,d){c.insertBefore(v,d);v.appendChild(x);Qb._slotted.head.appendChild(z);Qb._slotted.default.appendChild(A);Qb._slotted.body.appendChild(B);Pb._mount(B,null);Qb._mount(x,null);v.appendChild(G);v.appendChild(O);Sb._slotted.head.appendChild(E);Sb._slotted.default.appendChild(N);Sb._slotted.body.appendChild(M);Rb._mount(M,null);Sb._mount(O,null);v.appendChild(Z);v.appendChild(xa);xa.appendChild(ka);eb._mount(ka,null);ka.appendChild(Ua);ka.appendChild(D);D.appendChild(H);H.appendChild(K);Db._mount(K,
null);H.appendChild(ba);H.appendChild(J);kb._mount(qc._slotted.default,null);qc._mount(J,null);J.appendChild(da);nb._mount(rc._slotted.default,null);rc._mount(J,null);J.appendChild(na);ob._mount(sc._slotted.default,null);sc._mount(J,null);D.appendChild(qa);D.appendChild(P);P.appendChild(Kb);Kb.appendChild(Vb);Vb.appendChild(cb);cb.checked=b.$scroll;Vb.appendChild(ta);Kb.appendChild(ua);Kb.appendChild(ca);ca.appendChild(db);db.checked=b.showLabels;ca.appendChild(ya);P.appendChild(za);P.appendChild(Lb);
Lb.appendChild(Aa);Aa.appendChild(L);L.appendChild(pa);L.appendChild(Da);L.appendChild(ja);ja.appendChild(R);R.checked=R.__value===b.gridSize;ja.appendChild(Ea);L.appendChild(Ha);L.appendChild(ma);ma.appendChild(S);S.checked=S.__value===b.gridSize;ma.appendChild(Ja);L.appendChild(Ka);L.appendChild(oa);oa.appendChild(T);T.checked=T.__value===b.gridSize;oa.appendChild(Ra);L.appendChild(Sa);L.appendChild(sa);sa.appendChild(U);U.checked=U.__value===b.gridSize;sa.appendChild(Va);L.appendChild(Wa);L.appendChild(va);
va.appendChild(V);V.checked=V.__value===b.gridSize;va.appendChild(Xa);L.appendChild(Ya);L.appendChild(wa);wa.appendChild(W);W.checked=W.__value===b.gridSize;wa.appendChild($a);L.appendChild(ab);L.appendChild(Cb);Cb.appendChild(Ca);Ca.appendChild(fb);Ca.appendChild(Wb);Wb.insertAdjacentHTML("afterend",b.autoGridSizeMultiplier);Cb.appendChild(ib);Cb.appendChild(ea);ea.value=b.autoGridSizeMultiplier;Aa.appendChild(jb);Aa.appendChild(Mb);Mb.appendChild(Xb);Xb.appendChild(lb);Xb.appendChild(Yb);Yb.insertAdjacentHTML("afterend",
b.density);Mb.appendChild(mb);Mb.appendChild(fa);fa.value=b.density;Aa.appendChild(pb);Aa.appendChild(aa);aa.appendChild(Fa);aa.appendChild(qb);aa.appendChild(Zb);Zb.appendChild(X);X.checked=X.__value===b.classHeatmapPositive;Zb.appendChild(rb);aa.appendChild(sb);aa.appendChild($b);$b.appendChild(Y);Y.checked=Y.__value===b.classHeatmapPositive;$b.appendChild(tb);aa.appendChild(ub);aa.appendChild(Ga);Ga.appendChild(vb);Ga.appendChild(ac);ac.insertAdjacentHTML("afterend",b.classHeatmapMultiplier);aa.appendChild(wb);
aa.appendChild(ha);ha.value=b.classHeatmapMultiplier;Aa.appendChild(xb);Aa.appendChild(Ba);Ba.appendChild(Ia);Ba.appendChild(yb);Ba.appendChild(La);La.appendChild(zb);La.appendChild(Za);Ba.appendChild(Ab);Ba.appendChild(Na);Na.appendChild(Bb);Na.appendChild(bb);Ba.appendChild(Eb);Ba.appendChild(Pa);Pa.appendChild(Fb);Pa.appendChild(gb);a.refs.expand=Lb;D.appendChild(Gb);D.appendChild(vc);vc.appendChild(Ob);Ob.appendChild(hb);a.refs.controls=D},p(a,c){b=c;c={};!bc&&a.classHeatmap&&(c.classHeatmap=
b.classHeatmap,bc=void 0!==b.classHeatmap);Pb._set(c);bc=void 0;a.showClassFilter&&q(x,"display",b.showClassFilter?"block":"none");c={};a.classHeatmap&&(c.classHeatmap=b.classHeatmap);!cc&&a.layerName&&(c.layerName=b.layerName,cc=void 0!==b.layerName);Rb._set(c);cc=void 0;a.showLayerChooser&&q(O,"display",b.showLayerChooser?"block":"none");c={};a.layerName&&(c.id="inceptionv1_"+b.layerName);a.classHeatmap&&(c.classHeatmap=b.classHeatmap);a.homeX&&(c.homeX=b.homeX);a.homeY&&(c.homeY=b.homeY);a.homeScale&&
(c.homeScale=b.homeScale);!dc&&a.density&&(c.density=b.density,dc=void 0!==b.density);!ec&&a.iconCrop&&(c.iconCrop=b.iconCrop,ec=void 0!==b.iconCrop);!fc&&a.classHeatmapMultiplier&&(c.classHeatmapMultiplier=b.classHeatmapMultiplier,fc=void 0!==b.classHeatmapMultiplier);!gc&&a.classHeatmapPositive&&(c.classHeatmapPositive=b.classHeatmapPositive,gc=void 0!==b.classHeatmapPositive);!hc&&a.autoGridSizeMultiplier&&(c.autoGridSizeMultiplier=b.autoGridSizeMultiplier,hc=void 0!==b.autoGridSizeMultiplier);
!ic&&a.gridSize&&(c.gridSize=b.gridSize,ic=void 0!==b.gridSize);!jc&&a.showLabels&&(c.showLabels=b.showLabels,jc=void 0!==b.showLabels);!kc&&a.scale&&(c.scale=b.scale,kc=void 0!==b.scale);!lc&&a.gcx&&(c.gcx=b.gcx,lc=void 0!==b.gcx);!mc&&a.gcy&&(c.gcy=b.gcy,mc=void 0!==b.gcy);!nc&&a.extent&&(c.extent=b.extent,nc=void 0!==b.extent);!oc&&a.$scroll&&(c.scrollWheel=b.$scroll,oc=void 0!==b.$scroll);eb._set(c);oc=nc=mc=lc=kc=jc=ic=hc=gc=fc=ec=dc=void 0;c={};a.layerName&&(c.id="inceptionv1_"+b.layerName);
a.layerName&&(c.layerName=b.layerName);a.classHeatmap&&(c.classHeatmap=b.classHeatmap);a.scaleCountFactor&&(c.scaleCountFactor=b.scaleCountFactor);!pc&&a.extent&&(c.extent=b.extent,pc=void 0!==b.extent);Db._set(c);pc=void 0;a.scale&&q(K,"display","block");a.$scroll&&(cb.checked=b.$scroll);a.showLabels&&(db.checked=b.showLabels);a.gridSize&&(R.checked=R.__value===b.gridSize);a.gridSize&&(S.checked=S.__value===b.gridSize);a.gridSize&&(T.checked=T.__value===b.gridSize);a.gridSize&&(U.checked=U.__value===
b.gridSize);a.gridSize&&(V.checked=V.__value===b.gridSize);a.gridSize&&(W.checked=W.__value===b.gridSize);a.autoGridSizeMultiplier&&(yc(Wb),Wb.insertAdjacentHTML("afterend",b.autoGridSizeMultiplier));a.autoGridSizeMultiplier&&(ea.value=b.autoGridSizeMultiplier);a.gridSize&&q(Cb,"display","none");a.density&&(yc(Yb),Yb.insertAdjacentHTML("afterend",b.density));a.density&&(fa.value=b.density);a.classHeatmapPositive&&(X.checked=X.__value===b.classHeatmapPositive);a.classHeatmapPositive&&(Y.checked=Y.__value===
b.classHeatmapPositive);a.classHeatmapMultiplier&&(yc(ac),ac.insertAdjacentHTML("afterend",b.classHeatmapMultiplier));a.classHeatmapMultiplier&&(ha.value=b.classHeatmapMultiplier);a.classHeatmap&&q(aa,"display",-1<b.classHeatmap?"block":"none");a.gcx&&Ma!==(Ma=Nb(b.gcx))&&(Za.data=""+Ma);a.gcy&&Oa!==(Oa=Nb(b.gcy))&&(bb.data=""+Oa);a.scale&&Qa!==(Qa=Nb(b.scale))&&(gb.data=""+Qa);a.showOptions&&wc!==(wc=b.showOptions?"fewer options":"more options")&&(hb.data=""+wc);a.showOptions&&xc!==(xc=(b.showOptions?
"open":"closed")+" svelte-1xmf6n svelte-ref-controls")&&(D.className=xc)},d(b){b&&w(v);Pb.destroy();Qb.destroy();Rb.destroy();Sb.destroy();eb.destroy();a.refs.atlas===eb&&(a.refs.atlas=null);Db.destroy();kb.destroy();qc.destroy();nb.destroy();rc.destroy();ob.destroy();sc.destroy();cb.removeEventListener("change",c,void 0);db.removeEventListener("change",d,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(R),1);R.removeEventListener("change",e,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(S),
1);S.removeEventListener("change",g,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(T),1);T.removeEventListener("change",f,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(U),1);U.removeEventListener("change",h,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(V),1);V.removeEventListener("change",k,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(W),1);W.removeEventListener("change",m,void 0);ea.removeEventListener("change",n,void 0);ea.removeEventListener("input",
n,void 0);fa.removeEventListener("change",y,void 0);fa.removeEventListener("input",y,void 0);a._bindingGroups[1].splice(a._bindingGroups[1].indexOf(X),1);X.removeEventListener("change",r,void 0);a._bindingGroups[1].splice(a._bindingGroups[1].indexOf(Y),1);Y.removeEventListener("change",C,void 0);ha.removeEventListener("change",u,void 0);ha.removeEventListener("input",u,void 0);a.refs.expand===Lb&&(a.refs.expand=null);Ob.removeEventListener("click",F,void 0);a.refs.controls===D&&(a.refs.controls=null)}}}
function Eb(a){z(this,a);this.refs={};this._state=r(r(this.store._init(["scroll"]),{layerName:"mixed4c",gridSize:1,classHeatmap:-1,iconScaleFactor:.8,iconCrop:.35,showClassFilter:!0,showLayerChooser:!0,showOptions:!0,homeX:.5,homeY:.5,homeScale:1}),a.data);this.store._add(this,["scroll"]);this._recompute({gridSize:1,iconScaleFactor:1,realGridSize:1},this._state);this._bindingGroups=[[],[]];this._intro=!0;this._handlers.destroy=[hd];this._fragment=ci(this,this._state);a.target&&(this._fragment.c(),
this._mount(a.target,a.anchor),G(this))}function di({x:a,width:b,y:c,clientHeight:d,visible:e}){if(!1===e)return"visibility: hidden;";{e=document.documentElement.scrollLeft;let g=document.documentElement.scrollTop,f=document.documentElement.clientWidth-b;d=document.documentElement.clientHeight-d;let h=Math.min(a,f),k=Math.min(c,d);a>=f&&c>=d&&(h=a-b);return`width: ${b}px; top: ${k+g}px; left: ${h+e}px;`}}function ei(a,b){function c(b){a.mousemove(b)}function d(b){a.hide()}function e(){a.set({clientHeight:f.clientHeight})}
var g,f,h;document.addEventListener("mousemove",c);document.addEventListener("scroll",d);var k=b.component&&He(a,b);return{c(){g=p("\n\n");f=l("div");k&&k.c();a.root._beforecreate.push(e);f.style.cssText=b.style;f.className="svelte-14z2oof svelte-ref-root"},m(b,c){b.insertBefore(g,c);b.insertBefore(f,c);k&&k.m(f,null);h=Ea(f,e);a.refs.root=f},p(b,c){c.component?k?k.p(b,c):(k=He(a,c),k.c(),k.m(f,null)):k&&(k.d(1),k=null);b.style&&(f.style.cssText=c.style)},d(b){document.removeEventListener("mousemove",
c);document.removeEventListener("scroll",d);b&&(w(g),w(f));k&&k.d();h.cancel();a.refs.root===f&&(a.refs.root=null)}}}function He(a,b){var c,d=b.component;if(d)var e=new d({root:a.root,store:a.store});return{c(){e&&e._fragment.c();c=document.createComment("")},m(b,d){e&&(e._mount(b,d),a.refs.component=e);b.insertBefore(c,d)},p(b,f){d!==(d=f.component)&&(e&&e.destroy(),d?(e=new d({root:a.root,store:a.store}),e._fragment.c(),e._mount(c.parentNode,c),a.refs.component=e):(e=null,a.refs.component===e&&
(a.refs.component=null)))},d(a){a&&w(c);e&&e.destroy(a)}}}function Pa(a){z(this,a);this.refs={};this._state=r({visible:!1,width:150,component:null},a.data);this._recompute({x:1,width:1,y:1,clientHeight:1,visible:1},this._state);this._intro=!0;this._fragment=ei(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),G(this))}function Ie(a,b,c){a=Object.create(a);a.top=b[c];a.i=c;return a}function fi(a,b){var c,d,e,g,f,h=Je(b.num_activations),k,m,n=b.top_class_indices&&Ke(a,b);
return{c(){c=l("div");d=l("table");n&&n.c();e=p("\n  ");g=l("div");f=p("Average of ");k=p(h);m=p(" activations");d.className="svelte-1qbcldy";q(g,"font-size","10px");q(g,"margin-top","4px");q(g,"color","#999");q(g,"text-align","right");c.className="hover svelte-1qbcldy"},m(a,b){a.insertBefore(c,b);c.appendChild(d);n&&n.m(d,null);c.appendChild(e);c.appendChild(g);g.appendChild(f);g.appendChild(k);g.appendChild(m)},p(b,c){c.top_class_indices?n?n.p(b,c):(n=Ke(a,c),n.c(),n.m(d,null)):n&&(n.d(1),n=null);
b.num_activations&&h!==(h=Je(c.num_activations))&&(k.data=""+h)},d(a){a&&w(c);n&&n.d()}}}function Ke(a,b){for(var c,d=b.top_class_indices.slice(0,5),e=[],g=0;g<d.length;g+=1)e[g]=Le(a,Ie(b,d,g));return{c(){for(var a=0;a<e.length;a+=1)e[a].c();c=document.createComment("")},m(a,b){for(var d=0;d<e.length;d+=1)e[d].m(a,b);a.insertBefore(c,b)},p(b,g){if(b.top_class_values||b.$inceptionLabels||b.top_class_indices){d=g.top_class_indices.slice(0,5);for(var f=0;f<d.length;f+=1){let h=Ie(g,d,f);e[f]?e[f].p(b,
h):(e[f]=Le(a,h),e[f].c(),e[f].m(c.parentNode,c))}for(;f<e.length;f+=1)e[f].d(1);e.length=d.length}},d(a){Gb(e,a);a&&w(c)}}}function Le(a,b){var c,d,e=b.i+1,g,f,h,k,m=b.$inceptionLabels[b.top],n,y,r,t=Me(b.top_class_values[b.i]),u;return{c(){c=l("tr");d=l("td");g=p(e);f=p(".");h=p("\n        ");k=l("td");n=p(m);y=p("\n        ");r=l("td");u=p(t);q(d,"width","10px");q(d,"text-align","right");q(d,"padding-right","4px");d.className="svelte-1qbcldy";k.className=(0==b.i?"first":"")+" svelte-1qbcldy";q(r,
"text-align","right");r.className="svelte-1qbcldy"},m(a,b){a.insertBefore(c,b);c.appendChild(d);d.appendChild(g);d.appendChild(f);c.appendChild(h);c.appendChild(k);k.appendChild(n);c.appendChild(y);c.appendChild(r);r.appendChild(u)},p(a,b){(a.$inceptionLabels||a.top_class_indices)&&m!==(m=b.$inceptionLabels[b.top])&&(n.data=""+m);a.top_class_values&&t!==(t=Me(b.top_class_values[b.i]))&&(u.data=""+t)},d(a){a&&w(c)}}}function Ne(a){z(this,a);this._state=r(this.store._init(["inceptionLabels"]),a.data);
this.store._add(this,["inceptionLabels"]);this._intro=!0;this._handlers.destroy=[hd];this._fragment=fi(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}var x={destroy:function(a){this.destroy=M;this.fire("destroy");this.set=M;this._fragment.d(!1!==a);this._fragment=null;this._state={}},get:fd,fire:ed,on:gd,set:function(a){this._set(r({},a));this.root._lock||G(this.root)},_recompute:M,_set:function(a){var b=this._state,c={},d=!1;a=r(this._staged,a);this._staged={};for(var e in a)this._differs(a[e],
b[e])&&(c[e]=d=!0);d&&(this._state=r(r({},b),a),this._recompute(c,this._state),this._bind&&this._bind(c,this._state),this._fragment&&(this.fire("state",{changed:c,current:this._state,previous:b}),this._fragment.p(c,this._state),this.fire("update",{changed:c,current:this._state,previous:b})))},_stage:function(a){r(this._staged,a)},_mount:function(a,b){this._fragment[this._fragment.i?"i":"m"](a,b||null)},_differs:dd};r(id.prototype,{_add(a,b){this._dependents.push({component:a,props:b})},_init(a){let b=
{};for(let c=0;c<a.length;c+=1){let d=a[c];b["$"+d]=this._state[d]}return b},_remove(a){let b=this._dependents.length;for(;b--;)if(this._dependents[b].component===a){this._dependents.splice(b,1);break}},_set(a,b){let c=this._state;this._state=r(r({},c),a);for(a=0;a<this._sortedComputedProperties.length;a+=1)this._sortedComputedProperties[a].update(this._state,b);this.fire("state",{changed:b,previous:c,current:this._state});this._dependents.filter((a)=>{let c={},d=!1;for(let e=0;e<a.props.length;e+=
1){let f=a.props[e];f in b&&(c["$"+f]=this._state[f],d=!0)}if(d)return a.component._stage(c),!0}).forEach((a)=>{a.component.set({})});this.fire("update",{changed:b,previous:c,current:this._state})},_sortComputedProperties(){function a(g){let f=b[g];f&&(f.deps.forEach((b)=>{if(b===e)throw Error(`Cyclical dependency detected between ${b} <-> ${g}`);a(b)}),d[g]||(d[g]=!0,c.push(f)))}let b=this._computed,c=this._sortedComputedProperties=[],d=Object.create(null),e;for(let b in this._computed)a(e=b)},compute(a,
b,c){let d,e={deps:b,update:(e,f,g)=>{var h=b.map((a)=>{a in f&&(g=!0);return e[a]});g&&(h=c.apply(null,h),this._differs(h,d)&&(d=h,f[a]=!0,e[a]=d))}};this._computed[a]=e;this._sortComputedProperties();let g=r({},this._state),f={};e.update(g,f,!0);this._set(g,f)},fire:ed,get:fd,on:gd,set(a){let b=this._state,c=this._changed={},d=!1;for(let e in a){if(this._computed[e])throw Error(`'${e}' is a read-only computed property`);this._differs(a[e],b[e])&&(c[e]=d=!0)}d&&this._set(a,c)}});var sa={inception:"dummy;kit fox;English setter;Siberian husky;Australian terrier;English springer;grey whale;lesser panda;Egyptian cat;ibex;Persian cat;cougar;gazelle;porcupine;sea lion;malamute;badger;Great Dane;Walker hound;Welsh springer spaniel;whippet;Scottish deerhound;killer whale;mink;African elephant;Weimaraner;soft - coated wheaten terrier;Dandie Dinmont;red wolf;Old English sheepdog;jaguar;otterhound;bloodhound;Airedale;hyena;meerkat;giant schnauzer;titi;three - toed sloth;sorrel;black - footed ferret;dalmatian;black - and - tan coonhound;papillon;skunk;Staffordshire bullterrier;Mexican hairless;Bouvier des Flandres;weasel;miniature poodle;Cardigan;malinois;bighorn;fox squirrel;colobus;tiger cat;Lhasa;impala;coyote;Yorkshire terrier;Newfoundland;brown bear;red fox;Norwegian elkhound;Rottweiler;hartebeest;Saluki;grey fox;schipperke;Pekinese;Brabancon griffon;West Highland white terrier;Sealyham terrier;guenon;mongoose;indri;tiger;Irish wolfhound;wild boar;EntleBucher;zebra;ram;French bulldog;orangutan;basenji;leopard;Bernese mountain dog;Maltese dog;Norfolk terrier;toy terrier;vizsla;cairn;squirrel monkey;groenendael;clumber;Siamese cat;chimpanzee;komondor;Afghan hound;Japanese spaniel;proboscis monkey;guinea pig;white wolf;ice bear;gorilla;borzoi;toy poodle;Kerry blue terrier;ox;Scotch terrier;Tibetan mastiff;spider monkey;Doberman;Boston bull;Greater Swiss Mountain dog;Appenzeller;Shih - Tzu;Irish water spaniel;Pomeranian;Bedlington terrier;warthog;Arabian camel;siamang;miniature schnauzer;collie;golden retriever;Irish terrier;affenpinscher;Border collie;hare;boxer;silky terrier;beagle;Leonberg;German short - haired pointer;patas;dhole;baboon;macaque;Chesapeake Bay retriever;bull mastiff;kuvasz;capuchin;pug;curly - coated retriever;Norwich terrier;flat - coated retriever;hog;keeshond;Eskimo dog;Brittany spaniel;standard poodle;Lakeland terrier;snow leopard;Gordon setter;dingo;standard schnauzer;hamster;Tibetan terrier;Arctic fox;wire - haired fox terrier;basset;water buffalo;American black bear;Angora;bison;howler monkey;hippopotamus;chow;giant panda;American Staffordshire terrier;Shetland sheepdog;Great Pyrenees;Chihuahua;tabby;marmoset;Labrador retriever;Saint Bernard;armadillo;Samoyed;bluetick;redbone;polecat;marmot;kelpie;gibbon;llama;miniature pinscher;wood rabbit;Italian greyhound;lion;cocker spaniel;Irish setter;dugong;Indian elephant;beaver;Sussex spaniel;Pembroke;Blenheim spaniel;Madagascar cat;Rhodesian ridgeback;lynx;African hunting dog;langur;Ibizan hound;timber wolf;cheetah;English foxhound;briard;sloth bear;Border terrier;German shepherd;otter;koala;tusker;echidna;wallaby;platypus;wombat;revolver;umbrella;schooner;soccer ball;accordion;ant;starfish;chambered nautilus;grand piano;laptop;strawberry;airliner;warplane;airship;balloon;space shuttle;fireboat;gondola;speedboat;lifeboat;canoe;yawl;catamaran;trimaran;container ship;liner;pirate;aircraft carrier;submarine;wreck;half track;tank;missile;bobsled;dogsled;bicycle - built -for-two;mountain bike;freight car;passenger car;barrow;shopping cart;motor scooter;forklift;electric locomotive;steam locomotive;amphibian;ambulance;beach wagon;cab;convertible;jeep;limousine;minivan;Model T;racer;sports car;go-kart;golfcart;moped;snowplow;fire engine;garbage truck;pickup;tow truck;trailer truck;moving van;police van;recreational vehicle;streetcar;snowmobile;tractor;mobile home;tricycle;unicycle;horse cart;jinrikisha;oxcart;bassinet;cradle;crib;four-poster;bookcase;china cabinet;medicine chest;chiffonier;table lamp;file;park bench;barber chair;throne;folding chair;rocking chair;studio couch;toilet seat;desk;pool table;dining table;entertainment center;wardrobe;Granny Smith;orange;lemon;fig;pineapple;banana;jackfruit;custard apple;pomegranate;acorn;hip;ear;rapeseed;corn;buckeye;organ;upright;chime;drum;gong;maraca;marimba;steel drum;banjo;cello;violin;harp;acoustic guitar;electric guitar;cornet;French horn;trombone;harmonica;ocarina;panpipe;bassoon;oboe;sax;flute;daisy;yellow lady's slipper;cliff;valley;alp;volcano;promontory;sandbar;coral reef;lakeside;seashore;geyser;hatchet;cleaver;letter opener;plane;power drill;lawn mower;hammer;corkscrew;can opener;plunger;screwdriver;shovel;plow;chain saw;cock;hen;ostrich;brambling;goldfinch;house finch;junco;indigo bunting;robin;bulbul;jay;magpie;chickadee;water ouzel;kite;bald eagle;vulture;great grey owl;black grouse;ptarmigan;ruffed grouse;prairie chicken;peacock;quail;partridge;African grey;macaw;sulphur-crested cockatoo;lorikeet;coucal;bee eater;hornbill;hummingbird;jacamar;toucan;drake;red-breasted merganser;goose;black swan;white stork;black stork;spoonbill;flamingo;American egret;little blue heron;bittern;crane;limpkin;American coot;bustard;ruddy turnstone;red - backed sandpiper;redshank;dowitcher;oystercatcher;European gallinule;pelican;king penguin;albatross;great white shark;tiger shark;hammerhead;electric ray;stingray;barracouta;coho;tench;goldfish;eel;rock beauty;anemone fish;lionfish;puffer;sturgeon;gar;loggerhead;leatherback turtle;mud turtle;terrapin;box turtle;banded gecko;common iguana;American chameleon;whiptail;agama;frilled lizard;alligator lizard;Gila monster;green lizard;African chameleon;Komodo dragon;triceratops;African crocodile;American alligator;thunder snake;ringneck snake;hognose snake;green snake;king snake;garter snake;water snake;vine snake;night snake;boa constrictor;rock python;Indian cobra;green mamba;sea snake;horned viper;diamondback;sidewinder;European fire salamander;common newt;eft;spotted salamander;axolotl;bullfrog;tree frog;tailed frog;whistle;wing;paintbrush;hand blower;oxygen mask;snorkel;loudspeaker;microphone;screen;mouse;electric fan;oil filter;strainer;space heater;stove;guillotine;barometer;rule;odometer;scale;analog clock;digital clock;wall clock;hourglass;sundial;parking meter;stopwatch;digital watch;stethoscope;syringe;magnetic compass;binoculars;projector;sunglasses;loupe;radio telescope;bow;cannon [ground];assault rifle;rifle;projectile;computer keyboard;typewriter keyboard;crane;lighter;abacus;cash machine;slide rule;desktop computer;hand - held computer;notebook;web site;harvester;thresher;printer;slot;vending machine;sewing machine;joystick;switch;hook;car wheel;paddlewheel;pinwheel;potter's wheel;gas pump;carousel;swing;reel;radiator;puck;hard disc;sunglass;pick;car mirror;solar dish;remote control;disk brake;buckle;hair slide;knot;combination lock;padlock;nail;safety pin;screw;muzzle;seat belt;ski;candle;jack - o'-lantern;spotlight;torch;neck brace;pier;tripod;maypole;mousetrap;spider web;trilobite;harvestman;scorpion;black and gold garden spider;barn spider;garden spider;black widow;tarantula;wolf spider;tick;centipede;isopod;Dungeness crab;rock crab;fiddler crab;king crab;American lobster;spiny lobster;crayfish;hermit crab;tiger beetle;ladybug;ground beetle;long - horned beetle;leaf beetle;dung beetle;rhinoceros beetle;weevil;fly;bee;grasshopper;cricket;walking stick;cockroach;mantis;cicada;leafhopper;lacewing;dragonfly;damselfly;admiral;ringlet;monarch;cabbage butterfly;sulphur butterfly;lycaenid;jellyfish;sea anemone;brain coral;flatworm;nematode;conch;snail;slug;sea slug;chiton;sea urchin;sea cucumber;iron;espresso maker;microwave;Dutch oven;rotisserie;toaster;waffle iron;vacuum;dishwasher;refrigerator;washer;Crock Pot;frying pan;wok;caldron;coffeepot;teapot;spatula;altar;triumphal arch;patio;steel arch bridge;suspension bridge;viaduct;barn;greenhouse;palace;monastery;library;apiary;boathouse;church;mosque;stupa;planetarium;restaurant;cinema;home theater;lumbermill;coil;obelisk;totem pole;castle;prison;grocery store;bakery;barbershop;bookshop;butcher shop;confectionery;shoe shop;tobacco shop;toyshop;fountain;cliff dwelling;yurt;dock;brass;megalith;bannister;breakwater;dam;chainlink fence;picket fence;worm fence;stone wall;grille;sliding door;turnstile;mountain tent;scoreboard;honeycomb;plate rack;pedestal;beacon;mashed potato;bell pepper;head cabbage;broccoli;cauliflower;zucchini;spaghetti squash;acorn squash;butternut squash;cucumber;artichoke;cardoon;mushroom;shower curtain;jean;carton;handkerchief;sandal;ashcan;safe;plate;necklace;croquet ball;fur coat;thimble;pajama;running shoe;cocktail shaker;chest;manhole cover;modem;tub;tray;balance beam;bagel;prayer rug;kimono;hot pot;whiskey jug;knee pad;book jacket;spindle;ski mask;beer bottle;crash helmet;bottlecap;tile roof;mask;maillot;Petri dish;football helmet;bathing cap;teddy bear;holster;pop bottle;photocopier;vestment;crossword puzzle;golf ball;trifle;suit;water tower;feather boa;cloak;red wine;drumstick;shield;Christmas stocking;hoopskirt;menu;stage;bonnet;meat loaf;baseball;face powder;scabbard;sunscreen;beer glass;hen-of - the - woods;guacamole;lampshade;wool;hay;bow tie;mailbag;water jug;bucket;dishrag;soup bowl;eggnog;mortar;trench coat;paddle;chain;swab;mixing bowl;potpie;wine bottle;shoji;bulletproof vest;drilling platform;binder;cardigan;sweatshirt;pot;birdhouse;hamper;ping-pong ball;pencil box;pay - phone;consomme;apron;punching bag;backpack;groom;bearskin;pencil sharpener;broom;mosquito net;abaya;mortarboard;poncho;crutch;Polaroid camera;space bar;cup;racket;traffic light;quill;radio;dough;cuirass;military uniform;lipstick;shower cap;monitor;oscilloscope;mitten;brassiere;French loaf;vase;milk can;rugby ball;paper towel;earthstar;envelope;miniskirt;cowboy hat;trolleybus;perfume;bathtub;hotdog;coral fungus;bullet train;pillow;toilet tissue;cassette;carpenter's kit;ladle;stinkhorn;lotion;hair spray;academic gown;dome;crate;wig;burrito;pill bottle;chain mail;theater curtain;window shade;barrel;washbasin;ballpoint;basketball;bath towel;cowboy boot;gown;window screen;agaric;cellular telephone;nipple;barbell;mailbox;lab coat;fire screen;minibus;packet;maze;pole;horizontal bar;sombrero;pickelhaube;rain barrel;wallet;cassette player;comic book;piggy bank;street sign;bell cote;fountain pen;Windsor tie;volleyball;overskirt;sarong;purse;bolo tie;bib;parachute;sleeping bag;television;swimming trunks;measuring cup;espresso;pizza;breastplate;shopping basket;wooden spoon;saltshaker;chocolate sauce;ballplayer;goblet;gyromitra;stretcher;water bottle;dial telephone;soap dispenser;jersey;school bus;jigsaw puzzle;plastic bag;reflex camera;diaper;Band Aid;ice lolly;velvet;tennis ball;gasmask;doormat;Loafer;ice cream;pretzel;quilt;maillot;tape player;clog;iPod;bolete;scuba diver;pitcher;matchstick;bikini;sock;CD player;lens cap;thatch;vault;beaker;bubble;cheeseburger;parallel bars;flagpole;coffee mug;rubber eraser;stole;carbonara;dumbbell".split(";")};
class gi extends id{}let Fb=new gi({scroll:!1,inceptionLabels:sa.inception,currentClass:62,currentClassAtlasIndex:507,currentClassAtlasCompareIndex:507,classChoices:[9,622,665,652,288,233,188,169,80,76,62,61,7,355,990,746,791],classAtlasIndices:[62,9,169,7,80,76,235,982,507,41,2,442,450,454,930,378,582,780,901,946,791,738,736,744,489,387,388,399,721,672,6,665,652,288,355,348,804,600,605,631,643],multipleLayers:{abacus:[{layerName:"mixed3b",homeX:.8086,homeY:.4295,gridSize:3,homeScale:48},{layerName:"mixed4c",
homeX:.8593,homeY:.5814},{layerName:"mixed5b",homeX:.8183,homeY:.21,gridSize:4,homeScale:96}],plant:[{layerName:"mixed3b",homeX:.3222,homeY:.6352,gridSize:3,homeScale:48,caption:"You'll immediately notice that the early layer is very nonspecific in comparison to the others. The icons that emerge are of patterns and splotches of color. It is suggestive of the final class, but not particularly evocative."},{layerName:"mixed4c",homeX:.15,homeY:.4,caption:"By the middle layer, icons definitely resemble leaves, but they could be any type of plant. Attributions are focused on plants, but are a little all over the board."},
{layerName:"mixed5b",homeX:.168,homeY:.285,gridSize:4,homeScale:96,caption:"Here we see foliage with textures that are specific to cabbage, and curved into rounded balls. There are full heads of cabbage rather than individual leaves."}],water:[{layerName:"mixed4c",homeX:.365,homeY:.673,caption:'In mixed4c we see two different regions that have high attribution toward "sandbar": an area of <b>sandy textures</b>\u2026'},{layerName:"mixed4c",homeX:.318,homeY:.764,caption:"\u2026and a separate area of <b>watery textures</b>."},
{layerName:"mixed5b",homeX:.74,homeY:.534,gridSize:4,homeScale:96,caption:'In a later layer we see activations that contain <b>both</b> of those concepts when detecting "sandbar".'}]},currentClassComparisonIndex:0,classComparisons:[{id:"507_982",leftLabel:"snorkel",rightLabel:"scuba diver",left:507,right:982,annotation:[{pos:{x:2,y:7},desc:"shark?"}]},{id:"736_744",leftLabel:"head cabbage",rightLabel:"artichoke",left:736,right:744,annotation:[]},{id:"671_672",leftLabel:"frying pan",rightLabel:"wok",
left:671,right:672,annotation:[{pos:{x:1,y:7},desc:"noodles?"}]},{id:"777_831",leftLabel:"beer bottle",rightLabel:"wine bottle",left:777,right:831,annotation:[]},{id:"543_544",leftLabel:"computer keyboard",rightLabel:"typewriter keyboard",left:543,right:544,annotation:[]},{id:"28_205",leftLabel:"red wolf",rightLabel:"timber wolf",left:28,right:205,annotation:[]},{id:"67_62",leftLabel:"grey fox",rightLabel:"red fox",left:67,right:62,annotation:[]},{id:"1_62",leftLabel:"kit fox",rightLabel:"red fox",
left:1,right:62,annotation:[]},{id:"6_442",leftLabel:sa.inception[6],rightLabel:sa.inception[442],left:6,right:442,annotation:[{pos:{x:2,y:7},desc:"baseball?"}]}],focus1Highlight:{scale:6,x:.844,y:.51},focusHighlights:[{scale:10,x:.873,y:.415},{scale:10,x:.709,y:.421},{scale:10,x:.221,y:.138},{scale:10,x:.807,y:.333}],pois:{mammals:{layerName:"mixed4a",gridSize:2,gcx:.3705,gcy:.9475,scale:8},dogs:{layerName:"mixed5a",gridSize:3,gcx:.589,gcy:.946,scale:10},curves:{layerName:"mixed4b",gridSize:3,gcx:.5947,
gcy:.3351,scale:14},cups:{layerName:"mixed5b",gridSize:3,gcx:.35073,gcy:.138,scale:10},patterns:{layerName:"mixed4b",gridSize:3,gcx:.91579,gcy:.32406,scale:8},text:{layerName:"mixed5a",gridSize:3,gcx:.5281,gcy:.0234,scale:19},fabric:{layerName:"mixed4b",gridSize:3,gcx:.489,gcy:.2043,scale:12},clothing:{layerName:"mixed5a",gridSize:3,gcx:.743,gcy:.52,scale:10}}});var Xe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Hb.prototype=Ib.prototype;Ib.prototype.toString=function(){return this.fill+
this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var md,nd={"%":function(a,b){return(100*a).toFixed(b)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:function(a){return Math.round(a).toString(10)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},g:function(a,b){return a.toPrecision(b)},
o:function(a){return Math.round(a).toString(8)},p:function(a,b){return jd(100*a,b)},r:jd,s:function(a,b){var c=ib(a,b);if(!c)return a+"";var d=c[0];c=c[1];c=c-(md=3*Math.max(-8,Math.min(8,Math.floor(c/3))))+1;var e=d.length;return c===e?d:c>e?d+Array(c-e+1).join("0"):0<c?d.slice(0,c)+"."+d.slice(c):"0."+Array(1-c).join("0")+ib(a,Math.max(0,b+c-1))[0]},X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}},ld="y z a f p n \u00b5 m  k M G T P E Z Y".split(" "),
$c,Qa;(function(a){$c=Ye(a);Qa=$c.format;return $c})({decimal:".",thousands:",",grouping:[3],currency:["$",""]});r(tc.prototype,x);r(od.prototype,x);r(pd.prototype,x);r(qd.prototype,x);r(Ub.prototype,x);Ub.prototype._recompute=function(a,b){a.name&&this._differs(b.Icon,b.Icon=cf(b))&&(a.Icon=!0)};r(jb.prototype,x);r(jb.prototype,{mouseUp(){let {mouseMoveListener:a,mouseUpListener:b}=this.get();window.removeEventListener("mousemove",a);window.removeEventListener("mouseup",b)},mouseDown(a){a.preventDefault();
var {enableDragging:b}=this.get();b&&this.mouseMove(a);a=this.mouseUp.bind(this);b=this.mouseMove.bind(this);window.addEventListener("mousemove",b);window.addEventListener("mouseup",a);this.set({mouseMoveListener:b,mouseUpListener:a})},mouseMove(a){let {clientWidth:b,clientHeight:c}=this.get(),d=a.offsetX/b,e=a.offsetY/c;this.set({gcx:d,gcy:e,startPos:{x:a.screenX,y:a.screenY}});this.fire("drag",{gcx:d,gcy:e})}});jb.prototype._recompute=function(a,b){if(a.clientWidth||a.extent)this._differs(b.left,
b.left=ef(b))&&(a.left=!0),this._differs(b.right,b.right=ff(b))&&(a.right=!0);if(a.clientHeight||a.extent)this._differs(b.top,b.top=gf(b))&&(a.top=!0),this._differs(b.bottom,b.bottom=hf(b))&&(a.bottom=!0)};r(Jb.prototype,x);Jb.prototype._recompute=function(a,b){a.clientWidth&&this._differs(b.width,b.width=kf(b))&&(a.width=!0);(a.width||a.aspectRatio)&&this._differs(b.height,b.height=lf(b))&&(a.height=!0)};r(ud.prototype,x);var hi={destroy:vd,get:function(a){return a?this._state[a]:this._state},fire:function(a,
b){if(a=a in this._handlers&&this._handlers[a].slice())for(var c=0;c<a.length;c+=1)a[c].call(this,b)},observe:function(a,b,c){var d=c&&c.defer?this._observers.post:this._observers.pre;(d[a]||(d[a]=[])).push(b);c&&!1===c.init||(b.__calling=!0,b.call(this,this._state[a]),b.__calling=!1);return{cancel:function(){var c=d[a].indexOf(b);~c&&d[a].splice(c,1)}}},on:function(a,b){if("teardown"===a)return this.on("destroy",b);var c=this._handlers[a]||(this._handlers[a]=[]);c.push(b);return{cancel:function(){var a=
c.indexOf(b);~a&&c.splice(a,1)}}},set:function(a){this._set(lb({},a));this.root._lock||(this.root._lock=!0,mb(this.root._beforecreate),mb(this.root._oncreate),mb(this.root._aftercreate),this.root._lock=!1)},teardown:vd,_recompute:kb,_set:function(a){var b=this._state,c={},d=!1,e;for(e in a)this._differs(a[e],b[e])&&(c[e]=d=!0);d&&(this._state=lb({},b,a),this._recompute(c,this._state),this._bind&&this._bind(c,this._state),this._fragment&&(wd(this,this._observers.pre,c,this._state,b),this._fragment.p(c,
this._state),wd(this,this._observers.post,c,this._state,b)))},_mount:function(a,b){this._fragment[this._fragment.i?"i":"m"](a,b||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(a,b){return a!=a?b==b:a!==b||a&&"object"===typeof a||"function"===typeof a}};let nb=new Map;lb(xd.prototype,{draw(){if(this.refs.canvas){let a=this.refs.canvas.getContext("2d"),{img:b,index:c,width:d,realHeight:e,columns:g,loaded:f}=this.get();a.clearRect(0,0,d,e);let h=Array.isArray(c)?c[0]*
d:c%g*d,k=Array.isArray(c)?c[1]*e:Math.floor(c/g)*e;f?a.drawImage(b,h,k,d,e,0,0,d,e):(a.fillStyle="#ccc",a.fillRect(0,0,d,e),a.fillStyle="#eee",a.textAlign="center",a.font="16px sans-serif",a.fillText("...",d/2,e/2))}}},hi);xd.prototype._recompute=function(a,b){(a.width||a.height)&&this._differs(b.realHeight,b.realHeight=of(b.width,b.height))&&(a.realHeight=!0)};var Ad={},ob={},ii=zd(",").parse,ji=zd("\t").parse;let Bc=new Map,qb=new Map,Ac=new Map,Ed=new Map([["gif",pb],["png",pb],["jpeg",pb],["jpg",
pb],["csv",function(a){return Fa(a).then((a)=>Promise.resolve(ii(a)))}],["tsv",function(a){return Fa(a).then((a)=>Promise.resolve(ji(a)))}],["txt",Fa],["text",Fa],["json",function(a){return fetch(a).then(Bd).then((a)=>a.json())}]]);var sb=[235,287,237,982,507,41,176,3,2,112,158,14,442,450,454,513,523,529,930,600,605,736,744,358,756,936,942,943,366,365,367,484,483,488,489,387,388,399,411,405];r(rb.prototype,x);r(rb.prototype,{render(){let {grid:a,gridSize:b,icons:c,classHeatmap:d}=this.get(),e=this.refs.canvas.getContext("2d"),
g=e.getImageData(0,0,b,b),f=g.data;for(let e of c){var h=1;-1<d&&(h=sb.indexOf(d),h=Math.max(.1,20*Math.max(0,e.f[h])));f[e.x*b*4+4*e.y+3]=e.n/Math.pow(a+1,2)*255*.005*h}e.putImageData(g,0,0)}});rb.prototype._recompute=function(a,b){a.clientWidth&&this._differs(b.height,b.height=tf(b))&&(a.height=!0);(a.model||a.layerName)&&this._differs(b.id,b.id=uf(b))&&(a.id=!0)};r(Hd.prototype,x);r(Cc.prototype,x);Cc.prototype._recompute=function(a,b){a.inceptionLabels&&this._differs(b.labels,b.labels=zf(b))&&
(a.labels=!0)};var Md={},Dc={},ki=Ld(",").parse,li=Ld("\t").parse;let Fc=new Map,Ga=new Map,Ec=new Map,Qd=new Map([["gif",tb],["png",tb],["jpeg",tb],["jpg",tb],["csv",function(a){return ub(a).then((a)=>Promise.resolve(ki(a)))}],["tsv",function(a){return ub(a).then((a)=>Promise.resolve(li(a)))}],["txt",ub],["text",ub],["json",function(a){return fetch(a).then(Nd).then((a)=>a.json())}]]);(function(a){1===a.length&&(a=Df(a));return{left:function(b,c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var g=
d+e>>>1;0>a(b[g],c)?d=g+1:e=g}return d},right:function(b,c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var g=d+e>>>1;0<a(b[g],c)?e=g:d=g+1}return d}}})(Rd);let Ff={inceptionv1_mixed3b:{vm:"shan-gpu-07-vm",id:"inceptionv1_mixed3b",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:"mixed3b",sample_type:"random",sample_images:1E6,filter:5E5,tries:2,tile_size:10,grid_size:[20,40,80,160],whiten:"false",steps:1024,icon_size:80,layout:"1000_0.05_euclidean",
class_filter:null,batch_size:100,x:null,y:null,alpha:!1},inceptionv1_mixed4a:{vm:"shan-gpu-08-vm",id:"inceptionv1_mixed4a",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4a"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},inceptionv1_mixed4b:{vm:"shan-gpu-08-vm",id:"inceptionv1_mixed4b",
build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4b"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},inceptionv1_mixed4c:{vm:"shan-gpu-08-vm",id:"inceptionv1_mixed4c",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4c"],sample_type:"random",
sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},inceptionv1_mixed4d:{vm:"shan-gpu-07-vm",id:"inceptionv1_mixed4d",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4d"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,
layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},inceptionv1_mixed4e:{vm:"shan-gpu-07-vm",id:"inceptionv1_mixed4e",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4e"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},inceptionv1_mixed5a:{vm:"shan-gpu-08-vm",
id:"inceptionv1_mixed5a",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed5a"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160,320],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},inceptionv1_mixed5b:{vm:"shan-gpu-07-vm",id:"inceptionv1_mixed5b",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",
layer:["mixed5b"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160,320],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1}};r(Sd.prototype,x);var Hf={value:function(){}};vb.prototype=Gc.prototype={constructor:vb,on:function(a,b){var c=this._,d=Gf(a+"",c),e,g=-1,f=d.length;if(2>arguments.length)for(;++g<f;){var h;if(h=e=(a=d[g]).type){a:{h=c[e];for(var k=0,m=h.length;k<m;++k)if((e=h[k]).name===
a.name){e=e.value;break a}e=void 0}h=e}if(h)return e}else{if(null!=b&&"function"!==typeof b)throw Error("invalid callback: "+b);for(;++g<f;)if(e=(a=d[g]).type)c[e]=Td(c[e],a.name,b);else if(null==b)for(e in c)c[e]=Td(c[e],a.name,null);return this}},copy:function(){var a={},b=this._,c;for(c in b)a[c]=b[c].slice();return new vb(a)},call:function(a,b){if(0<(e=arguments.length-2))for(var c=Array(e),d=0,e,g;d<e;++d)c[d]=arguments[d+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);g=this._[a];
d=0;for(e=g.length;d<e;++d)g[d].value.apply(b,c)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);a=this._[a];for(var d=0,e=a.length;d<e;++d)a[d].value.apply(b,c)}};var Ud={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Oe=function(a){return function(){return this.matches(a)}};if("undefined"!==typeof document){var Ca=document.documentElement;
if(!Ca.matches){var mi=Ca.webkitMatchesSelector||Ca.msMatchesSelector||Ca.mozMatchesSelector||Ca.oMatchesSelector;Oe=function(a){return function(){return mi.call(this,a)}}}}var Pe=Oe;xb.prototype={constructor:xb,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};Yd.prototype={add:function(a){0>
this._names.indexOf(a)&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){a=this._names.indexOf(a);0<=a&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return 0<=this._names.indexOf(a)}};var be={},u=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(be={mouseenter:"mouseover",mouseleave:"mouseout"}));var de=[null];E.prototype=ma.prototype={constructor:E,select:function(a){"function"!==
typeof a&&(a=Hc(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var g=b[e],f=g.length,h=d[e]=Array(f),k,m,n=0;n<f;++n)(k=g[n])&&(m=a.call(k,k.__data__,n,g))&&("__data__"in k&&(m.__data__=k.__data__),h[n]=m);return new E(d,this._parents)},selectAll:function(a){"function"!==typeof a&&(a=Wd(a));for(var b=this._groups,c=b.length,d=[],e=[],g=0;g<c;++g)for(var f=b[g],h=f.length,k,m=0;m<h;++m)if(k=f[m])d.push(a.call(k,k.__data__,m,f)),e.push(k);return new E(d,e)},filter:function(a){"function"!==
typeof a&&(a=Pe(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var g=b[e],f=g.length,h=d[e]=[],k,m=0;m<f;++m)(k=g[m])&&a.call(k,k.__data__,m,g)&&h.push(k);return new E(d,this._parents)},data:function(a,b){if(!a)return q=Array(this.size()),m=-1,this.each(function(a){q[++m]=a}),q;var c=b?Of:Nf,d=this._parents,e=this._groups;"function"!==typeof a&&(a=Mf(a));for(var g=e.length,f=Array(g),h=Array(g),k=Array(g),m=0;m<g;++m){var n=d[m],l=e[m],p=l.length,q=a.call(n,n&&n.__data__,m,d),r=
q.length,t=h[m]=Array(r),v=f[m]=Array(r);p=k[m]=Array(p);c(n,l,t,v,p,q,b);l=n=0;for(var u;n<r;++n)if(p=t[n]){for(n>=l&&(l=n+1);!(u=v[l])&&++l<r;);p._next=u||null}}f=new E(f,d);f._enter=h;f._exit=k;return f},enter:function(){return new E(this._enter||this._groups.map(Xd),this._parents)},exit:function(){return new E(this._exit||this._groups.map(Xd),this._parents)},merge:function(a){var b=this._groups;a=a._groups;for(var c=b.length,d=Math.min(c,a.length),e=Array(c),g=0;g<d;++g)for(var f=b[g],h=a[g],
k=f.length,m=e[g]=Array(k),n,l=0;l<k;++l)if(n=f[l]||h[l])m[l]=n;for(;g<c;++g)e[g]=b[g];return new E(e,this._parents)},order:function(){for(var a=this._groups,b=-1,c=a.length;++b<c;)for(var d=a[b],e=d.length-1,g=d[e],f;0<=--e;)if(f=d[e])g&&g!==f.nextSibling&&g.parentNode.insertBefore(f,g),g=f;return this},sort:function(a){function b(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}a||(a=Pf);for(var c=this._groups,d=c.length,e=Array(d),g=0;g<d;++g){for(var f=c[g],h=f.length,k=e[g]=Array(h),m,n=0;n<h;++n)if(m=
f[n])k[n]=m;k.sort(b)}return(new E(e,this._parents)).order()},call:function(){var a=arguments[0];arguments[0]=this;a.apply(null,arguments);return this},nodes:function(){var a=Array(this.size()),b=-1;this.each(function(){a[++b]=this});return a},node:function(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var d=a[b],e=0,g=d.length;e<g;++e){var f=d[e];if(f)return f}return null},size:function(){var a=0;this.each(function(){++a});return a},empty:function(){return!this.node()},each:function(a){for(var b=
this._groups,c=0,d=b.length;c<d;++c)for(var e=b[c],g=0,f=e.length,h;g<f;++g)(h=e[g])&&a.call(h,h.__data__,g,e);return this},attr:function(a,b){var c=wb(a);if(2>arguments.length){var d=this.node();return c.local?d.getAttributeNS(c.space,c.local):d.getAttribute(c)}return this.each((null==b?c.local?Rf:Qf:"function"===typeof b?c.local?Vf:Uf:c.local?Tf:Sf)(c,b))},style:function(a,b,c){return 1<arguments.length?this.each((null==b?Wf:"function"===typeof b?Yf:Xf)(a,b,null==c?"":c)):Ha(this.node(),a)},property:function(a,
b){return 1<arguments.length?this.each((null==b?Zf:"function"===typeof b?ag:$f)(a,b)):this.node()[a]},classed:function(a,b){var c=(a+"").trim().split(/^|\s+/);if(2>arguments.length){for(var d=Ic(this.node()),e=-1,g=c.length;++e<g;)if(!d.contains(c[e]))return!1;return!0}return this.each(("function"===typeof b?dg:b?bg:cg)(c,b))},text:function(a){return arguments.length?this.each(null==a?eg:("function"===typeof a?gg:fg)(a)):this.node().textContent},html:function(a){return arguments.length?this.each(null==
a?hg:("function"===typeof a?jg:ig)(a)):this.node().innerHTML},raise:function(){return this.each(kg)},lower:function(){return this.each(lg)},append:function(a){var b="function"===typeof a?a:Vd(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},insert:function(a,b){var c="function"===typeof a?a:Vd(a),d=null==b?mg:"function"===typeof b?b:Hc(b);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})},remove:function(){return this.each(ng)},
clone:function(a){return this.select(a?pg:og)},datum:function(a){return arguments.length?this.property("__data__",a):this.node().__data__},on:function(a,b,c){var d=rg(a+""),e=d.length,g;if(2>arguments.length){var f=this.node().__on;if(f)for(var h=0,k=f.length,m;h<k;++h){var n=0;for(m=f[h];n<e;++n)if((g=d[n]).type===m.type&&g.name===m.name)return m.value}}else{f=b?tg:sg;null==c&&(c=!1);for(n=0;n<e;++n)this.each(f(d[n],b,c));return this}},dispatch:function(a,b){return this.each(("function"===typeof b?
vg:ug)(a,b))}};var Ra=1/.7,yg=/^#([0-9a-f]{3})$/,zg=/^#([0-9a-f]{6})$/,Ag=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,Bg=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,Cg=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Dg=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
Eg=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,Fg=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ke={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,
burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,
darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,
lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,
mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,
red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ja(ta,Wa,{displayable:function(){return this.rgb().displayable()},
hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}});Ja(B,Lc,Va(ta,{brighter:function(a){a=null==a?Ra:Math.pow(Ra,a);return new B(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new B(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},hex:function(){return"#"+Mc(this.r)+
Mc(this.g)+Mc(this.b)},toString:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(1===a?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}}));Ja(J,function(a,b,c,d){return 1===arguments.length?Gg(a):new J(a,b,c,null==d?1:d)},Va(ta,{brighter:function(a){a=null==a?Ra:Math.pow(Ra,a);return new J(this.h,this.s,this.l*a,this.opacity)},
darker:function(a){a=null==a?.7:Math.pow(.7,a);return new J(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+360*(0>this.h),b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l;b=c+(.5>c?c:1-c)*b;c=2*c-b;return new B(Nc(240<=a?a-240:a+120,c,b),Nc(a,c,b),Nc(120>a?a+240:a-120,c,b),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var le=Math.PI/180,oe=180/Math.PI,ne=4/29,Ka=6/29,me=3*Ka*Ka,Hg=Ka*
Ka*Ka;Ja(da,function(a,b,c,d){return 1===arguments.length?Oc(a):new da(a,b,c,null==d?1:d)},Va(ta,{brighter:function(a){return new da(this.l+18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new da(this.l-18*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;b=.96422*Rc(b);a=1*Rc(a);c=.82521*Rc(c);return new B(Sc(3.1338561*b-1.6168667*a-.4906146*c),Sc(-.9787684*b+1.9161415*a+.033454*c),
Sc(.0719453*b-.2289914*a+1.4052427*c),this.opacity)}}));Ja(na,function(a,b,c,d){return 1===arguments.length?Ig(a):new na(a,b,c,null==d?1:d)},Va(ta,{brighter:function(a){return new na(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function(a){return new na(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function(){return Oc(this).rgb()}}));var Qe=1.78277*-.29227-.1347134789;Ja(ya,function(a,b,c,d){if(1===arguments.length){var e=a;if(e instanceof ya)e=new ya(e.h,e.s,e.l,e.opacity);
else{e instanceof B||(e=Kc(e));var g=e.g/255,f=e.b/255,h=(Qe*f+e.r/255*-1.7884503806-3.5172982438*g)/(Qe+-1.7884503806-3.5172982438);f-=h;var k=(1.97294*(g-h)- -.29227*f)/-.90649;f=(g=Math.sqrt(k*k+f*f)/(1.97294*h*(1-h)))?Math.atan2(k,f)*oe-120:NaN;e=new ya(0>f?f+360:f,g,h,e.opacity)}}else e=new ya(a,b,c,null==d?1:d);return e},Va(ta,{brighter:function(a){a=null==a?Ra:Math.pow(Ra,a);return new ya(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new ya(this.h,
this.s,this.l*a,this.opacity)},rgb:function(){var a=isNaN(this.h)?0:(this.h+120)*le,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),d=Math.cos(a);a=Math.sin(a);return new B(255*(b+c*(-.14861*d+1.78277*a)),255*(b+c*(-.29227*d+-.90649*a)),255*(b+1.97294*c*d),this.opacity)}}));var Ae=function c(b){function d(b,c){var d=e((b=Lc(b)).r,(c=Lc(c)).r),f=e(b.g,c.g),g=e(b.b,c.b),n=qe(b.opacity,c.opacity);return function(c){b.r=d(c);b.g=f(c);b.b=g(c);b.opacity=n(c);return b+""}}var e=Lg(b);d.gamma=c;return d}(1),
Tc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Uc=new RegExp(Tc.source,"g"),se=180/Math.PI,ad={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},fb,bd,Re,gb,ni=te(function(b){if("none"===b)return ad;fb||(fb=document.createElement("DIV"),bd=document.documentElement,Re=document.defaultView);fb.style.transform=b;b=Re.getComputedStyle(bd.appendChild(fb),null).getPropertyValue("transform");bd.removeChild(fb);b=b.slice(7,-1).split(",");return re(+b[0],+b[1],+b[2],+b[3],+b[4],+b[5])},"px, ",
"px)","deg)"),oi=te(function(b){if(null==b)return ad;gb||(gb=document.createElementNS("http://www.w3.org/2000/svg","g"));gb.setAttribute("transform",b);if(!(b=gb.transform.baseVal.consolidate()))return ad;b=b.matrix;return re(b.a,b.b,b.c,b.d,b.e,b.f)},", ",")",")"),va=Math.SQRT2,oa=0,Ya=0,$a=0,Za,wa,Ma=0,za=0,La=0,Xa="object"===typeof performance&&performance.now?performance:Date,ve="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(b){setTimeout(b,
17)};zb.prototype=we.prototype={constructor:zb,restart:function(b,c,d){if("function"!==typeof b)throw new TypeError("callback is not a function");d=(null==d?yb():+d)+(null==c?0:+c);this._next||wa===this||(wa?wa._next=this:Za=this,wa=this);this._call=b;this._time=d;Vc()},stop:function(){this._call&&(this._call=null,this._time=Infinity,Vc())}};var Tg=Gc("start","end","interrupt"),Ug=[],pi=ma.prototype.constructor,Se=0,Sa=ma.prototype;qa.prototype=function(b){return ma().transition(b)}.prototype={constructor:qa,
select:function(b){var c=this._name,d=this._id;"function"!==typeof b&&(b=Hc(b));for(var e=this._groups,g=e.length,f=Array(g),h=0;h<g;++h)for(var k=e[h],m=k.length,n=f[h]=Array(m),l,p,q=0;q<m;++q)(l=k[q])&&(p=b.call(l,l.__data__,q,k))&&("__data__"in l&&(p.__data__=l.__data__),n[q]=p,Ab(n[q],c,d,q,n,K(l,d)));return new qa(f,this._parents,c,d)},selectAll:function(b){var c=this._name,d=this._id;"function"!==typeof b&&(b=Wd(b));for(var e=this._groups,g=e.length,f=[],h=[],k=0;k<g;++k)for(var m=e[k],n=m.length,
l,p=0;p<n;++p)if(l=m[p]){for(var q=b.call(l,l.__data__,p,m),r,t=K(l,d),v=0,u=q.length;v<u;++v)(r=q[v])&&Ab(r,c,d,v,q,t);f.push(q);h.push(l)}return new qa(f,h,c,d)},filter:function(b){"function"!==typeof b&&(b=Pe(b));for(var c=this._groups,d=c.length,e=Array(d),g=0;g<d;++g)for(var f=c[g],h=f.length,k=e[g]=[],m,l=0;l<h;++l)(m=f[l])&&b.call(m,m.__data__,l,f)&&k.push(m);return new qa(e,this._parents,this._name,this._id)},merge:function(b){if(b._id!==this._id)throw Error();var c=this._groups;b=b._groups;
for(var d=c.length,e=Math.min(d,b.length),g=Array(d),f=0;f<e;++f)for(var h=c[f],k=b[f],m=h.length,l=g[f]=Array(m),p,q=0;q<m;++q)if(p=h[q]||k[q])l[q]=p;for(;f<d;++f)g[f]=c[f];return new qa(g,this._parents,this._name,this._id)},selection:function(){return new pi(this._groups,this._parents)},transition:function(){for(var b=this._name,c=this._id,d=++Se,e=this._groups,g=e.length,f=0;f<g;++f)for(var h=e[f],k=h.length,l,n=0;n<k;++n)if(l=h[n]){var p=K(l,c);Ab(l,b,d,n,h,{time:p.time+p.delay+p.duration,delay:0,
duration:p.duration,ease:p.ease})}return new qa(e,this._parents,b,d)},call:Sa.call,nodes:Sa.nodes,node:Sa.node,size:Sa.size,empty:Sa.empty,each:Sa.each,on:function(b,c){var d=this._id;return 2>arguments.length?K(this.node(),d).on.on(b):this.each(kh(d,b,c))},attr:function(b,c){var d=wb(b),e="transform"===d?oi:ze;return this.attrTween(b,"function"===typeof c?(d.local?bh:ah)(d,e,Xc(this,"attr."+b,c)):null==c?(d.local?Yg:Xg)(d):(d.local?$g:Zg)(d,e,c+""))},attrTween:function(b,c){var d="attr."+b;if(2>
arguments.length)return(d=this.tween(d))&&d._value;if(null==c)return this.tween(d,null);if("function"!==typeof c)throw Error();var e=wb(b);return this.tween(d,(e.local?ch:dh)(e,c))},style:function(b,c,d){var e="transform"===(b+="")?ni:ze;return null==c?this.styleTween(b,mh(b,e)).on("end.style."+b,nh(b)):this.styleTween(b,"function"===typeof c?ph(b,e,Xc(this,"style."+b,c)):oh(b,e,c+""),d)},styleTween:function(b,c,d){var e="style."+(b+="");if(2>arguments.length)return(e=this.tween(e))&&e._value;if(null==
c)return this.tween(e,null);if("function"!==typeof c)throw Error();return this.tween(e,qh(b,c,null==d?"":d))},text:function(b){return this.tween("text","function"===typeof b?sh(Xc(this,"text",b)):rh(null==b?"":b+""))},remove:function(){return this.on("end.remove",lh(this._id))},tween:function(b,c){var d=this._id;b+="";if(2>arguments.length){d=K(this.node(),d).tween;for(var e=0,g=d.length,f;e<g;++e)if((f=d[e]).name===b)return f.value;return null}return this.each((null==c?Vg:Wg)(d,b,c))},delay:function(b){var c=
this._id;return arguments.length?this.each(("function"===typeof b?eh:fh)(c,b)):K(this.node(),c).delay},duration:function(b){var c=this._id;return arguments.length?this.each(("function"===typeof b?gh:hh)(c,b)):K(this.node(),c).duration},ease:function(b){var c=this._id;return arguments.length?this.each(ih(c,b)):K(this.node(),c).ease}};var cd={time:null,delay:0,duration:250,ease:function(b){return(1>=(b*=2)?b*b*b:(b-=2)*b*b+2)/2}};ma.prototype.interrupt=function(b){return this.each(function(){Na(this,
b)})};ma.prototype.transition=function(b){var c;if(b instanceof qa){var d=b._id;b=b._name}else d=++Se,(c=cd).time=yb(),b=null==b?null:b+"";for(var e=this._groups,g=e.length,f=0;f<g;++f)for(var h=e[f],k=h.length,l,n=0;n<k;++n)if(l=h[n]){var p=l,q=b,r=d,t=n,u=h,v;if(!(v=c))a:{v=void 0;for(var x=d;!(v=l.__transition)||!(v=v[x]);)if(!(l=l.parentNode)){v=(cd.time=yb(),cd);break a}}Ab(p,q,r,t,u,v)}return new qa(e,this._parents,b,d)};P.prototype={constructor:P,scale:function(b){return 1===b?this:new P(this.k*
b,this.x,this.y)},translate:function(b,c){return 0===b&0===c?this:new P(this.k,this.x+this.k*b,this.y+this.k*c)},apply:function(b){return[b[0]*this.k+this.x,b[1]*this.k+this.y]},applyX:function(b){return b*this.k+this.x},applyY:function(b){return b*this.k+this.y},invert:function(b){return[(b[0]-this.x)/this.k,(b[1]-this.y)/this.k]},invertX:function(b){return(b-this.x)/this.k},invertY:function(b){return(b-this.y)/this.k},rescaleX:function(b){return b.copy().domain(b.range().map(this.invertX,this).map(b.invert,
b))},rescaleY:function(b){return b.copy().domain(b.range().map(this.invertY,this).map(b.invert,b))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Oa=new P(1,0,0);Be.prototype=P.prototype;var ba={components:[],running:!1,add:function(b){~ba.components.indexOf(b)||(ba.components.push(b),ba.running||(ba.running=!0,requestAnimationFrame(ba.next)))},next:function(){for(var b=window.performance.now(),c=!1,d=ba.components.length;d--;){var e=ba.components[d],g={},f=
!1,h;for(h in e._currentTweens){var k=e._currentTweens[h];b>=k.end?(g[h]=k.to,delete e._currentTweens[h],k.fulfil()):(c=f=!0,b>=k.start&&(g[h]=k.value(k.ease((b-k.start)/k.duration))))}e._tweening=!0;e.set(g);e._tweening=!1;f||ba.components.splice(d,1)}c?requestAnimationFrame(ba.next):ba.running=!1}};r(bb.prototype,x);r(bb.prototype,{tween:function(b,c,d){var e=this;void 0===d&&(d={});if(!this._currentTweens){this._currentTweens=Object.create(null);this._tweening=!1;var g=this.set;this.set=function(b){if(!e._tweening)for(var c in b)e._currentTweens[c]&&
e._currentTweens[c].abort();g.call(e,b)}}this._currentTweens[b]&&this._currentTweens[b].abort();var f=window.performance.now()+(d.delay||0),h=d.duration||400,k=f+h,l={key:b,value:(d.interpolate||Yc)(this.get()[b],c),to:c,start:f,end:k,duration:h,ease:d.easing||Bh,running:!0,abort:function(){l.running=!1;delete e._currentTweens[b]}};this._currentTweens[b]=l;ba.add(this);c=new Promise(function(b){l.fulfil=b});c.abort=l.abort;return c},zoomEventFilter:function(){let {scrollWheel:b,disableBehaviors:c}=
this.get();return c?!1:b?0==u.button:!("wheel"===u.type&&!1===u.ctrlKey)&&0==u.button},mouseMove:function(b){this.set({msx:b.offsetX,msy:b.offsetY});let {}=this.get()},update:function(){var {el:b}=this.get();b=Be(b);this.set({scale:b.k,transform:b,translateX:b.x,translateY:b.y})},onzoom:function(b){b.update()},zoomTo:function(b,c,d=1,e=1E3){let {selection:g,z:f,minSize:h,clientWidth:k,clientHeight:l}=this.get();g.transition().duration(e).call(f.transform,Oa.translate(k/2,l/2).scale(d).translate(-b*
h,-c*h))},translateTo:function(b,c){let {z:d,selection:e,minSize:g}=this.get();d.translateTo(e,b*g,c*g)},home:function(b=0){let {homeX:c,homeY:d,homeScale:e}=this.get();this.zoomTo(c,d,e,b)},scaleTo:function(b,c=0){let {z:d,selection:e}=this.get();e.transition().duration(c).call(d.scaleTo,b)}});bb.prototype._recompute=function(b,c){(b.clientWidth||b.clientHeight)&&this._differs(c.minSize,c.minSize=Ch(c))&&(b.minSize=!0);(b.msx||b.msy)&&this._differs(c.mouseOver,c.mouseOver=Dh(c))&&(b.mouseOver=!0);
(b.transform||b.msx||b.msy||b.clientHeight||b.clientWidth||b.minSize)&&this._differs(c.mouseGlobalPosition,c.mouseGlobalPosition=Eh(c))&&(b.mouseGlobalPosition=!0);(b.scale||b.translateX||b.translateY||b.minSize||b.clientWidth||b.clientHeight)&&this._differs(c.extent,c.extent=Fh(c))&&(b.extent=!0);b.extent&&(this._differs(c.gcx,c.gcx=Gh(c))&&(b.gcx=!0),this._differs(c.gcy,c.gcy=Hh(c))&&(b.gcy=!0))};r(Ee.prototype,x);r(uc.prototype,x);r(uc.prototype,{fullscreen(){this.refs.root.webkitRequestFullscreen()},
home(b=0){this.refs.d3Zoom.home(b)},translateTo(b,c){this.refs.d3Zoom.translateTo(b,c)},zoomTo(b,c,d,e=1E3){this.refs.d3Zoom.zoomTo(b,c,d,e)},transitionTo(b,c,d,e=0){this.refs.d3Zoom.transformTo(b,c,d,e)},scaleBy(b){let {scale:c}=this.get();this.refs.d3Zoom.scaleTo(c*b,300)},iconToGlobalPosition(b,c){let {density:d,scale:e,translateX:g,translateY:f,config:h,w:k,h:l}=this.get();var n=h.grid_size[c];c=b.gw*e*Math.min(k,l);n=c*Math.min(1,Math.sqrt(d*b.num_activations/(("number"==typeof h.filter[0]?h.filter[0]:
h.sample_images)/(n*n))));return{sourceX:b.localX*h.icon_size,sourceY:b.localY*h.icon_size,iconX:b.gy*e*Math.min(k,l)+g+(c-n)/2,iconY:b.gx*e*Math.min(k,l)+f+(c-n)/2,iconWidth:n}},clear(){let {viewHeight:b,viewWidth:c,context:d,backgroundColor:e,labelsContext:g}=this.get();d.globalAlpha=1;d.fillStyle=e;d.clearRect(0,0,c,b);d.fillRect(0,0,c,b);g.globalAlpha=1;g.clearRect(0,0,c,b)},render(){let {id:b,labelsContext:c,loading:d,classHeatmap:e,showLabels:g,labels:f,labelsBufferCanvas:h,imageSmoothing:k,
scale:l,w:n,h:p,translateX:q,translateY:r,context:t,config:u,layers:v,currentZoomIndex:x,strokeColor:w,strokeThickness:A,maxAttributionValue:z}=this.get();this.clear();t.imageSmoothingEnabled=k;c.strokeStyle=w;c.lineWidth=A;t.fillStyle="white";if(u&&v&&!d){let d=[{i:x,opacity:1}];this.set({visibleLayers:d});d.forEach((d)=>{let k=d.i;d=v[k];var m=Math.min(n,p);let u=Math.max(0,Math.floor(-(q/l/m)*d.length)),x=u+Math.ceil(n/l/m*d.length);var w=Math.max(0,Math.floor(-(r/l/m)*d.length));for(m=w+Math.ceil(p/
l/m*d.length);w<=m;w++)for(let l=u;l<=x;l++)if(d[w]&&d[w][l]){let m=d[w][l],{iconX:n,iconY:p,iconWidth:q}=this.iconToGlobalPosition(m,k),r=b;{c.globalAlpha=.3;c.strokeRect(n,p,q,q);c.globalAlpha=1;var y=Math.ceil(40/q);let b=Math.ceil(60/q);g&&f&&-1===e&&0==m.y%b&&0==m.x%y&&(c.globalAlpha=1,y=m.top_class_indices[0],c.drawImage(h,y%10*150,20*Math.floor(y/10)+4,Math.min(q*b-5,100),20,n,p+q-20-2,Math.min(q*b-5,100),20));Od(m.url).then((b)=>{let {id:c,visibleLayers:d}=this.get();if(d.reduce((b,c)=>c.i===
k?b+1:b,0)&&r===c){let {config:c,classHeatmap:d,classHeatmapMultiplier:g,classHeatmapPositive:h}=this.get(),{sourceX:l,sourceY:n,iconX:p,iconY:q,iconWidth:r}=this.iconToGlobalPosition(m,k);var e=1;-1<d&&(e=m.full_class_indices.indexOf(d),-1<e?(e=m.full_class_values[e]/z,e*=h,e=Math.max(0,e)*g):e=0);var f=Math.min(8/r,.6);t.globalAlpha=1;f=f*c.icon_size/2;-1<d&&t.fillRect(p,q,r,r);t.globalAlpha=e;t.drawImage(b,n+f,l+f,c.icon_size-2*f,c.icon_size-2*f,p,q,r,r)}})}}})}}});uc.prototype._recompute=function(b,
c){(b.layers||b.layer)&&this._differs(c.maxAttributionValue,c.maxAttributionValue=Mh(c))&&(b.maxAttributionValue=!0);(b.viewWidth||b.screenResolution)&&this._differs(c.w,c.w=Nh(c))&&(b.w=!0);(b.viewHeight||b.screenResolution)&&this._differs(c.h,c.h=Oh(c))&&(b.h=!0);(b.scale||b.gridSize||b.config||b.classHeatmap||b.w||b.h||b.autoGridSizeMultiplier)&&this._differs(c.currentZoomIndex,c.currentZoomIndex=Ph(c))&&(b.currentZoomIndex=!0);(b.currentZoomIndex||b.layers)&&this._differs(c.currentLayerData,c.currentLayerData=
Qh(c))&&(b.currentLayerData=!0);(b.labelsBufferContext||b.labels||b.fontSize||b.textColor||b.textShadowColor)&&this._differs(c.labelsBuffer,c.labelsBuffer=Rh(c))&&(b.labelsBuffer=!0);(b.currentLayerData||b.config||b.mouseGlobalPosition||b.w||b.h||b.translateX||b.translateY)&&this._differs(c.hoverIconData,c.hoverIconData=Th(c))&&(b.hoverIconData=!0);(b.hoverIconData||b.mouseGlobalPosition)&&this._differs(c.showHover,c.showHover=Sh(c))&&(b.showHover=!0);(b.hoverIconData||b.scale||b.w||b.h||b.translateX)&&
this._differs(c.hoverIconX,c.hoverIconX=Uh(c))&&(b.hoverIconX=!0);(b.hoverIconData||b.scale||b.w||b.h||b.translateY)&&this._differs(c.hoverIconY,c.hoverIconY=Vh(c))&&(b.hoverIconY=!0);(b.hoverIconData||b.scale||b.w||b.h)&&this._differs(c.hoverIconW,c.hoverIconW=Wh(c))&&(b.hoverIconW=!0);(b.mouseGlobalPosition||b.hoverIconData||b.enableHover)&&this._differs(c.showHoverIcon,c.showHoverIcon=Xh(c))&&(b.showHoverIcon=!0)};r(Zc.prototype,x);var Nb=Qa(".3f");r(Eb.prototype,x);r(Eb.prototype,{zoomTo(b,c,
d,e=1E3){this.refs.atlas.zoomTo(b,c,d,e)},toggle(){let {showOptions:b}=this.get();this.set({showOptions:!b})}});Eb.prototype._recompute=function(b,c){b.gridSize&&this._differs(c.realGridSize,c.realGridSize=ai(c))&&(b.realGridSize=!0);(b.iconScaleFactor||b.realGridSize)&&this._differs(c.scaleCountFactor,c.scaleCountFactor=bi(c))&&(b.scaleCountFactor=!0)};r(Pa.prototype,x);r(Pa.prototype,{mousemove:function(b){let {visible:c}=this.get();c&&this.set({x:b.clientX,y:b.clientY})},show:function(b){this.set({visible:!0});
this.refs.component.set(b)},hide:function(){this.set({visible:!1})}});Pa.prototype._recompute=function(b,c){(b.x||b.width||b.y||b.clientHeight||b.visible)&&this._differs(c.style,c.style=di(c))&&(b.style=!0)};var Me=Qa(".2f"),Je=Qa(",");r(Ne.prototype,x);Fb.set({scroll:!0});Fb.set({tooltip:new Pa({target:document.body,store:Fb,data:{width:250,component:Ne}})});new Eb({target:document.querySelector("#app"),store:Fb,data:{gridSize:-1,showLabels:!0}})})();
//# sourceMappingURL=app.min.js.map
