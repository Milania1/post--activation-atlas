'use strict';(function(){function G(){}function q(a,b){for(var c in b)a[c]=b[c];return a}function pa(a,b){for(var c in b)a[c]=1;return a}function x(a){a.parentNode.removeChild(a)}function Kc(a){for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling)}function xa(a,b){for(;a.firstChild;)b.appendChild(a.firstChild)}function Nb(a,b){for(var c=0;c<a.length;c+=1)a[c]&&a[c].d(b)}function W(){return document.createDocumentFragment()}function l(a){return document.createElement(a)}function X(a){return document.createElementNS("http://www.w3.org/2000/svg",
a)}function p(a){return document.createTextNode(a)}function t(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function Lc(a){return""===a?void 0:+a}function r(a,b,c){a.style.setProperty(b,c)}function ca(a,b){"static"===getComputedStyle(a).position&&(a.style.position="relative");let c=document.createElement("object");c.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;");c.type="text/html";
let d;c.onload=()=>{d=c.contentDocument.defaultView;d.addEventListener("resize",b)};/Trident/.test(navigator.userAgent)?(a.appendChild(c),c.data="about:blank"):(c.data="about:blank",a.appendChild(c));return{cancel:()=>{d&&d.removeEventListener&&d.removeEventListener("resize",b);a.removeChild(c)}}}function nd(a,b){return a!=a?b==b:a!==b||a&&"object"===typeof a||"function"===typeof a}function rf(a,b){return a!=a?b==b:a!==b}function od(a,b){if(a=a in this._handlers&&this._handlers[a].slice())for(var c=
0;c<a.length;c+=1){var d=a[c];if(!d.__calling)try{d.__calling=!0,d.call(this,b)}finally{d.__calling=!1}}}function D(a){a._lock=!0;jb(a._beforecreate);jb(a._oncreate);jb(a._aftercreate);a._lock=!1}function pd(){return this._state}function u(a,b){a._handlers=Object.create(null);a._slots=Object.create(null);a._bind=b._bind;a._staged={};a.options=b;a.root=b.root||a;a.store=b.store||a.root.store;b.root||(a._beforecreate=[],a._oncreate=[],a._aftercreate=[])}function qd(a,b){var c=this._handlers[a]||(this._handlers[a]=
[]);c.push(b);return{cancel:function(){var a=c.indexOf(b);~a&&c.splice(a,1)}}}function jb(a){for(;a&&a.length;)a.shift()()}function rd(){this.store._remove(this)}function sd(a,b){this._handlers={};this._dependents=[];this._computed=Object.create(null);this._sortedComputedProperties=[];this._state=q({},a);this._differs=b&&b.immutable?rf:nd}function kb(a,b){if(0>(b=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e")))return null;var c=a.slice(0,b);return[1<c.length?c[0]+c.slice(2):c,+a.slice(b+
1)]}function sf(a){return a=kb(Math.abs(a)),a?a[1]:NaN}function tf(a,b){return function(c,d){for(var e=c.length,g=[],f=0,h=a[0],k=0;0<e&&0<h;){k+h+1>d&&(h=Math.max(1,d-k));g.push(c.substring(e-=h,e+h));if((k+=h+1)>d)break;h=a[f=(f+1)%a.length]}return g.reverse().join(b)}}function uf(a){return function(b){return b.replace(/[0-9]/g,function(b){return a[+b]})}}function Ob(a){return new lb(a)}function lb(a){if(!(b=vf.exec(a)))throw Error("invalid format: "+a);var b;this.fill=b[1]||" ";this.align=b[2]||
">";this.sign=b[3]||"-";this.symbol=b[4]||"";this.zero=!!b[5];this.width=b[6]&&+b[6];this.comma=!!b[7];this.precision=b[8]&&+b[8].slice(1);this.trim=!!b[9];this.type=b[10]||""}function td(a,b){b=kb(a,b);if(!b)return a+"";a=b[0];b=b[1];return 0>b?"0."+Array(-b).join("0")+a:a.length>b+1?a.slice(0,b+1)+"."+a.slice(b+1):a+Array(b-a.length+2).join("0")}function ud(a){return a}function wf(a){function b(a){function b(a){var b=y,d=t,f,k;if("c"===q)d=x(a)+d,a="";else{a=+a;var n=0>a;a=x(Math.abs(a),w);if(r){var C=
a.length,L=1,mb=-1;a:for(;L<C;++L)switch(a[L]){case ".":mb=f=L;break;case "0":0===mb&&(mb=L);f=L;break;default:if(0<mb){if(!+a[L])break a;mb=0}}a=0<mb?a.slice(0,mb)+a.slice(f+1):a}n&&0===+a&&(n=!1);b=(n?"("===A?A:"-":"-"===A||"("===A?"":A)+b;d=("s"===q?vd[8+wd/3]:"")+d+(n&&"("===A?")":"");if(v)for(n=-1,f=a.length;++n<f;)if(k=a.charCodeAt(n),48>k||57<k){d=(46===k?e+a.slice(n+1):a.slice(n))+d;a=a.slice(0,n);break}}p&&!Ha&&(a=c(a,Infinity));k=b.length+a.length+d.length;n=k<l?Array(l-k+1).join(h):"";
p&&Ha&&(a=c(n+a,n.length?l-d.length:Infinity),n="");switch(m){case "<":a=b+a+d+n;break;case "=":a=b+n+a+d;break;case "^":a=n.slice(0,k=n.length>>1)+b+a+d+n.slice(k);break;default:a=n+b+a+d}return g(a)}a=Ob(a);var h=a.fill,m=a.align,A=a.sign,C=a.symbol,Ha=a.zero,l=a.width,p=a.comma,w=a.precision,r=a.trim,q=a.type;"n"===q?(p=!0,q="g"):xd[q]||(null==w&&(w=12),r=!0,q="g");if(Ha||"0"===h&&"="===m)Ha=!0,h="0",m="=";var y="$"===C?d[0]:"#"===C&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",t="$"===C?d[1]:/[%p]/.test(q)?
f:"",x=xd[q],v=/[defgprs%]/.test(q);w=null==w?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));b.toString=function(){return a+""};return b}var c=a.grouping&&a.thousands?tf(a.grouping,a.thousands):ud,d=a.currency,e=a.decimal,g=a.numerals?uf(a.numerals):ud,f=a.percent||"%";return{format:b,formatPrefix:function(a,c){var d=b((a=Ob(a),a.type="f",a));a=3*Math.max(-8,Math.min(8,Math.floor(sf(c)/3)));var e=Math.pow(10,-a),f=vd[8+a/3];return function(a){return d(e*a)+f}}}}function xf(a,
b){function c(b){a.fire("click")}var d,e=a._slotted.default;return{c(){d=l("button");d.addEventListener("click",c,void 0);r(d,"background-color",b.backgroundColor);r(d,"color",b.color);d.className="svelte-nm66xb"},m(a,b){a.insertBefore(d,b);e&&d.appendChild(e)},p(a,b){a.backgroundColor&&r(d,"background-color",b.backgroundColor);a.color&&r(d,"color",b.color)},d(a){a&&x(d);e&&xa(d,e);d.removeEventListener("click",c,void 0)}}}function Ec(a){u(this,a);this._state=q({backgroundColor:"rgb(255, 130, 0)",
color:"white"},a.data);this._intro=!0;this._slotted=a.slots||{};this._fragment=xf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function yf(a,b){var c,d,e;return{c(){c=X("svg");d=X("path");e=X("path");t(d,"d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z");t(e,"d","M0 0h24v24H0z");t(e,"fill","none");t(c,"xmlns","http://www.w3.org/2000/svg");t(c,"width","24");t(c,"height","24");t(c,"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:G,d(a){a&&
x(c)}}}function yd(a){u(this,a);this._state=q({},a.data);this._intro=!0;this._fragment=yf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function zf(a,b){var c,d,e;return{c(){c=X("svg");d=X("path");e=X("path");t(d,"d","M19 13H5v-2h14v2z");t(e,"d","M0 0h24v24H0z");t(e,"fill","none");t(c,"xmlns","http://www.w3.org/2000/svg");t(c,"width","24");t(c,"height","24");t(c,"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:G,d(a){a&&x(c)}}}
function zd(a){u(this,a);this._state=q({},a.data);this._intro=!0;this._fragment=zf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Af(a,b){var c,d,e;return{c(){c=X("svg");d=X("path");e=X("path");t(d,"d","M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z");t(e,"d","M0 0h24v24H0z");t(e,"fill","none");t(c,"xmlns","http://www.w3.org/2000/svg");t(c,"width","24");t(c,"height","24");t(c,"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:G,d(a){a&&
x(c)}}}function Ad(a){u(this,a);this._state=q({},a.data);this._intro=!0;this._fragment=Af(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Bf({name:a}){if("home"===a)return Ad;if("add"===a)return yd;if("remove"===a)return zd}function Cf(a,b){var c,d=b.Icon;if(d)var e=new d({root:a.root,store:a.store});return{c(){c=l("div");e&&e._fragment.c();r(c,"fill",b.color)},m(a,b){a.insertBefore(c,b);e&&e._mount(c,null)},p(b,f){d!==(d=f.Icon)&&(e&&e.destroy(),d?(e=new d({root:a.root,
store:a.store}),e._fragment.c(),e._mount(c,null)):e=null);b.color&&r(c,"fill",f.color)},d(a){a&&x(c);e&&e.destroy()}}}function ac(a){u(this,a);this._state=q({color:"black"},a.data);this._recompute({name:1},this._state);this._intro=!0;this._fragment=Cf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Df({clientWidth:a,extent:b}){return Math.min(a,Math.max(1E-6,b[0][0]*a))}function Ef({clientWidth:a,extent:b}){return Math.min(a,b[0][1]*a)}function Ff({clientHeight:a,
extent:b}){return Math.min(a,Math.max(1E-6,b[1][0]*a))}function Gf({clientHeight:a,extent:b}){return Math.min(a,b[1][1]*a)}function Hf(a,b){function c(){a.set({clientWidth:e.clientWidth,clientHeight:e.clientHeight})}function d(b){a.down(b)}var e,g,f=b.extent&&Bd(a,b);return{c(){e=l("div");f&&f.c();a.root._beforecreate.push(c);e.addEventListener("pointerdown",d,void 0);e.className="root svelte-1pppif8";r(e,"cursor",b.cursor)},m(a,b){a.insertBefore(e,b);f&&f.m(e,null);g=ca(e,c)},p(b,c){c.extent?f?f.p(b,
c):(f=Bd(a,c),f.c(),f.m(e,null)):f&&(f.d(1),f=null);b.cursor&&r(e,"cursor",c.cursor)},d(a){a&&x(e);f&&f.d();g.cancel();e.removeEventListener("pointerdown",d,void 0)}}}function Bd(a,b){var c,d,e,g,f=b.left&&b.right&&b.top&&b.bottom&&Cd(a,b),h=b.annotationValue&&Dd(a,b);return{c(){c=X("svg");f&&f.c();d=p("\n  ");e=l("div");h&&h.c();t(c,"width",b.clientWidth);t(c,"height",b.clientHeight);t(c,"class","svelte-1pppif8");e.className=g="reticle "+(b.round?"round":"")+" svelte-1pppif8";r(e,"border-color",
b.color);r(e,"top",""+(b.top-1)+"px");r(e,"left",""+(b.left-1)+"px");r(e,"width",""+(b.right-b.left+2)+"px");r(e,"height",""+(b.bottom-b.top+2)+"px")},m(a,b){a.insertBefore(c,b);f&&f.m(c,null);a.insertBefore(d,b);a.insertBefore(e,b);h&&h.m(e,null)},p(b,d){d.left&&d.right&&d.top&&d.bottom?f?f.p(b,d):(f=Cd(a,d),f.c(),f.m(c,null)):f&&(f.d(1),f=null);b.clientWidth&&t(c,"width",d.clientWidth);b.clientHeight&&t(c,"height",d.clientHeight);d.annotationValue?h?h.p(b,d):(h=Dd(a,d),h.c(),h.m(e,null)):h&&(h.d(1),
h=null);b.round&&g!==(g="reticle "+(d.round?"round":"")+" svelte-1pppif8")&&(e.className=g);b.color&&r(e,"border-color",d.color);b.top&&r(e,"top",""+(d.top-1)+"px");b.left&&r(e,"left",""+(d.left-1)+"px");(b.right||b.left)&&r(e,"width",""+(d.right-d.left+2)+"px");(b.bottom||b.top)&&r(e,"height",""+(d.bottom-d.top+2)+"px")},d(a){a&&x(c);f&&f.d();a&&(x(d),x(e));h&&h.d()}}}function Cd(a,b){var c,d,e;return{c(){c=X("path");t(c,"class",d=(b.background?"":"transparent")+" svelte-1pppif8");t(c,"d",e="M0,0 L"+
b.clientWidth+",0 L"+b.clientWidth+","+b.clientHeight+" L0,"+b.clientHeight+" z M"+b.left+","+b.top+" L"+b.left+","+b.bottom+" L"+b.right+","+b.bottom+" L"+b.right+","+b.top+" z")},m(a,b){a.insertBefore(c,b)},p(a,b){a.background&&d!==(d=(b.background?"":"transparent")+" svelte-1pppif8")&&t(c,"class",d);(a.clientWidth||a.clientHeight||a.left||a.top||a.bottom||a.right)&&e!==(e="M0,0 L"+b.clientWidth+",0 L"+b.clientWidth+","+b.clientHeight+" L0,"+b.clientHeight+" z M"+b.left+","+b.top+" L"+b.left+","+
b.bottom+" L"+b.right+","+b.bottom+" L"+b.right+","+b.top+" z")&&t(c,"d",e)},d(a){a&&x(c)}}}function Dd(a,b){var c,d,e,g;return{c(){c=l("div");d=l("div");e=l("div");g=p(b.annotationValue);e.className="annotation";d.className="annotationTab svelte-1pppif8";r(d,"background",b.color);c.className="annotationTabParent svelte-1pppif8";r(c,"top",""+(b.w*b.width-2)/2+"px")},m(a,b){a.insertBefore(c,b);c.appendChild(d);d.appendChild(e);e.appendChild(g)},p(a,b){a.annotationValue&&(g.data=""+b.annotationValue);
a.color&&r(d,"background",b.color);(a.w||a.width)&&r(c,"top",""+(b.w*b.width-2)/2+"px")},d(a){a&&x(c)}}}function nb(a){u(this,a);this._state=q({dragging:!1,extent:[[0,0],[0,0]],background:!0,round:!1,color:"rgb(255, 130, 0)",enableDragging:!0,upListener:null,moveListener:null,cursor:"grab"},a.data);this._recompute({clientWidth:1,extent:1,clientHeight:1},this._state);this._intro=!0;this._fragment=Hf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function If(){this.refs.element.addEventListener("ready",
(a)=>{this.set({ready:!0})});this.refs.element.addEventListener("onscreen",(a)=>{this.set({onscreen:!0});this.fire("onscreen")});this.refs.element.addEventListener("offscreen",(a)=>{this.set({onscreen:!1});this.fire("offscreen")})}function Jf(a,b){var c,d=a._slotted.default;return{c(){c=l("d-figure");r(c,"display",b.display);r(c,"height",b.height)},m(b,g){b.insertBefore(c,g);d&&c.appendChild(d);a.refs.element=c},p(a,b){a.display&&r(c,"display",b.display);a.height&&r(c,"height",b.height)},d(b){b&&
x(c);d&&xa(c,d);a.refs.element===c&&(a.refs.element=null)}}}function Pb(a){u(this,a);this.refs={};this._state=q({display:"block",ready:!1,height:"",onscreen:!1,offscreen:!0},a.data);this._intro=!0;this._slotted=a.slots||{};this._fragment=Jf(this,this._state);this.root._oncreate.push(()=>{If.call(this);this.fire("update",{changed:pa({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Kf(a,b){var c;return{c(){c=l("div");c.innerHTML=
'<span class="svelte-19e83wz">Loading \u2026</span>';c.className="svelte-19e83wz"},m(a,b){a.insertBefore(c,b)},p:G,d(a){a&&x(c)}}}function Ed(a){u(this,a);this._state=q({},a.data);this._intro=!0;this._fragment=Kf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Lf({clientWidth:a}){return a}function Mf({width:a,aspectRatio:b}){return a/b}function Nf(a,b){function c(){a.set({clientWidth:d.clientWidth})}var d,e,g=a._slotted.default,f;return{c(){d=l("div");e=l("div");
e.className="container svelte-xqvv98";a.root._beforecreate.push(c);d.className="root svelte-xqvv98";r(d,"display",b.display);r(d,"padding-bottom",""+100/b.aspectRatio+"%")},m(a,b){a.insertBefore(d,b);d.appendChild(e);g&&e.appendChild(g);f=ca(d,c)},p(a,b){a.display&&r(d,"display",b.display);a.aspectRatio&&r(d,"padding-bottom",""+100/b.aspectRatio+"%")},d(a){a&&x(d);g&&xa(e,g);f.cancel()}}}function Ia(a){u(this,a);this._state=q({display:"block",aspectRatio:1,clientWidth:0},a.data);this._recompute({clientWidth:1,
width:1,aspectRatio:1},this._state);this._intro=!0;this._slotted=a.slots||{};this._fragment=Nf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Of(a,b){var c,d,e,g=b.ready?Fd:Gd,f=g(a,b),h={aspectRatio:b.aspectRatio},k=new Ia({root:a.root,store:a.store,slots:{default:W()},data:h});h={};if(void 0!==b.ready){h.ready=b.ready;var n=!0}var m=new Pb({root:a.root,store:a.store,slots:{default:W()},data:h,_bind(b,c){var d={};!n&&b.ready&&(d.ready=c.ready);a._set(d);
n=void 0}});a.root._beforecreate.push(()=>{m._bind({ready:1},m.get())});return{c(){c=l("div");f.c();d=document.createComment("");k._fragment.c();m._fragment.c();c.className=e=(b.background?"background":"")+" "+(b.border?"border":"")+" svelte-1q1tvil svelte-ref-root"},m(b,e){b.insertBefore(c,e);f.m(k._slotted.default,null);k._slotted.default.appendChild(d);k._mount(m._slotted.default,null);m._mount(c,null);a.refs.root=c},p(h,C){b=C;g===(g=b.ready?Fd:Gd)&&f?f.p(h,b):(f.d(1),f=g(a,b),f.c(),f.m(d.parentNode,
d));C={};h.aspectRatio&&(C.aspectRatio=b.aspectRatio);k._set(C);C={};!n&&h.ready&&(C.ready=b.ready,n=void 0!==b.ready);m._set(C);n=void 0;(h.background||h.border)&&e!==(e=(b.background?"background":"")+" "+(b.border?"border":"")+" svelte-1q1tvil svelte-ref-root")&&(c.className=e)},d(b){b&&x(c);f.d();k.destroy();m.destroy();a.refs.root===c&&(a.refs.root=null)}}}function Gd(a,b){var c=new Ed({root:a.root,store:a.store});return{c(){c._fragment.c()},m(a,b){c._mount(a,b)},p:G,d(a){c.destroy(a)}}}function Fd(a,
b){var c;return{c(){c=l("img");c.src=b.src;c.alt=b.alt;c.style.cssText=b.style;c.className="svelte-1q1tvil svelte-ref-image"},m(b,e){b.insertBefore(c,e);a.refs.image=c},p(a,b){a.src&&(c.src=b.src);a.alt&&(c.alt=b.alt);a.style&&(c.style.cssText=b.style)},d(b){b&&x(c);a.refs.image===c&&(a.refs.image=null)}}}function Hd(a){u(this,a);this.refs={};this._state=q({ready:!1,src:"",alt:"",style:"",display:"block",aspectRatio:1,border:!0,background:!1},a.data);this._intro=!0;this._fragment=Of(this,this._state);
a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Pf(a,b){var c,d,e,g=new Hd({root:a.root,store:a.store,data:{aspectRatio:1,src:"assets/images/renders/thumbnail-"+b.layerName+".jpg",border:!1,alt:"thumbnail for "+b.layerName}}),f={enableDragging:!0};if(void 0!==b.extent){f.extent=b.extent;var h=!0}var k=new nb({root:a.root,store:a.store,data:f,_bind(b,c){var d={};!h&&b.extent&&(d.extent=c.extent);a._set(d);h=void 0}});a.root._beforecreate.push(()=>{k._bind({extent:1},
k.get())});k.on("drag",function(b){a.fire("drag",b)});var n=new Ia({root:a.root,store:a.store,slots:{default:W()}});return{c(){c=l("div");d=l("div");g._fragment.c();e=p("\n    ");k._fragment.c();n._fragment.c();r(d,"opacity","0.4");c.className="svelte-15ooxw3 svelte-ref-root"},m(b,f){b.insertBefore(c,f);n._slotted.default.appendChild(d);g._mount(d,null);n._slotted.default.appendChild(e);k._mount(n._slotted.default,null);n._mount(c,null);a.refs.root=c},p(a,c){b=c;c={};a.layerName&&(c.src="assets/images/renders/thumbnail-"+
b.layerName+".jpg");a.layerName&&(c.alt="thumbnail for "+b.layerName);g._set(c);c={};!h&&a.extent&&(c.extent=b.extent,h=void 0!==b.extent);k._set(c);h=void 0},d(b){b&&x(c);g.destroy();k.destroy();n.destroy();a.refs.root===c&&(a.refs.root=null)}}}function Id(a){u(this,a);this.refs={};this._state=q({scaleCountFactor:200},a.data);this._intro=!0;this._fragment=Pf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Qb(){}function ob(a){for(var b,c,d=1,e=arguments.length;d<
e;d++)for(b in c=arguments[d],c)a[b]=c[b];return a}function Jd(a){this.destroy=Qb;this.fire("destroy");this.set=this.get=Qb;!1!==a&&this._fragment.u();this._fragment.d();this._fragment=this._state=null}function Kd(a,b,c,d,e){for(var g in b)if(c[g]){var f=d[g],h=e[g],k=b[g];if(k)for(var n=0;n<k.length;n+=1){var m=k[n];m.__calling||(m.__calling=!0,m.call(a,f,h),m.__calling=!1)}}}function pb(a){for(;a&&a.length;)a.shift()()}function Qf(a,b){return b?b:a}function Rf(){let a=(b)=>{this.set({loaded:!0});
var {img:b}=this.get();b.removeEventListener("loaded",a)};this.observe("index",(a)=>{this.draw()},{init:!1});this.observe("img",(a)=>{this.draw()},{init:!1});this.observe("loaded",(a)=>{this.draw()},{init:!1});this.observe("url",(b)=>{let c=this.get("img");c&&c.removeEventListener("load",a);if(Rb.has(b))b=Rb.get(b),b.loaded?this.set({loaded:!0,img:b.img}):(this.set({loaded:!1,img:b.img}),b.img.addEventListener("load",a));else{let c=new Image;this.set({loaded:!1,img:c});let e={img:c},g=(a)=>{e.loaded=
!0;c.removeEventListener("load",g)};c.addEventListener("load",g);c.addEventListener("load",a);Rb.set(b,e);c.src=b}})}function Sf(a,b){var c;return{c:function(){c=document.createElement("canvas");this.h()},h:function(){c.width=b.width;c.height=b.realHeight},m:function(b,e){b.insertBefore(c,e);a.refs.canvas=c},p:function(a,b){a.width&&(c.width=b.width);a.realHeight&&(c.height=b.realHeight)},u:function(){c.parentNode.removeChild(c)},d:function(){a.refs.canvas===c&&(a.refs.canvas=null)}}}function Ld(a){this._observers=
{pre:Object.create(null),post:Object.create(null)};this._handlers=Object.create(null);this._bind=a._bind;this.options=a;this.root=a.root||this;this.store=this.root.store||a.store;this.refs={};this._state=ob({url:"",index:0,width:100,loaded:null,columns:Infinity,height:null,img:null},a.data);this._recompute({width:1,height:1},this._state);var b=Rf.bind(this);a.root||(this._oncreate=[]);this._fragment=Sf(this,this._state);this.root._oncreate.push(b);a.target&&(this._fragment.c(),this._mount(a.target,
a.anchor),pb(this._oncreate))}function Md(a){return new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}")}function Tf(a,b){var c=Md(a);return function(d,e){return b(c(d),e,a)}}function Uf(a){var b=Object.create(null),c=[];a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)});return c}function Nd(a){function b(a,b){function c(){if(L)return qb;if(p)return p=!1,Od;var b,c=f,d;if(34===a.charCodeAt(c)){for(;f++<e&&34!==a.charCodeAt(f)||34===a.charCodeAt(++f););
(b=f)>=e?L=!0:10===(d=a.charCodeAt(f++))?p=!0:13===d&&(p=!0,10===a.charCodeAt(f)&&++f);return a.slice(c+1,b-1).replace(/""/g,'"')}for(;f<e;){if(10===(d=a.charCodeAt(b=f++)))p=!0;else if(13===d)p=!0,10===a.charCodeAt(f)&&++f;else if(d!==g)continue;return a.slice(c,b)}return L=!0,a.slice(c,e)}var d=[],e=a.length,f=0,h=0,l,L=0>=e,p=!1;10===a.charCodeAt(e-1)&&--e;for(13===a.charCodeAt(e-1)&&--e;(l=c())!==qb;){for(var w=[];l!==Od&&l!==qb;)w.push(l),l=c();b&&null==(w=b(w,h++))||d.push(w)}return d}function c(b){return b.map(d).join(a)}
function d(a){return null==a?"":e.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}var e=new RegExp('["'+a+"\n\r]"),g=a.charCodeAt(0);return{parse:function(a,c){var d,e;a=b(a,function(a,b){if(d)return d(a,b-1);e=a;d=c?Tf(a,c):Md(a)});a.columns=e||[];return a},parseRows:b,format:function(b,c){null==c&&(c=Uf(b));return[c.map(d).join(a)].concat(b.map(function(b){return c.map(function(a){return d(b[a])}).join(a)})).join("\n")},formatRows:function(a){return a.map(c).join("\n")}}}function Pd(a){if(a.ok)return a;
throw Error(a.status+":"+a.statusText);}function rb(a){return new Promise((b,c)=>{let d=new Image;d.onload=(a)=>b(d);d.onerror=(a)=>c(a);d.src=a})}function sb(a){return fetch(a).then(Pd).then((a)=>a.text())}function Vf(a,b){b=null!=b?b:Date.now()+""+Math.random();let c="namespace:"+b+", url:"+a+", random:"+Date.now()+Math.random();tb.set(c,!1);if(ub.has(b)){let a=ub.get(b);tb.set(a,!0)}ub.set(b,c);return new Promise((b,e)=>{if(Array.isArray(a)){var d=a.map((a)=>Qd(a));d=Promise.all(d)}else d=Qd(a);
d.then((a)=>{tb.get(c)||b(a)}).catch((a)=>{tb.get(c)||e(a)})})}function Qd(a){if(vb.has(a))return vb.get(a);var b=Rd;var c=a.split(".");c=c[c.length-1];b.has(c)||console.warn("Trying to load url: "+a+' with an unknown filetype. Assuming "text".');b=b.has(c)?c:"text";b=Rd.get(b)(a);vb.set(a,b);return b}function Wf({clientWidth:a}){return a}function Xf({model:a,layerName:b}){return a+"_"+b}function Yf(){let {root:a,id:b,grid:c}=this.get(),d=Zf[b];null==d.class_filter&&(d.class_filter="None");null==
d.filter&&(d.filter="None");Array.isArray(d.layout)||(d.layout=[d.layout]);Array.isArray(d.layer)||(d.layer=[d.layer]);Array.isArray(d.filter)||(d.filter=[d.filter]);this.set({gridSize:d.grid_size[c],layerName:d.layer[0]});Vf(`${a}/${b}/web/web--grid_size=${d.grid_size[c]}--layout=${d.layout[0]}--class_filter=${d.class_filter}--filter=${d.filter[0]}--layer=${d.layer[0]}--model=${d.model}--sample_images=${d.sample_images}--sample_type=${d.sample_type}.json`).then((a)=>{this.set({icons:a});this.render()})}
function $f({changed:a}){a.classHeatmap&&this.render()}function ag(a,b){function c(){a.set({clientWidth:d.clientWidth})}var d,e,g;return{c(){d=l("div");e=l("canvas");e.width=b.gridSize;e.height=b.gridSize;r(e,"width",""+b.clientWidth+"px");r(e,"height",""+b.height+"px");e.className="svelte-sjakuy";a.root._beforecreate.push(c);r(d,"height",""+b.height+"px")},m(b,h){b.insertBefore(d,h);d.appendChild(e);a.refs.canvas=e;g=ca(d,c)},p(a,b){a.gridSize&&(e.width=b.gridSize,e.height=b.gridSize);a.clientWidth&&
r(e,"width",""+b.clientWidth+"px");a.height&&(r(e,"height",""+b.height+"px"),r(d,"height",""+b.height+"px"))},d(b){b&&x(d);a.refs.canvas===e&&(a.refs.canvas=null);g.cancel()}}}function wb(a){u(this,a);this.refs={};this._state=q({root:"https://storage.googleapis.com/activation-atlas/build",model:"inceptionv1",layerName:"mixed4d",grid:1,layout:0,gridSize:10,classHeatmap:-1,icons:[]},a.data);this._recompute({clientWidth:1,model:1,layerName:1},this._state);this._intro=!0;this._handlers.update=[$f];this._fragment=
ag(this,this._state);this.root._oncreate.push(()=>{Yf.call(this);this.fire("update",{changed:pa({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Sd(a,b,c){a=Object.create(a);a.layer=b[c];a.i=c;return a}function bg(a,b){for(var c,d=b.layers,e=[],g=0;g<d.length;g+=1)e[g]=Td(a,Sd(b,d,g));return{c(){c=l("div");for(var a=0;a<e.length;a+=1)e[a].c();c.className="stack"},m(a,b){a.insertBefore(c,b);for(a=0;a<e.length;a+=1)e[a].m(c,null)},
p(b,g){if(b.layerName||b.layers||b.classHeatmap){d=g.layers;for(var f=0;f<d.length;f+=1){let h=Sd(g,d,f);e[f]?e[f].p(b,h):(e[f]=Td(a,h),e[f].c(),e[f].m(c,null))}for(;f<e.length;f+=1)e[f].d(1);e.length=d.length}},d(a){a&&x(c);Nb(e,a)}}}function Td(a,b){function c(){a.set({layerName:e.__value})}var d,e,g,f,h,k,n,m=b.layer,A,C,Ha,L=new wb({root:a.root,store:a.store,data:{grid:0,layerName:b.layer,classHeatmap:b.classHeatmap}});return{c(){d=l("label");e=l("input");f=p("\n    ");h=l("div");L._fragment.c();
k=p("\n    ");n=l("span");A=p(m);C=p("\n  ");a._bindingGroups[0].push(e);e.addEventListener("change",c,void 0);t(e,"type","radio");e.__value=g=b.layer;e.value=e.__value;e.className="svelte-1tpwqxh";h.className="thumb svelte-1tpwqxh";r(h,"position","relative");n.className="svelte-1tpwqxh";d.className=Ha="layer "+(b.layerName==b.layer?"selected":"")+" svelte-1tpwqxh"},m(a,c){a.insertBefore(d,c);d.appendChild(e);e.checked=e.__value===b.layerName;d.appendChild(f);d.appendChild(h);L._mount(h,null);d.appendChild(k);
d.appendChild(n);n.appendChild(A);d.appendChild(C)},p(a,b){a.layerName&&(e.checked=e.__value===b.layerName);a.layers&&g!==(g=b.layer)&&(e.__value=g);e.value=e.__value;var c={};a.layers&&(c.layerName=b.layer);a.classHeatmap&&(c.classHeatmap=b.classHeatmap);L._set(c);a.layers&&m!==(m=b.layer)&&(A.data=""+m);(a.layerName||a.layers)&&Ha!==(Ha="layer "+(b.layerName==b.layer?"selected":"")+" svelte-1tpwqxh")&&(d.className=Ha)},d(b){b&&x(d);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(e),1);e.removeEventListener("change",
c,void 0);L.destroy()}}}function Ud(a){u(this,a);this._state=q({layerName:"mixed4c",layers:"mixed3a mixed3b mixed4a mixed4b mixed4c mixed4d mixed4e mixed5a mixed5b".split(" "),classHeatmap:-1},a.data);this._bindingGroups=[[]];this._intro=!0;this._fragment=bg(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function cg({inceptionLabels:a}){let b=Ja.map((b)=>({label:a.inception[b],i:b}));return[{label:"show all",i:-1}].concat(b)}function Vd(a,b,c){a=Object.create(a);
a.l=b[c];return a}function dg(a,b){for(var c,d=b.labels,e=[],g=0;g<d.length;g+=1)e[g]=Wd(a,Vd(b,d,g));return{c(){c=l("div");for(var a=0;a<e.length;a+=1)e[a].c();c.className="chooser svelte-h2ed57"},m(a,b){a.insertBefore(c,b);for(a=0;a<e.length;a+=1)e[a].m(c,null)},p(b,g){if(b.classHeatmap||b.labels){d=g.labels;for(var f=0;f<d.length;f+=1){let h=Vd(g,d,f);e[f]?e[f].p(b,h):(e[f]=Wd(a,h),e[f].c(),e[f].m(c,null))}for(;f<e.length;f+=1)e[f].d(1);e.length=d.length}},d(a){a&&x(c);Nb(e,a)}}}function Wd(a,
b){function c(){a.set({classHeatmap:e.__value})}var d,e,g,f,h,k=b.l.label,n,m,A,C;return{c(){d=l("label");e=l("input");f=p("\n      ");h=l("span");n=p(k);A=p("\n    ");a._bindingGroups[0].push(e);e.addEventListener("change",c,void 0);t(e,"type","radio");e.__value=g=b.l.i;e.value=e.__value;e.className="svelte-h2ed57";h.title=m=b.l.i;d.className=C=(b.classHeatmap===b.l.i?"selected":"")+" svelte-h2ed57"},m(a,c){a.insertBefore(d,c);d.appendChild(e);e.checked=e.__value===b.classHeatmap;d.appendChild(f);
d.appendChild(h);h.appendChild(n);d.appendChild(A)},p(a,b){a.classHeatmap&&(e.checked=e.__value===b.classHeatmap);a.labels&&g!==(g=b.l.i)&&(e.__value=g);e.value=e.__value;a.labels&&k!==(k=b.l.label)&&(n.data=""+k);a.labels&&m!==(m=b.l.i)&&(h.title=m);(a.classHeatmap||a.labels)&&C!==(C=(b.classHeatmap===b.l.i?"selected":"")+" svelte-h2ed57")&&(d.className=C)},d(b){b&&x(d);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(e),1);e.removeEventListener("change",c,void 0)}}}function Mc(a){u(this,a);
this._state=q({classesToKeep:Ja,inceptionLabels:Va,classHeatmap:235},a.data);this._recompute({inceptionLabels:1},this._state);this._bindingGroups=[[]];this._intro=!0;this._fragment=dg(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Xd(a){return new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}")}function eg(a,b){var c=Xd(a);return function(d,e){return b(c(d),e,a)}}function fg(a){var b=Object.create(null),c=
[];a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)});return c}function Yd(a){function b(a,b){function c(){if(p)return bc;if(r)return r=!1,Zd;var b,c=f,d;if(34===a.charCodeAt(c)){for(;f++<e&&34!==a.charCodeAt(f)||34===a.charCodeAt(++f););(b=f)>=e?p=!0:10===(d=a.charCodeAt(f++))?r=!0:13===d&&(r=!0,10===a.charCodeAt(f)&&++f);return a.slice(c+1,b-1).replace(/""/g,'"')}for(;f<e;){if(10===(d=a.charCodeAt(b=f++)))r=!0;else if(13===d)r=!0,10===a.charCodeAt(f)&&++f;else if(d!==g)continue;return a.slice(c,
b)}return p=!0,a.slice(c,e)}var d=[],e=a.length,f=0,h=0,l,p=0>=e,r=!1;10===a.charCodeAt(e-1)&&--e;for(13===a.charCodeAt(e-1)&&--e;(l=c())!==bc;){for(var q=[];l!==Zd&&l!==bc;)q.push(l),l=c();b&&null==(q=b(q,h++))||d.push(q)}return d}function c(b){return b.map(d).join(a)}function d(a){return null==a?"":e.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}var e=new RegExp('["'+a+"\n\r]"),g=a.charCodeAt(0);return{parse:function(a,c){var d,e;a=b(a,function(a,b){if(d)return d(a,b-1);e=a;d=c?eg(a,c):Xd(a)});a.columns=
e||[];return a},parseRows:b,format:function(b,c){null==c&&(c=fg(b));return[c.map(d).join(a)].concat(b.map(function(b){return c.map(function(a){return d(b[a])}).join(a)})).join("\n")},formatRows:function(a){return a.map(c).join("\n")}}}function $d(a){if(a.ok)return a;throw Error(a.status+":"+a.statusText);}function xb(a){return new Promise((b,c)=>{let d=new Image;d.onload=(a)=>b(d);d.onerror=(a)=>c(a);d.src=a})}function yb(a){return fetch(a).then($d).then((a)=>a.text())}function ae(a,b){b=null!=b?
b:Date.now()+""+Math.random();let c="namespace:"+b+", url:"+a+", random:"+Date.now()+Math.random();zb.set(c,!1);if(Nc.has(b)){let a=Nc.get(b);zb.set(a,!0)}Nc.set(b,c);return new Promise((b,e)=>{if(Array.isArray(a)){var d=a.map((a)=>be(a));d=Promise.all(d)}else d=be(a);d.then((a)=>{zb.get(c)||b(a)}).catch((a)=>{zb.get(c)||e(a)})})}function be(a){if(Oc.has(a))return Oc.get(a);var b=ce;var c=a.split(".");c=c[c.length-1];b.has(c)||console.warn("Trying to load url: "+a+' with an unknown filetype. Assuming "text".');
b=b.has(c)?c:"text";b=ce.get(b)(a);Oc.set(a,b);return b}function de(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function gg(a){return function(b,c){return de(a(b),c)}}function hg({changed:a}){if(a.layer||a.classFilter||a.id||a.layout||a.filter){let {root:b,id:c,layer:d,classFilter:e,filter:g,layout:f}=this.get();this.set({loading:!0});let h=ig[c];this.set({config:h});let k=!1,n=!1;switch(h.layer[d]){case "mixed4a":n=k=!0;break;case "mixed4d":k=!0;n=!1;break;case "mixed5a":k=!0;n=!1;break;case "mixed5b":k=
!0,n=!1}null!==e&&(null==h.class_filter&&(h.class_filter="None"),null==h.filter&&(h.filter="None"),Array.isArray(h.grid_size)||(h.grid_size=[h.grid_size]),Array.isArray(h.class_filter)||(h.class_filter=[h.class_filter]),Array.isArray(h.layer)||(h.layer=[h.layer]),Array.isArray(h.layout)||(h.layout=[h.layout]),Array.isArray(h.filter)||(h.filter=[h.filter]),a=h.grid_size.map((a)=>`${b}/${c}/web/web--grid_size=${a}--layout=${h.layout[f]}--class_filter=${h.class_filter[e]}--filter=${h.filter[g]}--layer=${h.layer[d]}--model=${h.model}--sample_images=${h.sample_images}--sample_type=${h.sample_type}.json`),
ae(a).then((a)=>{let m=Array(a.length);a.forEach((a,A)=>{let l=h.grid_size[A],C=h.tile_size;Array(l/C).keys();let p=[...Array(l).keys()].map((a)=>Array(l));for(let m of a){void 0!==m.x&&(m.grid_x=m.x);void 0!==m.y&&(m.grid_y=m.y);void 0!==m.n&&(m.num_activations=m.n);void 0!==m.i&&(m.top_class_indices=m.i);void 0!==m.v&&(m.top_class_values=m.v);void 0!==m.f&&(m.full_class_values=m.f,m.full_class_indices=Ja);a=k?l-m.grid_x-1:m.grid_x;let A=n?l-m.grid_y-1:m.grid_y;m.gx=a/l;m.gy=A/l;m.gw=1/l;let r=Math.floor(m.grid_x/
C),q=Math.floor(m.grid_y/C);m.localX=m.grid_x%C;m.localY=m.grid_y%C;m.url=`${b}/${c}/render/render--x=${r}--y=${q}--tries=${h.tries}--alpha=${h.alpha?"True":"False"}--tile_size=${h.tile_size}--whiten=${h.whiten}--steps=${h.steps}--icon_size=${h.icon_size}--grid_size=${l}--layout=${h.layout[f]}--class_filter=${h.class_filter[e]}--filter=${h.filter[g]}--layer=${h.layer[d]}--model=${h.model}--sample_images=${h.sample_images}--sample_type=${h.sample_type}.jpg`;p[a][A]=m}m[A]=p});this.set({layers:m,loading:!1})}))}}
function ee(a){u(this,a);this._state=q({fingerprint:Math.random()+Date.now(),root:"https://storage.googleapis.com/activation-atlas/build",id:"inceptionv1",labels:Va.inception,layer:0,classFilter:0,filter:0,layout:0,config:null,layers:null,loading:!1},a.data);this._intro=!0;this._handlers.update=[hg];this._fragment={c:G,m:G,p:G,d:G};this.root._oncreate.push(()=>{this.fire("update",{changed:pa({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}
function Pc(){for(var a=0,b=arguments.length,c={},d;a<b;++a){if(!(d=arguments[a]+"")||d in c)throw Error("illegal type: "+d);c[d]=[]}return new Ab(c)}function Ab(a){this._=a}function jg(a,b){return a.trim().split(/^|\s+/).map(function(a){var c="",e=a.indexOf(".");0<=e&&(c=a.slice(e+1),a=a.slice(0,e));if(a&&!b.hasOwnProperty(a))throw Error("unknown type: "+a);return{type:a,name:c}})}function fe(a,b,c){for(var d=0,e=a.length;d<e;++d)if(a[d].name===b){a[d]=kg;a=a.slice(0,d).concat(a.slice(d+1));break}null!=
c&&a.push({name:b,value:c});return a}function Bb(a){var b=a+="",c=b.indexOf(":");0<=c&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1));return ge.hasOwnProperty(b)?{space:ge[b],local:a}:a}function lg(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===c&&"http://www.w3.org/1999/xhtml"===b.documentElement.namespaceURI?b.createElement(a):b.createElementNS(c,a)}}function mg(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}
function he(a){a=Bb(a);return(a.local?mg:lg)(a)}function ng(){}function Qc(a){return null==a?ng:function(){return this.querySelector(a)}}function og(){return[]}function ie(a){return null==a?og:function(){return this.querySelectorAll(a)}}function je(a){return Array(a.length)}function Ka(a,b){this.ownerDocument=a.ownerDocument;this.namespaceURI=a.namespaceURI;this._next=null;this._parent=a;this.__data__=b}function pg(a){return function(){return a}}function qg(a,b,c,d,e,g){for(var f=0,h,k=b.length,n=
g.length;f<n;++f)(h=b[f])?(h.__data__=g[f],d[f]=h):c[f]=new Ka(a,g[f]);for(;f<k;++f)if(h=b[f])e[f]=h}function rg(a,b,c,d,e,g,f){var h,k,n={},m=b.length,A=g.length,l=Array(m),p;for(h=0;h<m;++h)if(k=b[h])l[h]=p="$"+f.call(k,k.__data__,h,b),p in n?e[h]=k:n[p]=k;for(h=0;h<A;++h)p="$"+f.call(a,g[h],h,g),(k=n[p])?(d[h]=k,k.__data__=g[h],n[p]=null):c[h]=new Ka(a,g[h]);for(h=0;h<m;++h)(k=b[h])&&n[l[h]]===k&&(e[h]=k)}function sg(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function tg(a){return function(){this.removeAttribute(a)}}
function ug(a){return function(){this.removeAttributeNS(a.space,a.local)}}function vg(a,b){return function(){this.setAttribute(a,b)}}function wg(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}function xg(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}}function yg(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}function zg(a){return function(){this.style.removeProperty(a)}}
function Ag(a,b,c){return function(){this.style.setProperty(a,b,c)}}function Bg(a,b,c){return function(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}}function da(a,b){return a.style.getPropertyValue(b)||(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView).getComputedStyle(a,null).getPropertyValue(b)}function Cg(a){return function(){delete this[a]}}function Dg(a,b){return function(){this[a]=b}}function Eg(a,b){return function(){var c=
b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}function Rc(a){return a.classList||new ke(a)}function ke(a){this._node=a;this._names=(a.getAttribute("class")||"").trim().split(/^|\s+/)}function le(a,b){a=Rc(a);for(var c=-1,d=b.length;++c<d;)a.add(b[c])}function me(a,b){a=Rc(a);for(var c=-1,d=b.length;++c<d;)a.remove(b[c])}function Fg(a){return function(){le(this,a)}}function Gg(a){return function(){me(this,a)}}function Hg(a,b){return function(){(b.apply(this,arguments)?le:me)(this,a)}}function Ig(){this.textContent=
""}function Jg(a){return function(){this.textContent=a}}function Kg(a){return function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}}function Lg(){this.innerHTML=""}function Mg(a){return function(){this.innerHTML=a}}function Ng(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}function Og(){this.nextSibling&&this.parentNode.appendChild(this)}function Pg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qg(){return null}
function Rg(){var a=this.parentNode;a&&a.removeChild(this)}function Sg(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Tg(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function Ug(a,b,c){a=ne(a,b,c);return function(b){var c=b.relatedTarget;c&&(c===this||c.compareDocumentPosition(this)&8)||a.call(this,b)}}function ne(a,b,c){return function(d){var e=v;v=d;try{a.call(this,this.__data__,b,c)}finally{v=e}}}function Vg(a){return a.trim().split(/^|\s+/).map(function(a){var b=
"",d=a.indexOf(".");0<=d&&(b=a.slice(d+1),a=a.slice(0,d));return{type:a,name:b}})}function Wg(a){return function(){var b=this.__on;if(b){for(var c=0,d=-1,e=b.length,g;c<e;++c)(g=b[c],a.type&&g.type!==a.type||g.name!==a.name)?b[++d]=g:this.removeEventListener(g.type,g.listener,g.capture);++d?b.length=d:delete this.__on}}}function Xg(a,b,c){var d=oe.hasOwnProperty(a.type)?Ug:ne;return function(e,g,f){e=this.__on;var h;g=d(b,g,f);if(e){f=0;for(var k=e.length;f<k;++f)if((h=e[f]).type===a.type&&h.name===
a.name){this.removeEventListener(h.type,h.listener,h.capture);this.addEventListener(h.type,h.listener=g,h.capture=c);h.value=b;return}}this.addEventListener(a.type,g,c);h={type:a.type,name:a.name,value:b,listener:g,capture:c};e?e.push(h):this.__on=[h]}}function pe(a,b,c){var d=a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView,e=d.CustomEvent;"function"===typeof e?e=new e(b,c):(e=d.document.createEvent("Event"),c?(e.initEvent(b,c.bubbles,c.cancelable),e.detail=c.detail):e.initEvent(b,
!1,!1));a.dispatchEvent(e)}function Yg(a,b){return function(){return pe(this,a,b)}}function Zg(a,b){return function(){return pe(this,a,b.apply(this,arguments))}}function F(a,b){this._groups=a;this._parents=b}function ra(){return new F([[document.documentElement]],qe)}function Aa(a){return"string"===typeof a?new F([[document.querySelector(a)]],[document.documentElement]):new F([[a]],qe)}function re(){for(var a=v,b;b=a.sourceEvent;)a=b;return a}function se(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint)return c=
c.createSVGPoint(),c.x=b.clientX,c.y=b.clientY,c=c.matrixTransform(a.getScreenCTM().inverse()),[c.x,c.y];c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function Cb(a){var b=re();b.changedTouches&&(b=b.changedTouches[0]);return se(a,b)}function te(a,b,c){3>arguments.length&&(c=b,b=re().changedTouches);for(var d=0,e=b?b.length:0,g;d<e;++d)if((g=b[d]).identifier===c)return se(a,g);return null}function Sc(){v.preventDefault();v.stopImmediatePropagation()}
function $g(a){var b=a.document.documentElement;a=Aa(a).on("dragstart.drag",Sc,!0);if("onselectstart"in b)a.on("selectstart.drag",Sc,!0);else b.__noselect=b.style.MozUserSelect,b.style.MozUserSelect="none"}function ah(a,b){var c=a.document.documentElement,d=Aa(a).on("dragstart.drag",null);b&&(d.on("click.drag",Sc,!0),setTimeout(function(){d.on("click.drag",null)},0));if("onselectstart"in c)d.on("selectstart.drag",null);else c.style.MozUserSelect=c.__noselect,delete c.__noselect}function La(a,b,c){a.prototype=
b.prototype=c;c.constructor=a}function Wa(a,b){a=Object.create(a.prototype);for(var c in b)a[c]=b[c];return a}function Y(){}function sa(a){var b;a=(a+"").trim().toLowerCase();return(b=bh.exec(a))?(b=parseInt(b[1],16),new B(b>>8&15|b>>4&240,b>>4&15|b&240,(b&15)<<4|b&15,1)):(b=ch.exec(a))?ue(parseInt(b[1],16)):(b=dh.exec(a))?new B(b[1],b[2],b[3],1):(b=eh.exec(a))?new B(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=fh.exec(a))?ve(b[1],b[2],b[3],b[4]):(b=gh.exec(a))?ve(255*b[1]/100,255*b[2]/100,255*b[3]/
100,b[4]):(b=hh.exec(a))?we(b[1],b[2]/100,b[3]/100,1):(b=ih.exec(a))?we(b[1],b[2]/100,b[3]/100,b[4]):xe.hasOwnProperty(a)?ue(xe[a]):"transparent"===a?new B(NaN,NaN,NaN,0):null}function ue(a){return new B(a>>16&255,a>>8&255,a&255,1)}function ve(a,b,c,d){0>=d&&(a=b=c=NaN);return new B(a,b,c,d)}function Tc(a){a instanceof Y||(a=sa(a));if(!a)return new B;a=a.rgb();return new B(a.r,a.g,a.b,a.opacity)}function Uc(a,b,c,d){return 1===arguments.length?Tc(a):new B(a,b,c,null==d?1:d)}function B(a,b,c,d){this.r=
+a;this.g=+b;this.b=+c;this.opacity=+d}function Vc(a){a=Math.max(0,Math.min(255,Math.round(a)||0));return(16>a?"0":"")+a.toString(16)}function we(a,b,c,d){0>=d?a=b=c=NaN:0>=c||1<=c?a=b=NaN:0>=b&&(a=NaN);return new ea(a,b,c,d)}function jh(a){if(a instanceof ea)return new ea(a.h,a.s,a.l,a.opacity);a instanceof Y||(a=sa(a));if(!a)return new ea;if(a instanceof ea)return a;a=a.rgb();var b=a.r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),g=Math.max(b,c,d),f=NaN,h=g-e,k=(g+e)/2;h?(f=b===g?(c-d)/h+6*(c<d):c===
g?(d-b)/h+2:(b-c)/h+4,h/=.5>k?g+e:2-g-e,f*=60):h=0<k&&1>k?0:f;return new ea(f,h,k,a.opacity)}function ea(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}function Wc(a,b,c){return 255*(60>a?b+(c-b)*a/60:180>a?c:240>a?b+(c-b)*(240-a)/60:b)}function Xc(a){if(a instanceof I)return new I(a.l,a.a,a.b,a.opacity);if(a instanceof ka){if(isNaN(a.h))return new I(a.l,0,0,a.opacity);var b=a.h*ye;return new I(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}a instanceof B||(a=Tc(a));var c=Yc(a.r),d=Yc(a.g),
e=Yc(a.b);b=Zc(.2225045*c+.7168786*d+.0606169*e);if(c===d&&d===e)var g=c=b;else g=Zc((.4360747*c+.3850649*d+.1430804*e)/.96422),c=Zc((.0139322*c+.0971045*d+.7141733*e)/.82521);return new I(116*b-16,500*(g-b),200*(b-c),a.opacity)}function I(a,b,c,d){this.l=+a;this.a=+b;this.b=+c;this.opacity=+d}function Zc(a){return a>kh?Math.pow(a,1/3):a/ze+Ae}function $c(a){return a>la?a*a*a:ze*(a-Ae)}function ad(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Yc(a){return.04045>=(a/=255)?
a/12.92:Math.pow((a+.055)/1.055,2.4)}function lh(a){if(a instanceof ka)return new ka(a.h,a.c,a.l,a.opacity);a instanceof I||(a=Xc(a));if(0===a.a&&0===a.b)return new ka(NaN,0,a.l,a.opacity);var b=Math.atan2(a.b,a.a)*Be;return new ka(0>b?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function ka(a,b,c,d){this.h=+a;this.c=+b;this.l=+c;this.opacity=+d}function Ba(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}function Ce(a){return function(){return a}}function mh(a,b){return function(c){return a+
c*b}}function nh(a,b,c){return a=Math.pow(a,c),b=Math.pow(b,c)-a,c=1/c,function(d){return Math.pow(a+d*b,c)}}function oh(a){return 1===(a=+a)?De:function(b,c){return c-b?nh(b,c,a):Ce(isNaN(b)?c:b)}}function De(a,b){var c=b-a;return c?mh(a,c):Ce(isNaN(a)?b:a)}function ta(a,b){return a=+a,b-=a,function(c){return a+b*c}}function ph(a){return function(){return a}}function qh(a){return function(b){return a(b)+""}}function rh(a,b){var c=bd.lastIndex=cd.lastIndex=0,d,e,g,f=-1,h=[],k=[];a+="";for(b+="";(d=
bd.exec(a))&&(e=cd.exec(b));)(g=e.index)>c&&(g=b.slice(c,g),h[f]?h[f]+=g:h[++f]=g),(d=d[0])===(e=e[0])?h[f]?h[f]+=e:h[++f]=e:(h[++f]=null,k.push({i:f,x:ta(d,e)})),c=cd.lastIndex;c<b.length&&(g=b.slice(c),h[f]?h[f]+=g:h[++f]=g);return 2>h.length?k[0]?qh(k[0].x):ph(b):(b=k.length,function(a){for(var c=0,d;c<b;++c)h[(d=k[c]).i]=d.x(a);return h.join("")})}function Ee(a,b,c,d,e,g){var f,h,k;if(f=Math.sqrt(a*a+b*b))a/=f,b/=f;if(k=a*c+b*d)c-=a*k,d-=b*k;if(h=Math.sqrt(c*c+d*d))c/=h,d/=h,k/=h;a*d<b*c&&(a=
-a,b=-b,k=-k,f=-f);return{translateX:e,translateY:g,rotate:Math.atan2(b,a)*Fe,skewX:Math.atan(k)*Fe,scaleX:f,scaleY:h}}function Ge(a,b,c,d){function e(a){return a.length?a.pop()+" ":""}function g(a,d,e,f,g,h){a!==e||d!==f?(g=g.push("translate(",null,b,null,c),h.push({i:g-4,x:ta(a,e)},{i:g-2,x:ta(d,f)})):(e||f)&&g.push("translate("+e+b+f+c)}function f(a,b,c,f){a!==b?(180<a-b?b+=360:180<b-a&&(a+=360),f.push({i:c.push(e(c)+"rotate(",null,d)-2,x:ta(a,b)})):b&&c.push(e(c)+"rotate("+b+d)}function h(a,b,
c,f){a!==b?f.push({i:c.push(e(c)+"skewX(",null,d)-2,x:ta(a,b)}):b&&c.push(e(c)+"skewX("+b+d)}function k(a,b,c,d,f,g){a!==c||b!==d?(f=f.push(e(f)+"scale(",null,",",null,")"),g.push({i:f-4,x:ta(a,c)},{i:f-2,x:ta(b,d)})):1===c&&1===d||f.push(e(f)+"scale("+c+","+d+")")}return function(b,c){var d=[],e=[];b=a(b);c=a(c);g(b.translateX,b.translateY,c.translateX,c.translateY,d,e);f(b.rotate,c.rotate,d,e);h(b.skewX,c.skewX,d,e);k(b.scaleX,b.scaleY,c.scaleX,c.scaleY,d,e);b=c=null;return function(a){for(var b=
-1,c=e.length,f;++b<c;)d[(f=e[b]).i]=f.x(a);return d.join("")}}}function He(a){return((a=Math.exp(a))+1/a)/2}function sh(a,b){var c=a[0],d=a[1],e=a[2];a=b[2];var g=b[0]-c,f=b[1]-d,h=g*g+f*f;if(1E-12>h){var k=Math.log(a/e)/Xa;a=function(a){return[c+a*g,d+a*f,e*Math.exp(Xa*a*k)]}}else{var n=Math.sqrt(h);b=(a*a-e*e+4*h)/(4*e*n);a=(a*a-e*e-4*h)/(4*a*n);var m=Math.log(Math.sqrt(b*b+1)-b);k=(Math.log(Math.sqrt(a*a+1)-a)-m)/Xa;a=function(a){a*=k;var b=He(m),h=Xa*a+m;var l=((h=Math.exp(2*h))-1)/(h+1);var A=
m;h=((A=Math.exp(A))-1/A)/2;l=e/(2*n)*(b*l-h);return[c+l*g,d+l*f,e*b/He(Xa*a+m)]}}a.duration=1E3*k;return a}function Db(){return Ca||(Ie(th),Ca=Ya.now()+Eb)}function th(){Ca=0}function Ma(){this._call=this._time=this._next=null}function Je(a,b,c){var d=new Ma;d.restart(a,b,c);return d}function Ke(){Ca=(Fb=Ya.now())+Eb;Na=ua=0;try{Db();++Na;for(var a=Oa,b;a;)0<=(b=Ca-a._time)&&a._call.call(null,b),a=a._next;--Na}finally{Na=0;a=Oa;for(var c=Infinity;a;)if(a._call){c>a._time&&(c=a._time);var d=a;a=a._next}else b=
a._next,a._next=null,a=d?d._next=b:Oa=b;Za=d;dd(c);Ca=0}}function uh(){var a=Ya.now(),b=a-Fb;1E3<b&&(Eb-=b,Fb=a)}function dd(a){Na||(ua&&(ua=clearTimeout(ua)),24<a-Ca?(Infinity>a&&(ua=setTimeout(Ke,a-Ya.now()-Eb)),$a&&($a=clearInterval($a))):($a||(Fb=Ya.now(),$a=setInterval(uh,1E3)),Na=1,Ie(Ke)))}function Le(a,b,c){var d=new Ma;b=null==b?0:+b;d.restart(function(c){d.stop();a(c+b)},b,c);return d}function Gb(a,b,c,d,e,g){var f=a.__transition;if(!f)a.__transition={};else if(c in f)return;vh(a,c,{name:b,
index:d,group:e,on:wh,tween:xh,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:0})}function ed(a,b){a=Z(a,b);if(0<a.state)throw Error("too late; already scheduled");return a}function Da(a,b){a=Z(a,b);if(2<a.state)throw Error("too late; already started");return a}function Z(a,b){a=a.__transition;if(!a||!(a=a[b]))throw Error("transition not found");return a}function vh(a,b,c){function d(k){var n,m;if(1!==c.state)return g();for(p in f){var l=f[p];if(l.name===c.name){if(3===
l.state)return Le(d);4===l.state?(l.state=6,l.timer.stop(),l.on.call("interrupt",a,a.__data__,l.index,l.group),delete f[p]):+p<b&&(l.state=6,l.timer.stop(),delete f[p])}}Le(function(){3===c.state&&(c.state=4,c.timer.restart(e,c.delay,c.time),e(k))});c.state=2;c.on.call("start",a,a.__data__,c.index,c.group);if(2===c.state){c.state=3;h=Array(m=c.tween.length);var p=0;for(n=-1;p<m;++p)if(l=c.tween[p].value.call(a,a.__data__,c.index,c.group))h[++n]=l;h.length=n+1}}function e(b){b=b<c.duration?c.ease.call(null,
b/c.duration):(c.timer.restart(g),c.state=5,1);for(var d=-1,e=h.length;++d<e;)h[d].call(null,b);5===c.state&&(c.on.call("end",a,a.__data__,c.index,c.group),g())}function g(){c.state=6;c.timer.stop();delete f[b];for(var d in f)return;delete a.__transition}var f=a.__transition,h;f[b]=c;c.timer=Je(function(a){c.state=1;c.timer.restart(d,c.delay,c.time);c.delay<=a&&d(a-c.delay)},0,c.time)}function Pa(a,b){var c=a.__transition,d,e=!0,g;if(c){b=null==b?null:b+"";for(g in c)if((d=c[g]).name!==b)e=!1;else{var f=
2<d.state&&5>d.state;d.state=6;d.timer.stop();f&&d.on.call("interrupt",a,a.__data__,d.index,d.group);delete c[g]}e&&delete a.__transition}}function yh(a,b){var c,d;return function(){var e=Da(this,a),g=e.tween;if(g!==c){d=c=g;g=0;for(var f=d.length;g<f;++g)if(d[g].name===b){d=d.slice();d.splice(g,1);break}}e.tween=d}}function zh(a,b,c){var d,e;if("function"!==typeof c)throw Error();return function(){var g=Da(this,a),f=g.tween;if(f!==d){e=(d=f).slice();f={name:b,value:c};for(var h=0,k=e.length;h<k;++h)if(e[h].name===
b){e[h]=f;break}h===k&&e.push(f)}g.tween=e}}function fd(a,b,c){var d=a._id;a.each(function(){var a=Da(this,d);(a.value||(a.value={}))[b]=c.apply(this,arguments)});return function(a){return Z(a,d).value[b]}}function Me(a,b){var c;return("number"===typeof b?ta:b instanceof sa?Ne:(c=sa(b))?(b=c,Ne):rh)(a,b)}function Ah(a){return function(){this.removeAttribute(a)}}function Bh(a){return function(){this.removeAttributeNS(a.space,a.local)}}function Ch(a,b,c){var d,e;return function(){var g=this.getAttribute(a);
return g===c?null:g===d?e:e=b(d=g,c)}}function Dh(a,b,c){var d,e;return function(){var g=this.getAttributeNS(a.space,a.local);return g===c?null:g===d?e:e=b(d=g,c)}}function Eh(a,b,c){var d,e,g;return function(){var f=c(this);if(null==f)return void this.removeAttribute(a);var h=this.getAttribute(a);return h===f?null:h===d&&f===e?g:g=b(d=h,e=f)}}function Fh(a,b,c){var d,e,g;return function(){var f=c(this);if(null==f)return void this.removeAttributeNS(a.space,a.local);var h=this.getAttributeNS(a.space,
a.local);return h===f?null:h===d&&f===e?g:g=b(d=h,e=f)}}function Gh(a,b){function c(){var c=this,e=b.apply(c,arguments);return e&&function(b){c.setAttributeNS(a.space,a.local,e(b))}}c._value=b;return c}function Hh(a,b){function c(){var c=this,e=b.apply(c,arguments);return e&&function(b){c.setAttribute(a,e(b))}}c._value=b;return c}function Ih(a,b){return function(){ed(this,a).delay=+b.apply(this,arguments)}}function Jh(a,b){return b=+b,function(){ed(this,a).delay=b}}function Kh(a,b){return function(){Da(this,
a).duration=+b.apply(this,arguments)}}function Lh(a,b){return b=+b,function(){Da(this,a).duration=b}}function Mh(a,b){if("function"!==typeof b)throw Error();return function(){Da(this,a).ease=b}}function Nh(a){return(a+"").trim().split(/^|\s+/).every(function(a){var b=a.indexOf(".");0<=b&&(a=a.slice(0,b));return!a||"start"===a})}function Oh(a,b,c){var d,e,g=Nh(b)?ed:Da;return function(){var f=g(this,a),h=f.on;if(h!==d)(e=(d=h).copy()).on(b,c);f.on=e}}function Ph(a){return function(){var b=this.parentNode,
c;for(c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}}function Qh(a,b){var c,d,e;return function(){var g=da(this,a),f=(this.style.removeProperty(a),da(this,a));return g===f?null:g===c&&f===d?e:e=b(c=g,d=f)}}function Rh(a){return function(){this.style.removeProperty(a)}}function Sh(a,b,c){var d,e;return function(){var g=da(this,a);return g===c?null:g===d?e:e=b(d=g,c)}}function Th(a,b,c){var d,e,g;return function(){var f=da(this,a),h=c(this);null==h&&(h=(this.style.removeProperty(a),
da(this,a)));return f===h?null:f===d&&h===e?g:g=b(d=f,e=h)}}function Uh(a,b,c){function d(){var d=this,g=b.apply(d,arguments);return g&&function(b){d.style.setProperty(a,g(b),c)}}d._value=b;return d}function Vh(a){return function(){this.textContent=a}}function Wh(a){return function(){var b=a(this);this.textContent=null==b?"":b}}function ma(a,b,c,d){this._groups=a;this._parents=b;this._name=c;this._id=d}function ab(a){return function(){return a}}function Xh(a,b,c){this.target=a;this.type=b;this.transform=
c}function na(a,b,c){this.k=a;this.x=b;this.y=c}function Oe(a){return a.__zoom||Hb}function va(){v.preventDefault();v.stopImmediatePropagation()}function Yh(){return!v.button}function Zh(){var a=this;if(a instanceof SVGElement){a=a.ownerSVGElement||a;var b=a.width.baseVal.value;a=a.height.baseVal.value}else b=a.clientWidth,a=a.clientHeight;return[[0,0],[b,a]]}function Pe(){return this.__zoom||Hb}function $h(){return-v.deltaY*(v.deltaMode?120:1)/500}function ai(){return"ontouchstart"in this}function bi(a,
b,c){var d=a.invertX(b[0][0])-c[0][0],e=a.invertX(b[1][0])-c[1][0],g=a.invertY(b[0][1])-c[0][1];b=a.invertY(b[1][1])-c[1][1];return a.translate(e>d?(d+e)/2:Math.min(0,d)||Math.max(0,e),b>g?(g+b)/2:Math.min(0,g)||Math.max(0,b))}function ci(){function a(a){a.property("__zoom",Pe).on("wheel.zoom",h).on("mousedown.zoom",k).on("dblclick.zoom",n).filter(x).on("touchstart.zoom",m).on("touchmove.zoom",l).on("touchend.zoom touchcancel.zoom",p).style("touch-action","none").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)")}function b(a,b){b=Math.max(E[0],Math.min(E[1],b));return b===a.k?a:new na(b,a.x,a.y)}function c(a,b,c){var d=b[0]-c[0]*a.k;b=b[1]-c[1]*a.k;return d===a.x&&b===a.y?a:new na(a.k,d,b)}function d(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function e(a,b,c){a.on("start.zoom",function(){g(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){g(this,arguments).end()}).tween("zoom",function(){var a=arguments,e=g(this,a),f=q.apply(this,a),h=c||d(f),k=Math.max(f[1][0]-
f[0][0],f[1][1]-f[0][1]);f=this.__zoom;var n="function"===typeof b?b.apply(this,a):b,m=u(f.invert(h).concat(k/f.k),n.invert(h).concat(k/n.k));return function(a){if(1===a)a=n;else{a=m(a);var b=k/a[2];a=new na(b,h[0]-a[0]*b,h[1]-a[1]*b)}e.zoom(null,a)}})}function g(a,b){for(var c=0,d=N.length,e;c<d;++c)if((e=N[c]).that===a)return e;return new f(a,b)}function f(a,b){this.that=a;this.args=b;this.index=-1;this.active=0;this.extent=q.apply(a,b)}function h(){if(r.apply(this,arguments)){var a=g(this,arguments),
d=this.__zoom,e=Math.max(E[0],Math.min(E[1],d.k*Math.pow(2,w.apply(this,arguments)))),f=Cb(this);if(a.wheel){if(a.mouse[0][0]!==f[0]||a.mouse[0][1]!==f[1])a.mouse[1]=d.invert(a.mouse[0]=f);clearTimeout(a.wheel)}else{if(d.k===e)return;a.mouse=[f,d.invert(f)];Pa(this);a.start()}va();a.wheel=setTimeout(function(){a.wheel=null;a.end()},150);a.zoom("mouse",t(c(b(d,e),a.mouse[0],a.mouse[1]),a.extent,y))}}function k(){if(!qa&&r.apply(this,arguments)){var a=g(this,arguments),b=Aa(v.view).on("mousemove.zoom",
function(){va();if(!a.moved){var b=v.clientX-e,d=v.clientY-f;a.moved=b*b+d*d>B}a.zoom("mouse",t(c(a.that.__zoom,a.mouse[0]=Cb(a.that),a.mouse[1]),a.extent,y))},!0).on("mouseup.zoom",function(){b.on("mousemove.zoom mouseup.zoom",null);ah(v.view,a.moved);va();a.end()},!0),d=Cb(this),e=v.clientX,f=v.clientY;$g(v.view);v.stopImmediatePropagation();a.mouse=[d,this.__zoom.invert(d)];Pa(this);a.start()}}function n(){if(r.apply(this,arguments)){var d=this.__zoom,f=Cb(this),g=d.invert(f);d=t(c(b(d,d.k*(v.shiftKey?
.5:2)),f,g),q.apply(this,arguments),y);va();0<Dc?Aa(this).transition().duration(Dc).call(e,d,f):Aa(this).call(a.transform,d)}}function m(){if(r.apply(this,arguments)){var a=g(this,arguments),b=v.changedTouches,c=b.length,d;v.stopImmediatePropagation();for(d=0;d<c;++d){var e=b[d];var f=te(this,b,e.identifier);f=[f,this.__zoom.invert(f),e.identifier];if(a.touch0)a.touch1||(a.touch1=f);else{a.touch0=f;var h=!0}}if(H&&(H=clearTimeout(H),!a.touch1)){a.end();(f=Aa(this).on("dblclick.zoom"))&&f.apply(this,
arguments);return}h&&(H=setTimeout(function(){H=null},500),Pa(this),a.start())}}function l(){var a=g(this,arguments),d=v.changedTouches,e=d.length,f;va();H&&(H=clearTimeout(H));for(f=0;f<e;++f){var h=d[f];var k=te(this,d,h.identifier);a.touch0&&a.touch0[2]===h.identifier?a.touch0[0]=k:a.touch1&&a.touch1[2]===h.identifier&&(a.touch1[0]=k)}h=a.that.__zoom;if(a.touch1){k=a.touch0[0];d=a.touch0[1];f=a.touch1[0];e=a.touch1[1];var n=(n=f[0]-k[0])*n+(n=f[1]-k[1])*n;var m=(m=e[0]-d[0])*m+(m=e[1]-d[1])*m;
h=b(h,Math.sqrt(n/m));k=[(k[0]+f[0])/2,(k[1]+f[1])/2];n=[(d[0]+e[0])/2,(d[1]+e[1])/2]}else if(a.touch0)k=a.touch0[0],n=a.touch0[1];else return;a.zoom("touch",t(c(h,k,n),a.extent,y))}function p(){var a=g(this,arguments),b=v.changedTouches,c=b.length,d;v.stopImmediatePropagation();qa&&clearTimeout(qa);qa=setTimeout(function(){qa=null},500);for(d=0;d<c;++d){var e=b[d];a.touch0&&a.touch0[2]===e.identifier?delete a.touch0:a.touch1&&a.touch1[2]===e.identifier&&delete a.touch1}a.touch1&&!a.touch0&&(a.touch0=
a.touch1,delete a.touch1);a.touch0?a.touch0[1]=this.__zoom.invert(a.touch0[0]):a.end()}var r=Yh,q=Zh,t=bi,w=$h,x=ai,E=[0,Infinity],y=[[-Infinity,-Infinity],[Infinity,Infinity]],Dc=250,u=sh,N=[],z=Pc("start","zoom","end"),H,qa,B=0;a.transform=function(a,b){var c=a.selection?a.selection():a;c.property("__zoom",Pe);a!==c?e(a,b):c.interrupt().each(function(){g(this,arguments).start().zoom(null,"function"===typeof b?b.apply(this,arguments):b).end()})};a.scaleBy=function(b,c){a.scaleTo(b,function(){var a=
this.__zoom.k,b="function"===typeof c?c.apply(this,arguments):c;return a*b})};a.scaleTo=function(e,f){a.transform(e,function(){var a=q.apply(this,arguments),e=this.__zoom,g=d(a),h=e.invert(g),k="function"===typeof f?f.apply(this,arguments):f;return t(c(b(e,k),g,h),a,y)})};a.translateBy=function(b,c,d){a.transform(b,function(){return t(this.__zoom.translate("function"===typeof c?c.apply(this,arguments):c,"function"===typeof d?d.apply(this,arguments):d),q.apply(this,arguments),y)})};a.translateTo=function(b,
c,e){a.transform(b,function(){var a=q.apply(this,arguments),b=this.__zoom,f=d(a);return t(Hb.translate(f[0],f[1]).scale(b.k).translate("function"===typeof c?-c.apply(this,arguments):-c,"function"===typeof e?-e.apply(this,arguments):-e),a,y)})};f.prototype={start:function(){1===++this.active&&(this.index=N.push(this)-1,this.emit("start"));return this},zoom:function(a,b){this.mouse&&"mouse"!==a&&(this.mouse[1]=b.invert(this.mouse[0]));this.touch0&&"touch"!==a&&(this.touch0[1]=b.invert(this.touch0[0]));
this.touch1&&"touch"!==a&&(this.touch1[1]=b.invert(this.touch1[0]));this.that.__zoom=b;this.emit("zoom");return this},end:function(){0===--this.active&&(N.splice(this.index,1),this.index=-1,this.emit("end"));return this},emit:function(b){var c=new Xh(a,b,this.that.__zoom),d=z.apply;b=[b,this.that,this.args];var e=v;c.sourceEvent=v;v=c;try{d.apply(z,b)}finally{v=e}}};a.wheelDelta=function(b){return arguments.length?(w="function"===typeof b?b:ab(+b),a):w};a.filter=function(b){return arguments.length?
(r="function"===typeof b?b:ab(!!b),a):r};a.touchable=function(b){return arguments.length?(x="function"===typeof b?b:ab(!!b),a):x};a.extent=function(b){return arguments.length?(q="function"===typeof b?b:ab([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),a):q};a.scaleExtent=function(b){return arguments.length?(E[0]=+b[0],E[1]=+b[1],a):[E[0],E[1]]};a.translateExtent=function(b){return arguments.length?(y[0][0]=+b[0][0],y[1][0]=+b[1][0],y[0][1]=+b[0][1],y[1][1]=+b[1][1],a):[[y[0][0],y[0][1]],[y[1][0],y[1][1]]]};
a.constrain=function(b){return arguments.length?(t=b,a):t};a.duration=function(b){return arguments.length?(Dc=+b,a):Dc};a.interpolate=function(b){return arguments.length?(u=b,a):u};a.on=function(){var b=z.on.apply(z,arguments);return b===z?a:b};a.clickDistance=function(b){return arguments.length?(B=(b=+b)*b,a):Math.sqrt(B)};return a}function di(a){return function(){return a}}function gd(a,b){if(a===b||a!==a)return di(a);var c=typeof a;if(c!==typeof b||Array.isArray(a)!==Array.isArray(b))throw Error("Cannot interpolate values of different type");
if(Array.isArray(a)){var d=b.map(function(b,c){return gd(a[c],b)});return function(a){return d.map(function(b){return b(a)})}}if("object"===c){if(!a||!b)throw Error("Object cannot be null");if("[object Date]"===Object.prototype.toString.call(a)&&"[object Date]"===Object.prototype.toString.call(b)){a=a.getTime();b=b.getTime();var e=b-a;return function(b){return new Date(a+b*e)}}var g=Object.keys(b),f={},h={};g.forEach(function(c){f[c]=gd(a[c],b[c])});return function(a){g.forEach(function(b){h[b]=f[b](a)});
return h}}if("number"===c){var k=b-a;return function(b){return a+b*k}}throw Error("Cannot interpolate "+c+" values");}function ei(a){return a}function fi({clientWidth:a,clientHeight:b}){return Math.min(a,b)}function gi({msx:a,msy:b}){return void 0!=a&&void 0!=b}function hi({transform:a,msx:b,msy:c}){return a&&void 0!=b&&void 0!=c?[a.invertX(b),a.invertY(c)]:null}function ii({scale:a,translateX:b,translateY:c,minSize:d,clientWidth:e,clientHeight:g}){b=-b/a;c=-c/a;return[[b/d,(b+e/a)/d],[c/d,(c+g/a)/
d]]}function ji({extent:a}){return(a[0][0]+a[0][1])/2}function ki({extent:a}){return(a[1][0]+a[1][1])/2}function li(){let {z:a,scaleExtent:b,minSize:c,homeScale:d,homeX:e,homeY:g,disableBehaviors:f}=this.get(),h=this;a.wheelDelta(()=>{let a=-v.deltaY*(v.deltaMode?120:1)/500;v.ctrlKey&&(a*=10);return a});a.scaleExtent(b);let k=Aa(this.refs.root);this.set({selection:k,el:this.refs.root});f||a(k);a.filter(this.zoomEventFilter.bind(this));a.on("zoom",()=>{this.onzoom(h)});a.translateTo(k,e*c,g*c);a.scaleTo(k,
d)}function Qe({changed:a,current:b,previous:c}){void 0!=c&&(a.clientWidth||a.clientHeight)&&b.el&&this.update();let {}=this.get()}function mi(a,b){function c(){a.set({clientWidth:f.clientWidth,clientHeight:f.clientHeight})}function d(b){a.mouseMove(b)}function e(b){a.set({msx:null,msy:null})}function g(b){a.set({msx:null,msy:null})}var f,h=a._slotted.default,k;return{c(){f=l("div");a.root._beforecreate.push(c);f.addEventListener("mousemove",d,void 0);f.addEventListener("mousedown",e,void 0);f.addEventListener("mouseout",
g,void 0);f.className="d3zoom svelte-kaete3 svelte-ref-root"},m(b,d){b.insertBefore(f,d);h&&f.appendChild(h);k=ca(f,c);a.refs.root=f},p:G,d(b){b&&x(f);h&&xa(f,h);k.cancel();f.removeEventListener("mousemove",d,void 0);f.removeEventListener("mousedown",e,void 0);f.removeEventListener("mouseout",g,void 0);a.refs.root===f&&(a.refs.root=null)}}}function Qa(a){u(this,a);this.refs={};this._state=q({z:ci(),el:null,selection:null,transform:null,scaleExtent:[1,48],homeScale:1,homeX:.5,homeY:.5,scale:null,translateX:null,
translateY:null,k:1,x:0,y:0,msx:null,msy:null,disableBehaviors:!1,scrollWheel:!1},a.data);this._recompute({clientWidth:1,clientHeight:1,msx:1,msy:1,transform:1,minSize:1,scale:1,translateX:1,translateY:1,extent:1},this._state);this._intro=!0;this._handlers.state=[Qe];this._slotted=a.slots||{};Qe.call(this,{changed:pa({},this._state),current:this._state});this._fragment=mi(this,this._state);this.root._oncreate.push(()=>{li.call(this);this.fire("update",{changed:pa({},this._state),current:this._state})});
a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function ni({layers:a,layer:b}){if(null==a)return 0;let c=0;a[b].forEach((a)=>{a.forEach((a)=>{a&&500<a.num_activations&&(a=a.full_class_values[0],a>c&&(c=a))})});return c}function oi({viewWidth:a,screenResolution:b}){return a*b}function pi({viewHeight:a,screenResolution:b}){return a*b}function qi({scale:a,gridSize:b,config:c,classHeatmap:d,w:e,h:g,autoGridSizeMultiplier:f}){a=-1<b?+b:Math.floor(Math.sqrt(Math.max(e,g)*a/80/f/20));
c&&(a=Math.min(c.grid_size.length-1,a));-1<d&&(a=Math.min(2,a));return a}function ri({currentZoomIndex:a,layers:b}){return b?b[a]:[[]]}function si({labelsBufferContext:a,labels:b,fontSize:c,textColor:d,textShadowColor:e}){a&&b&&(a.globalAlpha=1,a.font=c+"px Helvetica",b.forEach((b,c)=>{a.lineWidth=3;a.lineJoin="round";a.strokeStyle=e;a.strokeText(b,c%10*150+10,20*Math.floor(c/10+1),80,15);a.fillStyle=d;a.fillStyle=d;a.fillText(b,c%10*150+10,20*Math.floor(c/10+1),80,15)}))}function ti({hoverIconData:a,
mouseGlobalPosition:b}){return b&&a&&a.gcx}function ui({currentLayerData:a,mouseGlobalPosition:b,w:c,h:d}){if(a){let e=a.length;if(b){let g=Math.floor(b[0]/Math.min(c,d)*e);b=Math.floor(b[1]/Math.min(c,d)*e);return a[b]&&a[b][g]?a[b][g]:{}}}return{}}function vi({hoverIconData:a,scale:b,w:c,h:d,translateX:e}){return a.gy*b*Math.min(c,d)+e}function wi({hoverIconData:a,scale:b,w:c,h:d,translateY:e}){return a.gx*b*Math.min(c,d)+e}function xi({hoverIconData:a,scale:b,w:c,h:d}){return a.gw*b*Math.min(c,
d)}function yi({mouseGlobalPosition:a,hoverIconData:b,enableHover:c}){return c&&a&&b&&b.gw}function zi(){let {tooltip:a}=this.store.get();this.refs.d3Zoom.on("zoom",()=>{a.hide()});let b=document.createElement("canvas");b.width=1500;b.height=2040;let c=b.getContext("2d");this.set({labelsBufferCanvas:b,labelsBufferContext:c})}function Ai({changed:a,current:b}){if(!b.context||a.viewWidth||a.viewHeight){var c=this.refs.labelsCanvas.getContext("2d");c.imageSmoothingEnabled=!1;this.set({context:this.refs.canvas.getContext("2d"),
labelsContext:c})}(a.loading||a.autoGridSizeMultiplier||a.labels||a.density||a.maxAttributionValue||a.classHeatmap||a.classHeatmapMultiplier||a.classHeatmapPositive||a.showLabels||a.viewWidth||a.viewHeight||a.scale||a.translateX||a.translateY||a.iconCrop||a.gridSize||a.layers)&&this.render();if(a.hoverIconData){var {tooltip:c}=this.store.get();let {showHoverIcon:a}=this.get();a?c.show(b.hoverIconData):c.hide()}if(a.showHoverIcon&&0==b.showHoverIcon){var {tooltip:a}=this.store.get();a.hide()}}function Bi(a,
b){function c(){a.set({viewWidth:g.clientWidth,viewHeight:g.clientHeight})}var d,e,g,f,h,k,n,m,A,r,q,t,v,w={};if(void 0!==b.ready){w.ready=b.ready;var z=!0}var E=new Pb({root:a.root,store:a.store,data:w,_bind(b,c){var d={};!z&&b.ready&&(d.ready=c.ready);a._set(d);z=void 0}});a.root._beforecreate.push(()=>{E._bind({ready:1},E.get())});var y=b.ready&&Re(a,b),u=b.showHoverIcon&&Se(a,b);w={homeX:b.homeX,homeY:b.homeY,homeScale:b.homeScale};if(void 0!==b.scale){w.scale=b.scale;var B=!0}if(void 0!==b.translateX){w.translateX=
b.translateX;var N=!0}if(void 0!==b.translateY){w.translateY=b.translateY;var D=!0}if(void 0!==b.mouseOver){w.mouseOver=b.mouseOver;var H=!0}if(void 0!==b.mouseGlobalPosition){w.mouseGlobalPosition=b.mouseGlobalPosition;var qa=!0}if(void 0!==b.extent){w.extent=b.extent;var G=!0}if(void 0!==b.scrollWheel){w.scrollWheel=b.scrollWheel;var ya=!0}if(void 0!==b.disableBehaviors){w.disableBehaviors=b.disableBehaviors;var F=!0}if(void 0!==b.gcx){w.gcx=b.gcx;var za=!0}if(void 0!==b.gcy){w.gcy=b.gcy;var ja=
!0}var K=new Qa({root:a.root,store:a.store,slots:{default:W()},data:w,_bind(b,c){var d={};!B&&b.scale&&(d.scale=c.scale);!N&&b.translateX&&(d.translateX=c.translateX);!D&&b.translateY&&(d.translateY=c.translateY);!H&&b.mouseOver&&(d.mouseOver=c.mouseOver);!qa&&b.mouseGlobalPosition&&(d.mouseGlobalPosition=c.mouseGlobalPosition);!G&&b.extent&&(d.extent=c.extent);!ya&&b.scrollWheel&&(d.scrollWheel=c.scrollWheel);!F&&b.disableBehaviors&&(d.disableBehaviors=c.disableBehaviors);!za&&b.gcx&&(d.gcx=c.gcx);
!ja&&b.gcy&&(d.gcy=c.gcy);a._set(d);ja=za=F=ya=G=qa=H=D=N=B=void 0}});a.root._beforecreate.push(()=>{K._bind({scale:1,translateX:1,translateY:1,mouseOver:1,mouseGlobalPosition:1,extent:1,scrollWheel:1,disableBehaviors:1,gcx:1,gcy:1},K.get())});a.refs.d3Zoom=K;return{c(){E._fragment.c();d=p("\n\n");y&&y.c();e=p("\n\n");g=l("div");f=l("canvas");n=p("\n    ");m=l("canvas");q=p("\n    ");u&&u.c();t=document.createComment("");K._fragment.c();f.width=h=b.viewWidth*b.screenResolution;f.height=k=b.viewHeight*
b.screenResolution;f.className="svelte-w9b5xg svelte-ref-canvas";m.width=A=b.viewWidth*b.screenResolution;m.height=r=b.viewHeight*b.screenResolution;m.className="svelte-w9b5xg svelte-ref-labelsCanvas";a.root._beforecreate.push(c);g.className="svelte-w9b5xg svelte-ref-root"},m(b,h){E._mount(b,h);b.insertBefore(d,h);y&&y.m(b,h);b.insertBefore(e,h);b.insertBefore(g,h);K._slotted.default.appendChild(f);a.refs.canvas=f;K._slotted.default.appendChild(n);K._slotted.default.appendChild(m);a.refs.labelsCanvas=
m;K._slotted.default.appendChild(q);u&&u.m(K._slotted.default,null);K._slotted.default.appendChild(t);K._mount(g,null);v=ca(g,c);a.refs.root=g},p(c,d){b=d;d={};!z&&c.ready&&(d.ready=b.ready,z=void 0!==b.ready);E._set(d);z=void 0;b.ready?y?y.p(c,b):(y=Re(a,b),y.c(),y.m(e.parentNode,e)):y&&(y.d(1),y=null);(c.viewWidth||c.screenResolution)&&h!==(h=b.viewWidth*b.screenResolution)&&(f.width=h);(c.viewHeight||c.screenResolution)&&k!==(k=b.viewHeight*b.screenResolution)&&(f.height=k);(c.viewWidth||c.screenResolution)&&
A!==(A=b.viewWidth*b.screenResolution)&&(m.width=A);(c.viewHeight||c.screenResolution)&&r!==(r=b.viewHeight*b.screenResolution)&&(m.height=r);b.showHoverIcon?u?u.p(c,b):(u=Se(a,b),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);d={};c.homeX&&(d.homeX=b.homeX);c.homeY&&(d.homeY=b.homeY);c.homeScale&&(d.homeScale=b.homeScale);!B&&c.scale&&(d.scale=b.scale,B=void 0!==b.scale);!N&&c.translateX&&(d.translateX=b.translateX,N=void 0!==b.translateX);!D&&c.translateY&&(d.translateY=b.translateY,D=void 0!==b.translateY);
!H&&c.mouseOver&&(d.mouseOver=b.mouseOver,H=void 0!==b.mouseOver);!qa&&c.mouseGlobalPosition&&(d.mouseGlobalPosition=b.mouseGlobalPosition,qa=void 0!==b.mouseGlobalPosition);!G&&c.extent&&(d.extent=b.extent,G=void 0!==b.extent);!ya&&c.scrollWheel&&(d.scrollWheel=b.scrollWheel,ya=void 0!==b.scrollWheel);!F&&c.disableBehaviors&&(d.disableBehaviors=b.disableBehaviors,F=void 0!==b.disableBehaviors);!za&&c.gcx&&(d.gcx=b.gcx,za=void 0!==b.gcx);!ja&&c.gcy&&(d.gcy=b.gcy,ja=void 0!==b.gcy);K._set(d);ja=za=
F=ya=G=qa=H=D=N=B=void 0},d(b){E.destroy(b);b&&x(d);y&&y.d(b);b&&(x(e),x(g));a.refs.canvas===f&&(a.refs.canvas=null);a.refs.labelsCanvas===m&&(a.refs.labelsCanvas=null);u&&u.d();K.destroy();a.refs.d3Zoom===K&&(a.refs.d3Zoom=null);v.cancel();a.refs.root===g&&(a.refs.root=null)}}}function Re(a,b){var c={id:b.id,layer:b.layer,layout:b.layout,classFilter:b.classFilter,filter:b.filter};if(void 0!==b.config){c.config=b.config;var d=!0}if(void 0!==b.layers){c.layers=b.layers;var e=!0}if(void 0!==b.labels){c.labels=
b.labels;var g=!0}if(void 0!==b.loading){c.loading=b.loading;var f=!0}var h=new ee({root:a.root,store:a.store,data:c,_bind(b,c){var h={};!d&&b.config&&(h.config=c.config);!e&&b.layers&&(h.layers=c.layers);!g&&b.labels&&(h.labels=c.labels);!f&&b.loading&&(h.loading=c.loading);a._set(h);f=g=e=d=void 0}});a.root._beforecreate.push(()=>{h._bind({config:1,layers:1,labels:1,loading:1},h.get())});return{c(){h._fragment.c()},m(a,b){h._mount(a,b)},p(a,c){b=c;c={};a.id&&(c.id=b.id);a.layer&&(c.layer=b.layer);
a.layout&&(c.layout=b.layout);a.classFilter&&(c.classFilter=b.classFilter);a.filter&&(c.filter=b.filter);!d&&a.config&&(c.config=b.config,d=void 0!==b.config);!e&&a.layers&&(c.layers=b.layers,e=void 0!==b.layers);!g&&a.labels&&(c.labels=b.labels,g=void 0!==b.labels);!f&&a.loading&&(c.loading=b.loading,f=void 0!==b.loading);h._set(c);f=g=e=d=void 0},d(a){h.destroy(a)}}}function Se(a,b){var c;return{c(){c=l("div");r(c,"left",""+b.hoverIconX+"px");r(c,"top",""+b.hoverIconY+"px");r(c,"width",""+b.hoverIconW+
"px");r(c,"height",""+b.hoverIconW+"px");c.className="svelte-w9b5xg svelte-ref-hover"},m(b,e){b.insertBefore(c,e);a.refs.hover=c},p(a,b){a.hoverIconX&&r(c,"left",""+b.hoverIconX+"px");a.hoverIconY&&r(c,"top",""+b.hoverIconY+"px");a.hoverIconW&&(r(c,"width",""+b.hoverIconW+"px"),r(c,"height",""+b.hoverIconW+"px"))},d(b){b&&x(c);a.refs.hover===c&&(a.refs.hover=null)}}}function Fc(a){u(this,a);this.refs={};this._state=q({ready:!0,id:"inceptionv1_mixed4c",config:null,layers:null,layer:0,layout:0,classFilter:0,
filter:0,context:null,alphaAttributionFactor:.02,density:1,classHeatmap:-1,classHeatmapMultiplier:1,classHeatmapPositive:1,iconCrop:.02,autoGridSizeMultiplier:.5,gridSize:null,homeX:.5,homeY:.5,homeScale:1,enableClickToZoom:!0,enableHover:!0,enableDragToPan:!0,backgroundColor:"white",strokeColor:"rgb(220, 220, 220)",strokeThickness:1,imageSmoothing:!1,fontSize:10,textColor:"white",textShadowColor:"rgba(0, 0, 0, 0.6)",showLabels:!0,screenResolution:1},a.data);this._recompute({layers:1,layer:1,viewWidth:1,
screenResolution:1,viewHeight:1,scale:1,gridSize:1,config:1,classHeatmap:1,w:1,h:1,autoGridSizeMultiplier:1,currentZoomIndex:1,labelsBufferContext:1,labels:1,fontSize:1,textColor:1,textShadowColor:1,currentLayerData:1,mouseGlobalPosition:1,translateX:1,translateY:1,hoverIconData:1,enableHover:1},this._state);this._intro=!0;this._handlers.update=[Ai];this._fragment=Bi(this,this._state);this.root._oncreate.push(()=>{zi.call(this);this.fire("update",{changed:pa({},this._state),current:this._state})});
a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Ci(a,b){var c,d,e=a._slotted.head,g,f,h=a._slotted.body;return{c(){c=l("div");d=l("div");g=p("\n  ");f=l("div");d.className="head svelte-l56anp";f.className="body svelte-l56anp";c.className="root svelte-l56anp"},m(a,b){a.insertBefore(c,b);c.appendChild(d);e&&d.appendChild(e);c.appendChild(g);c.appendChild(f);h&&f.appendChild(h)},p:G,d(a){a&&x(c);e&&xa(d,e);h&&xa(f,h)}}}function hd(a){u(this,a);this._state=q({},a.data);
this._intro=!0;this._slotted=a.slots||{};this._fragment=Ci(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Di({clientWidth:a,minWidth:b}){return a/Math.max(a,b)}function Ei({clientWidth:a,minWidth:b}){return Math.max(a,b)+"px"}function Fi({clientHeight:a,scale:b}){return a/b+"px"}function Gi(a,b){var c,d,e=a._slotted.default;return{c(){c=l("div");d=l("div");r(d,"transform","scale("+b.scale+")");r(d,"width",b.finalWidth);r(d,"height",""+b.finalHeight+b.style+
"\n    ");d.className="svelte-fkjf8u svelte-ref-frame";c.className="svelte-fkjf8u svelte-ref-root"},m(b,f){b.insertBefore(c,f);c.appendChild(d);e&&d.appendChild(e);a.refs.frame=d;a.refs.root=c},p(a,b){a.scale&&r(d,"transform","scale("+b.scale+")");a.finalWidth&&r(d,"width",b.finalWidth);(a.finalHeight||a.style)&&r(d,"height",""+b.finalHeight+b.style+"\n    ")},d(b){b&&x(c);e&&xa(d,e);a.refs.frame===d&&(a.refs.frame=null);a.refs.root===c&&(a.refs.root=null)}}}function id(a){u(this,a);this.refs={};
this._state=q({style:"",aspectRatio:1,minWidth:800,clientWidth:1E3,clientHeight:1E3},a.data);this._recompute({clientWidth:1,minWidth:1,width:1,clientHeight:1,scale:1},this._state);this._intro=!0;this._slotted=a.slots||{};this._fragment=Gi(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Hi({gridSize:a}){return 20*(a+1)}function Ii({iconScaleFactor:a,realGridSize:b}){return 1E6/(b*b*a)}function Ji(){let a=new URLSearchParams(window.location.search);if(a.has("layer")){let b=
decodeURIComponent(a.get("layer"));this.set({layerName:b})}if(a.has("poi")){let b=a.get("poi").split(",").map(parseFloat);setTimeout(()=>{this.zoomTo(...b,4E3)},1E3)}}function Ki(a,b){function c(){a.set({showLabels:bb.checked})}function d(){a.set({enableHover:cb.checked})}function e(){a.store.set({scroll:db.checked})}function g(b){a.copyShareLink()}function f(){a.set({gridSize:O.__value})}function h(){a.set({gridSize:P.__value})}function k(){a.set({gridSize:Q.__value})}function n(){a.set({gridSize:R.__value})}
function m(){a.set({gridSize:S.__value})}function A(){a.set({gridSize:T.__value})}function q(){a.set({autoGridSizeMultiplier:Lc(fa.value)})}function x(){a.set({density:Lc(ha.value)})}function u(){a.set({classHeatmapPositive:U.__value})}function v(){a.set({classHeatmapPositive:V.__value})}function w(){a.set({classHeatmapMultiplier:Lc(ia.value)})}function z(b){a.toggle()}var E,y,B,D,N,G,H,F,X,ya,Z,za,ja,K,wa,Sb,M,Ib,ea,I,ka,Te,ma,Tb,Ea,eb,bb,na,pa,Y,cb,ta,xa,ca,db,Aa,Ba,Ra,Ca,Da,da,Fa,J,ra,La,la,O,
Na,Ta,oa,P,Va,Wa,sa,Q,Xa,Ya,ua,R,Za,$a,va,S,hb,ib,cc,T,kb,nb,Jb,Ia,ob,dc,pb,fa,rb,Ub,ec,sb,fc,tb,ha,wb,aa,Ja,xb,gc,U,yb,zb,hc,V,Ab,Bb,Ka,Cb,ic,Db,ia,Eb,Ga,Ma,Fb,Oa,Gb,Pa=Vb(b.gcx),ab,Hb,Qa,Lb,Sa=Vb(b.gcy),gb,Mb,Ua,Nb,Gc=Vb(b.scale),jb,Ob,Hc,Wb,Ic=b.showOptions?"fewer options":"more options",lb,Jc,Pb={};if(void 0!==b.classHeatmap){Pb.classHeatmap=b.classHeatmap;var jc=!0}var Xb=new Mc({root:a.root,store:a.store,data:Pb,_bind(b,c){var d={};!jc&&b.classHeatmap&&(d.classHeatmap=c.classHeatmap);a._set(d);
jc=void 0}});a.root._beforecreate.push(()=>{Xb._bind({classHeatmap:1},Xb.get())});var Yb=new hd({root:a.root,store:a.store,slots:{default:W(),body:W(),head:W()}}),Qb={classHeatmap:b.classHeatmap};if(void 0!==b.layerName){Qb.layerName=b.layerName;var kc=!0}var Zb=new Ud({root:a.root,store:a.store,data:Qb,_bind(b,c){var d={};!kc&&b.layerName&&(d.layerName=c.layerName);a._set(d);kc=void 0}});a.root._beforecreate.push(()=>{Zb._bind({layerName:1},Zb.get())});var $b=new hd({root:a.root,store:a.store,slots:{default:W(),
body:W(),head:W()}}),ba={id:"inceptionv1_"+b.layerName,strokeColor:"#666",backgroundColor:"#dfdfdf",showHoverImage:!1,classHeatmap:b.classHeatmap,homeX:b.homeX,homeY:b.homeY,homeScale:b.homeScale};if(void 0!==b.density){ba.density=b.density;var lc=!0}if(void 0!==b.iconCrop){ba.iconCrop=b.iconCrop;var mc=!0}if(void 0!==b.classHeatmapMultiplier){ba.classHeatmapMultiplier=b.classHeatmapMultiplier;var nc=!0}if(void 0!==b.classHeatmapPositive){ba.classHeatmapPositive=b.classHeatmapPositive;var oc=!0}if(void 0!==
b.autoGridSizeMultiplier){ba.autoGridSizeMultiplier=b.autoGridSizeMultiplier;var pc=!0}if(void 0!==b.gridSize){ba.gridSize=b.gridSize;var qc=!0}if(void 0!==b.showLabels){ba.showLabels=b.showLabels;var rc=!0}if(void 0!==b.enableHover){ba.enableHover=b.enableHover;var sc=!0}if(void 0!==b.scale){ba.scale=b.scale;var tc=!0}if(void 0!==b.gcx){ba.gcx=b.gcx;var uc=!0}if(void 0!==b.gcy){ba.gcy=b.gcy;var vc=!0}if(void 0!==b.extent){ba.extent=b.extent;var wc=!0}if(void 0!==b.$scroll){ba.scrollWheel=b.$scroll;
var xc=!0}var fb=new Fc({root:a.root,store:a.store,data:ba,_bind(b,c){var d={},e={};!lc&&b.density&&(d.density=c.density);!mc&&b.iconCrop&&(d.iconCrop=c.iconCrop);!nc&&b.classHeatmapMultiplier&&(d.classHeatmapMultiplier=c.classHeatmapMultiplier);!oc&&b.classHeatmapPositive&&(d.classHeatmapPositive=c.classHeatmapPositive);!pc&&b.autoGridSizeMultiplier&&(d.autoGridSizeMultiplier=c.autoGridSizeMultiplier);!qc&&b.gridSize&&(d.gridSize=c.gridSize);!rc&&b.showLabels&&(d.showLabels=c.showLabels);!sc&&b.enableHover&&
(d.enableHover=c.enableHover);!tc&&b.scale&&(d.scale=c.scale);!uc&&b.gcx&&(d.gcx=c.gcx);!vc&&b.gcy&&(d.gcy=c.gcy);!wc&&b.extent&&(d.extent=c.extent);!xc&&b.scrollWheel&&(e.scroll=c.scrollWheel);a.store.set(e);a._set(d);xc=wc=vc=uc=tc=sc=rc=qc=pc=oc=nc=mc=lc=void 0}});a.root._beforecreate.push(()=>{fb._bind({density:1,iconCrop:1,classHeatmapMultiplier:1,classHeatmapPositive:1,autoGridSizeMultiplier:1,gridSize:1,showLabels:1,enableHover:1,scale:1,gcx:1,gcy:1,extent:1,scrollWheel:1},fb.get())});a.refs.atlas=
fb;var Rb={id:"inceptionv1_"+b.layerName,layerName:b.layerName,enableDragging:!0,classHeatmap:b.classHeatmap,scaleCountFactor:b.scaleCountFactor};if(void 0!==b.extent){Rb.extent=b.extent;var yc=!0}var Kb=new Id({root:a.root,store:a.store,data:Rb,_bind(b,c){var d={};!yc&&b.extent&&(d.extent=c.extent);a._set(d);yc=void 0}});a.root._beforecreate.push(()=>{Kb._bind({extent:1},Kb.get())});Kb.on("drag",function(b){a.refs.atlas.translateTo(b.gcx,b.gcy)});var qb=new ac({root:a.root,store:a.store,data:{name:"home",
color:"white"}}),zc=new Ec({root:a.root,store:a.store,slots:{default:W()}});zc.on("click",function(b){a.refs.atlas.home(3E3)});var ub=new ac({root:a.root,store:a.store,data:{name:"add",color:"white"}}),Ac=new Ec({root:a.root,store:a.store,slots:{default:W()}});Ac.on("click",function(b){a.refs.atlas.scaleBy(2)});var vb=new ac({root:a.root,store:a.store,data:{name:"remove",color:"white"}}),Bc=new Ec({root:a.root,store:a.store,slots:{default:W()}});Bc.on("click",function(b){a.refs.atlas.scaleBy(.5)});
var bc={clientWidth:b.clientWidth,clientHeight:b.clientHeight,minWidth:768},Cc=new id({root:a.root,store:a.store,slots:{default:W()},data:bc});return{c(){E=l("div");y=l("div");B=l("h2");B.textContent="Class Filter";D=p("\n        ");N=l("div");Xb._fragment.c();Yb._fragment.c();G=p("\n    ");H=l("div");F=l("h2");F.textContent="Layer";X=p("\n        ");ya=l("div");Zb._fragment.c();$b._fragment.c();Z=p("\n  ");za=l("div");ja=l("div");fb._fragment.c();K=p("\n        ");wa=l("div");Sb=l("div");M=l("div");
Ib=l("div");Kb._fragment.c();ea=p("\n            ");I=l("div");qb._fragment.c();zc._fragment.c();ka=p("\n              ");ub._fragment.c();Ac._fragment.c();Te=p("\n              ");vb._fragment.c();Bc._fragment.c();ma=p("\n          ");Tb=l("div");Ea=l("div");eb=l("label");bb=l("input");na=p(" attribution labels");pa=p("\n              ");Y=l("label");cb=l("input");ta=p(" show tooltip");xa=p("\n              ");ca=l("label");db=l("input");Aa=p(" scroll to zoom");Ba=p("\n              ");Ra=l("button");
Ca=p("Copy link to this view");Da=p("\n            ");da=l("div");Fa=l("div");J=l("div");ra=l("h3");ra.textContent="Grid size";La=p("\n                  ");la=l("label");O=l("input");Na=p(" 20x20");Ta=p("\n                  ");oa=l("label");P=l("input");Va=p(" 40x40");Wa=p("\n                  ");sa=l("label");Q=l("input");Xa=p(" 80x80");Ya=p("\n                  ");ua=l("label");R=l("input");Za=p(" 160x160");$a=p("\n                  ");va=l("label");S=l("input");hb=p(" 320x320");ib=p("\n                  ");
cc=l("label");T=l("input");kb=p(" auto");nb=p("\n                  ");Jb=l("div");Ia=l("div");ob=p("auto threshold: ");dc=l("noscript");pb=p("\n                    ");fa=l("input");rb=p("\n                ");Ub=l("div");ec=l("h3");sb=p("Icon density: ");fc=l("noscript");tb=p("\n                  ");ha=l("input");wb=p("\n                ");aa=l("div");Ja=l("h3");Ja.textContent="Class filter";xb=p("\n                  ");gc=l("label");U=l("input");yb=p(" positive influence");zb=p("\n                  ");
hc=l("label");V=l("input");Ab=p(" negative influence");Bb=p("\n                  ");Ka=l("div");Cb=p("Intensity: ");ic=l("noscript");Db=p("\n                  ");ia=l("input");Eb=p("\n                ");Ga=l("div");Ma=l("h3");Ma.textContent="Location";Fb=p("\n                  ");Oa=l("div");Gb=p("x: ");ab=p(Pa);Hb=p("\n                  ");Qa=l("div");Lb=p("y: ");gb=p(Sa);Mb=p("\n                  ");Ua=l("div");Nb=p("scale: ");jb=p(Gc);Ob=p("\n          ");Hc=l("div");Wb=l("button");lb=p(Ic);Cc._fragment.c();
t(B,"slot","head");t(N,"slot","body");y.className="filter svelte-1mmgffy";r(y,"display",b.showClassFilter?"block":"none");t(F,"slot","head");t(ya,"slot","body");H.className="stack svelte-1mmgffy";r(H,"display",b.showLayerChooser?"block":"none");Ib.className="map-container svelte-1mmgffy";r(Ib,"width","100px");r(Ib,"height","100px");r(Ib,"position","absolute");M.className="map svelte-1mmgffy";I.className="buttons svelte-1mmgffy";Sb.className="nav svelte-1mmgffy";bb.addEventListener("change",c,void 0);
t(bb,"type","checkbox");r(eb,"white-space","nowrap");r(eb,"text-overflow","ellipsis");r(eb,"overflow","hidden");eb.className="svelte-1mmgffy";cb.addEventListener("change",d,void 0);t(cb,"type","checkbox");Y.className="svelte-1mmgffy";db.addEventListener("change",e,void 0);t(db,"type","checkbox");ca.className="svelte-1mmgffy";Ra.addEventListener("click",g,void 0);r(Ra,"font-size","10px");r(Ra,"display",b.shareLink?"block":"none");t(Ra,"href","#");Ea.className="essential";ra.className="svelte-1mmgffy";
a._bindingGroups[0].push(O);O.addEventListener("change",f,void 0);t(O,"type","radio");O.__value=0;O.value=O.__value;la.className="svelte-1mmgffy";a._bindingGroups[0].push(P);P.addEventListener("change",h,void 0);t(P,"type","radio");P.__value=1;P.value=P.__value;oa.className="svelte-1mmgffy";a._bindingGroups[0].push(Q);Q.addEventListener("change",k,void 0);t(Q,"type","radio");Q.__value=2;Q.value=Q.__value;sa.className="svelte-1mmgffy";a._bindingGroups[0].push(R);R.addEventListener("change",n,void 0);
t(R,"type","radio");R.__value=3;R.value=R.__value;ua.className="svelte-1mmgffy";a._bindingGroups[0].push(S);S.addEventListener("change",m,void 0);t(S,"type","radio");S.__value=4;S.value=S.__value;va.className="svelte-1mmgffy";a._bindingGroups[0].push(T);T.addEventListener("change",A,void 0);t(T,"type","radio");T.__value=-1;T.value=T.__value;cc.className="svelte-1mmgffy";fa.addEventListener("change",q,void 0);fa.addEventListener("input",q,void 0);t(fa,"type","range");fa.min=.5;fa.max=1.4;fa.step=.01;
r(Jb,"display","none");J.className="section svelte-1mmgffy";ec.className="svelte-1mmgffy";ha.addEventListener("change",x,void 0);ha.addEventListener("input",x,void 0);t(ha,"type","range");ha.min=.2;ha.max=8;ha.step=.01;Ub.className="section svelte-1mmgffy";Ja.className="svelte-1mmgffy";a._bindingGroups[1].push(U);U.addEventListener("change",u,void 0);t(U,"type","radio");U.__value=1;U.value=U.__value;gc.className="svelte-1mmgffy";a._bindingGroups[1].push(V);V.addEventListener("change",v,void 0);t(V,
"type","radio");V.__value=-1;V.value=V.__value;hc.className="svelte-1mmgffy";ia.addEventListener("change",w,void 0);ia.addEventListener("input",w,void 0);t(ia,"type","range");ia.min="0.5";ia.max="2";ia.step="0.1";aa.className="section svelte-1mmgffy";r(aa,"display",-1<b.classHeatmap?"block":"none");Ma.className="svelte-1mmgffy";Ga.className="section svelte-1mmgffy";Fa.className="grid-size";da.className="expand svelte-1mmgffy";Tb.className="options svelte-1mmgffy";Wb.addEventListener("click",z,void 0);
Wb.className="svelte-1mmgffy";Hc.className="expand-toggle svelte-1mmgffy";wa.className=Jc="controls "+(b.showOptions?"open":"closed")+" svelte-1mmgffy svelte-ref-controls";ja.className="atlas svelte-1mmgffy";za.className="main svelte-1mmgffy";E.className="container svelte-1mmgffy"},m(c,d){Cc._slotted.default.appendChild(E);E.appendChild(y);Yb._slotted.head.appendChild(B);Yb._slotted.default.appendChild(D);Yb._slotted.body.appendChild(N);Xb._mount(N,null);Yb._mount(y,null);E.appendChild(G);E.appendChild(H);
$b._slotted.head.appendChild(F);$b._slotted.default.appendChild(X);$b._slotted.body.appendChild(ya);Zb._mount(ya,null);$b._mount(H,null);E.appendChild(Z);E.appendChild(za);za.appendChild(ja);fb._mount(ja,null);ja.appendChild(K);ja.appendChild(wa);wa.appendChild(Sb);Sb.appendChild(M);M.appendChild(Ib);Kb._mount(Ib,null);Sb.appendChild(ea);Sb.appendChild(I);qb._mount(zc._slotted.default,null);zc._mount(I,null);I.appendChild(ka);ub._mount(Ac._slotted.default,null);Ac._mount(I,null);I.appendChild(Te);
vb._mount(Bc._slotted.default,null);Bc._mount(I,null);wa.appendChild(ma);wa.appendChild(Tb);Tb.appendChild(Ea);Ea.appendChild(eb);eb.appendChild(bb);bb.checked=b.showLabels;eb.appendChild(na);Ea.appendChild(pa);Ea.appendChild(Y);Y.appendChild(cb);cb.checked=b.enableHover;Y.appendChild(ta);Ea.appendChild(xa);Ea.appendChild(ca);ca.appendChild(db);db.checked=b.$scroll;ca.appendChild(Aa);Ea.appendChild(Ba);Ea.appendChild(Ra);Ra.appendChild(Ca);Tb.appendChild(Da);Tb.appendChild(da);da.appendChild(Fa);
Fa.appendChild(J);J.appendChild(ra);J.appendChild(La);J.appendChild(la);la.appendChild(O);O.checked=O.__value===b.gridSize;la.appendChild(Na);J.appendChild(Ta);J.appendChild(oa);oa.appendChild(P);P.checked=P.__value===b.gridSize;oa.appendChild(Va);J.appendChild(Wa);J.appendChild(sa);sa.appendChild(Q);Q.checked=Q.__value===b.gridSize;sa.appendChild(Xa);J.appendChild(Ya);J.appendChild(ua);ua.appendChild(R);R.checked=R.__value===b.gridSize;ua.appendChild(Za);J.appendChild($a);J.appendChild(va);va.appendChild(S);
S.checked=S.__value===b.gridSize;va.appendChild(hb);J.appendChild(ib);J.appendChild(cc);cc.appendChild(T);T.checked=T.__value===b.gridSize;cc.appendChild(kb);J.appendChild(nb);J.appendChild(Jb);Jb.appendChild(Ia);Ia.appendChild(ob);Ia.appendChild(dc);dc.insertAdjacentHTML("afterend",b.autoGridSizeMultiplier);Jb.appendChild(pb);Jb.appendChild(fa);fa.value=b.autoGridSizeMultiplier;Fa.appendChild(rb);Fa.appendChild(Ub);Ub.appendChild(ec);ec.appendChild(sb);ec.appendChild(fc);fc.insertAdjacentHTML("afterend",
b.density);Ub.appendChild(tb);Ub.appendChild(ha);ha.value=b.density;Fa.appendChild(wb);Fa.appendChild(aa);aa.appendChild(Ja);aa.appendChild(xb);aa.appendChild(gc);gc.appendChild(U);U.checked=U.__value===b.classHeatmapPositive;gc.appendChild(yb);aa.appendChild(zb);aa.appendChild(hc);hc.appendChild(V);V.checked=V.__value===b.classHeatmapPositive;hc.appendChild(Ab);aa.appendChild(Bb);aa.appendChild(Ka);Ka.appendChild(Cb);Ka.appendChild(ic);ic.insertAdjacentHTML("afterend",b.classHeatmapMultiplier);aa.appendChild(Db);
aa.appendChild(ia);ia.value=b.classHeatmapMultiplier;Fa.appendChild(Eb);Fa.appendChild(Ga);Ga.appendChild(Ma);Ga.appendChild(Fb);Ga.appendChild(Oa);Oa.appendChild(Gb);Oa.appendChild(ab);Ga.appendChild(Hb);Ga.appendChild(Qa);Qa.appendChild(Lb);Qa.appendChild(gb);Ga.appendChild(Mb);Ga.appendChild(Ua);Ua.appendChild(Nb);Ua.appendChild(jb);a.refs.expand=da;wa.appendChild(Ob);wa.appendChild(Hc);Hc.appendChild(Wb);Wb.appendChild(lb);a.refs.controls=wa;Cc._mount(c,d)},p(a,c){b=c;c={};!jc&&a.classHeatmap&&
(c.classHeatmap=b.classHeatmap,jc=void 0!==b.classHeatmap);Xb._set(c);jc=void 0;a.showClassFilter&&r(y,"display",b.showClassFilter?"block":"none");c={};a.classHeatmap&&(c.classHeatmap=b.classHeatmap);!kc&&a.layerName&&(c.layerName=b.layerName,kc=void 0!==b.layerName);Zb._set(c);kc=void 0;a.showLayerChooser&&r(H,"display",b.showLayerChooser?"block":"none");c={};a.layerName&&(c.id="inceptionv1_"+b.layerName);a.classHeatmap&&(c.classHeatmap=b.classHeatmap);a.homeX&&(c.homeX=b.homeX);a.homeY&&(c.homeY=
b.homeY);a.homeScale&&(c.homeScale=b.homeScale);!lc&&a.density&&(c.density=b.density,lc=void 0!==b.density);!mc&&a.iconCrop&&(c.iconCrop=b.iconCrop,mc=void 0!==b.iconCrop);!nc&&a.classHeatmapMultiplier&&(c.classHeatmapMultiplier=b.classHeatmapMultiplier,nc=void 0!==b.classHeatmapMultiplier);!oc&&a.classHeatmapPositive&&(c.classHeatmapPositive=b.classHeatmapPositive,oc=void 0!==b.classHeatmapPositive);!pc&&a.autoGridSizeMultiplier&&(c.autoGridSizeMultiplier=b.autoGridSizeMultiplier,pc=void 0!==b.autoGridSizeMultiplier);
!qc&&a.gridSize&&(c.gridSize=b.gridSize,qc=void 0!==b.gridSize);!rc&&a.showLabels&&(c.showLabels=b.showLabels,rc=void 0!==b.showLabels);!sc&&a.enableHover&&(c.enableHover=b.enableHover,sc=void 0!==b.enableHover);!tc&&a.scale&&(c.scale=b.scale,tc=void 0!==b.scale);!uc&&a.gcx&&(c.gcx=b.gcx,uc=void 0!==b.gcx);!vc&&a.gcy&&(c.gcy=b.gcy,vc=void 0!==b.gcy);!wc&&a.extent&&(c.extent=b.extent,wc=void 0!==b.extent);!xc&&a.$scroll&&(c.scrollWheel=b.$scroll,xc=void 0!==b.$scroll);fb._set(c);xc=wc=vc=uc=tc=sc=
rc=qc=pc=oc=nc=mc=lc=void 0;c={};a.layerName&&(c.id="inceptionv1_"+b.layerName);a.layerName&&(c.layerName=b.layerName);a.classHeatmap&&(c.classHeatmap=b.classHeatmap);a.scaleCountFactor&&(c.scaleCountFactor=b.scaleCountFactor);!yc&&a.extent&&(c.extent=b.extent,yc=void 0!==b.extent);Kb._set(c);yc=void 0;a.showLabels&&(bb.checked=b.showLabels);a.enableHover&&(cb.checked=b.enableHover);a.$scroll&&(db.checked=b.$scroll);a.shareLink&&r(Ra,"display",b.shareLink?"block":"none");a.gridSize&&(O.checked=O.__value===
b.gridSize);a.gridSize&&(P.checked=P.__value===b.gridSize);a.gridSize&&(Q.checked=Q.__value===b.gridSize);a.gridSize&&(R.checked=R.__value===b.gridSize);a.gridSize&&(S.checked=S.__value===b.gridSize);a.gridSize&&(T.checked=T.__value===b.gridSize);a.autoGridSizeMultiplier&&(Kc(dc),dc.insertAdjacentHTML("afterend",b.autoGridSizeMultiplier));a.autoGridSizeMultiplier&&(fa.value=b.autoGridSizeMultiplier);a.gridSize&&r(Jb,"display","none");a.density&&(Kc(fc),fc.insertAdjacentHTML("afterend",b.density));
a.density&&(ha.value=b.density);a.classHeatmapPositive&&(U.checked=U.__value===b.classHeatmapPositive);a.classHeatmapPositive&&(V.checked=V.__value===b.classHeatmapPositive);a.classHeatmapMultiplier&&(Kc(ic),ic.insertAdjacentHTML("afterend",b.classHeatmapMultiplier));a.classHeatmapMultiplier&&(ia.value=b.classHeatmapMultiplier);a.classHeatmap&&r(aa,"display",-1<b.classHeatmap?"block":"none");a.gcx&&Pa!==(Pa=Vb(b.gcx))&&(ab.data=""+Pa);a.gcy&&Sa!==(Sa=Vb(b.gcy))&&(gb.data=""+Sa);a.scale&&Gc!==(Gc=
Vb(b.scale))&&(jb.data=""+Gc);a.showOptions&&Ic!==(Ic=b.showOptions?"fewer options":"more options")&&(lb.data=""+Ic);a.showOptions&&Jc!==(Jc="controls "+(b.showOptions?"open":"closed")+" svelte-1mmgffy svelte-ref-controls")&&(wa.className=Jc);c={};a.clientWidth&&(c.clientWidth=b.clientWidth);a.clientHeight&&(c.clientHeight=b.clientHeight);Cc._set(c)},d(b){Xb.destroy();Yb.destroy();Zb.destroy();$b.destroy();fb.destroy();a.refs.atlas===fb&&(a.refs.atlas=null);Kb.destroy();qb.destroy();zc.destroy();
ub.destroy();Ac.destroy();vb.destroy();Bc.destroy();bb.removeEventListener("change",c,void 0);cb.removeEventListener("change",d,void 0);db.removeEventListener("change",e,void 0);Ra.removeEventListener("click",g,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(O),1);O.removeEventListener("change",f,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(P),1);P.removeEventListener("change",h,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(Q),1);Q.removeEventListener("change",
k,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(R),1);R.removeEventListener("change",n,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(S),1);S.removeEventListener("change",m,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(T),1);T.removeEventListener("change",A,void 0);fa.removeEventListener("change",q,void 0);fa.removeEventListener("input",q,void 0);ha.removeEventListener("change",x,void 0);ha.removeEventListener("input",x,void 0);a._bindingGroups[1].splice(a._bindingGroups[1].indexOf(U),
1);U.removeEventListener("change",u,void 0);a._bindingGroups[1].splice(a._bindingGroups[1].indexOf(V),1);V.removeEventListener("change",v,void 0);ia.removeEventListener("change",w,void 0);ia.removeEventListener("input",w,void 0);a.refs.expand===da&&(a.refs.expand=null);Wb.removeEventListener("click",z,void 0);a.refs.controls===wa&&(a.refs.controls=null);Cc.destroy(b)}}}function Lb(a){u(this,a);this.refs={};this._state=q(q(this.store._init(["scroll"]),{layerName:"mixed4c",gridSize:1,classHeatmap:-1,
iconScaleFactor:.8,iconCrop:.35,showClassFilter:!0,showLayerChooser:!0,showOptions:!0,homeX:.5,homeY:.5,homeScale:1,shareLink:!1}),a.data);this.store._add(this,["scroll"]);this._recompute({gridSize:1,iconScaleFactor:1,realGridSize:1},this._state);this._bindingGroups=[[],[]];this._intro=!0;this._handlers.destroy=[rd];this._fragment=Ki(this,this._state);this.root._oncreate.push(()=>{Ji.call(this);this.fire("update",{changed:pa({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,
a.anchor),D(this))}function Li(){setTimeout(()=>{this.refs.app.home(0)},100)}function Mi(a,b){function c(){a.set({clientWidth:d.clientWidth,clientHeight:d.clientHeight})}var d,e,g=new Lb({root:a.root,store:a.store,data:{clientWidth:b.clientWidth,clientHeight:b.clientHeight,gridSize:-1,showLabels:!0,shareLink:!0}});a.refs.app=g;return{c(){d=l("div");g._fragment.c();a.root._beforecreate.push(c);r(d,"width","100%");r(d,"height","100%")},m(a,b){a.insertBefore(d,b);g._mount(d,null);e=ca(d,c)},p(a,b){var c=
{};a.clientWidth&&(c.clientWidth=b.clientWidth);a.clientHeight&&(c.clientHeight=b.clientHeight);g._set(c)},d(b){b&&x(d);g.destroy();a.refs.app===g&&(a.refs.app=null);e.cancel()}}}function Ue(a){u(this,a);this.refs={};this._state=q({},a.data);this._intro=!0;this._fragment=Mi(this,this._state);this.root._oncreate.push(()=>{Li.call(this);this.fire("update",{changed:pa({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function Ni({x:a,width:b,
y:c,clientHeight:d,visible:e}){if(!1===e)return"visibility: hidden;";{e=document.documentElement.scrollLeft;let g=document.documentElement.scrollTop,f=document.documentElement.clientWidth-b;d=document.documentElement.clientHeight-d;let h=Math.min(a,f),k=Math.min(c,d);a>=f&&c>=d&&(h=a-b);return`width: ${b}px; top: ${k+g}px; left: ${h+e}px;`}}function Oi(a,b){function c(b){a.mousemove(b)}function d(b){a.hide()}function e(){a.set({clientHeight:f.clientHeight})}var g,f,h;document.addEventListener("mousemove",
c);document.addEventListener("scroll",d);var k=b.component&&Ve(a,b);return{c(){g=p("\n\n");f=l("div");k&&k.c();a.root._beforecreate.push(e);f.style.cssText=b.style;f.className="svelte-14z2oof svelte-ref-root"},m(b,c){b.insertBefore(g,c);b.insertBefore(f,c);k&&k.m(f,null);h=ca(f,e);a.refs.root=f},p(b,c){c.component?k?k.p(b,c):(k=Ve(a,c),k.c(),k.m(f,null)):k&&(k.d(1),k=null);b.style&&(f.style.cssText=c.style)},d(b){document.removeEventListener("mousemove",c);document.removeEventListener("scroll",d);
b&&(x(g),x(f));k&&k.d();h.cancel();a.refs.root===f&&(a.refs.root=null)}}}function Ve(a,b){var c,d=b.component;if(d)var e=new d({root:a.root,store:a.store});return{c(){e&&e._fragment.c();c=document.createComment("")},m(b,d){e&&(e._mount(b,d),a.refs.component=e);b.insertBefore(c,d)},p(b,f){d!==(d=f.component)&&(e&&e.destroy(),d?(e=new d({root:a.root,store:a.store}),e._fragment.c(),e._mount(c.parentNode,c),a.refs.component=e):(e=null,a.refs.component===e&&(a.refs.component=null)))},d(a){a&&x(c);e&&e.destroy(a)}}}
function Sa(a){u(this,a);this.refs={};this._state=q({visible:!1,width:150,component:null},a.data);this._recompute({x:1,width:1,y:1,clientHeight:1,visible:1},this._state);this._intro=!0;this._fragment=Oi(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),D(this))}function We(a,b,c){a=Object.create(a);a.top=b[c];a.i=c;return a}function Pi(a,b){var c,d,e,g,f,h=Xe(b.num_activations),k,n,m=b.top_class_indices&&Ye(a,b);return{c(){c=l("div");d=l("table");m&&m.c();e=p("\n  ");
g=l("div");f=p("Average of ");k=p(h);n=p(" activations");d.className="svelte-1qbcldy";r(g,"font-size","10px");r(g,"margin-top","4px");r(g,"color","#999");r(g,"text-align","right");c.className="hover svelte-1qbcldy"},m(a,b){a.insertBefore(c,b);c.appendChild(d);m&&m.m(d,null);c.appendChild(e);c.appendChild(g);g.appendChild(f);g.appendChild(k);g.appendChild(n)},p(b,c){c.top_class_indices?m?m.p(b,c):(m=Ye(a,c),m.c(),m.m(d,null)):m&&(m.d(1),m=null);b.num_activations&&h!==(h=Xe(c.num_activations))&&(k.data=
""+h)},d(a){a&&x(c);m&&m.d()}}}function Ye(a,b){for(var c,d=b.top_class_indices.slice(0,5),e=[],g=0;g<d.length;g+=1)e[g]=Ze(a,We(b,d,g));return{c(){for(var a=0;a<e.length;a+=1)e[a].c();c=document.createComment("")},m(a,b){for(var d=0;d<e.length;d+=1)e[d].m(a,b);a.insertBefore(c,b)},p(b,g){if(b.top_class_values||b.$inceptionLabels||b.top_class_indices){d=g.top_class_indices.slice(0,5);for(var f=0;f<d.length;f+=1){let h=We(g,d,f);e[f]?e[f].p(b,h):(e[f]=Ze(a,h),e[f].c(),e[f].m(c.parentNode,c))}for(;f<
e.length;f+=1)e[f].d(1);e.length=d.length}},d(a){Nb(e,a);a&&x(c)}}}function Ze(a,b){var c,d,e=b.i+1,g,f,h,k,n=b.$inceptionLabels[b.top],m,q,t,u=$e(b.top_class_values[b.i]),v;return{c(){c=l("tr");d=l("td");g=p(e);f=p(".");h=p("\n        ");k=l("td");m=p(n);q=p("\n        ");t=l("td");v=p(u);r(d,"width","10px");r(d,"text-align","right");r(d,"padding-right","4px");d.className="svelte-1qbcldy";k.className=(0==b.i?"first":"")+" svelte-1qbcldy";r(t,"text-align","right");t.className="svelte-1qbcldy"},m(a,
b){a.insertBefore(c,b);c.appendChild(d);d.appendChild(g);d.appendChild(f);c.appendChild(h);c.appendChild(k);k.appendChild(m);c.appendChild(q);c.appendChild(t);t.appendChild(v)},p(a,b){(a.$inceptionLabels||a.top_class_indices)&&n!==(n=b.$inceptionLabels[b.top])&&(m.data=""+n);a.top_class_values&&u!==(u=$e(b.top_class_values[b.i]))&&(v.data=""+u)},d(a){a&&x(c)}}}function af(a){u(this,a);this._state=q(this.store._init(["inceptionLabels"]),a.data);this.store._add(this,["inceptionLabels"]);this._intro=
!0;this._handlers.destroy=[rd];this._fragment=Pi(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}var z={destroy:function(a){this.destroy=G;this.fire("destroy");this.set=G;this._fragment.d(!1!==a);this._fragment=null;this._state={}},get:pd,fire:od,on:qd,set:function(a){this._set(q({},a));this.root._lock||D(this.root)},_recompute:G,_set:function(a){var b=this._state,c={},d=!1;a=q(this._staged,a);this._staged={};for(var e in a)this._differs(a[e],b[e])&&(c[e]=d=!0);d&&
(this._state=q(q({},b),a),this._recompute(c,this._state),this._bind&&this._bind(c,this._state),this._fragment&&(this.fire("state",{changed:c,current:this._state,previous:b}),this._fragment.p(c,this._state),this.fire("update",{changed:c,current:this._state,previous:b})))},_stage:function(a){q(this._staged,a)},_mount:function(a,b){this._fragment[this._fragment.i?"i":"m"](a,b||null)},_differs:nd};q(sd.prototype,{_add(a,b){this._dependents.push({component:a,props:b})},_init(a){let b={};for(let c=0;c<
a.length;c+=1){let d=a[c];b["$"+d]=this._state[d]}return b},_remove(a){let b=this._dependents.length;for(;b--;)if(this._dependents[b].component===a){this._dependents.splice(b,1);break}},_set(a,b){let c=this._state;this._state=q(q({},c),a);for(a=0;a<this._sortedComputedProperties.length;a+=1)this._sortedComputedProperties[a].update(this._state,b);this.fire("state",{changed:b,previous:c,current:this._state});this._dependents.filter((a)=>{let c={},d=!1;for(let e=0;e<a.props.length;e+=1){let f=a.props[e];
f in b&&(c["$"+f]=this._state[f],d=!0)}if(d)return a.component._stage(c),!0}).forEach((a)=>{a.component.set({})});this.fire("update",{changed:b,previous:c,current:this._state})},_sortComputedProperties(){function a(g){let f=b[g];f&&(f.deps.forEach((b)=>{if(b===e)throw Error(`Cyclical dependency detected between ${b} <-> ${g}`);a(b)}),d[g]||(d[g]=!0,c.push(f)))}let b=this._computed,c=this._sortedComputedProperties=[],d=Object.create(null),e;for(let b in this._computed)a(e=b)},compute(a,b,c){let d,
e={deps:b,update:(e,f,g)=>{var h=b.map((a)=>{a in f&&(g=!0);return e[a]});g&&(h=c.apply(null,h),this._differs(h,d)&&(d=h,f[a]=!0,e[a]=d))}};this._computed[a]=e;this._sortComputedProperties();let g=q({},this._state),f={};e.update(g,f,!0);this._set(g,f)},fire:od,get:pd,on:qd,set(a){let b=this._state,c=this._changed={},d=!1;for(let e in a){if(this._computed[e])throw Error(`'${e}' is a read-only computed property`);this._differs(a[e],b[e])&&(c[e]=d=!0)}d&&this._set(a,c)}});var Va={inception:"dummy;kit fox;English setter;Siberian husky;Australian terrier;English springer;grey whale;lesser panda;Egyptian cat;ibex;Persian cat;cougar;gazelle;porcupine;sea lion;malamute;badger;Great Dane;Walker hound;Welsh springer spaniel;whippet;Scottish deerhound;killer whale;mink;African elephant;Weimaraner;soft - coated wheaten terrier;Dandie Dinmont;red wolf;Old English sheepdog;jaguar;otterhound;bloodhound;Airedale;hyena;meerkat;giant schnauzer;titi;three - toed sloth;sorrel;black - footed ferret;dalmatian;black - and - tan coonhound;papillon;skunk;Staffordshire bullterrier;Mexican hairless;Bouvier des Flandres;weasel;miniature poodle;Cardigan;malinois;bighorn;fox squirrel;colobus;tiger cat;Lhasa;impala;coyote;Yorkshire terrier;Newfoundland;brown bear;red fox;Norwegian elkhound;Rottweiler;hartebeest;Saluki;grey fox;schipperke;Pekinese;Brabancon griffon;West Highland white terrier;Sealyham terrier;guenon;mongoose;indri;tiger;Irish wolfhound;wild boar;EntleBucher;zebra;ram;French bulldog;orangutan;basenji;leopard;Bernese mountain dog;Maltese dog;Norfolk terrier;toy terrier;vizsla;cairn;squirrel monkey;groenendael;clumber;Siamese cat;chimpanzee;komondor;Afghan hound;Japanese spaniel;proboscis monkey;guinea pig;white wolf;ice bear;gorilla;borzoi;toy poodle;Kerry blue terrier;ox;Scotch terrier;Tibetan mastiff;spider monkey;Doberman;Boston bull;Greater Swiss Mountain dog;Appenzeller;Shih - Tzu;Irish water spaniel;Pomeranian;Bedlington terrier;warthog;Arabian camel;siamang;miniature schnauzer;collie;golden retriever;Irish terrier;affenpinscher;Border collie;hare;boxer;silky terrier;beagle;Leonberg;German short - haired pointer;patas;dhole;baboon;macaque;Chesapeake Bay retriever;bull mastiff;kuvasz;capuchin;pug;curly - coated retriever;Norwich terrier;flat - coated retriever;hog;keeshond;Eskimo dog;Brittany spaniel;standard poodle;Lakeland terrier;snow leopard;Gordon setter;dingo;standard schnauzer;hamster;Tibetan terrier;Arctic fox;wire - haired fox terrier;basset;water buffalo;American black bear;Angora;bison;howler monkey;hippopotamus;chow;giant panda;American Staffordshire terrier;Shetland sheepdog;Great Pyrenees;Chihuahua;tabby;marmoset;Labrador retriever;Saint Bernard;armadillo;Samoyed;bluetick;redbone;polecat;marmot;kelpie;gibbon;llama;miniature pinscher;wood rabbit;Italian greyhound;lion;cocker spaniel;Irish setter;dugong;Indian elephant;beaver;Sussex spaniel;Pembroke;Blenheim spaniel;Madagascar cat;Rhodesian ridgeback;lynx;African hunting dog;langur;Ibizan hound;timber wolf;cheetah;English foxhound;briard;sloth bear;Border terrier;German shepherd;otter;koala;tusker;echidna;wallaby;platypus;wombat;revolver;umbrella;schooner;soccer ball;accordion;ant;starfish;chambered nautilus;grand piano;laptop;strawberry;airliner;warplane;airship;balloon;space shuttle;fireboat;gondola;speedboat;lifeboat;canoe;yawl;catamaran;trimaran;container ship;liner;pirate;aircraft carrier;submarine;wreck;half track;tank;missile;bobsled;dogsled;bicycle - built -for-two;mountain bike;freight car;passenger car;barrow;shopping cart;motor scooter;forklift;electric locomotive;steam locomotive;amphibian;ambulance;beach wagon;cab;convertible;jeep;limousine;minivan;Model T;racer;sports car;go-kart;golfcart;moped;snowplow;fire engine;garbage truck;pickup;tow truck;trailer truck;moving van;police van;recreational vehicle;streetcar;snowmobile;tractor;mobile home;tricycle;unicycle;horse cart;jinrikisha;oxcart;bassinet;cradle;crib;four-poster;bookcase;china cabinet;medicine chest;chiffonier;table lamp;file;park bench;barber chair;throne;folding chair;rocking chair;studio couch;toilet seat;desk;pool table;dining table;entertainment center;wardrobe;Granny Smith;orange;lemon;fig;pineapple;banana;jackfruit;custard apple;pomegranate;acorn;hip;ear;rapeseed;corn;buckeye;organ;upright;chime;drum;gong;maraca;marimba;steel drum;banjo;cello;violin;harp;acoustic guitar;electric guitar;cornet;French horn;trombone;harmonica;ocarina;panpipe;bassoon;oboe;sax;flute;daisy;yellow lady's slipper;cliff;valley;alp;volcano;promontory;sandbar;coral reef;lakeside;seashore;geyser;hatchet;cleaver;letter opener;plane;power drill;lawn mower;hammer;corkscrew;can opener;plunger;screwdriver;shovel;plow;chain saw;cock;hen;ostrich;brambling;goldfinch;house finch;junco;indigo bunting;robin;bulbul;jay;magpie;chickadee;water ouzel;kite;bald eagle;vulture;great grey owl;black grouse;ptarmigan;ruffed grouse;prairie chicken;peacock;quail;partridge;African grey;macaw;sulphur-crested cockatoo;lorikeet;coucal;bee eater;hornbill;hummingbird;jacamar;toucan;drake;red-breasted merganser;goose;black swan;white stork;black stork;spoonbill;flamingo;American egret;little blue heron;bittern;crane;limpkin;American coot;bustard;ruddy turnstone;red - backed sandpiper;redshank;dowitcher;oystercatcher;European gallinule;pelican;king penguin;albatross;great white shark;tiger shark;hammerhead;electric ray;stingray;barracouta;coho;tench;goldfish;eel;rock beauty;anemone fish;lionfish;puffer;sturgeon;gar;loggerhead;leatherback turtle;mud turtle;terrapin;box turtle;banded gecko;common iguana;American chameleon;whiptail;agama;frilled lizard;alligator lizard;Gila monster;green lizard;African chameleon;Komodo dragon;triceratops;African crocodile;American alligator;thunder snake;ringneck snake;hognose snake;green snake;king snake;garter snake;water snake;vine snake;night snake;boa constrictor;rock python;Indian cobra;green mamba;sea snake;horned viper;diamondback;sidewinder;European fire salamander;common newt;eft;spotted salamander;axolotl;bullfrog;tree frog;tailed frog;whistle;wing;paintbrush;hand blower;oxygen mask;snorkel;loudspeaker;microphone;screen;mouse;electric fan;oil filter;strainer;space heater;stove;guillotine;barometer;rule;odometer;scale;analog clock;digital clock;wall clock;hourglass;sundial;parking meter;stopwatch;digital watch;stethoscope;syringe;magnetic compass;binoculars;projector;sunglasses;loupe;radio telescope;bow;cannon [ground];assault rifle;rifle;projectile;computer keyboard;typewriter keyboard;crane;lighter;abacus;cash machine;slide rule;desktop computer;hand - held computer;notebook;web site;harvester;thresher;printer;slot;vending machine;sewing machine;joystick;switch;hook;car wheel;paddlewheel;pinwheel;potter's wheel;gas pump;carousel;swing;reel;radiator;puck;hard disc;sunglass;pick;car mirror;solar dish;remote control;disk brake;buckle;hair slide;knot;combination lock;padlock;nail;safety pin;screw;muzzle;seat belt;ski;candle;jack - o'-lantern;spotlight;torch;neck brace;pier;tripod;maypole;mousetrap;spider web;trilobite;harvestman;scorpion;black and gold garden spider;barn spider;garden spider;black widow;tarantula;wolf spider;tick;centipede;isopod;Dungeness crab;rock crab;fiddler crab;king crab;American lobster;spiny lobster;crayfish;hermit crab;tiger beetle;ladybug;ground beetle;long - horned beetle;leaf beetle;dung beetle;rhinoceros beetle;weevil;fly;bee;grasshopper;cricket;walking stick;cockroach;mantis;cicada;leafhopper;lacewing;dragonfly;damselfly;admiral;ringlet;monarch;cabbage butterfly;sulphur butterfly;lycaenid;jellyfish;sea anemone;brain coral;flatworm;nematode;conch;snail;slug;sea slug;chiton;sea urchin;sea cucumber;iron;espresso maker;microwave;Dutch oven;rotisserie;toaster;waffle iron;vacuum;dishwasher;refrigerator;washer;Crock Pot;frying pan;wok;caldron;coffeepot;teapot;spatula;altar;triumphal arch;patio;steel arch bridge;suspension bridge;viaduct;barn;greenhouse;palace;monastery;library;apiary;boathouse;church;mosque;stupa;planetarium;restaurant;cinema;home theater;lumbermill;coil;obelisk;totem pole;castle;prison;grocery store;bakery;barbershop;bookshop;butcher shop;confectionery;shoe shop;tobacco shop;toyshop;fountain;cliff dwelling;yurt;dock;brass;megalith;bannister;breakwater;dam;chainlink fence;picket fence;worm fence;stone wall;grille;sliding door;turnstile;mountain tent;scoreboard;honeycomb;plate rack;pedestal;beacon;mashed potato;bell pepper;head cabbage;broccoli;cauliflower;zucchini;spaghetti squash;acorn squash;butternut squash;cucumber;artichoke;cardoon;mushroom;shower curtain;jean;carton;handkerchief;sandal;ashcan;safe;plate;necklace;croquet ball;fur coat;thimble;pajama;running shoe;cocktail shaker;chest;manhole cover;modem;tub;tray;balance beam;bagel;prayer rug;kimono;hot pot;whiskey jug;knee pad;book jacket;spindle;ski mask;beer bottle;crash helmet;bottlecap;tile roof;mask;maillot;Petri dish;football helmet;bathing cap;teddy bear;holster;pop bottle;photocopier;vestment;crossword puzzle;golf ball;trifle;suit;water tower;feather boa;cloak;red wine;drumstick;shield;Christmas stocking;hoopskirt;menu;stage;bonnet;meat loaf;baseball;face powder;scabbard;sunscreen;beer glass;hen-of - the - woods;guacamole;lampshade;wool;hay;bow tie;mailbag;water jug;bucket;dishrag;soup bowl;eggnog;mortar;trench coat;paddle;chain;swab;mixing bowl;potpie;wine bottle;shoji;bulletproof vest;drilling platform;binder;cardigan;sweatshirt;pot;birdhouse;hamper;ping-pong ball;pencil box;pay - phone;consomme;apron;punching bag;backpack;groom;bearskin;pencil sharpener;broom;mosquito net;abaya;mortarboard;poncho;crutch;Polaroid camera;space bar;cup;racket;traffic light;quill;radio;dough;cuirass;military uniform;lipstick;shower cap;monitor;oscilloscope;mitten;brassiere;French loaf;vase;milk can;rugby ball;paper towel;earthstar;envelope;miniskirt;cowboy hat;trolleybus;perfume;bathtub;hotdog;coral fungus;bullet train;pillow;toilet tissue;cassette;carpenter's kit;ladle;stinkhorn;lotion;hair spray;academic gown;dome;crate;wig;burrito;pill bottle;chain mail;theater curtain;window shade;barrel;washbasin;ballpoint;basketball;bath towel;cowboy boot;gown;window screen;agaric;cellular telephone;nipple;barbell;mailbox;lab coat;fire screen;minibus;packet;maze;pole;horizontal bar;sombrero;pickelhaube;rain barrel;wallet;cassette player;comic book;piggy bank;street sign;bell cote;fountain pen;Windsor tie;volleyball;overskirt;sarong;purse;bolo tie;bib;parachute;sleeping bag;television;swimming trunks;measuring cup;espresso;pizza;breastplate;shopping basket;wooden spoon;saltshaker;chocolate sauce;ballplayer;goblet;gyromitra;stretcher;water bottle;dial telephone;soap dispenser;jersey;school bus;jigsaw puzzle;plastic bag;reflex camera;diaper;Band Aid;ice lolly;velvet;tennis ball;gasmask;doormat;Loafer;ice cream;pretzel;quilt;maillot;tape player;clog;iPod;bolete;scuba diver;pitcher;matchstick;bikini;sock;CD player;lens cap;thatch;vault;beaker;bubble;cheeseburger;parallel bars;flagpole;coffee mug;rubber eraser;stole;carbonara;dumbbell".split(";")};
class Qi extends sd{}let gb=new Qi({scroll:!1,inceptionLabels:Va.inception,currentClass:62,currentClassAtlasIndex:507,currentClassAtlasCompareIndex:507,classChoices:[9,622,665,652,288,233,188,169,80,76,62,61,7,355,990,746,791],classAtlasIndices:[982,507,62,9,169,7,80,76,235,41,2,442,450,454,930,378,582,780,901,946,791,738,736,744,489,387,388,399,721,672,6,665,652,288,355,348,804,600,605,631,643],multipleLayers:{abacus:[{layerName:"mixed3b",homeX:.8086,homeY:.4295,gridSize:3,homeScale:48},{layerName:"mixed4c",
homeX:.8593,homeY:.5814},{layerName:"mixed5b",homeX:.8183,homeY:.79,gridSize:4,homeScale:96}],plant:[{layerName:"mixed3b",homeX:.59,homeY:.64,gridSize:3,homeScale:48,caption:"You'll immediately notice that the early layer is very nonspecific in comparison to the others. The icons that emerge are of patterns and splotches of color. It is suggestive of the final class, but not particularly evocative."},{layerName:"mixed4c",homeX:.15,homeY:.4,caption:"By the middle layer, icons definitely resemble leaves, but they could be any type of plant. Attributions are focused on plants, but are a little all over the board."},
{layerName:"mixed5b",homeX:.178,homeY:.72,caption:"Here we see foliage with textures that are specific to cabbage, and curved into rounded balls. There are full heads of cabbage rather than individual leaves."}],water:[{layerName:"mixed4c",homeX:.365,homeY:.673,caption:'In mixed4c we see two different regions that have high attribution toward "sandbar": an area of <b>sandy textures</b>\u2026'},{layerName:"mixed4c",homeX:.318,homeY:.764,caption:"\u2026and a separate area of <b>watery textures</b>."},
{layerName:"mixed5b",homeX:.74,homeY:.48,caption:'In a later layer we see activations that contain <b>both</b> of those concepts when detecting "sandbar".'}]},currentClassComparisonIndex:0,classComparisons:[{id:"507_982",leftLabel:"snorkel",rightLabel:"scuba diver",left:507,right:982,annotation:[{pos:{x:7,y:8},desc:"train?"}]},{id:"736_744",leftLabel:"head cabbage",rightLabel:"artichoke",left:736,right:744,annotation:[]},{id:"671_672",leftLabel:"frying pan",rightLabel:"wok",left:671,right:672,annotation:[{pos:{x:1,
y:7},desc:"noodles?"}]},{id:"777_831",leftLabel:"beer bottle",rightLabel:"wine bottle",left:777,right:831,annotation:[]},{id:"543_544",leftLabel:"computer keyboard",rightLabel:"typewriter keyboard",left:543,right:544,annotation:[]},{id:"28_205",leftLabel:"red wolf",rightLabel:"timber wolf",left:28,right:205,annotation:[]},{id:"67_62",leftLabel:"grey fox",rightLabel:"red fox",left:67,right:62,annotation:[]},{id:"1_62",leftLabel:"kit fox",rightLabel:"red fox",left:1,right:62,annotation:[]},{id:"6_442",
leftLabel:Va.inception[6],rightLabel:Va.inception[442],left:6,right:442,annotation:[{pos:{x:2,y:7},desc:"baseball?"}]}],focus1Highlight:{scale:6,x:.844,y:.49},focusHighlights:[{scale:10,x:.873,y:.585},{scale:10,x:.709,y:.579},{scale:10,x:.221,y:.862},{scale:10,x:.807,y:.667}],pois:{mammals:{layerName:"mixed4a",gridSize:2,gcx:.6295,gcy:1-.9475,scale:8},dogs:{layerName:"mixed5a",gridSize:3,gcx:.589,gcy:1-.946,scale:10},curves:{layerName:"mixed4b",gridSize:3,gcx:.5947,gcy:.3351,scale:14},cups:{layerName:"mixed5b",
gridSize:3,gcx:.35073,gcy:.862,scale:10},patterns:{layerName:"mixed4b",gridSize:3,gcx:.91579,gcy:.32406,scale:8},text:{layerName:"mixed5a",gridSize:3,gcx:.5281,gcy:.9766,scale:19},fabric:{layerName:"mixed4b",gridSize:3,gcx:.489,gcy:.2043,scale:12},clothing:{layerName:"mixed5a",gridSize:3,gcx:.743,gcy:.48,scale:12}}});var vf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Ob.prototype=lb.prototype;lb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+
(this.zero?"0":"")+(null==this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var wd,xd={"%":function(a,b){return(100*a).toFixed(b)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:function(a){return Math.round(a).toString(10)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},g:function(a,b){return a.toPrecision(b)},o:function(a){return Math.round(a).toString(8)},
p:function(a,b){return td(100*a,b)},r:td,s:function(a,b){var c=kb(a,b);if(!c)return a+"";var d=c[0];c=c[1];c=c-(wd=3*Math.max(-8,Math.min(8,Math.floor(c/3))))+1;var e=d.length;return c===e?d:c>e?d+Array(c-e+1).join("0"):0<c?d.slice(0,c)+"."+d.slice(c):"0."+Array(1-c).join("0")+kb(a,Math.max(0,b+c-1))[0]},X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}},vd="y z a f p n \u00b5 m  k M G T P E Z Y".split(" "),jd,Mb;(function(a){jd=wf(a);
Mb=jd.format;return jd})({decimal:".",thousands:",",grouping:[3],currency:["$",""]});q(Ec.prototype,z);q(yd.prototype,z);q(zd.prototype,z);q(Ad.prototype,z);q(ac.prototype,z);ac.prototype._recompute=function(a,b){a.name&&this._differs(b.Icon,b.Icon=Bf(b))&&(a.Icon=!0)};q(nb.prototype,z);q(nb.prototype,{up(){let {upListener:a,moveListener:b}=this.get();window.removeEventListener("pointermove",b);window.removeEventListener("pointerup",a);this.set({cursor:"grab"})},down(a){a.preventDefault();var {enableDragging:b}=
this.get();b&&this.move(a);a=this.up.bind(this);window.addEventListener("pointerup",a);b=this.move.bind(this);window.addEventListener("pointermove",b);this.set({upListener:a,moveListener:b,cursor:"grabbing"})},move(a){let {clientWidth:b,clientHeight:c}=this.get(),d=a.offsetX/b,e=a.offsetY/c;this.set({gcx:d,gcy:e,startPos:{x:a.screenX,y:a.screenY}});this.fire("drag",{gcx:d,gcy:e})}});nb.prototype._recompute=function(a,b){if(a.clientWidth||a.extent)this._differs(b.left,b.left=Df(b))&&(a.left=!0),this._differs(b.right,
b.right=Ef(b))&&(a.right=!0);if(a.clientHeight||a.extent)this._differs(b.top,b.top=Ff(b))&&(a.top=!0),this._differs(b.bottom,b.bottom=Gf(b))&&(a.bottom=!0)};q(Pb.prototype,z);q(Ed.prototype,z);q(Ia.prototype,z);Ia.prototype._recompute=function(a,b){a.clientWidth&&this._differs(b.width,b.width=Lf(b))&&(a.width=!0);(a.width||a.aspectRatio)&&this._differs(b.height,b.height=Mf(b))&&(a.height=!0)};q(Hd.prototype,z);q(Id.prototype,z);var Ri={destroy:Jd,get:function(a){return a?this._state[a]:this._state},
fire:function(a,b){if(a=a in this._handlers&&this._handlers[a].slice())for(var c=0;c<a.length;c+=1)a[c].call(this,b)},observe:function(a,b,c){var d=c&&c.defer?this._observers.post:this._observers.pre;(d[a]||(d[a]=[])).push(b);c&&!1===c.init||(b.__calling=!0,b.call(this,this._state[a]),b.__calling=!1);return{cancel:function(){var c=d[a].indexOf(b);~c&&d[a].splice(c,1)}}},on:function(a,b){if("teardown"===a)return this.on("destroy",b);var c=this._handlers[a]||(this._handlers[a]=[]);c.push(b);return{cancel:function(){var a=
c.indexOf(b);~a&&c.splice(a,1)}}},set:function(a){this._set(ob({},a));this.root._lock||(this.root._lock=!0,pb(this.root._beforecreate),pb(this.root._oncreate),pb(this.root._aftercreate),this.root._lock=!1)},teardown:Jd,_recompute:Qb,_set:function(a){var b=this._state,c={},d=!1,e;for(e in a)this._differs(a[e],b[e])&&(c[e]=d=!0);d&&(this._state=ob({},b,a),this._recompute(c,this._state),this._bind&&this._bind(c,this._state),this._fragment&&(Kd(this,this._observers.pre,c,this._state,b),this._fragment.p(c,
this._state),Kd(this,this._observers.post,c,this._state,b)))},_mount:function(a,b){this._fragment[this._fragment.i?"i":"m"](a,b||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(a,b){return a!=a?b==b:a!==b||a&&"object"===typeof a||"function"===typeof a}};let Rb=new Map;ob(Ld.prototype,{draw(){if(this.refs.canvas){let a=this.refs.canvas.getContext("2d"),{img:b,index:c,width:d,realHeight:e,columns:g,loaded:f}=this.get();a.clearRect(0,0,d,e);let h=Array.isArray(c)?c[0]*
d:c%g*d,k=Array.isArray(c)?c[1]*e:Math.floor(c/g)*e;f?a.drawImage(b,h,k,d,e,0,0,d,e):(a.fillStyle="#ccc",a.fillRect(0,0,d,e),a.fillStyle="#eee",a.textAlign="center",a.font="16px sans-serif",a.fillText("...",d/2,e/2))}}},Ri);Ld.prototype._recompute=function(a,b){(a.width||a.height)&&this._differs(b.realHeight,b.realHeight=Qf(b.width,b.height))&&(a.realHeight=!0)};var Od={},qb={},Si=Nd(",").parse,Ti=Nd("\t").parse;let vb=new Map,tb=new Map,ub=new Map,Rd=new Map([["gif",rb],["png",rb],["jpeg",rb],["jpg",
rb],["csv",function(a){return sb(a).then((a)=>Promise.resolve(Si(a)))}],["tsv",function(a){return sb(a).then((a)=>Promise.resolve(Ti(a)))}],["txt",sb],["text",sb],["json",function(a){return fetch(a).then(Pd).then((a)=>a.json())}]]);var Ja=[235,287,237,982,507,41,176,3,2,112,158,14,442,450,454,513,523,529,930,600,605,736,744,358,756,936,942,943,366,365,367,484,483,488,489,387,388,399,411,405],bf={vm:"shan-gpu-06-vm",id:"inceptionv1_mixed3a",build_dir:"build",cloud_dir:"gs://activation-atlas-public",
model:"inceptionv1",layer:"mixed3a",sample_type:"random",sample_images:1E6,filter:4E5,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"false",steps:1024,icon_size:80,layout:"200_0.05_euclidean",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},cf={vm:"shan-gpu-06-vm",id:"inceptionv1_mixed3b",build_dir:"build",cloud_dir:"gs://activation-atlas-public",model:"inceptionv1",layer:"mixed3b",sample_type:"random",sample_images:1E6,filter:4E5,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"false",
steps:1024,icon_size:80,layout:"200_0.05_euclidean",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},df={vm:"shan-gpu-08-vm",id:"inceptionv1_mixed4a",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4a"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},ef={vm:"shan-gpu-08-vm",
id:"inceptionv1_mixed4b",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4b"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},ff={vm:"shan-gpu-08-vm",id:"inceptionv1_mixed4c",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4c"],
sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},gf={vm:"shan-gpu-07-vm",id:"inceptionv1_mixed4d",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4d"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,
layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},hf={vm:"shan-gpu-07-vm",id:"inceptionv1_mixed4e",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4e"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},jf={vm:"shan-gpu-08-vm",id:"inceptionv1_mixed5a",
build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed5a"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160,320],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},kf={vm:"shan-gpu-07-vm",id:"inceptionv1_mixed5b",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed5b"],sample_type:"random",
sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160,320],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1};let Zf={inceptionv1_mixed3a:bf,inceptionv1_mixed3b:cf,inceptionv1_mixed4a:df,inceptionv1_mixed4b:ef,inceptionv1_mixed4c:ff,inceptionv1_mixed4d:gf,inceptionv1_mixed4e:hf,inceptionv1_mixed5a:jf,inceptionv1_mixed5b:kf};q(wb.prototype,z);q(wb.prototype,{render(){let {grid:a,gridSize:b,icons:c,classHeatmap:d,
layerName:e}=this.get(),g=this.refs.canvas.getContext("2d"),f=g.getImageData(0,0,b,b),h=f.data,k=!1,n=!1;switch(e){case "mixed4a":n=k=!0;break;case "mixed4d":k=!0;n=!1;break;case "mixed5a":k=!0;n=!1;break;case "mixed5b":k=!0,n=!1}for(let e of c){var m=1;-1<d&&(m=Ja.indexOf(d),m=Math.max(.1,20*Math.max(0,e.f[m])));h[(k?b-e.x-1:e.x)*b*4+4*(n?b-e.y-1:e.y)+3]=40+e.n/Math.pow(a+1,2)*b*b*(20<b?8E-4:1.5E-4)*m}g.putImageData(f,0,0)}});wb.prototype._recompute=function(a,b){a.clientWidth&&this._differs(b.height,
b.height=Wf(b))&&(a.height=!0);(a.model||a.layerName)&&this._differs(b.id,b.id=Xf(b))&&(a.id=!0)};q(Ud.prototype,z);q(Mc.prototype,z);Mc.prototype._recompute=function(a,b){a.inceptionLabels&&this._differs(b.labels,b.labels=cg(b))&&(a.labels=!0)};var Zd={},bc={},Ui=Yd(",").parse,Vi=Yd("\t").parse;let Oc=new Map,zb=new Map,Nc=new Map,ce=new Map([["gif",xb],["png",xb],["jpeg",xb],["jpg",xb],["csv",function(a){return yb(a).then((a)=>Promise.resolve(Ui(a)))}],["tsv",function(a){return yb(a).then((a)=>
Promise.resolve(Vi(a)))}],["txt",yb],["text",yb],["json",function(a){return fetch(a).then($d).then((a)=>a.json())}]]);(function(a){1===a.length&&(a=gg(a));return{left:function(b,c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var g=d+e>>>1;0>a(b[g],c)?d=g+1:e=g}return d},right:function(b,c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var g=d+e>>>1;0<a(b[g],c)?e=g:d=g+1}return d}}})(de);let ig={inceptionv1_mixed3a:bf,inceptionv1_mixed3b:cf,inceptionv1_mixed4a:df,inceptionv1_mixed4b:ef,
inceptionv1_mixed4c:ff,inceptionv1_mixed4d:gf,inceptionv1_mixed4e:hf,inceptionv1_mixed5a:jf,inceptionv1_mixed5b:kf};q(ee.prototype,z);var kg={value:function(){}};Ab.prototype=Pc.prototype={constructor:Ab,on:function(a,b){var c=this._,d=jg(a+"",c),e,g=-1,f=d.length;if(2>arguments.length)for(;++g<f;){var h;if(h=e=(a=d[g]).type){a:{h=c[e];for(var k=0,n=h.length;k<n;++k)if((e=h[k]).name===a.name){e=e.value;break a}e=void 0}h=e}if(h)return e}else{if(null!=b&&"function"!==typeof b)throw Error("invalid callback: "+
b);for(;++g<f;)if(e=(a=d[g]).type)c[e]=fe(c[e],a.name,b);else if(null==b)for(e in c)c[e]=fe(c[e],a.name,null);return this}},copy:function(){var a={},b=this._,c;for(c in b)a[c]=b[c].slice();return new Ab(a)},call:function(a,b){if(0<(e=arguments.length-2))for(var c=Array(e),d=0,e,g;d<e;++d)c[d]=arguments[d+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);g=this._[a];d=0;for(e=g.length;d<e;++d)g[d].value.apply(b,c)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+
a);a=this._[a];for(var d=0,e=a.length;d<e;++d)a[d].value.apply(b,c)}};var ge={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},lf=function(a){return function(){return this.matches(a)}};if("undefined"!==typeof document){var hb=document.documentElement;if(!hb.matches){var Wi=hb.webkitMatchesSelector||hb.msMatchesSelector||hb.mozMatchesSelector||hb.oMatchesSelector;
lf=function(a){return function(){return Wi.call(this,a)}}}}var mf=lf;Ka.prototype={constructor:Ka,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};ke.prototype={add:function(a){0>this._names.indexOf(a)&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},
remove:function(a){a=this._names.indexOf(a);0<=a&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return 0<=this._names.indexOf(a)}};var oe={},v=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(oe={mouseenter:"mouseover",mouseleave:"mouseout"}));var qe=[null];F.prototype=ra.prototype={constructor:F,select:function(a){"function"!==typeof a&&(a=Qc(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var g=
b[e],f=g.length,h=d[e]=Array(f),k,n,m=0;m<f;++m)(k=g[m])&&(n=a.call(k,k.__data__,m,g))&&("__data__"in k&&(n.__data__=k.__data__),h[m]=n);return new F(d,this._parents)},selectAll:function(a){"function"!==typeof a&&(a=ie(a));for(var b=this._groups,c=b.length,d=[],e=[],g=0;g<c;++g)for(var f=b[g],h=f.length,k,n=0;n<h;++n)if(k=f[n])d.push(a.call(k,k.__data__,n,f)),e.push(k);return new F(d,e)},filter:function(a){"function"!==typeof a&&(a=mf(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var g=
b[e],f=g.length,h=d[e]=[],k,n=0;n<f;++n)(k=g[n])&&a.call(k,k.__data__,n,g)&&h.push(k);return new F(d,this._parents)},data:function(a,b){if(!a)return q=Array(this.size()),n=-1,this.each(function(a){q[++n]=a}),q;var c=b?rg:qg,d=this._parents,e=this._groups;"function"!==typeof a&&(a=pg(a));for(var g=e.length,f=Array(g),h=Array(g),k=Array(g),n=0;n<g;++n){var m=d[n],l=e[n],p=l.length,q=a.call(m,m&&m.__data__,n,d),r=q.length,t=h[n]=Array(r),w=f[n]=Array(r);p=k[n]=Array(p);c(m,l,t,w,p,q,b);l=m=0;for(var u;m<
r;++m)if(p=t[m]){for(m>=l&&(l=m+1);!(u=w[l])&&++l<r;);p._next=u||null}}f=new F(f,d);f._enter=h;f._exit=k;return f},enter:function(){return new F(this._enter||this._groups.map(je),this._parents)},exit:function(){return new F(this._exit||this._groups.map(je),this._parents)},merge:function(a){var b=this._groups;a=a._groups;for(var c=b.length,d=Math.min(c,a.length),e=Array(c),g=0;g<d;++g)for(var f=b[g],h=a[g],k=f.length,n=e[g]=Array(k),m,l=0;l<k;++l)if(m=f[l]||h[l])n[l]=m;for(;g<c;++g)e[g]=b[g];return new F(e,
this._parents)},order:function(){for(var a=this._groups,b=-1,c=a.length;++b<c;)for(var d=a[b],e=d.length-1,g=d[e],f;0<=--e;)if(f=d[e])g&&g!==f.nextSibling&&g.parentNode.insertBefore(f,g),g=f;return this},sort:function(a){function b(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}a||(a=sg);for(var c=this._groups,d=c.length,e=Array(d),g=0;g<d;++g){for(var f=c[g],h=f.length,k=e[g]=Array(h),n,m=0;m<h;++m)if(n=f[m])k[m]=n;k.sort(b)}return(new F(e,this._parents)).order()},call:function(){var a=arguments[0];
arguments[0]=this;a.apply(null,arguments);return this},nodes:function(){var a=Array(this.size()),b=-1;this.each(function(){a[++b]=this});return a},node:function(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var d=a[b],e=0,g=d.length;e<g;++e){var f=d[e];if(f)return f}return null},size:function(){var a=0;this.each(function(){++a});return a},empty:function(){return!this.node()},each:function(a){for(var b=this._groups,c=0,d=b.length;c<d;++c)for(var e=b[c],g=0,f=e.length,h;g<f;++g)(h=e[g])&&a.call(h,
h.__data__,g,e);return this},attr:function(a,b){var c=Bb(a);if(2>arguments.length){var d=this.node();return c.local?d.getAttributeNS(c.space,c.local):d.getAttribute(c)}return this.each((null==b?c.local?ug:tg:"function"===typeof b?c.local?yg:xg:c.local?wg:vg)(c,b))},style:function(a,b,c){return 1<arguments.length?this.each((null==b?zg:"function"===typeof b?Bg:Ag)(a,b,null==c?"":c)):da(this.node(),a)},property:function(a,b){return 1<arguments.length?this.each((null==b?Cg:"function"===typeof b?Eg:Dg)(a,
b)):this.node()[a]},classed:function(a,b){var c=(a+"").trim().split(/^|\s+/);if(2>arguments.length){for(var d=Rc(this.node()),e=-1,g=c.length;++e<g;)if(!d.contains(c[e]))return!1;return!0}return this.each(("function"===typeof b?Hg:b?Fg:Gg)(c,b))},text:function(a){return arguments.length?this.each(null==a?Ig:("function"===typeof a?Kg:Jg)(a)):this.node().textContent},html:function(a){return arguments.length?this.each(null==a?Lg:("function"===typeof a?Ng:Mg)(a)):this.node().innerHTML},raise:function(){return this.each(Og)},
lower:function(){return this.each(Pg)},append:function(a){var b="function"===typeof a?a:he(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},insert:function(a,b){var c="function"===typeof a?a:he(a),d=null==b?Qg:"function"===typeof b?b:Qc(b);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})},remove:function(){return this.each(Rg)},clone:function(a){return this.select(a?Tg:Sg)},datum:function(a){return arguments.length?
this.property("__data__",a):this.node().__data__},on:function(a,b,c){var d=Vg(a+""),e=d.length,g;if(2>arguments.length){var f=this.node().__on;if(f)for(var h=0,k=f.length,n;h<k;++h){var m=0;for(n=f[h];m<e;++m)if((g=d[m]).type===n.type&&g.name===n.name)return n.value}}else{f=b?Xg:Wg;null==c&&(c=!1);for(m=0;m<e;++m)this.each(f(d[m],b,c));return this}},dispatch:function(a,b){return this.each(("function"===typeof b?Zg:Yg)(a,b))}};var Ta=1/.7,bh=/^#([0-9a-f]{3})$/,ch=/^#([0-9a-f]{6})$/,dh=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,
eh=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,fh=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,gh=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,hh=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,
ih=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,xe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,
crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,
floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,
lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,
moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,
sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};La(Y,sa,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}});La(B,Uc,Wa(Y,{brighter:function(a){a=
null==a?Ta:Math.pow(Ta,a);return new B(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new B(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},hex:function(){return"#"+Vc(this.r)+Vc(this.g)+Vc(this.b)},toString:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(1===a?"rgb(":
"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}}));La(ea,function(a,b,c,d){return 1===arguments.length?jh(a):new ea(a,b,c,null==d?1:d)},Wa(Y,{brighter:function(a){a=null==a?Ta:Math.pow(Ta,a);return new ea(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new ea(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=
this.h%360+360*(0>this.h),b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l;b=c+(.5>c?c:1-c)*b;c=2*c-b;return new B(Wc(240<=a?a-240:a+120,c,b),Wc(a,c,b),Wc(120>a?a+240:a-120,c,b),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var ye=Math.PI/180,Be=180/Math.PI,Ae=4/29,la=6/29,ze=3*la*la,kh=la*la*la;La(I,function(a,b,c,d){return 1===arguments.length?Xc(a):new I(a,b,c,null==d?1:d)},Wa(Y,{brighter:function(a){return new I(this.l+
18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new I(this.l-18*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;b=.96422*$c(b);a=1*$c(a);c=.82521*$c(c);return new B(ad(3.1338561*b-1.6168667*a-.4906146*c),ad(-.9787684*b+1.9161415*a+.033454*c),ad(.0719453*b-.2289914*a+1.4052427*c),this.opacity)}}));La(ka,function(a,b,c,d){return 1===arguments.length?lh(a):new ka(a,b,c,null==d?1:d)},
Wa(Y,{brighter:function(a){return new ka(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function(a){return new ka(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function(){return Xc(this).rgb()}}));var nf=1.78277*-.29227-.1347134789;La(Ba,function(a,b,c,d){if(1===arguments.length){var e=a;if(e instanceof Ba)e=new Ba(e.h,e.s,e.l,e.opacity);else{e instanceof B||(e=Tc(e));var g=e.g/255,f=e.b/255,h=(nf*f+e.r/255*-1.7884503806-3.5172982438*g)/(nf+-1.7884503806-3.5172982438);f-=h;
var k=(1.97294*(g-h)- -.29227*f)/-.90649;f=(g=Math.sqrt(k*k+f*f)/(1.97294*h*(1-h)))?Math.atan2(k,f)*Be-120:NaN;e=new Ba(0>f?f+360:f,g,h,e.opacity)}}else e=new Ba(a,b,c,null==d?1:d);return e},Wa(Y,{brighter:function(a){a=null==a?Ta:Math.pow(Ta,a);return new Ba(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new Ba(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=isNaN(this.h)?0:(this.h+120)*ye,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),d=Math.cos(a);
a=Math.sin(a);return new B(255*(b+c*(-.14861*d+1.78277*a)),255*(b+c*(-.29227*d+-.90649*a)),255*(b+1.97294*c*d),this.opacity)}}));var Ne=function c(b){function d(b,c){var d=e((b=Uc(b)).r,(c=Uc(c)).r),f=e(b.g,c.g),g=e(b.b,c.b),m=De(b.opacity,c.opacity);return function(c){b.r=d(c);b.g=f(c);b.b=g(c);b.opacity=m(c);return b+""}}var e=oh(b);d.gamma=c;return d}(1),bd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cd=new RegExp(bd.source,"g"),Fe=180/Math.PI,kd={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,
scaleY:1},ib,ld,of,Ua,Xi=Ge(function(b){if("none"===b)return kd;ib||(ib=document.createElement("DIV"),ld=document.documentElement,of=document.defaultView);ib.style.transform=b;b=of.getComputedStyle(ld.appendChild(ib),null).getPropertyValue("transform");ld.removeChild(ib);b=b.slice(7,-1).split(",");return Ee(+b[0],+b[1],+b[2],+b[3],+b[4],+b[5])},"px, ","px)","deg)"),Yi=Ge(function(b){if(null==b)return kd;Ua||(Ua=document.createElementNS("http://www.w3.org/2000/svg","g"));Ua.setAttribute("transform",
b);if(!(b=Ua.transform.baseVal.consolidate()))return kd;b=b.matrix;return Ee(b.a,b.b,b.c,b.d,b.e,b.f)},", ",")",")"),Xa=Math.SQRT2,Na=0,ua=0,$a=0,Oa,Za,Fb=0,Ca=0,Eb=0,Ya="object"===typeof performance&&performance.now?performance:Date,Ie="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(b){setTimeout(b,17)};Ma.prototype=Je.prototype={constructor:Ma,restart:function(b,c,d){if("function"!==typeof b)throw new TypeError("callback is not a function");
d=(null==d?Db():+d)+(null==c?0:+c);this._next||Za===this||(Za?Za._next=this:Oa=this,Za=this);this._call=b;this._time=d;dd()},stop:function(){this._call&&(this._call=null,this._time=Infinity,dd())}};var wh=Pc("start","end","interrupt"),xh=[],Zi=ra.prototype.constructor,pf=0,oa=ra.prototype;ma.prototype=function(b){return ra().transition(b)}.prototype={constructor:ma,select:function(b){var c=this._name,d=this._id;"function"!==typeof b&&(b=Qc(b));for(var e=this._groups,g=e.length,f=Array(g),h=0;h<g;++h)for(var k=
e[h],n=k.length,m=f[h]=Array(n),l,p,q=0;q<n;++q)(l=k[q])&&(p=b.call(l,l.__data__,q,k))&&("__data__"in l&&(p.__data__=l.__data__),m[q]=p,Gb(m[q],c,d,q,m,Z(l,d)));return new ma(f,this._parents,c,d)},selectAll:function(b){var c=this._name,d=this._id;"function"!==typeof b&&(b=ie(b));for(var e=this._groups,g=e.length,f=[],h=[],k=0;k<g;++k)for(var n=e[k],m=n.length,l,p=0;p<m;++p)if(l=n[p]){for(var q=b.call(l,l.__data__,p,n),r,t=Z(l,d),w=0,u=q.length;w<u;++w)(r=q[w])&&Gb(r,c,d,w,q,t);f.push(q);h.push(l)}return new ma(f,
h,c,d)},filter:function(b){"function"!==typeof b&&(b=mf(b));for(var c=this._groups,d=c.length,e=Array(d),g=0;g<d;++g)for(var f=c[g],h=f.length,k=e[g]=[],l,m=0;m<h;++m)(l=f[m])&&b.call(l,l.__data__,m,f)&&k.push(l);return new ma(e,this._parents,this._name,this._id)},merge:function(b){if(b._id!==this._id)throw Error();var c=this._groups;b=b._groups;for(var d=c.length,e=Math.min(d,b.length),g=Array(d),f=0;f<e;++f)for(var h=c[f],k=b[f],l=h.length,m=g[f]=Array(l),p,q=0;q<l;++q)if(p=h[q]||k[q])m[q]=p;for(;f<
d;++f)g[f]=c[f];return new ma(g,this._parents,this._name,this._id)},selection:function(){return new Zi(this._groups,this._parents)},transition:function(){for(var b=this._name,c=this._id,d=++pf,e=this._groups,g=e.length,f=0;f<g;++f)for(var h=e[f],k=h.length,l,m=0;m<k;++m)if(l=h[m]){var p=Z(l,c);Gb(l,b,d,m,h,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ma(e,this._parents,b,d)},call:oa.call,nodes:oa.nodes,node:oa.node,size:oa.size,empty:oa.empty,each:oa.each,on:function(b,
c){var d=this._id;return 2>arguments.length?Z(this.node(),d).on.on(b):this.each(Oh(d,b,c))},attr:function(b,c){var d=Bb(b),e="transform"===d?Yi:Me;return this.attrTween(b,"function"===typeof c?(d.local?Fh:Eh)(d,e,fd(this,"attr."+b,c)):null==c?(d.local?Bh:Ah)(d):(d.local?Dh:Ch)(d,e,c+""))},attrTween:function(b,c){var d="attr."+b;if(2>arguments.length)return(d=this.tween(d))&&d._value;if(null==c)return this.tween(d,null);if("function"!==typeof c)throw Error();var e=Bb(b);return this.tween(d,(e.local?
Gh:Hh)(e,c))},style:function(b,c,d){var e="transform"===(b+="")?Xi:Me;return null==c?this.styleTween(b,Qh(b,e)).on("end.style."+b,Rh(b)):this.styleTween(b,"function"===typeof c?Th(b,e,fd(this,"style."+b,c)):Sh(b,e,c+""),d)},styleTween:function(b,c,d){var e="style."+(b+="");if(2>arguments.length)return(e=this.tween(e))&&e._value;if(null==c)return this.tween(e,null);if("function"!==typeof c)throw Error();return this.tween(e,Uh(b,c,null==d?"":d))},text:function(b){return this.tween("text","function"===
typeof b?Wh(fd(this,"text",b)):Vh(null==b?"":b+""))},remove:function(){return this.on("end.remove",Ph(this._id))},tween:function(b,c){var d=this._id;b+="";if(2>arguments.length){d=Z(this.node(),d).tween;for(var e=0,g=d.length,f;e<g;++e)if((f=d[e]).name===b)return f.value;return null}return this.each((null==c?yh:zh)(d,b,c))},delay:function(b){var c=this._id;return arguments.length?this.each(("function"===typeof b?Ih:Jh)(c,b)):Z(this.node(),c).delay},duration:function(b){var c=this._id;return arguments.length?
this.each(("function"===typeof b?Kh:Lh)(c,b)):Z(this.node(),c).duration},ease:function(b){var c=this._id;return arguments.length?this.each(Mh(c,b)):Z(this.node(),c).ease}};var md={time:null,delay:0,duration:250,ease:function(b){return(1>=(b*=2)?b*b*b:(b-=2)*b*b+2)/2}};ra.prototype.interrupt=function(b){return this.each(function(){Pa(this,b)})};ra.prototype.transition=function(b){var c;if(b instanceof ma){var d=b._id;b=b._name}else d=++pf,(c=md).time=Db(),b=null==b?null:b+"";for(var e=this._groups,
g=e.length,f=0;f<g;++f)for(var h=e[f],k=h.length,l,m=0;m<k;++m)if(l=h[m]){var p=l,q=b,r=d,t=m,u=h,w;if(!(w=c))a:{w=void 0;for(var x=d;!(w=l.__transition)||!(w=w[x]);)if(!(l=l.parentNode)){w=(md.time=Db(),md);break a}}Gb(p,q,r,t,u,w)}return new ma(e,this._parents,b,d)};na.prototype={constructor:na,scale:function(b){return 1===b?this:new na(this.k*b,this.x,this.y)},translate:function(b,c){return 0===b&0===c?this:new na(this.k,this.x+this.k*b,this.y+this.k*c)},apply:function(b){return[b[0]*this.k+this.x,
b[1]*this.k+this.y]},applyX:function(b){return b*this.k+this.x},applyY:function(b){return b*this.k+this.y},invert:function(b){return[(b[0]-this.x)/this.k,(b[1]-this.y)/this.k]},invertX:function(b){return(b-this.x)/this.k},invertY:function(b){return(b-this.y)/this.k},rescaleX:function(b){return b.copy().domain(b.range().map(this.invertX,this).map(b.invert,b))},rescaleY:function(b){return b.copy().domain(b.range().map(this.invertY,this).map(b.invert,b))},toString:function(){return"translate("+this.x+
","+this.y+") scale("+this.k+")"}};var Hb=new na(1,0,0);Oe.prototype=na.prototype;var M={components:[],running:!1,add:function(b){~M.components.indexOf(b)||(M.components.push(b),M.running||(M.running=!0,requestAnimationFrame(M.next)))},next:function(){for(var b=window.performance.now(),c=!1,d=M.components.length;d--;){var e=M.components[d],g={},f=!1,h;for(h in e._currentTweens){var k=e._currentTweens[h];b>=k.end?(g[h]=k.to,delete e._currentTweens[h],k.fulfil()):(c=f=!0,b>=k.start&&(g[h]=k.value(k.ease((b-
k.start)/k.duration))))}e._tweening=!0;e.set(g);e._tweening=!1;f||M.components.splice(d,1)}c?requestAnimationFrame(M.next):M.running=!1}};q(Qa.prototype,z);q(Qa.prototype,{tween:function(b,c,d){var e=this;void 0===d&&(d={});if(!this._currentTweens){this._currentTweens=Object.create(null);this._tweening=!1;var g=this.set;this.set=function(b){if(!e._tweening)for(var c in b)e._currentTweens[c]&&e._currentTweens[c].abort();g.call(e,b)}}this._currentTweens[b]&&this._currentTweens[b].abort();var f=window.performance.now()+
(d.delay||0),h=d.duration||400,k=f+h,l={key:b,value:(d.interpolate||gd)(this.get()[b],c),to:c,start:f,end:k,duration:h,ease:d.easing||ei,running:!0,abort:function(){l.running=!1;delete e._currentTweens[b]}};this._currentTweens[b]=l;M.add(this);c=new Promise(function(b){l.fulfil=b});c.abort=l.abort;return c},zoomEventFilter:function(){let {scrollWheel:b,disableBehaviors:c}=this.get();return c?!1:b?!v.button:!("wheel"===v.type&&!1===v.ctrlKey)&&!v.button},mouseMove:function(b){this.set({msx:b.offsetX,
msy:b.offsetY});let {}=this.get()},update:function(){var {el:b}=this.get();b=Oe(b);this.set({scale:b.k,transform:b,translateX:b.x,translateY:b.y})},onzoom:function(b){b.update();b.fire("zoom")},zoomTo:function(b,c,d=1,e=1E3){let {selection:g,z:f,minSize:h,clientWidth:k,clientHeight:l}=this.get();g.transition().duration(e).call(f.transform,Hb.translate(k/2,l/2).scale(d).translate(-b*h,-c*h))},translateTo:function(b,c){let {z:d,selection:e,minSize:g}=this.get();d.translateTo(e,b*g,c*g)},home:function(b=
0){let {homeX:c,homeY:d,homeScale:e}=this.get();this.zoomTo(c,d,e,b)},scaleTo:function(b,c=0){let {z:d,selection:e}=this.get();e.transition().duration(c).call(d.scaleTo,b)}});Qa.prototype._recompute=function(b,c){(b.clientWidth||b.clientHeight)&&this._differs(c.minSize,c.minSize=fi(c))&&(b.minSize=!0);(b.msx||b.msy)&&this._differs(c.mouseOver,c.mouseOver=gi(c))&&(b.mouseOver=!0);(b.transform||b.msx||b.msy||b.clientHeight||b.clientWidth||b.minSize)&&this._differs(c.mouseGlobalPosition,c.mouseGlobalPosition=
hi(c))&&(b.mouseGlobalPosition=!0);(b.scale||b.translateX||b.translateY||b.minSize||b.clientWidth||b.clientHeight)&&this._differs(c.extent,c.extent=ii(c))&&(b.extent=!0);b.extent&&(this._differs(c.gcx,c.gcx=ji(c))&&(b.gcx=!0),this._differs(c.gcy,c.gcy=ki(c))&&(b.gcy=!0))};q(Fc.prototype,z);q(Fc.prototype,{fullscreen(){this.refs.root.webkitRequestFullscreen()},home(b=0){this.refs.d3Zoom.home(b)},translateTo(b,c){this.refs.d3Zoom.translateTo(b,c)},zoomTo(b,c,d,e=1E3){this.refs.d3Zoom.zoomTo(b,c,d,e)},
transitionTo(b,c,d,e=0){this.refs.d3Zoom.transformTo(b,c,d,e)},scaleBy(b){let {scale:c}=this.get();this.refs.d3Zoom.scaleTo(c*b,300)},iconToGlobalPosition(b,c){let {density:d,scale:e,translateX:g,translateY:f,config:h,w:k,h:l}=this.get();var m=h.grid_size[c];c=b.gw*e*Math.min(k,l);m=c*Math.min(1,Math.sqrt(d*b.num_activations/(("number"==typeof h.filter[0]?h.filter[0]:h.sample_images)/(m*m))));return{sourceX:b.localX*h.icon_size,sourceY:b.localY*h.icon_size,iconX:b.gy*e*Math.min(k,l)+g+(c-m)/2,iconY:b.gx*
e*Math.min(k,l)+f+(c-m)/2,iconWidth:m}},clear(){let {viewHeight:b,viewWidth:c,context:d,backgroundColor:e,labelsContext:g}=this.get();d.globalAlpha=1;d.fillStyle=e;d.clearRect(0,0,c,b);d.fillRect(0,0,c,b);g.globalAlpha=1;g.clearRect(0,0,c,b)},render(){let {id:b,labelsContext:c,loading:d,classHeatmap:e,showLabels:g,labels:f,labelsBufferCanvas:h,imageSmoothing:k,scale:l,w:m,h:p,translateX:q,translateY:r,context:t,config:u,layers:w,currentZoomIndex:x,strokeColor:v,strokeThickness:y,maxAttributionValue:z}=
this.get();this.clear();t.imageSmoothingEnabled=k;c.strokeStyle=v;c.lineWidth=y;t.fillStyle="white";if(u&&w&&!d){let d=[{i:x,opacity:1}];this.set({visibleLayers:d});d.forEach((d)=>{let k=d.i;d=w[k];var n=Math.min(m,p);let u=Math.max(0,Math.floor(-(q/l/n)*d.length)),x=u+Math.ceil(m/l/n*d.length);var v=Math.max(0,Math.floor(-(r/l/n)*d.length));for(n=v+Math.ceil(p/l/n*d.length);v<=n;v++)for(let l=u;l<=x;l++)if(d[v]&&d[v][l]){let m=d[v][l],{iconX:n,iconY:p,iconWidth:q}=this.iconToGlobalPosition(m,k),
r=b;{c.globalAlpha=.3;c.strokeRect(n,p,q,q);c.globalAlpha=1;var y=Math.ceil(40/q);let b=Math.ceil(60/q);g&&f&&-1===e&&0==m.y%b&&0==m.x%y&&(c.globalAlpha=1,y=m.top_class_indices[0],c.drawImage(h,y%10*150,20*Math.floor(y/10)+4,Math.min(q*b-5,100),20,n,p+q-20-2,Math.min(q*b-5,100),20));ae(m.url).then((b)=>{let {id:c,visibleLayers:d}=this.get();if(d.reduce((b,c)=>c.i===k?b+1:b,0)&&r===c){let {config:c,classHeatmap:d,classHeatmapMultiplier:g,classHeatmapPositive:h}=this.get(),{sourceX:l,sourceY:n,iconX:p,
iconY:q,iconWidth:r}=this.iconToGlobalPosition(m,k);var e=1;-1<d&&(e=m.full_class_indices.indexOf(d),-1<e?(e=m.full_class_values[e]/z,e*=h,e=Math.max(0,e)*g):e=0);var f=Math.min(8/r,.6);t.globalAlpha=1;f=f*c.icon_size/2;-1<d&&t.fillRect(p,q,r,r);t.globalAlpha=e;t.drawImage(b,n+f,l+f,c.icon_size-2*f,c.icon_size-2*f,p,q,r,r)}})}}})}}});Fc.prototype._recompute=function(b,c){(b.layers||b.layer)&&this._differs(c.maxAttributionValue,c.maxAttributionValue=ni(c))&&(b.maxAttributionValue=!0);(b.viewWidth||
b.screenResolution)&&this._differs(c.w,c.w=oi(c))&&(b.w=!0);(b.viewHeight||b.screenResolution)&&this._differs(c.h,c.h=pi(c))&&(b.h=!0);(b.scale||b.gridSize||b.config||b.classHeatmap||b.w||b.h||b.autoGridSizeMultiplier)&&this._differs(c.currentZoomIndex,c.currentZoomIndex=qi(c))&&(b.currentZoomIndex=!0);(b.currentZoomIndex||b.layers)&&this._differs(c.currentLayerData,c.currentLayerData=ri(c))&&(b.currentLayerData=!0);(b.labelsBufferContext||b.labels||b.fontSize||b.textColor||b.textShadowColor)&&this._differs(c.labelsBuffer,
c.labelsBuffer=si(c))&&(b.labelsBuffer=!0);(b.currentLayerData||b.config||b.mouseGlobalPosition||b.w||b.h||b.translateX||b.translateY)&&this._differs(c.hoverIconData,c.hoverIconData=ui(c))&&(b.hoverIconData=!0);(b.hoverIconData||b.mouseGlobalPosition)&&this._differs(c.showHover,c.showHover=ti(c))&&(b.showHover=!0);(b.hoverIconData||b.scale||b.w||b.h||b.translateX)&&this._differs(c.hoverIconX,c.hoverIconX=vi(c))&&(b.hoverIconX=!0);(b.hoverIconData||b.scale||b.w||b.h||b.translateY)&&this._differs(c.hoverIconY,
c.hoverIconY=wi(c))&&(b.hoverIconY=!0);(b.hoverIconData||b.scale||b.w||b.h)&&this._differs(c.hoverIconW,c.hoverIconW=xi(c))&&(b.hoverIconW=!0);(b.mouseGlobalPosition||b.hoverIconData||b.enableHover)&&this._differs(c.showHoverIcon,c.showHoverIcon=yi(c))&&(b.showHoverIcon=!0)};q(hd.prototype,z);q(id.prototype,z);id.prototype._recompute=function(b,c){(b.clientWidth||b.minWidth)&&this._differs(c.scale,c.scale=Di(c))&&(b.scale=!0);(b.clientWidth||b.width||b.minWidth)&&this._differs(c.finalWidth,c.finalWidth=
Ei(c))&&(b.finalWidth=!0);(b.clientHeight||b.scale)&&this._differs(c.finalHeight,c.finalHeight=Fi(c))&&(b.finalHeight=!0)};let qf=Mb(".3f");var Vb=qf;q(Lb.prototype,z);q(Lb.prototype,{home(b){this.refs.atlas.home(b)},zoomTo(b,c,d,e=1E3){this.refs.atlas.zoomTo(b,c,d,e)},toggle(){let {showOptions:b}=this.get();this.set({showOptions:!b})},copyShareLink(){var {layerName:b}=this.get();let {gcx:c,gcy:d,scale:e}=this.refs.atlas.get();b=`layer=${encodeURIComponent(b)}&poi=${[c,d,e].map(qf).join(",")}`;navigator.clipboard.writeText(location.protocol+
"//"+location.hostname+(location.port?":"+location.port:"")+location.pathname+"?"+b).then(function(){console.log("Copied to clipboard")},function(){console.error("Unable to copy to clipboard")})}});Lb.prototype._recompute=function(b,c){b.gridSize&&this._differs(c.realGridSize,c.realGridSize=Hi(c))&&(b.realGridSize=!0);(b.iconScaleFactor||b.realGridSize)&&this._differs(c.scaleCountFactor,c.scaleCountFactor=Ii(c))&&(b.scaleCountFactor=!0)};q(Ue.prototype,z);q(Sa.prototype,z);q(Sa.prototype,{mousemove:function(b){let {visible:c}=
this.get();c&&this.set({x:b.clientX,y:b.clientY})},show:function(b){this.set({visible:!0});this.refs.component.set(b)},hide:function(){this.set({visible:!1})}});Sa.prototype._recompute=function(b,c){(b.x||b.width||b.y||b.clientHeight||b.visible)&&this._differs(c.style,c.style=Ni(c))&&(b.style=!0)};var $e=Mb(".2f"),Xe=Mb(",");q(af.prototype,z);gb.set({scroll:!0});gb.set({tooltip:new Sa({target:document.body,store:gb,data:{width:250,component:af}})});new Ue({target:document.querySelector("#app"),store:gb,
data:{}})})();
//# sourceMappingURL=app.min.js.map
