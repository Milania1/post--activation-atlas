'use strict';(function(){function C(){}function v(a,b){for(var c in b)a[c]=b[c];return a}function la(a,b){for(var c in b)a[c]=1;return a}function y(a){a.parentNode.removeChild(a)}function Ba(a){for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling)}function ma(a,b){for(;a.firstChild;)b.appendChild(a.firstChild)}function Ca(a,b){for(var c=0;c<a.length;c+=1)a[c]&&a[c].d(b)}function F(){return document.createDocumentFragment()}function h(a){return document.createElement(a)}function H(a){return document.createElementNS("http://www.w3.org/2000/svg",
a)}function m(a){return document.createTextNode(a)}function u(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function mc(a){return""===a?void 0:+a}function l(a,b,c){a.style.setProperty(b,c)}function sa(a,b){"static"===getComputedStyle(a).position&&(a.style.position="relative");let c=document.createElement("object");c.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;");c.type="text/html";
let d;c.onload=()=>{d=c.contentDocument.defaultView;d.addEventListener("resize",b)};/Trident/.test(navigator.userAgent)?(a.appendChild(c),c.data="about:blank"):(c.data="about:blank",a.appendChild(c));return{cancel:()=>{d&&d.removeEventListener&&d.removeEventListener("resize",b);a.removeChild(c)}}}function B(a){a._lock=!0;Da(a._beforecreate);Da(a._oncreate);Da(a._aftercreate);a._lock=!1}function z(a,b){a._handlers=Object.create(null);a._slots=Object.create(null);a._bind=b._bind;a._staged={};a.options=
b;a.root=b.root||a;a.store=b.store||a.root.store;b.root||(a._beforecreate=[],a._oncreate=[],a._aftercreate=[])}function Da(a){for(;a&&a.length;)a.shift()()}function ca(a,b){if(0>(b=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e")))return null;var c=a.slice(0,b);return[1<c.length?c[0]+c.slice(2):c,+a.slice(b+1)]}function Pc(a){return a=ca(Math.abs(a)),a?a[1]:NaN}function Qc(a,b){return function(c,d){for(var e=c.length,g=[],f=0,q=a[0],k=0;0<e&&0<q;){k+q+1>d&&(q=Math.max(1,d-k));g.push(c.substring(e-=
q,e+q));if((k+=q+1)>d)break;q=a[f=(f+1)%a.length]}return g.reverse().join(b)}}function Rc(a){return function(b){return b.replace(/[0-9]/g,function(b){return a[+b]})}}function Ea(a){return new Fa(a)}function Fa(a){if(!(b=Sc.exec(a)))throw Error("invalid format: "+a);var b;this.fill=b[1]||" ";this.align=b[2]||">";this.sign=b[3]||"-";this.symbol=b[4]||"";this.zero=!!b[5];this.width=b[6]&&+b[6];this.comma=!!b[7];this.precision=b[8]&&+b[8].slice(1);this.trim=!!b[9];this.type=b[10]||""}function Za(a,b){b=
ca(a,b);if(!b)return a+"";a=b[0];b=b[1];return 0>b?"0."+Array(-b).join("0")+a:a.length>b+1?a.slice(0,b+1)+"."+a.slice(b+1):a+Array(b-a.length+2).join("0")}function $a(a){return a}function Tc(a){function b(a){function b(a){var b=u,d=v,f,k;if("c"===l)d=y(a)+d,a="";else{a=+a;var p=0>a;a=y(Math.abs(a),Z);if(m){var n=a.length,x=1,ta=-1;a:for(;x<n;++x)switch(a[x]){case ".":ta=f=x;break;case "0":0===ta&&(ta=x);f=x;break;default:if(0<ta){if(!+a[x])break a;ta=0}}a=0<ta?a.slice(0,ta)+a.slice(f+1):a}p&&0===
+a&&(p=!1);b=(p?"("===h?h:"-":"-"===h||"("===h?"":h)+b;d=("s"===l?ab[8+bb/3]:"")+d+(p&&"("===h?")":"");if(E)for(p=-1,f=a.length;++p<f;)if(k=a.charCodeAt(p),48>k||57<k){d=(46===k?e+a.slice(p+1):a.slice(p))+d;a=a.slice(0,p);break}}K&&!t&&(a=c(a,Infinity));k=b.length+a.length+d.length;p=k<w?Array(w-k+1).join(q):"";K&&t&&(a=c(p+a,p.length?w-d.length:Infinity),p="");switch(r){case "<":a=b+a+d+p;break;case "=":a=b+p+a+d;break;case "^":a=p.slice(0,k=p.length>>1)+b+a+d+p.slice(k);break;default:a=p+b+a+d}return g(a)}
a=Ea(a);var q=a.fill,r=a.align,h=a.sign,n=a.symbol,t=a.zero,w=a.width,K=a.comma,Z=a.precision,m=a.trim,l=a.type;"n"===l?(K=!0,l="g"):cb[l]||(null==Z&&(Z=12),m=!0,l="g");if(t||"0"===q&&"="===r)t=!0,q="0",r="=";var u="$"===n?d[0]:"#"===n&&/[boxX]/.test(l)?"0"+l.toLowerCase():"",v="$"===n?d[1]:/[%p]/.test(l)?f:"",y=cb[l],E=/[defgprs%]/.test(l);Z=null==Z?6:/[gprs]/.test(l)?Math.max(1,Math.min(21,Z)):Math.max(0,Math.min(20,Z));b.toString=function(){return a+""};return b}var c=a.grouping&&a.thousands?Qc(a.grouping,
a.thousands):$a,d=a.currency,e=a.decimal,g=a.numerals?Rc(a.numerals):$a,f=a.percent||"%";return{format:b,formatPrefix:function(a,c){var d=b((a=Ea(a),a.type="f",a));a=3*Math.max(-8,Math.min(8,Math.floor(Pc(c)/3)));var e=Math.pow(10,-a),f=ab[8+a/3];return function(a){return d(e*a)+f}}}}function Uc(a,b){function c(b){a.fire("click")}var d,e=a._slotted.default;return{c(){d=h("button");d.addEventListener("click",c,void 0);d.className="svelte-1d81900"},m(a,b){a.insertBefore(d,b);e&&d.appendChild(e)},p:C,
d(a){a&&y(d);e&&ma(d,e);d.removeEventListener("click",c,void 0)}}}function ec(a){z(this,a);this._state=v({},a.data);this._intro=!0;this._slotted=a.slots||{};this._fragment=Uc(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Vc(a,b){var c,d,e;return{c(){c=H("svg");d=H("path");e=H("path");u(d,"d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z");u(e,"d","M0 0h24v24H0z");u(e,"fill","none");u(c,"xmlns","http://www.w3.org/2000/svg");u(c,"width","24");u(c,"height","24");u(c,
"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:C,d(a){a&&y(c)}}}function db(a){z(this,a);this._state=v({},a.data);this._intro=!0;this._fragment=Vc(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Wc(a,b){var c,d,e;return{c(){c=H("svg");d=H("path");e=H("path");u(d,"d","M19 13H5v-2h14v2z");u(e,"d","M0 0h24v24H0z");u(e,"fill","none");u(c,"xmlns","http://www.w3.org/2000/svg");u(c,"width","24");u(c,"height","24");u(c,"viewBox",
"0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:C,d(a){a&&y(c)}}}function eb(a){z(this,a);this._state=v({},a.data);this._intro=!0;this._fragment=Wc(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Xc(a,b){var c,d,e;return{c(){c=H("svg");d=H("path");e=H("path");u(d,"d","M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z");u(e,"d","M0 0h24v24H0z");u(e,"fill","none");u(c,"xmlns","http://www.w3.org/2000/svg");u(c,"width","24");u(c,"height","24");
u(c,"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:C,d(a){a&&y(c)}}}function fb(a){z(this,a);this._state=v({},a.data);this._intro=!0;this._fragment=Xc(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Yc({name:a}){if("home"===a)return fb;if("add"===a)return db;if("remove"===a)return eb}function Zc(a,b){var c,d=b.Icon;if(d)var e=new d({root:a.root,store:a.store});return{c(){c=h("div");e&&e._fragment.c();l(c,"fill",b.color)},
m(a,b){a.insertBefore(c,b);e&&e._mount(c,null)},p(b,f){d!==(d=f.Icon)&&(e&&e.destroy(),d?(e=new d({root:a.root,store:a.store}),e._fragment.c(),e._mount(c,null)):e=null);b.color&&l(c,"fill",f.color)},d(a){a&&y(c);e&&e.destroy()}}}function gb(a){z(this,a);this._state=v({color:"black"},a.data);this._recompute({name:1},this._state);this._intro=!0;this._fragment=Zc(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),B(this))}function hb(a){return new Function("d","return {"+
a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}")}function $c(a,b){var c=hb(a);return function(d,e){return b(c(d),e,a)}}function ad(a){var b=Object.create(null),c=[];a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)});return c}function ib(a){function b(a,b){function c(){if(h)return Ga;if(K)return K=!1,jb;var b,c=f,d;if(34===a.charCodeAt(c)){for(;f++<e&&34!==a.charCodeAt(f)||34===a.charCodeAt(++f););(b=f)>=e?h=!0:10===(d=a.charCodeAt(f++))?K=!0:13===d&&(K=!0,10===
a.charCodeAt(f)&&++f);return a.slice(c+1,b-1).replace(/""/g,'"')}for(;f<e;){if(10===(d=a.charCodeAt(b=f++)))K=!0;else if(13===d)K=!0,10===a.charCodeAt(f)&&++f;else if(d!==g)continue;return a.slice(c,b)}return h=!0,a.slice(c,e)}var d=[],e=a.length,f=0,q=0,t,h=0>=e,K=!1;10===a.charCodeAt(e-1)&&--e;for(13===a.charCodeAt(e-1)&&--e;(t=c())!==Ga;){for(var m=[];t!==jb&&t!==Ga;)m.push(t),t=c();b&&null==(m=b(m,q++))||d.push(m)}return d}function c(b){return b.map(d).join(a)}function d(a){return null==a?"":
e.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}var e=new RegExp('["'+a+"\n\r]"),g=a.charCodeAt(0);return{parse:function(a,c){var d,e;a=b(a,function(a,b){if(d)return d(a,b-1);e=a;d=c?$c(a,c):hb(a)});a.columns=e||[];return a},parseRows:b,format:function(b,c){null==c&&(c=ad(b));return[c.map(d).join(a)].concat(b.map(function(b){return c.map(function(a){return d(b[a])}).join(a)})).join("\n")},formatRows:function(a){return a.map(c).join("\n")}}}function kb(a){if(a.ok)return a;throw Error(a.status+":"+a.statusText);
}function ua(a){return new Promise((b,c)=>{let d=new Image;d.onload=(a)=>b(d);d.onerror=(a)=>c(a);d.src=a})}function da(a){return fetch(a).then(kb).then((a)=>a.text())}function pa(a,b){b=null!=b?b:Date.now()+""+Math.random();let c="namespace:"+b+", url:"+a+", random:"+Date.now()+Math.random();va.set(c,!1);if(Ha.has(b)){let a=Ha.get(b);va.set(a,!0)}Ha.set(b,c);return new Promise((b,e)=>{if(Array.isArray(a)){var d=a.map((a)=>lb(a));d=Promise.all(d)}else d=lb(a);d.then((a)=>{va.get(c)||b(a)}).catch((a)=>
{va.get(c)||e(a)})})}function lb(a){if(Ia.has(a))return Ia.get(a);var b=mb;var c=a.split(".");c=c[c.length-1];b.has(c)||console.warn("Trying to load url: "+a+' with an unknown filetype. Assuming "text".');b=b.has(c)?c:"text";b=mb.get(b)(a);Ia.set(a,b);return b}function nb(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function bd(a){return function(b,c){return nb(a(b),c)}}function cd({changed:a}){this.set({data:null});if(a.layer||a.classFilter||a.id||a.layout||a.filter){let {root:a,id:c,layer:d,classFilter:e,
filter:g,fingerprint:f,layout:q}=this.get();pa(`${a}/${c}/${c}.json`,f).then((b)=>{this.set({config:b});if(null!==e){null==b.class_filter&&(b.class_filter="None");null==b.filter&&(b.filter="None");Array.isArray(b.grid_size)||(b.grid_size=[b.grid_size]);Array.isArray(b.class_filter)||(b.class_filter=[b.class_filter]);Array.isArray(b.layer)||(b.layer=[b.layer]);Array.isArray(b.layout)||(b.layout=[b.layout]);Array.isArray(b.filter)||(b.filter=[b.filter]);let f=b.grid_size.map((f)=>`${a}/${c}/web/web--grid_size=${f}--layout=${b.layout[q]}--class_filter=${b.class_filter[e]}--filter=${b.filter[g]}--layer=${b.layer[d]}--model=${b.model}--sample_images=${b.sample_images}--sample_type=${b.sample_type}.json`);
pa(f).then((f)=>{let k=Array(f.length);f.forEach((f,p)=>{let h=b.grid_size[p],t=b.tile_size;Array(h/t).keys();let n=[...Array(h).keys()].map((a)=>Array(h));for(let k of f){void 0!==k.x&&(k.grid_x=k.x);void 0!==k.y&&(k.grid_y=k.y);void 0!==k.n&&(k.num_activations=k.n);void 0!==k.i&&(k.top_class_indices=k.i);void 0!==k.v&&(k.top_class_values=k.v);void 0!==k.f&&(k.full_class_values=k.f,k.full_class_indices=ea);f=k.grid_x;let p=k.grid_y,r=Math.floor(f/t),K=Math.floor(p/t);k.localX=f%t;k.localY=p%t;k.url=
`${a}/${c}/render/render--x=${r}--y=${K}--tries=${b.tries}--alpha=${b.alpha?"True":"False"}--tile_size=${b.tile_size}--whiten=${b.whiten}--steps=${b.steps}--icon_size=${b.icon_size}--grid_size=${h}--layout=${b.layout[q]}--class_filter=${b.class_filter[e]}--filter=${b.filter[g]}--layer=${b.layer[d]}--model=${b.model}--sample_images=${b.sample_images}--sample_type=${b.sample_type}.jpg`;n[k.grid_x][k.grid_y]=k}k[p]=n});this.set({layers:k});pa(`${a}/labels--model-${b.model}.txt`).then((a)=>{a=a.split("\n");
this.set({labels:a})})})}})}}function ob(a){z(this,a);this._state=v({fingerprint:Math.random()+Date.now(),root:"https://storage.googleapis.com/activation-atlas/build",id:"inceptionv1",layer:0,classFilter:0,filter:0,layout:0,config:null,layers:null,labels:null},a.data);this._intro=!0;this._handlers.update=[cd];this._fragment={c:C,m:C,p:C,d:C};this.root._oncreate.push(()=>{this.fire("update",{changed:la({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),
B(this))}function dd(a){return function(){return a}}function Ja(a,b){if(a===b||a!==a)return dd(a);var c=typeof a;if(c!==typeof b||Array.isArray(a)!==Array.isArray(b))throw Error("Cannot interpolate values of different type");if(Array.isArray(a)){var d=b.map(function(b,c){return Ja(a[c],b)});return function(a){return d.map(function(b){return b(a)})}}if("object"===c){if(!a||!b)throw Error("Object cannot be null");if("[object Date]"===Object.prototype.toString.call(a)&&"[object Date]"===Object.prototype.toString.call(b)){a=
a.getTime();b=b.getTime();var e=b-a;return function(b){return new Date(a+b*e)}}var g=Object.keys(b),f={},q={};g.forEach(function(c){f[c]=Ja(a[c],b[c])});return function(a){g.forEach(function(b){q[b]=f[b](a)});return q}}if("number"===c){var k=b-a;return function(b){return a+b*k}}throw Error("Cannot interpolate "+c+" values");}function ed(a){return a}function fa(a){return.5>a?4*a*a*a:.5*Math.pow(2*a-2,3)+1}function fd({width:a,unit:b}){return a/b}function gd(a,b){var c;return{c(){c=h("div");c.className=
"svelte-16epbqg svelte-ref-capture"},m(b,e){b.insertBefore(c,e);a.refs.capture=c},p:C,d(b){b&&y(c);a.refs.capture===c&&(a.refs.capture=null)}}}function wa(a){z(this,a);this.refs={};this._state=v({width:100,height:100,gcx:.5,gcy:.5,scx:.5,scy:.5,unit:100},a.data);this._recompute({width:1,unit:1},this._state);this._intro=!0;this._fragment=gd(this,this._state);this.root._oncreate.push(()=>{this.fire("update",{changed:la({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,
a.anchor),B(this))}function hd(){this.refs.figure.addEventListener("ready",(a)=>{this.set({ready:!0})});this.refs.figure.addEventListener("onscreen",(a)=>{this.set({onscreen:!0});this.fire("onscreen")});this.refs.figure.addEventListener("offscreen",(a)=>{this.set({onscreen:!1});this.fire("offscreen")})}function id(a,b){var c,d=a._slotted.default;return{c(){c=h("d-figure")},m(b,g){b.insertBefore(c,g);d&&c.appendChild(d);a.refs.figure=c},p:C,d(b){b&&y(c);d&&ma(c,d);a.refs.figure===c&&(a.refs.figure=
null)}}}function pb(a){z(this,a);this.refs={};this._state=v({ready:!1,onscreen:!1},a.data);this._intro=!0;this._slotted=a.slots||{};this._fragment=id(this,this._state);this.root._oncreate.push(()=>{hd.call(this);this.fire("update",{changed:la({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),B(this))}function jd({layers:a,layer:b}){if(null==a)return 0;let c=0;a[b].forEach((a)=>{a.forEach((a)=>{a&&500<a.num_activations&&(a=a.full_class_values[0],a>
c&&(c=a))})});return c}function kd({viewWidth:a,viewHeight:b}){return a/b}function ld({viewWidth:a,viewHeight:b}){return Math.min(a,b)}function md({gcx:a,gcy:b,scale:c,viewWidth:d,viewHeight:e,minViewDimInPx:g}){return{x:d/2-a*g*c,y:e/2-b*g*c}}function nd({scale:a,gridSize:b}){let c=0;null!=b?c=b:(1<a&&(c=0),2<a&&(c=1),4<a&&(c=2),8<a&&(c=3),16<a&&(c=4));return+c}function od({currentZoomIndex:a,layers:b}){if(b&&a)return b[a].length}function pd({config:a,minViewDimInPx:b,currentZoomIndex:c,scale:d}){if(a)return b/
a.grid_size[c]*d}function qd({mouseMoveMode:a,onCanvas:b,currentIconInfo:c,enableHover:d}){return d&&b&&"hover"==a&&c}function rd({minViewDimInPx:a,config:b,currentZoomIndex:c,scale:d}){if(b)return a/(b.icon_size*b.grid_size[c])*d}function sd({lastRecordedCanvasPos:a,topLeft:b,layerScale:c,config:d}){if(d)return{x:Math.floor((a.x-b.x)/(c*d.icon_size)),y:Math.floor((a.y-b.y)/(c*d.icon_size))}}function td({config:a,layerScale:b,topLeft:c,gridSelected:d}){if(a)return{x:d.x*a.icon_size*b+c.x-1,y:d.y*
a.icon_size*b+c.y-1}}function ud({layers:a,currentZoomIndex:b,gridSelected:c}){if(a&&a[b]&&a[b][c.y]&&a[b][c.y][c.x]&&(a=a[b][c.y][c.x],0<a.num_activations))return a}function vd(){return{id:"inceptionv1_mixed4c",config:null,layers:null,labels:null,layer:0,layout:0,classFilter:0,filter:0,minActivations:1,showLabels:!1,textShadow:!1,showHoverImage:!1,context:null,alphaAttributionFactor:.02,scaleCountFactor:1,classHeatmap:-1,classHeatmapMultiplier:1,classHeatmapPositive:1,gridSize:null,showGrid:!1,homeX:.5,
homeY:.5,homeScale:1,iconCrop:.02,zoomFactors:{out:.5,in:2},enableClickToZoom:!0,enableHover:!0,enableDragToPan:!0,backgroundColor:"white",strokeColor:"rgb(220, 220, 220)",imageSmoothing:!1,lastRecordedCanvasPos:{x:-100,y:-100},mouseDownScreenPos:{x:0,y:0},mouseMoveMode:"hover",onCanvas:!1,screenResolution:1,mouseDownTimer:0,mouseMoveFunction:function(){},mouseUpFunction:function(){}}}function wd({changed:a}){this.set({context:this.refs.canvas.getContext("2d")});(a.maxAttributionValue||a.minActivations||
a.classHeatmap||a.classHeatmapMultiplier||a.classHeatmapPositive||a.labels||a.showLabels||a.viewWidth||a.viewHeight||a.scale||a.iconCrop||a.currentZoomIndex||a.layers||a.alphaAttributionFactor||a.scaleCountFactor||a.gcx||a.gcy)&&this.render();a.currentIconInfo&&this.updateIconHoverImage()}function qb(a,b,c){a=Object.create(a);a.top=b[c];a.i=c;return a}function xd(a,b){function c(b){a.mouseDown(b)}function d(b){a.mouseMove(b)}function e(b){a.mouseEnter(b)}function g(b){a.mouseOut(b)}function f(){a.set({viewWidth:p.clientWidth,
viewHeight:p.clientHeight})}var q,k,p,r,x,n,t,w,K,Z,u,v,na={};if(void 0!==b.ready){na.ready=b.ready;var z=!0}var A=new pb({root:a.root,store:a.store,data:na,_bind(b,c){var d={};!z&&b.ready&&(d.ready=c.ready);a._set(d);z=void 0}});a.root._beforecreate.push(()=>{A._bind({ready:1},A.get())});var E=b.ready&&rb(a,b);na={width:b.viewWidth,height:b.viewHeight};if(void 0!==b.scale){na.scale=b.scale;var C=!0}if(void 0!==b.unit){na.unit=b.unit;var F=!0}if(void 0!==b.gcx){na.gcx=b.gcx;var Y=!0}if(void 0!==b.gcy){na.gcy=
b.gcy;var B=!0}var I=new wa({root:a.root,store:a.store,data:na,_bind(b,c){var d={};!C&&b.scale&&(d.scale=c.scale);!F&&b.unit&&(d.unit=c.unit);!Y&&b.gcx&&(d.gcx=c.gcx);!B&&b.gcy&&(d.gcy=c.gcy);a._set(d);B=Y=F=C=void 0}});a.root._beforecreate.push(()=>{I._bind({scale:1,unit:1,gcx:1,gcy:1},I.get())});a.refs.zoom=I;var D=b.showHoverIcon&&sb(a,b),J=b.labels&&b.showHoverIcon&&b.currentIconInfo&&b.currentIconInfo.top_class_indices&&tb(a,b);return{c(){A._fragment.c();q=m("\n\n");E&&E.c();k=m("\n\n  ");p=
h("div");r=h("div");I._fragment.c();x=m("\n      ");n=h("canvas");K=m("\n      ");D&&D.c();u=m("\n\n    ");J&&J.c();n.width=t=b.viewWidth*b.screenResolution;n.height=w=b.viewHeight*b.screenResolution;l(n,"width",""+b.viewWidth+"px");l(n,"height",""+b.viewHeight+"px");n.className="svelte-ptap6b svelte-ref-canvas";r.addEventListener("mousedown",c,void 0);r.addEventListener("mousemove",d,void 0);r.addEventListener("mouseenter",e,void 0);r.addEventListener("mouseout",g,void 0);r.className=Z=("pan"==b.mouseMoveMode&
b.enableDragToPan?"panning":"")+" svelte-ptap6b svelte-ref-stage";a.root._beforecreate.push(f);p.className="svelte-ptap6b svelte-ref-root"},m(b,c){A._mount(b,c);b.insertBefore(q,c);E&&E.m(b,c);b.insertBefore(k,c);b.insertBefore(p,c);p.appendChild(r);I._mount(r,null);r.appendChild(x);r.appendChild(n);a.refs.canvas=n;r.appendChild(K);D&&D.m(r,null);a.refs.stage=r;p.appendChild(u);J&&J.m(p,null);v=sa(p,f);a.refs.root=p},p(c,d){b=d;d={};!z&&c.ready&&(d.ready=b.ready,z=void 0!==b.ready);A._set(d);z=void 0;
b.ready?E?E.p(c,b):(E=rb(a,b),E.c(),E.m(k.parentNode,k)):E&&(E.d(1),E=null);d={};c.viewWidth&&(d.width=b.viewWidth);c.viewHeight&&(d.height=b.viewHeight);!C&&c.scale&&(d.scale=b.scale,C=void 0!==b.scale);!F&&c.unit&&(d.unit=b.unit,F=void 0!==b.unit);!Y&&c.gcx&&(d.gcx=b.gcx,Y=void 0!==b.gcx);!B&&c.gcy&&(d.gcy=b.gcy,B=void 0!==b.gcy);I._set(d);B=Y=F=C=void 0;(c.viewWidth||c.screenResolution)&&t!==(t=b.viewWidth*b.screenResolution)&&(n.width=t);(c.viewHeight||c.screenResolution)&&w!==(w=b.viewHeight*
b.screenResolution)&&(n.height=w);c.viewWidth&&l(n,"width",""+b.viewWidth+"px");c.viewHeight&&l(n,"height",""+b.viewHeight+"px");b.showHoverIcon?D?D.p(c,b):(D=sb(a,b),D.c(),D.m(r,null)):D&&(D.d(1),D=null);(c.mouseMoveMode||c.enableDragToPan)&&Z!==(Z=("pan"==b.mouseMoveMode&b.enableDragToPan?"panning":"")+" svelte-ptap6b svelte-ref-stage")&&(r.className=Z);b.labels&&b.showHoverIcon&&b.currentIconInfo&&b.currentIconInfo.top_class_indices?J?J.p(c,b):(J=tb(a,b),J.c(),J.m(p,null)):J&&(J.d(1),J=null)},
d(b){A.destroy(b);b&&y(q);E&&E.d(b);b&&(y(k),y(p));I.destroy();a.refs.zoom===I&&(a.refs.zoom=null);a.refs.canvas===n&&(a.refs.canvas=null);D&&D.d();r.removeEventListener("mousedown",c,void 0);r.removeEventListener("mousemove",d,void 0);r.removeEventListener("mouseenter",e,void 0);r.removeEventListener("mouseout",g,void 0);a.refs.stage===r&&(a.refs.stage=null);J&&J.d();v.cancel();a.refs.root===p&&(a.refs.root=null)}}}function rb(a,b){var c={id:b.id,layer:b.layer,layout:b.layout,classFilter:b.classFilter,
filter:b.filter};if(void 0!==b.config){c.config=b.config;var d=!0}if(void 0!==b.layers){c.layers=b.layers;var e=!0}if(void 0!==b.labels){c.labels=b.labels;var g=!0}var f=new ob({root:a.root,store:a.store,data:c,_bind(b,c){var f={};!d&&b.config&&(f.config=c.config);!e&&b.layers&&(f.layers=c.layers);!g&&b.labels&&(f.labels=c.labels);a._set(f);g=e=d=void 0}});a.root._beforecreate.push(()=>{f._bind({config:1,layers:1,labels:1},f.get())});return{c(){f._fragment.c()},m(a,b){f._mount(a,b)},p(a,c){b=c;c=
{};a.id&&(c.id=b.id);a.layer&&(c.layer=b.layer);a.layout&&(c.layout=b.layout);a.classFilter&&(c.classFilter=b.classFilter);a.filter&&(c.filter=b.filter);!d&&a.config&&(c.config=b.config,d=void 0!==b.config);!e&&a.layers&&(c.layers=b.layers,e=void 0!==b.layers);!g&&a.labels&&(c.labels=b.labels,g=void 0!==b.labels);f._set(c);g=e=d=void 0},d(a){f.destroy(a)}}}function sb(a,b){var c;return{c(){c=h("div");c.className="icon svelte-ptap6b";l(c,"width",b.iconSizeInPixels+2+"px");l(c,"height",b.iconSizeInPixels+
2+"px");l(c,"left",b.topLeftCornerHover.x+"px");l(c,"top",b.topLeftCornerHover.y+"px")},m(a,b){a.insertBefore(c,b)},p(a,b){a.iconSizeInPixels&&(l(c,"width",b.iconSizeInPixels+2+"px"),l(c,"height",b.iconSizeInPixels+2+"px"));a.topLeftCornerHover&&(l(c,"left",b.topLeftCornerHover.x+"px"),l(c,"top",b.topLeftCornerHover.y+"px"))},d(a){a&&y(c)}}}function tb(a,b){var c,d,e,g,f,q,k=b.currentIconInfo.num_activations,p,r,x=-1<b.classHeatmap?rc:sc,n=x(a,b),t=b.showHoverImage&&tc(a,b);return{c(){c=h("div");
d=h("table");n.c();e=m("\n        ");t&&t.c();g=m("\n        ");f=h("div");q=m("Average of ");p=m(k);r=m(" activations");d.className="svelte-ptap6b";l(f,"font-size","10px");l(f,"margin-top","4px");l(f,"color","#999");l(f,"text-align","right");c.className="hover svelte-ptap6b";l(c,"top",b.topLeftCornerHover.y+b.iconSizeInPixels+10+"px");l(c,"left",b.topLeftCornerHover.x+b.iconSizeInPixels+10+"px")},m(a,b){a.insertBefore(c,b);c.appendChild(d);n.m(d,null);c.appendChild(e);t&&t.m(c,null);c.appendChild(g);
c.appendChild(f);f.appendChild(q);f.appendChild(p);f.appendChild(r)},p(b,e){x===(x=-1<e.classHeatmap?rc:sc)&&n?n.p(b,e):(n.d(1),n=x(a,e),n.c(),n.m(d,null));e.showHoverImage?t||(t=tc(a,e),t.c(),t.m(c,g)):t&&(t.d(1),t=null);b.currentIconInfo&&k!==(k=e.currentIconInfo.num_activations)&&(p.data=""+k);if(b.topLeftCornerHover||b.iconSizeInPixels)l(c,"top",e.topLeftCornerHover.y+e.iconSizeInPixels+10+"px"),l(c,"left",e.topLeftCornerHover.x+e.iconSizeInPixels+10+"px")},d(a){a&&y(c);n.d();t&&t.d()}}}function sc(a,
b){for(var c,d=b.currentIconInfo.top_class_indices.slice(0,5),e=[],g=0;g<d.length;g+=1)e[g]=uc(a,qb(b,d,g));return{c(){for(var a=0;a<e.length;a+=1)e[a].c();c=document.createComment("")},m(a,b){for(var d=0;d<e.length;d+=1)e[d].m(a,b);a.insertBefore(c,b)},p(b,g){if(b.currentIconInfo||b.labels){d=g.currentIconInfo.top_class_indices.slice(0,5);for(var f=0;f<d.length;f+=1){let k=qb(g,d,f);e[f]?e[f].p(b,k):(e[f]=uc(a,k),e[f].c(),e[f].m(c.parentNode,c))}for(;f<e.length;f+=1)e[f].d(1);e.length=d.length}},
d(a){Ca(e,a);a&&y(c)}}}function rc(a,b){var c,d,e,g,f,q=b.labels[b.currentIconInfo.top_class_indices[0]],k,p,r,x=b.currentIconInfo.top_class_values[0].toPrecision(2),n;return{c(){c=h("tr");d=m("\n          ");e=h("tr");g=h("td");f=m("top class: ");k=m(q);p=m("\n            ");r=h("td");n=m(x);g.className="svelte-ptap6b";l(r,"text-align","right");r.className="svelte-ptap6b"},m(a,b){a.insertBefore(c,b);a.insertBefore(d,b);a.insertBefore(e,b);e.appendChild(g);g.appendChild(f);g.appendChild(k);e.appendChild(p);
e.appendChild(r);r.appendChild(n)},p(a,b){(a.labels||a.currentIconInfo)&&q!==(q=b.labels[b.currentIconInfo.top_class_indices[0]])&&(k.data=""+q);a.currentIconInfo&&x!==(x=b.currentIconInfo.top_class_values[0].toPrecision(2))&&(n.data=""+x)},d(a){a&&(y(c),y(d),y(e))}}}function uc(a,b){var c,d,e=b.i+1,g,f,q,k,p=b.labels[b.top],r,x,n,t=b.currentIconInfo.top_class_values[b.i].toPrecision(2),w;return{c(){c=h("tr");d=h("td");g=m(e);f=m(".");q=m("\n              ");k=h("td");r=m(p);x=m("\n              ");
n=h("td");w=m(t);l(d,"width","10px");l(d,"text-align","right");l(d,"padding-right","4px");d.className="svelte-ptap6b";k.className=(0==b.i?"first":"")+" svelte-ptap6b";l(n,"text-align","right");n.className="svelte-ptap6b"},m(a,b){a.insertBefore(c,b);c.appendChild(d);d.appendChild(g);d.appendChild(f);c.appendChild(q);c.appendChild(k);k.appendChild(r);c.appendChild(x);c.appendChild(n);n.appendChild(w)},p(a,b){(a.labels||a.currentIconInfo)&&p!==(p=b.labels[b.top])&&(r.data=""+p);a.currentIconInfo&&t!==
(t=b.currentIconInfo.top_class_values[b.i].toPrecision(2))&&(w.data=""+t)},d(a){a&&y(c)}}}function tc(a,b){var c;return{c(){c=h("canvas")},m(b,e){b.insertBefore(c,e);a.refs.hoverImage=c},d(b){b&&y(c);a.refs.hoverImage===c&&(a.refs.hoverImage=null)}}}function ub(a){z(this,a);this.refs={};this._state=v(vd(),a.data);this._recompute({layers:1,layer:1,viewWidth:1,viewHeight:1,gcx:1,gcy:1,scale:1,minViewDimInPx:1,gridSize:1,currentZoomIndex:1,config:1,lastRecordedCanvasPos:1,topLeft:1,layerScale:1,gridSelected:1,
classHeatmap:1,mouseMoveMode:1,onCanvas:1,currentIconInfo:1,enableHover:1},this._state);this._intro=!0;this._handlers.update=[wd];this._fragment=xd(this,this._state);this.root._oncreate.push(()=>{this.home();this.fire("update",{changed:la({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),B(this))}function yd({scale:a}){return 1/a}function zd({scale:a,aspectRatio:b}){return 1/a*b}function Ad({gcx:a,w:b}){return a-b/2}function Bd({gcy:a,h:b}){return a-
b/2}function Cd({l:a,w:b}){return a+b}function Dd({t:a,h:b}){return a+b}function Ed({l:a,width:b}){return a*b}function Fd({r:a,width:b}){return a*b}function Gd({t:a,height:b}){return a*b}function Hd({b:a,height:b}){return a*b}function Id(a,b){function c(){a.set({width:d.clientWidth,height:d.clientHeight})}var d,e,g=b.scale&&vc(a,b);return{c(){d=h("div");g&&g.c();a.root._beforecreate.push(c);d.className="root svelte-ctiyrz"},m(a,b){a.insertBefore(d,b);g&&g.m(d,null);e=sa(d,c)},p(b,c){c.scale?g?g.p(b,
c):(g=vc(a,c),g.c(),g.m(d,null)):g&&(g.d(1),g=null)},d(a){a&&y(d);g&&g.d();e.cancel()}}}function vc(a,b){function c(b){a.mouseMove(b)}function d(b){a.mouseUp(b)}function e(b){a.mouseMove(b)}function g(b){a.mouseDown(b)}function f(b){a.mouseUp(b)}var q,k,p,r,x,n,t,w=b.annotationValue&&wc(a,b);return{c(){q=H("svg");k=H("path");x=m("\n  ");n=h("div");w&&w.c();k.addEventListener("mousemove",c,void 0);k.addEventListener("mouseup",d,void 0);u(k,"class",p=(b.background?"":"transparent")+" svelte-ctiyrz");
u(k,"d",r="M0,0 L"+b.width+",0 L"+b.width+","+b.height+" L0,"+b.height+" z M"+b.left+","+b.top+" L"+b.left+","+b.bottom+" L"+b.right+","+b.bottom+"  L"+b.right+","+b.top+" z");u(q,"width",b.width);u(q,"height",b.height);u(q,"class","svelte-ctiyrz");n.addEventListener("mousemove",e,void 0);n.addEventListener("mousedown",g,void 0);n.addEventListener("mouseup",f,void 0);n.className=t="reticle "+(b.round?"round":"")+" svelte-ctiyrz";l(n,"box-sizing","content-box");l(n,"border-color",b.color);l(n,"top",
""+(b.top-2.5)+"px");l(n,"left",""+(b.left-2.5)+"px");l(n,"width",""+(b.right-b.left-1)+"px");l(n,"height",""+(b.bottom-b.top-1)+"px");l(n,"cursor",(b.enableDragging?"move":"default")+"\n      ")},m(a,b){a.insertBefore(q,b);q.appendChild(k);a.insertBefore(x,b);a.insertBefore(n,b);w&&w.m(n,null)},p(b,c){b.background&&p!==(p=(c.background?"":"transparent")+" svelte-ctiyrz")&&u(k,"class",p);(b.width||b.height||b.left||b.top||b.bottom||b.right)&&r!==(r="M0,0 L"+c.width+",0 L"+c.width+","+c.height+" L0,"+
c.height+" z M"+c.left+","+c.top+" L"+c.left+","+c.bottom+" L"+c.right+","+c.bottom+"  L"+c.right+","+c.top+" z")&&u(k,"d",r);b.width&&u(q,"width",c.width);b.height&&u(q,"height",c.height);c.annotationValue?w?w.p(b,c):(w=wc(a,c),w.c(),w.m(n,null)):w&&(w.d(1),w=null);b.round&&t!==(t="reticle "+(c.round?"round":"")+" svelte-ctiyrz")&&(n.className=t);b.color&&l(n,"border-color",c.color);b.top&&l(n,"top",""+(c.top-2.5)+"px");b.left&&l(n,"left",""+(c.left-2.5)+"px");(b.right||b.left)&&l(n,"width",""+(c.right-
c.left-1)+"px");(b.bottom||b.top)&&l(n,"height",""+(c.bottom-c.top-1)+"px");b.enableDragging&&l(n,"cursor",(c.enableDragging?"move":"default")+"\n      ")},d(a){a&&y(q);k.removeEventListener("mousemove",c,void 0);k.removeEventListener("mouseup",d,void 0);a&&(y(x),y(n));w&&w.d();n.removeEventListener("mousemove",e,void 0);n.removeEventListener("mousedown",g,void 0);n.removeEventListener("mouseup",f,void 0)}}}function wc(a,b){var c,d,e,g;return{c(){c=h("div");d=h("div");e=h("p");g=m(b.annotationValue);
e.className="annotation svelte-ctiyrz";d.className="annotationTab svelte-ctiyrz";l(d,"background",b.color);c.className="annotationTabParent svelte-ctiyrz";l(c,"top",""+(b.w*b.width-2)/2+"px")},m(a,b){a.insertBefore(c,b);c.appendChild(d);d.appendChild(e);e.appendChild(g)},p(a,b){a.annotationValue&&(g.data=""+b.annotationValue);a.color&&l(d,"background",b.color);(a.w||a.width)&&l(c,"top",""+(b.w*b.width-2)/2+"px")},d(a){a&&y(c)}}}function ha(a){z(this,a);this._state=v({width:0,height:0,dragging:!1,
startPos:{x:-100,y:-100},background:!0,round:!1,color:"#ff6600",enableDragging:!0},a.data);this._recompute({scale:1,aspectRatio:1,gcx:1,w:1,width:1,gcy:1,h:1,height:1,l:1,t:1,r:1,b:1},this._state);this._intro=!0;this._fragment=Id(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),B(this))}function Jd({clientWidth:a}){return a}function Kd({width:a,aspectRatio:b}){return a/b}function Ld(a,b){function c(){a.set({clientWidth:d.clientWidth})}var d,e,g=a._slotted.default,f;return{c(){d=
h("div");e=h("div");e.className="container svelte-xqvv98";a.root._beforecreate.push(c);d.className="root svelte-xqvv98";l(d,"display",b.display);l(d,"padding-bottom",""+100/b.aspectRatio+"%")},m(a,b){a.insertBefore(d,b);d.appendChild(e);g&&e.appendChild(g);f=sa(d,c)},p(a,b){a.display&&l(d,"display",b.display);a.aspectRatio&&l(d,"padding-bottom",""+100/b.aspectRatio+"%")},d(a){a&&y(d);g&&ma(e,g);f.cancel()}}}function Ka(a){z(this,a);this._state=v({display:"block",aspectRatio:1,clientWidth:0},a.data);
this._recompute({clientWidth:1,width:1,aspectRatio:1},this._state);this._intro=!0;this._slotted=a.slots||{};this._fragment=Ld(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),B(this))}function Md(a,b){var c,d,e=new ub({root:a.root,store:a.store,data:{id:b.id,classHeatmap:b.classHeatmap,gridSize:1,iconCrop:.3,scaleCountFactor:b.scaleCountFactor,alphaAttributionFactor:10,backgroundColor:"#f0f0f0"}});a.refs.overview=e;var g={enableDragging:!0};if(void 0!==b.aspectRatio){g.aspectRatio=
b.aspectRatio;var f=!0}if(void 0!==b.scale){g.scale=b.scale;var q=!0}if(void 0!==b.gcx){g.gcx=b.gcx;var k=!0}if(void 0!==b.gcy){g.gcy=b.gcy;var p=!0}var r=new ha({root:a.root,store:a.store,data:g,_bind(b,c){var d={};!f&&b.aspectRatio&&(d.aspectRatio=c.aspectRatio);!q&&b.scale&&(d.scale=c.scale);!k&&b.gcx&&(d.gcx=c.gcx);!p&&b.gcy&&(d.gcy=c.gcy);a._set(d);p=k=q=f=void 0}});a.root._beforecreate.push(()=>{r._bind({aspectRatio:1,scale:1,gcx:1,gcy:1},r.get())});var l=new Ka({root:a.root,store:a.store,slots:{default:F()}});
return{c(){c=h("div");e._fragment.c();d=m("\n    ");r._fragment.c();l._fragment.c();c.className="svelte-kiaj48 svelte-ref-root"},m(b,f){b.insertBefore(c,f);e._mount(l._slotted.default,null);l._slotted.default.appendChild(d);r._mount(l._slotted.default,null);l._mount(c,null);a.refs.root=c},p(a,c){b=c;c={};a.id&&(c.id=b.id);a.classHeatmap&&(c.classHeatmap=b.classHeatmap);a.scaleCountFactor&&(c.scaleCountFactor=b.scaleCountFactor);e._set(c);c={};!f&&a.aspectRatio&&(c.aspectRatio=b.aspectRatio,f=void 0!==
b.aspectRatio);!q&&a.scale&&(c.scale=b.scale,q=void 0!==b.scale);!k&&a.gcx&&(c.gcx=b.gcx,k=void 0!==b.gcx);!p&&a.gcy&&(c.gcy=b.gcy,p=void 0!==b.gcy);r._set(c);p=k=q=f=void 0},d(b){b&&y(c);e.destroy();a.refs.overview===e&&(a.refs.overview=null);r.destroy();l.destroy();a.refs.root===c&&(a.refs.root=null)}}}function xc(a){z(this,a);this.refs={};this._state=v({scaleCountFactor:200},a.data);this._intro=!0;this._fragment=Md(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),
B(this))}function La(){}function xa(a){for(var b,c,d=1,e=arguments.length;d<e;d++)for(b in c=arguments[d],c)a[b]=c[b];return a}function yc(a){this.destroy=La;this.fire("destroy");this.set=this.get=La;!1!==a&&this._fragment.u();this._fragment.d();this._fragment=this._state=null}function zc(a,b,c,d,e){for(var g in b)if(c[g]){var f=d[g],q=e[g],k=b[g];if(k)for(var h=0;h<k.length;h+=1){var r=k[h];r.__calling||(r.__calling=!0,r.call(a,f,q),r.__calling=!1)}}}function ia(a){for(;a&&a.length;)a.shift()()}
function Nd(a,b){return b?b:a}function Od(){let a=(b)=>{this.set({loaded:!0});var {img:b}=this.get();b.removeEventListener("loaded",a)};this.observe("index",(a)=>{this.draw()},{init:!1});this.observe("img",(a)=>{this.draw()},{init:!1});this.observe("loaded",(a)=>{this.draw()},{init:!1});this.observe("url",(b)=>{let c=this.get("img");c&&c.removeEventListener("load",a);if(Ma.has(b))b=Ma.get(b),b.loaded?this.set({loaded:!0,img:b.img}):(this.set({loaded:!1,img:b.img}),b.img.addEventListener("load",a));
else{let c=new Image;this.set({loaded:!1,img:c});let e={img:c},g=(a)=>{e.loaded=!0;c.removeEventListener("load",g)};c.addEventListener("load",g);c.addEventListener("load",a);Ma.set(b,e);c.src=b}})}function Pd(a,b){var c;return{c:function(){c=document.createElement("canvas");this.h()},h:function(){c.width=b.width;c.height=b.realHeight},m:function(b,e){b.insertBefore(c,e);a.refs.canvas=c},p:function(a,b){a.width&&(c.width=b.width);a.realHeight&&(c.height=b.realHeight)},u:function(){c.parentNode.removeChild(c)},
d:function(){a.refs.canvas===c&&(a.refs.canvas=null)}}}function Ac(a){this._observers={pre:Object.create(null),post:Object.create(null)};this._handlers=Object.create(null);this._bind=a._bind;this.options=a;this.root=a.root||this;this.store=this.root.store||a.store;this.refs={};this._state=xa({url:"",index:0,width:100,loaded:null,columns:Infinity,height:null,img:null},a.data);this._recompute({width:1,height:1},this._state);var b=Od.bind(this);a.root||(this._oncreate=[]);this._fragment=Pd(this,this._state);
this.root._oncreate.push(b);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),ia(this._oncreate))}function Bc(a){return new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}")}function Qd(a,b){var c=Bc(a);return function(d,e){return b(c(d),e,a)}}function Rd(a){var b=Object.create(null),c=[];a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)});return c}function Cc(a){function b(a,b){function c(){if(m)return Na;if(l)return l=!1,Dc;var b,
c=f,d;if(34===a.charCodeAt(c)){for(;f++<e&&34!==a.charCodeAt(f)||34===a.charCodeAt(++f););(b=f)>=e?m=!0:10===(d=a.charCodeAt(f++))?l=!0:13===d&&(l=!0,10===a.charCodeAt(f)&&++f);return a.slice(c+1,b-1).replace(/""/g,'"')}for(;f<e;){if(10===(d=a.charCodeAt(b=f++)))l=!0;else if(13===d)l=!0,10===a.charCodeAt(f)&&++f;else if(d!==g)continue;return a.slice(c,b)}return m=!0,a.slice(c,e)}var d=[],e=a.length,f=0,q=0,h,m=0>=e,l=!1;10===a.charCodeAt(e-1)&&--e;for(13===a.charCodeAt(e-1)&&--e;(h=c())!==Na;){for(var u=
[];h!==Dc&&h!==Na;)u.push(h),h=c();b&&null==(u=b(u,q++))||d.push(u)}return d}function c(b){return b.map(d).join(a)}function d(a){return null==a?"":e.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}var e=new RegExp('["'+a+"\n\r]"),g=a.charCodeAt(0);return{parse:function(a,c){var d,e;a=b(a,function(a,b){if(d)return d(a,b-1);e=a;d=c?Qd(a,c):Bc(a)});a.columns=e||[];return a},parseRows:b,format:function(b,c){null==c&&(c=Rd(b));return[c.map(d).join(a)].concat(b.map(function(b){return c.map(function(a){return d(b[a])}).join(a)})).join("\n")},
formatRows:function(a){return a.map(c).join("\n")}}}function Ec(a){if(a.ok)return a;throw Error(a.status+":"+a.statusText);}function ya(a){return new Promise((b,c)=>{let d=new Image;d.onload=(a)=>b(d);d.onerror=(a)=>c(a);d.src=a})}function ja(a){return fetch(a).then(Ec).then((a)=>a.text())}function Fc(a,b){b=null!=b?b:Date.now()+""+Math.random();let c="namespace:"+b+", url:"+a+", random:"+Date.now()+Math.random();za.set(c,!1);if(Oa.has(b)){let a=Oa.get(b);za.set(a,!0)}Oa.set(b,c);return new Promise((b,
e)=>{if(Array.isArray(a)){var d=a.map((a)=>Gc(a));d=Promise.all(d)}else d=Gc(a);d.then((a)=>{za.get(c)||b(a)}).catch((a)=>{za.get(c)||e(a)})})}function Gc(a){if(Pa.has(a))return Pa.get(a);var b=Hc;var c=a.split(".");c=c[c.length-1];b.has(c)||console.warn("Trying to load url: "+a+' with an unknown filetype. Assuming "text".');b=b.has(c)?c:"text";b=Hc.get(b)(a);Pa.set(a,b);return b}function Sd({clientWidth:a}){return a}function Td({model:a,layerName:b}){return a+"_"+b}function Ud(){let {root:a,id:b,
grid:c}=this.get();Fc(`${a}/${b}/${b}.json`).then((d)=>{null==d.class_filter&&(d.class_filter="None");null==d.filter&&(d.filter="None");Array.isArray(d.layout)||(d.layout=[d.layout]);Array.isArray(d.layer)||(d.layer=[d.layer]);Array.isArray(d.filter)||(d.filter=[d.filter]);this.set({gridSize:d.grid_size[c]});Fc(`${a}/${b}/web/web--grid_size=${d.grid_size[c]}--layout=${d.layout[0]}--class_filter=${d.class_filter}--filter=${d.filter[0]}--layer=${d.layer[0]}--model=${d.model}--sample_images=${d.sample_images}--sample_type=${d.sample_type}.json`).then((a)=>
{this.set({icons:a});this.render()})})}function Vd({changed:a}){a.classHeatmap&&this.render()}function Wd(a,b){function c(){a.set({clientWidth:d.clientWidth})}var d,e,g;return{c(){d=h("div");e=h("canvas");e.width=b.gridSize;e.height=b.gridSize;l(e,"width",""+b.clientWidth+"px");l(e,"height",""+b.height+"px");e.className="svelte-sjakuy";a.root._beforecreate.push(c);l(d,"height",""+b.height+"px")},m(b,h){b.insertBefore(d,h);d.appendChild(e);a.refs.canvas=e;g=sa(d,c)},p(a,b){a.gridSize&&(e.width=b.gridSize,
e.height=b.gridSize);a.clientWidth&&l(e,"width",""+b.clientWidth+"px");a.height&&(l(e,"height",""+b.height+"px"),l(d,"height",""+b.height+"px"))},d(b){b&&y(d);a.refs.canvas===e&&(a.refs.canvas=null);g.cancel()}}}function ka(a){z(this,a);this.refs={};this._state=v({root:"https://storage.googleapis.com/activation-atlas/build",model:"inceptionv1",layerName:"mixed4d",grid:1,layout:0,gridSize:10,classHeatmap:-1,icons:[]},a.data);this._recompute({clientWidth:1,model:1,layerName:1},this._state);this._intro=
!0;this._handlers.update=[Vd];this._fragment=Wd(this,this._state);this.root._oncreate.push(()=>{Ud.call(this);this.fire("update",{changed:la({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),B(this))}function Ic(a,b,c){a=Object.create(a);a.layer=b[c];a.i=c;return a}function Xd(a,b){for(var c,d=b.layers,e=[],g=0;g<d.length;g+=1)e[g]=Jc(a,Ic(b,d,g));return{c(){c=h("div");for(var a=0;a<e.length;a+=1)e[a].c();c.className="stack"},m(a,b){a.insertBefore(c,
b);for(a=0;a<e.length;a+=1)e[a].m(c,null)},p(b,g){if(b.layerName||b.layers||b.classHeatmap){d=g.layers;for(var f=0;f<d.length;f+=1){let k=Ic(g,d,f);e[f]?e[f].p(b,k):(e[f]=Jc(a,k),e[f].c(),e[f].m(c,null))}for(;f<e.length;f+=1)e[f].d(1);e.length=d.length}},d(a){a&&y(c);Ca(e,a)}}}function Jc(a,b){function c(){a.set({layerName:e.__value})}var d,e,g,f,q,k,p,r=b.layer,x,n,t,w=new ka({root:a.root,store:a.store,data:{layerName:b.layer,classHeatmap:b.classHeatmap}});return{c(){d=h("label");e=h("input");f=
m("\n    ");q=h("div");w._fragment.c();k=m("\n    ");p=h("span");x=m(r);n=m("\n  ");a._bindingGroups[0].push(e);e.addEventListener("change",c,void 0);u(e,"type","radio");e.__value=g=b.layer;e.value=e.__value;e.className="svelte-hzvbih";l(q,"width","50px");l(q,"position","relative");p.className="svelte-hzvbih";d.className=t="layer "+(b.layerName==b.layer?"selected":"")+" svelte-hzvbih"},m(a,c){a.insertBefore(d,c);d.appendChild(e);e.checked=e.__value===b.layerName;d.appendChild(f);d.appendChild(q);
w._mount(q,null);d.appendChild(k);d.appendChild(p);p.appendChild(x);d.appendChild(n)},p(a,b){a.layerName&&(e.checked=e.__value===b.layerName);a.layers&&g!==(g=b.layer)&&(e.__value=g);e.value=e.__value;var c={};a.layers&&(c.layerName=b.layer);a.classHeatmap&&(c.classHeatmap=b.classHeatmap);w._set(c);a.layers&&r!==(r=b.layer)&&(x.data=""+r);(a.layerName||a.layers)&&t!==(t="layer "+(b.layerName==b.layer?"selected":"")+" svelte-hzvbih")&&(d.className=t)},d(b){b&&y(d);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(e),
1);e.removeEventListener("change",c,void 0);w.destroy()}}}function Kc(a){z(this,a);this._state=v({layerName:"mixed4c",layers:"mixed3b mixed4a mixed4b mixed4c mixed4d mixed4e mixed5a mixed5b".split(" "),classHeatmap:-1},a.data);this._bindingGroups=[[]];this._intro=!0;this._fragment=Xd(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),B(this))}function Yd({inceptionLabels:a}){let b=ea.map((b)=>({label:a.inception[b],i:b}));return[{label:"show all",i:-1}].concat(b)}function Lc(a,
b,c){a=Object.create(a);a.l=b[c];return a}function Zd(a,b){for(var c,d=b.labels,e=[],g=0;g<d.length;g+=1)e[g]=Mc(a,Lc(b,d,g));return{c(){c=h("div");for(var a=0;a<e.length;a+=1)e[a].c();c.className="chooser svelte-h2ed57"},m(a,b){a.insertBefore(c,b);for(a=0;a<e.length;a+=1)e[a].m(c,null)},p(b,g){if(b.classHeatmap||b.labels){d=g.labels;for(var f=0;f<d.length;f+=1){let h=Lc(g,d,f);e[f]?e[f].p(b,h):(e[f]=Mc(a,h),e[f].c(),e[f].m(c,null))}for(;f<e.length;f+=1)e[f].d(1);e.length=d.length}},d(a){a&&y(c);
Ca(e,a)}}}function Mc(a,b){function c(){a.set({classHeatmap:e.__value})}var d,e,g,f,q,k=b.l.label,p,l,x,n;return{c(){d=h("label");e=h("input");f=m("\n      ");q=h("span");p=m(k);x=m("\n    ");a._bindingGroups[0].push(e);e.addEventListener("change",c,void 0);u(e,"type","radio");e.__value=g=b.l.i;e.value=e.__value;e.className="svelte-h2ed57";q.title=l=b.l.i;d.className=n=(b.classHeatmap===b.l.i?"selected":"")+" svelte-h2ed57"},m(a,c){a.insertBefore(d,c);d.appendChild(e);e.checked=e.__value===b.classHeatmap;
d.appendChild(f);d.appendChild(q);q.appendChild(p);d.appendChild(x)},p(a,b){a.classHeatmap&&(e.checked=e.__value===b.classHeatmap);a.labels&&g!==(g=b.l.i)&&(e.__value=g);e.value=e.__value;a.labels&&k!==(k=b.l.label)&&(p.data=""+k);a.labels&&l!==(l=b.l.i)&&(q.title=l);(a.classHeatmap||a.labels)&&n!==(n=(b.classHeatmap===b.l.i?"selected":"")+" svelte-h2ed57")&&(d.className=n)},d(b){b&&y(d);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(e),1);e.removeEventListener("change",c,void 0)}}}function nc(a){z(this,
a);this._state=v({classesToKeep:ea,inceptionLabels:$d,classHeatmap:235},a.data);this._recompute({inceptionLabels:1},this._state);this._bindingGroups=[[]];this._intro=!0;this._fragment=Zd(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function ae(a,b){var c,d,e=a._slotted.head,g,f,q=a._slotted.body;return{c(){c=h("div");d=h("div");g=m("\n  ");f=h("div");d.className="head svelte-xv78tq";f.className="body svelte-xv78tq";c.className="root svelte-xv78tq"},m(a,b){a.insertBefore(c,
b);c.appendChild(d);e&&d.appendChild(e);c.appendChild(g);c.appendChild(f);q&&f.appendChild(q)},p:C,d(a){a&&y(c);e&&ma(d,e);q&&ma(f,q)}}}function fc(a){z(this,a);this._state=v({},a.data);this._intro=!0;this._slotted=a.slots||{};this._fragment=ae(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function be({gridSize:a}){return 20*(a+1)}function ce({iconScaleFactor:a,realGridSize:b}){return 1E6/(b*b*a)}function de(a,b){function c(){a.set({showLabels:qa.checked})}function d(){a.set({gridSize:L.__value})}
function e(){a.set({gridSize:M.__value})}function g(){a.set({gridSize:N.__value})}function f(){a.set({gridSize:O.__value})}function q(){a.set({gridSize:P.__value})}function k(){a.set({iconScaleFactor:mc(U.value)})}function p(){a.set({iconCrop:mc(V.value)})}function r(){a.set({classHeatmapMultiplier:mc(W.value)})}function x(){a.set({classHeatmapPositive:Q.__value})}function n(){a.set({classHeatmapPositive:R.__value})}var t,w,v,A,z,C,B,H,T,E,fa,dc,Y,la,I,D,J,oa,ma,pa,sa,gc,vb,Nc,X,Aa,ca,ua,da=Qa(b.gcx),
wb,va,ea,wa,ha=Qa(b.gcy),xb,xa,ia,ya,ja=Qa(b.scale),yb,za,zb,ka,Ca,hc,qa,Da,Ea,S,ic,Fa,Ab,L,Ga,Ha,Bb,M,Ia,Ja,Cb,N,Ka,La,Db,O,Ma,Na,Eb,P,Oa,Pa,aa,Fb,Xa,Gb,Ya,U,Za,$a,ab,Hb,bb,Ib,cb,V,db,G,Jb,eb,Kb,fb,W,hb,ib,jb,jc,kb,lb,mb,kc,Q,nb,ob,pb,qb,lc,R,rb,sb={};if(void 0!==b.classHeatmap){sb.classHeatmap=b.classHeatmap;var Lb=!0}var Ra=new nc({root:a.root,store:a.store,data:sb,_bind(b,c){var d={};!Lb&&b.classHeatmap&&(d.classHeatmap=c.classHeatmap);a._set(d);Lb=void 0}});a.root._beforecreate.push(()=>{Ra._bind({classHeatmap:1},
Ra.get())});var Sa=new fc({root:a.root,store:a.store,slots:{default:F(),body:F(),head:F()}}),tb={classHeatmap:b.classHeatmap};if(void 0!==b.layerName){tb.layerName=b.layerName;var Mb=!0}var Ta=new Kc({root:a.root,store:a.store,data:tb,_bind(b,c){var d={};!Mb&&b.layerName&&(d.layerName=c.layerName);a._set(d);Mb=void 0}});a.root._beforecreate.push(()=>{Ta._bind({layerName:1},Ta.get())});var Ua=new fc({root:a.root,store:a.store,slots:{default:F(),body:F(),head:F()}}),ba={id:"inceptionv1_"+b.layerName,
strokeColor:"#666",backgroundColor:"#f0f0f0",showHoverImage:!1,scaleCountFactor:b.scaleCountFactor,classHeatmap:b.classHeatmap,homeX:b.homeX,homeY:b.homeY,homeScale:b.homeScale};if(void 0!==b.iconCrop){ba.iconCrop=b.iconCrop;var Nb=!0}if(void 0!==b.classHeatmapMultiplier){ba.classHeatmapMultiplier=b.classHeatmapMultiplier;var Ob=!0}if(void 0!==b.classHeatmapPositive){ba.classHeatmapPositive=b.classHeatmapPositive;var Pb=!0}if(void 0!==b.gridSize){ba.gridSize=b.gridSize;var Qb=!0}if(void 0!==b.showLabels){ba.showLabels=
b.showLabels;var Rb=!0}if(void 0!==b.aspectRatio){ba.aspectRatio=b.aspectRatio;var Sb=!0}if(void 0!==b.scale){ba.scale=b.scale;var Tb=!0}if(void 0!==b.gcx){ba.gcx=b.gcx;var Ub=!0}if(void 0!==b.gcy){ba.gcy=b.gcy;var Vb=!0}var ra=new ub({root:a.root,store:a.store,data:ba,_bind(b,c){var d={};!Nb&&b.iconCrop&&(d.iconCrop=c.iconCrop);!Ob&&b.classHeatmapMultiplier&&(d.classHeatmapMultiplier=c.classHeatmapMultiplier);!Pb&&b.classHeatmapPositive&&(d.classHeatmapPositive=c.classHeatmapPositive);!Qb&&b.gridSize&&
(d.gridSize=c.gridSize);!Rb&&b.showLabels&&(d.showLabels=c.showLabels);!Sb&&b.aspectRatio&&(d.aspectRatio=c.aspectRatio);!Tb&&b.scale&&(d.scale=c.scale);!Ub&&b.gcx&&(d.gcx=c.gcx);!Vb&&b.gcy&&(d.gcy=c.gcy);a._set(d);Vb=Ub=Tb=Sb=Rb=Qb=Pb=Ob=Nb=void 0}});a.root._beforecreate.push(()=>{ra._bind({iconCrop:1,classHeatmapMultiplier:1,classHeatmapPositive:1,gridSize:1,showLabels:1,aspectRatio:1,scale:1,gcx:1,gcy:1},ra.get())});a.refs.atlas=ra;var Wb={id:"inceptionv1_"+b.layerName,enableDragging:!0,classHeatmap:b.classHeatmap,
scaleCountFactor:b.scaleCountFactor};if(void 0!==b.aspectRatio){Wb.aspectRatio=b.aspectRatio;var Xb=!0}if(void 0!==b.scale){Wb.scale=b.scale;var Yb=!0}if(void 0!==b.gcx){Wb.gcx=b.gcx;var Zb=!0}if(void 0!==b.gcy){Wb.gcy=b.gcy;var $b=!0}var Va=new xc({root:a.root,store:a.store,data:Wb,_bind(b,c){var d={};!Xb&&b.aspectRatio&&(d.aspectRatio=c.aspectRatio);!Yb&&b.scale&&(d.scale=c.scale);!Zb&&b.gcx&&(d.gcx=c.gcx);!$b&&b.gcy&&(d.gcy=c.gcy);a._set(d);$b=Zb=Yb=Xb=void 0}});a.root._beforecreate.push(()=>{Va._bind({aspectRatio:1,
scale:1,gcx:1,gcy:1},Va.get())});var oc=new gb({root:a.root,store:a.store,data:{name:"home",color:"white"}}),ac=new ec({root:a.root,store:a.store,slots:{default:F()}});ac.on("click",function(b){a.refs.atlas.home()});var pc=new gb({root:a.root,store:a.store,data:{name:"add",color:"white"}}),bc=new ec({root:a.root,store:a.store,slots:{default:F()}});bc.on("click",function(b){a.refs.atlas.zoomit(2)});var qc=new gb({root:a.root,store:a.store,data:{name:"remove",color:"white"}}),cc=new ec({root:a.root,
store:a.store,slots:{default:F()}});cc.on("click",function(b){a.refs.atlas.zoomit(.5)});var Wa=new fc({root:a.root,store:a.store,slots:{default:F(),body:F(),head:F()}});return{c(){t=h("div");w=h("div");v=h("h3");v.textContent="Class Filter";A=m("\n        ");z=h("div");Ra._fragment.c();Sa._fragment.c();C=m("\n    ");B=h("div");H=h("h3");H.textContent="Layer";T=m("\n        ");E=h("div");Ta._fragment.c();Ua._fragment.c();fa=m("\n  ");dc=h("div");Y=h("div");ra._fragment.c();la=m("\n        ");I=h("div");
D=h("div");Va._fragment.c();J=m("\n          ");oa=h("div");oc._fragment.c();ac._fragment.c();ma=m("\n            ");pc._fragment.c();bc._fragment.c();pa=m("\n            ");qc._fragment.c();cc._fragment.c();sa=m("\n  ");gc=h("div");vb=h("h3");vb.textContent="Options";Nc=m("\n      ");X=h("div");Aa=h("div");ca=h("div");ua=m("x: ");wb=h("noscript");va=m("\n          ");ea=h("div");wa=m("y: ");xb=h("noscript");xa=m("\n          ");ia=h("div");ya=m("scale: ");yb=h("noscript");za=m("\n        ");zb=h("div");
ka=h("h4");ka.textContent="Attribution";Ca=m("\n          ");hc=h("label");qa=h("input");Da=m(" show labels");Ea=m("\n        ");S=h("div");ic=h("h4");ic.textContent="grid size";Fa=m("\n          ");Ab=h("label");L=h("input");Ga=m(" 20x20");Ha=m("\n          ");Bb=h("label");M=h("input");Ia=m(" 40x40");Ja=m("\n          ");Cb=h("label");N=h("input");Ka=m(" 80x80");La=m("\n          ");Db=h("label");O=h("input");Ma=m(" 160x160");Na=m("\n          ");Eb=h("label");P=h("input");Oa=m(" 320x320");Pa=m("\n        ");
aa=h("div");Fb=h("h4");Xa=m("icon density: ");Gb=h("noscript");Ya=m("\n          ");U=h("input");Za=m("\n          ");$a=h("br");ab=m("\n          ");Hb=h("h4");bb=m("icon crop: ");Ib=h("noscript");cb=m("\n          ");V=h("input");db=m("\n        ");G=h("div");Jb=h("h4");eb=m("class filter intensity: ");Kb=h("noscript");fb=m("\n          ");W=h("input");hb=m("\n          ");ib=h("br");jb=m("\n          ");jc=h("h4");jc.textContent="class filter positive/negative";kb=m("\n          ");lb=h("br");
mb=m("\n          ");kc=h("label");Q=h("input");nb=m(" positive influence");ob=m("\n          ");pb=h("br");qb=m("\n          ");lc=h("label");R=h("input");rb=m(" negative influence");Wa._fragment.c();u(v,"slot","head");v.className="svelte-z55voj";u(z,"slot","body");w.className="filter svelte-z55voj";l(w,"display",b.showClassFilter?"block":"none");u(H,"slot","head");H.className="svelte-z55voj";u(E,"slot","body");B.className="stack svelte-z55voj";l(B,"display",b.showLayerChooser?"block":"none");D.className=
"map svelte-z55voj";l(D,"display",1<b.scale?"block":"none");oa.className="buttons svelte-z55voj";I.className="svelte-z55voj svelte-ref-controls";Y.className="atlas svelte-z55voj";dc.className="main svelte-z55voj";u(vb,"slot","head");vb.className="svelte-z55voj";ka.className="svelte-z55voj";qa.addEventListener("change",c,void 0);u(qa,"type","checkbox");ic.className="svelte-z55voj";a._bindingGroups[0].push(L);L.addEventListener("change",d,void 0);u(L,"type","radio");L.__value=0;L.value=L.__value;Ab.className=
"svelte-z55voj";a._bindingGroups[0].push(M);M.addEventListener("change",e,void 0);u(M,"type","radio");M.__value=1;M.value=M.__value;Bb.className="svelte-z55voj";a._bindingGroups[0].push(N);N.addEventListener("change",g,void 0);u(N,"type","radio");N.__value=2;N.value=N.__value;Cb.className="svelte-z55voj";a._bindingGroups[0].push(O);O.addEventListener("change",f,void 0);u(O,"type","radio");O.__value=3;O.value=O.__value;Db.className="svelte-z55voj";a._bindingGroups[0].push(P);P.addEventListener("change",
q,void 0);u(P,"type","radio");P.__value=4;P.value=P.__value;Eb.className="svelte-z55voj";S.className="grid-size svelte-z55voj";Fb.className="svelte-z55voj";U.addEventListener("change",k,void 0);U.addEventListener("input",k,void 0);u(U,"type","range");U.min=.2;U.max=10;U.step=.1;Hb.className="svelte-z55voj";V.addEventListener("change",p,void 0);V.addEventListener("input",p,void 0);u(V,"type","range");V.min=0;V.max=.5;V.step=.01;Jb.className="svelte-z55voj";W.addEventListener("change",r,void 0);W.addEventListener("input",
r,void 0);u(W,"type","range");W.min="0.5";W.max="2";W.step="0.1";jc.className="svelte-z55voj";a._bindingGroups[1].push(Q);Q.addEventListener("change",x,void 0);u(Q,"type","radio");Q.__value=1;Q.value=Q.__value;a._bindingGroups[1].push(R);R.addEventListener("change",n,void 0);u(R,"type","radio");R.__value=-1;R.value=R.__value;l(G,"display",-1<b.classHeatmap?"block":"none");u(X,"slot","body");X.className="options-body svelte-z55voj";gc.className="options svelte-z55voj";t.className="container svelte-z55voj"},
m(c,d){c.insertBefore(t,d);t.appendChild(w);Sa._slotted.head.appendChild(v);Sa._slotted.default.appendChild(A);Sa._slotted.body.appendChild(z);Ra._mount(z,null);Sa._mount(w,null);t.appendChild(C);t.appendChild(B);Ua._slotted.head.appendChild(H);Ua._slotted.default.appendChild(T);Ua._slotted.body.appendChild(E);Ta._mount(E,null);Ua._mount(B,null);t.appendChild(fa);t.appendChild(dc);dc.appendChild(Y);ra._mount(Y,null);Y.appendChild(la);Y.appendChild(I);I.appendChild(D);Va._mount(D,null);I.appendChild(J);
I.appendChild(oa);oc._mount(ac._slotted.default,null);ac._mount(oa,null);oa.appendChild(ma);pc._mount(bc._slotted.default,null);bc._mount(oa,null);oa.appendChild(pa);qc._mount(cc._slotted.default,null);cc._mount(oa,null);a.refs.controls=I;t.appendChild(sa);t.appendChild(gc);Wa._slotted.head.appendChild(vb);Wa._slotted.default.appendChild(Nc);Wa._slotted.body.appendChild(X);X.appendChild(Aa);Aa.appendChild(ca);ca.appendChild(ua);ca.appendChild(wb);wb.insertAdjacentHTML("afterend",da);Aa.appendChild(va);
Aa.appendChild(ea);ea.appendChild(wa);ea.appendChild(xb);xb.insertAdjacentHTML("afterend",ha);Aa.appendChild(xa);Aa.appendChild(ia);ia.appendChild(ya);ia.appendChild(yb);yb.insertAdjacentHTML("afterend",ja);X.appendChild(za);X.appendChild(zb);zb.appendChild(ka);zb.appendChild(Ca);zb.appendChild(hc);hc.appendChild(qa);qa.checked=b.showLabels;hc.appendChild(Da);X.appendChild(Ea);X.appendChild(S);S.appendChild(ic);S.appendChild(Fa);S.appendChild(Ab);Ab.appendChild(L);L.checked=L.__value===b.gridSize;
Ab.appendChild(Ga);S.appendChild(Ha);S.appendChild(Bb);Bb.appendChild(M);M.checked=M.__value===b.gridSize;Bb.appendChild(Ia);S.appendChild(Ja);S.appendChild(Cb);Cb.appendChild(N);N.checked=N.__value===b.gridSize;Cb.appendChild(Ka);S.appendChild(La);S.appendChild(Db);Db.appendChild(O);O.checked=O.__value===b.gridSize;Db.appendChild(Ma);S.appendChild(Na);S.appendChild(Eb);Eb.appendChild(P);P.checked=P.__value===b.gridSize;Eb.appendChild(Oa);X.appendChild(Pa);X.appendChild(aa);aa.appendChild(Fb);Fb.appendChild(Xa);
Fb.appendChild(Gb);Gb.insertAdjacentHTML("afterend",b.iconScaleFactor);aa.appendChild(Ya);aa.appendChild(U);U.value=b.iconScaleFactor;aa.appendChild(Za);aa.appendChild($a);aa.appendChild(ab);aa.appendChild(Hb);Hb.appendChild(bb);Hb.appendChild(Ib);Ib.insertAdjacentHTML("afterend",b.iconCrop);aa.appendChild(cb);aa.appendChild(V);V.value=b.iconCrop;X.appendChild(db);X.appendChild(G);G.appendChild(Jb);Jb.appendChild(eb);Jb.appendChild(Kb);Kb.insertAdjacentHTML("afterend",b.classHeatmapMultiplier);G.appendChild(fb);
G.appendChild(W);W.value=b.classHeatmapMultiplier;G.appendChild(hb);G.appendChild(ib);G.appendChild(jb);G.appendChild(jc);G.appendChild(kb);G.appendChild(lb);G.appendChild(mb);G.appendChild(kc);kc.appendChild(Q);Q.checked=Q.__value===b.classHeatmapPositive;kc.appendChild(nb);G.appendChild(ob);G.appendChild(pb);G.appendChild(qb);G.appendChild(lc);lc.appendChild(R);R.checked=R.__value===b.classHeatmapPositive;lc.appendChild(rb);Wa._mount(gc,null)},p(a,c){b=c;c={};!Lb&&a.classHeatmap&&(c.classHeatmap=
b.classHeatmap,Lb=void 0!==b.classHeatmap);Ra._set(c);Lb=void 0;a.showClassFilter&&l(w,"display",b.showClassFilter?"block":"none");c={};a.classHeatmap&&(c.classHeatmap=b.classHeatmap);!Mb&&a.layerName&&(c.layerName=b.layerName,Mb=void 0!==b.layerName);Ta._set(c);Mb=void 0;a.showLayerChooser&&l(B,"display",b.showLayerChooser?"block":"none");c={};a.layerName&&(c.id="inceptionv1_"+b.layerName);a.scaleCountFactor&&(c.scaleCountFactor=b.scaleCountFactor);a.classHeatmap&&(c.classHeatmap=b.classHeatmap);
a.homeX&&(c.homeX=b.homeX);a.homeY&&(c.homeY=b.homeY);a.homeScale&&(c.homeScale=b.homeScale);!Nb&&a.iconCrop&&(c.iconCrop=b.iconCrop,Nb=void 0!==b.iconCrop);!Ob&&a.classHeatmapMultiplier&&(c.classHeatmapMultiplier=b.classHeatmapMultiplier,Ob=void 0!==b.classHeatmapMultiplier);!Pb&&a.classHeatmapPositive&&(c.classHeatmapPositive=b.classHeatmapPositive,Pb=void 0!==b.classHeatmapPositive);!Qb&&a.gridSize&&(c.gridSize=b.gridSize,Qb=void 0!==b.gridSize);!Rb&&a.showLabels&&(c.showLabels=b.showLabels,Rb=
void 0!==b.showLabels);!Sb&&a.aspectRatio&&(c.aspectRatio=b.aspectRatio,Sb=void 0!==b.aspectRatio);!Tb&&a.scale&&(c.scale=b.scale,Tb=void 0!==b.scale);!Ub&&a.gcx&&(c.gcx=b.gcx,Ub=void 0!==b.gcx);!Vb&&a.gcy&&(c.gcy=b.gcy,Vb=void 0!==b.gcy);ra._set(c);Vb=Ub=Tb=Sb=Rb=Qb=Pb=Ob=Nb=void 0;c={};a.layerName&&(c.id="inceptionv1_"+b.layerName);a.classHeatmap&&(c.classHeatmap=b.classHeatmap);a.scaleCountFactor&&(c.scaleCountFactor=b.scaleCountFactor);!Xb&&a.aspectRatio&&(c.aspectRatio=b.aspectRatio,Xb=void 0!==
b.aspectRatio);!Yb&&a.scale&&(c.scale=b.scale,Yb=void 0!==b.scale);!Zb&&a.gcx&&(c.gcx=b.gcx,Zb=void 0!==b.gcx);!$b&&a.gcy&&(c.gcy=b.gcy,$b=void 0!==b.gcy);Va._set(c);$b=Zb=Yb=Xb=void 0;a.scale&&l(D,"display",1<b.scale?"block":"none");a.gcx&&da!==(da=Qa(b.gcx))&&(Ba(wb),wb.insertAdjacentHTML("afterend",da));a.gcy&&ha!==(ha=Qa(b.gcy))&&(Ba(xb),xb.insertAdjacentHTML("afterend",ha));a.scale&&ja!==(ja=Qa(b.scale))&&(Ba(yb),yb.insertAdjacentHTML("afterend",ja));a.showLabels&&(qa.checked=b.showLabels);a.gridSize&&
(L.checked=L.__value===b.gridSize);a.gridSize&&(M.checked=M.__value===b.gridSize);a.gridSize&&(N.checked=N.__value===b.gridSize);a.gridSize&&(O.checked=O.__value===b.gridSize);a.gridSize&&(P.checked=P.__value===b.gridSize);a.iconScaleFactor&&(Ba(Gb),Gb.insertAdjacentHTML("afterend",b.iconScaleFactor));a.iconScaleFactor&&(U.value=b.iconScaleFactor);a.iconCrop&&(Ba(Ib),Ib.insertAdjacentHTML("afterend",b.iconCrop));a.iconCrop&&(V.value=b.iconCrop);a.classHeatmapMultiplier&&(Ba(Kb),Kb.insertAdjacentHTML("afterend",
b.classHeatmapMultiplier));a.classHeatmapMultiplier&&(W.value=b.classHeatmapMultiplier);a.classHeatmapPositive&&(Q.checked=Q.__value===b.classHeatmapPositive);a.classHeatmapPositive&&(R.checked=R.__value===b.classHeatmapPositive);a.classHeatmap&&l(G,"display",-1<b.classHeatmap?"block":"none")},d(b){b&&y(t);Ra.destroy();Sa.destroy();Ta.destroy();Ua.destroy();ra.destroy();a.refs.atlas===ra&&(a.refs.atlas=null);Va.destroy();oc.destroy();ac.destroy();pc.destroy();bc.destroy();qc.destroy();cc.destroy();
a.refs.controls===I&&(a.refs.controls=null);qa.removeEventListener("change",c,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(L),1);L.removeEventListener("change",d,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(M),1);M.removeEventListener("change",e,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(N),1);N.removeEventListener("change",g,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(O),1);O.removeEventListener("change",f,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(P),
1);P.removeEventListener("change",q,void 0);U.removeEventListener("change",k,void 0);U.removeEventListener("input",k,void 0);V.removeEventListener("change",p,void 0);V.removeEventListener("input",p,void 0);W.removeEventListener("change",r,void 0);W.removeEventListener("input",r,void 0);a._bindingGroups[1].splice(a._bindingGroups[1].indexOf(Q),1);Q.removeEventListener("change",x,void 0);a._bindingGroups[1].splice(a._bindingGroups[1].indexOf(R),1);R.removeEventListener("change",n,void 0);Wa.destroy()}}}
function Xa(a){z(this,a);this.refs={};this._state=v({layerName:"mixed4c",gridSize:1,classHeatmap:-1,iconScaleFactor:.8,iconCrop:.3,showClassFilter:!0,showLayerChooser:!0,homeX:.5,homeY:.5,homeScale:1},a.data);this._recompute({gridSize:1,iconScaleFactor:1,realGridSize:1},this._state);this._bindingGroups=[[],[]];this._intro=!0;this._fragment=de(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),B(this))}var A={destroy:function(a){this.destroy=C;this.fire("destroy");this.set=
C;this._fragment.d(!1!==a);this._fragment=null;this._state={}},get:function(){return this._state},fire:function(a,b){if(a=a in this._handlers&&this._handlers[a].slice())for(var c=0;c<a.length;c+=1){var d=a[c];if(!d.__calling)try{d.__calling=!0,d.call(this,b)}finally{d.__calling=!1}}},on:function(a,b){var c=this._handlers[a]||(this._handlers[a]=[]);c.push(b);return{cancel:function(){var a=c.indexOf(b);~a&&c.splice(a,1)}}},set:function(a){this._set(v({},a));this.root._lock||B(this.root)},_recompute:C,
_set:function(a){var b=this._state,c={},d=!1;a=v(this._staged,a);this._staged={};for(var e in a)this._differs(a[e],b[e])&&(c[e]=d=!0);d&&(this._state=v(v({},b),a),this._recompute(c,this._state),this._bind&&this._bind(c,this._state),this._fragment&&(this.fire("state",{changed:c,current:this._state,previous:b}),this._fragment.p(c,this._state),this.fire("update",{changed:c,current:this._state,previous:b})))},_stage:function(a){v(this._staged,a)},_mount:function(a,b){this._fragment[this._fragment.i?"i":
"m"](a,b||null)},_differs:function(a,b){return a!=a?b==b:a!==b||a&&"object"===typeof a||"function"===typeof a}},Sc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Ea.prototype=Fa.prototype;Fa.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var bb,cb={"%":function(a,b){return(100*
a).toFixed(b)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:function(a){return Math.round(a).toString(10)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},g:function(a,b){return a.toPrecision(b)},o:function(a){return Math.round(a).toString(8)},p:function(a,b){return Za(100*a,b)},r:Za,s:function(a,b){var c=ca(a,b);if(!c)return a+"";var d=c[0];c=c[1];c=c-(bb=3*Math.max(-8,Math.min(8,Math.floor(c/3))))+1;var e=d.length;return c===e?d:c>
e?d+Array(c-e+1).join("0"):0<c?d.slice(0,c)+"."+d.slice(c):"0."+Array(1-c).join("0")+ca(a,Math.max(0,b+c-1))[0]},X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}},ab="y z a f p n \u00b5 m  k M G T P E Z Y".split(" "),Ya,Oc;(function(a){Ya=Tc(a);Oc=Ya.format;return Ya})({decimal:".",thousands:",",grouping:[3],currency:["$",""]});v(ec.prototype,A);v(db.prototype,A);v(eb.prototype,A);v(fb.prototype,A);v(gb.prototype,A);gb.prototype._recompute=
function(a,b){a.name&&this._differs(b.Icon,b.Icon=Yc(b))&&(a.Icon=!0)};var jb={},Ga={},ee=ib(",").parse,fe=ib("\t").parse;let Ia=new Map,va=new Map,Ha=new Map,mb=new Map([["gif",ua],["png",ua],["jpeg",ua],["jpg",ua],["csv",function(a){return da(a).then((a)=>Promise.resolve(ee(a)))}],["tsv",function(a){return da(a).then((a)=>Promise.resolve(fe(a)))}],["txt",da],["text",da],["json",function(a){return fetch(a).then(kb).then((a)=>a.json())}]]);(function(a){1===a.length&&(a=bd(a));return{left:function(b,
c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var g=d+e>>>1;0>a(b[g],c)?d=g+1:e=g}return d},right:function(b,c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var g=d+e>>>1;0<a(b[g],c)?e=g:d=g+1}return d}}})(nb);var ea=[235,287,237,982,507,41,176,3,2,112,158,14,442,450,454,513,523,529,930,600,605,736,744,358,756,936,942,943,366,365,367,484,483,488,489,387,388,399,411,405];v(ob.prototype,A);var T={components:[],running:!1,add:function(a){~T.components.indexOf(a)||(T.components.push(a),
T.running||(T.running=!0,requestAnimationFrame(T.next)))},next:function(){for(var a=window.performance.now(),b=!1,c=T.components.length;c--;){var d=T.components[c],e={},g=!1,f;for(f in d._currentTweens){var h=d._currentTweens[f];a>=h.end?(e[f]=h.to,delete d._currentTweens[f],h.fulfil()):(b=g=!0,a>=h.start&&(e[f]=h.value(h.ease((a-h.start)/h.duration))))}d._tweening=!0;d.set(e);d._tweening=!1;g||T.components.splice(c,1)}b?requestAnimationFrame(T.next):T.running=!1}};v(wa.prototype,A);v(wa.prototype,
{tween:function(a,b,c){var d=this;void 0===c&&(c={});if(!this._currentTweens){this._currentTweens=Object.create(null);this._tweening=!1;var e=this.set;this.set=function(a){if(!d._tweening)for(var b in a)d._currentTweens[b]&&d._currentTweens[b].abort();e.call(d,a)}}this._currentTweens[a]&&this._currentTweens[a].abort();var g=window.performance.now()+(c.delay||0),f=c.duration||400,h=g+f,k={key:a,value:(c.interpolate||Ja)(this.get()[a],b),to:b,start:g,end:h,duration:f,ease:c.easing||ed,running:!0,abort:function(){k.running=
!1;delete d._currentTweens[a]}};this._currentTweens[a]=k;T.add(this);b=new Promise(function(a){k.fulfil=a});b.abort=k.abort;return b},setScale(a){let {width:b}=this.get();this.set({unit:b/a})},panTo(a,b,c){void 0===c&&(c=1E3);0==c?this.set({gcx:a,gcy:b}):(this.tween("gcx",a,{duration:c,easing:fa}),this.tween("gcy",b,{duration:c,easing:fa}))},scaleTo(a,b){void 0===b&&(b=1E3);let {width:c}=this.get();this.tween("unit",c/a,{duration:b,easing:fa})},transitionTo(a,b,c,d){void 0===d&&(d=1E3);let {width:e}=
this.get();this.tween("unit",e/c,{duration:d,easing:fa});this.tween("gcx",a,{duration:d,easing:fa});this.tween("gcy",b,{duration:d,easing:fa})}});wa.prototype._recompute=function(a,b){(a.width||a.unit)&&this._differs(b.scale,b.scale=fd(b))&&(a.scale=!0)};v(pb.prototype,A);v(ub.prototype,A);v(ub.prototype,{fullscreen(){this.refs.root.webkitRequestFullscreen()},mouseEnter(){this.set({onCanvas:!0})},mouseDown(a){this.set({mouseMoveFunction:this.mouseMove.bind(this),mouseUpFunction:this.mouseUp.bind(this)});
let {mouseMoveFunction:b,mouseUpFunction:c}=this.get();a.preventDefault();window.addEventListener("mousemove",b);window.addEventListener("mouseup",c);this.set({mouseMoveMode:"pan"});this.set({mouseDownTimer:Date.now()});this.set({lastRecordedCanvasPos:{x:a.offsetX,y:a.offsetY}});this.set({mouseDownScreenPos:{x:a.screenX,y:a.screenY}})},mouseMove(a){let {mouseMoveMode:b}=this.get();this.set({lastRecordedCanvasPos:{x:a.offsetX,y:a.offsetY}});if("pan"==b){let {mouseDownScreenPos:b,gcx:d,gcy:e,enableDragToPan:g}=
this.get();this.set({mouseDownScreenPos:{x:a.screenX,y:a.screenY}});g&&this.refs.zoom.panTo(this.toPercent(b.x-a.screenX)+d,this.toPercent(b.y-a.screenY)+e,0)}},mouseOut(a){this.set({onCanvas:!1})},mouseUp(a){let {mouseDownTimer:b,scale:c,zoomFactors:d,mouseMoveFunction:e,mouseUpFunction:g,lastRecordedCanvasPos:f,topLeft:h,gcx:k,gcy:l,enableClickToZoom:m}=this.get();this.set({mouseMoveMode:"hover"});window.removeEventListener("mousemove",e);window.removeEventListener("mouseup",g);var u=Date.now()-
b,n=Math.sqrt(Math.pow(a.offsetX-f.x,2)+Math.pow(a.offsetY-f.y,2));if(200>u&&5>n&&m){u=d.in;a.shiftKey&&(u=d.out);var t=.5,v=.5;n=u*c;1<n?(t=this.toPercent(a.offsetX-h.x),a=this.toPercent(a.offsetY-h.y),t-=(t-k)/u,v=a-(a-l)/u):n=1;this.transitionTo(t,v,n,500)}},home(){let {homeX:a,homeY:b,homeScale:c}=this.get();this.transitionTo(a,b,c,800)},transitionTo(a,b,c,d){this.refs.zoom.transitionTo(a,b,c,d)},zoomit(a){let {scale:b}=this.get();this.refs.zoom.scaleTo(b*a,500)},iconToCanvasPosition(a,b){let {config:c,
scaleCountFactor:d,topLeft:e,layerScale:g,currentZoomIndex:f}=this.get();b=d/(f+1);b=Math.sqrt(Math.min(b,a.num_activations)/b);let h=(1-b)*c.icon_size*g/2;return{sx:a.localX*c.icon_size,sy:a.localY*c.icon_size,dx:a.grid_y*c.icon_size*g+e.x+h,dy:a.grid_x*c.icon_size*g+e.y+h,iconWidth:c.icon_size*g*b}},toPercent(a){let {scale:b,minViewDimInPx:c}=this.get();return a/(b*c)},toPixels(a){let {scale:b,minViewDimInPx:c}=this.get();return a*b*c},clear(){let {viewHeight:a,viewWidth:b,context:c,backgroundColor:d}=
this.get();c.globalAlpha=1;c.fillStyle=d;c.clearRect(0,0,b,a);c.fillRect(0,0,b,a)},updateIconHoverImage(){let {currentIconInfo:a,currentZoomIndex:b,iconCrop:c,config:d,showHoverImage:e}=this.get();a&&e&&pa(a.url).then((e)=>{let f=this.refs.hoverImage.getContext("2d"),{sx:g,sy:h}=this.iconToCanvasPosition(a,b),l=c*d.icon_size/2,m=Math.min(this.refs.hoverImage.height,this.refs.hoverImage.width);f.drawImage(e,h+l,g+l,d.icon_size-2*l,d.icon_size-2*l,0,0,m,m)})},render(){let {imageSmoothing:a,minActivations:b,
viewHeight:c,viewWidth:d,context:e,config:g,layers:f,currentZoomIndex:h,strokeColor:k,maxAttributionValue:l}=this.get();this.clear();e.imageSmoothingEnabled=a;g&&f&&f.forEach((a,f)=>{-1<[h].indexOf(f)&&a.forEach((a,g)=>{a.forEach((a,g)=>{if(a.num_activations>=b){let {dx:b,dy:g,iconWidth:h}=this.iconToCanvasPosition(a,f);if(b>-h&&b<d&&g>-h&&g<c){let {dx:b,dy:c,iconWidth:d}=this.iconToCanvasPosition(a,f);e.globalAlpha=.75;e.strokeStyle=k;e.fillStyle="white";e.beginPath();e.rect(b,c,d,d);e.stroke();
e.fill();e.closePath();pa(a.url).then((b)=>{let {currentZoomIndex:c,iconCrop:d,showLabels:g,textShadow:h}=this.get();if(c==f){let {labels:c,config:m,classHeatmap:n,classHeatmapMultiplier:q,classHeatmapPositive:p}=this.get();var k=1;-1<n&&(k=a.full_class_indices.indexOf(n),-1<k?(k=a.full_class_values[k]/l,k*=p,k=Math.max(0,k)*q):k=0);let {sx:t,sy:u,dx:r,dy:v,iconWidth:w}=this.iconToCanvasPosition(a,f);e.globalAlpha=k;k=d*m.icon_size/2;e.clearRect(r+1,v+1,w-2,w-2);e.drawImage(b,u+k,t+k,m.icon_size-
2*k,m.icon_size-2*k,r,v,w,w);e.globalAlpha=1;g&&c&&(e.globalAlpha=1,e.font="10px Helvetica",h&&(e.lineWidth=2,e.strokeStyle="rgba(0, 0, 0, 0.8)",e.strokeText(c[a.top_class_indices[0]],r+4,v+w-4,w-8)),e.fillStyle="rgba(255, 255, 255, 1)",e.fillText(c[a.top_class_indices[0]],r+4,v+w-4,w-8))}})}}})})})}});ub.prototype._recompute=function(a,b){(a.layers||a.layer)&&this._differs(b.maxAttributionValue,b.maxAttributionValue=jd(b))&&(a.maxAttributionValue=!0);if(a.viewWidth||a.viewHeight)this._differs(b.aspectRatio,
b.aspectRatio=kd(b))&&(a.aspectRatio=!0),this._differs(b.minViewDimInPx,b.minViewDimInPx=ld(b))&&(a.minViewDimInPx=!0);(a.gcx||a.gcy||a.scale||a.viewWidth||a.viewHeight||a.minViewDimInPx)&&this._differs(b.topLeft,b.topLeft=md(b))&&(a.topLeft=!0);(a.scale||a.gridSize)&&this._differs(b.currentZoomIndex,b.currentZoomIndex=nd(b))&&(a.currentZoomIndex=!0);(a.currentZoomIndex||a.layers)&&this._differs(b.numIconsWide,b.numIconsWide=od(b))&&(a.numIconsWide=!0);(a.config||a.minViewDimInPx||a.currentZoomIndex||
a.scale)&&this._differs(b.iconSizeInPixels,b.iconSizeInPixels=pd(b))&&(a.iconSizeInPixels=!0);(a.minViewDimInPx||a.config||a.currentZoomIndex||a.scale)&&this._differs(b.layerScale,b.layerScale=rd(b))&&(a.layerScale=!0);(a.lastRecordedCanvasPos||a.topLeft||a.layerScale||a.config)&&this._differs(b.gridSelected,b.gridSelected=sd(b))&&(a.gridSelected=!0);(a.layers||a.currentZoomIndex||a.gridSelected||a.classHeatmap)&&this._differs(b.currentIconInfo,b.currentIconInfo=ud(b))&&(a.currentIconInfo=!0);(a.mouseMoveMode||
a.onCanvas||a.currentIconInfo||a.enableHover)&&this._differs(b.showHoverIcon,b.showHoverIcon=qd(b))&&(a.showHoverIcon=!0);(a.config||a.layerScale||a.topLeft||a.gridSelected)&&this._differs(b.topLeftCornerHover,b.topLeftCornerHover=td(b))&&(a.topLeftCornerHover=!0)};v(ha.prototype,A);v(ha.prototype,{mouseUp(){let {}=this.get();this.set({dragging:!1})},mouseDown(a){let {enableDragging:b}=this.get();b&&(a.preventDefault(),this.set({dragging:!0,startPos:{x:a.screenX,y:a.screenY}}))},mouseMove(a){let {dragging:b,
startPos:c,scale:d,width:e,aspectRatio:g,height:f,left:h,top:k}=this.get();b&&(this.set({gcx:(a.screenX-c.x+h)/e+1/d*g/2,gcy:(a.screenY-c.y+k)/f+1/d/2}),this.set({startPos:{x:a.screenX,y:a.screenY}}))}});ha.prototype._recompute=function(a,b){a.scale&&this._differs(b.h,b.h=yd(b))&&(a.h=!0);(a.scale||a.aspectRatio)&&this._differs(b.w,b.w=zd(b))&&(a.w=!0);(a.gcx||a.w||a.width)&&this._differs(b.l,b.l=Ad(b))&&(a.l=!0);(a.gcy||a.h||a.height||a.aspectRatio)&&this._differs(b.t,b.t=Bd(b))&&(a.t=!0);(a.l||
a.w)&&this._differs(b.r,b.r=Cd(b))&&(a.r=!0);(a.t||a.h)&&this._differs(b.b,b.b=Dd(b))&&(a.b=!0);(a.l||a.width||a.gcx||a.gcy||a.scale||a.aspectRatio||a.w||a.r)&&this._differs(b.left,b.left=Ed(b))&&(a.left=!0);(a.r||a.width)&&this._differs(b.right,b.right=Fd(b))&&(a.right=!0);(a.t||a.height)&&this._differs(b.top,b.top=Gd(b))&&(a.top=!0);(a.b||a.height)&&this._differs(b.bottom,b.bottom=Hd(b))&&(a.bottom=!0)};v(Ka.prototype,A);Ka.prototype._recompute=function(a,b){a.clientWidth&&this._differs(b.width,
b.width=Jd(b))&&(a.width=!0);(a.width||a.aspectRatio)&&this._differs(b.height,b.height=Kd(b))&&(a.height=!0)};v(xc.prototype,A);var ge={destroy:yc,get:function(a){return a?this._state[a]:this._state},fire:function(a,b){if(a=a in this._handlers&&this._handlers[a].slice())for(var c=0;c<a.length;c+=1)a[c].call(this,b)},observe:function(a,b,c){var d=c&&c.defer?this._observers.post:this._observers.pre;(d[a]||(d[a]=[])).push(b);c&&!1===c.init||(b.__calling=!0,b.call(this,this._state[a]),b.__calling=!1);
return{cancel:function(){var c=d[a].indexOf(b);~c&&d[a].splice(c,1)}}},on:function(a,b){if("teardown"===a)return this.on("destroy",b);var c=this._handlers[a]||(this._handlers[a]=[]);c.push(b);return{cancel:function(){var a=c.indexOf(b);~a&&c.splice(a,1)}}},set:function(a){this._set(xa({},a));this.root._lock||(this.root._lock=!0,ia(this.root._beforecreate),ia(this.root._oncreate),ia(this.root._aftercreate),this.root._lock=!1)},teardown:yc,_recompute:La,_set:function(a){var b=this._state,c={},d=!1,
e;for(e in a)this._differs(a[e],b[e])&&(c[e]=d=!0);d&&(this._state=xa({},b,a),this._recompute(c,this._state),this._bind&&this._bind(c,this._state),this._fragment&&(zc(this,this._observers.pre,c,this._state,b),this._fragment.p(c,this._state),zc(this,this._observers.post,c,this._state,b)))},_mount:function(a,b){this._fragment[this._fragment.i?"i":"m"](a,b||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(a,b){return a!=a?b==b:a!==b||a&&"object"===typeof a||"function"===
typeof a}};let Ma=new Map;xa(Ac.prototype,{draw(){if(this.refs.canvas){let a=this.refs.canvas.getContext("2d"),{img:b,index:c,width:d,realHeight:e,columns:g,loaded:f}=this.get();a.clearRect(0,0,d,e);let h=Array.isArray(c)?c[0]*d:c%g*d,k=Array.isArray(c)?c[1]*e:Math.floor(c/g)*e;f?a.drawImage(b,h,k,d,e,0,0,d,e):(a.fillStyle="#ccc",a.fillRect(0,0,d,e),a.fillStyle="#eee",a.textAlign="center",a.font="16px sans-serif",a.fillText("...",d/2,e/2))}}},ge);Ac.prototype._recompute=function(a,b){(a.width||a.height)&&
this._differs(b.realHeight,b.realHeight=Nd(b.width,b.height))&&(a.realHeight=!0)};var Dc={},Na={},he=Cc(",").parse,ie=Cc("\t").parse;let Pa=new Map,za=new Map,Oa=new Map,Hc=new Map([["gif",ya],["png",ya],["jpeg",ya],["jpg",ya],["csv",function(a){return ja(a).then((a)=>Promise.resolve(he(a)))}],["tsv",function(a){return ja(a).then((a)=>Promise.resolve(ie(a)))}],["txt",ja],["text",ja],["json",function(a){return fetch(a).then(Ec).then((a)=>a.json())}]]);v(ka.prototype,A);v(ka.prototype,{render(){let {gridSize:a,
icons:b,classHeatmap:c}=this.get(),d=this.refs.canvas.getContext("2d"),e=d.getImageData(0,0,a,a),g=e.data;for(let d of b){var f=.5;-1<c&&(f=ea.indexOf(c),f=Math.max(.05,5*Math.max(0,d.f[f])));g[d.x*a*4+4*d.y+3]=d.n*f}d.putImageData(e,0,0)}});ka.prototype._recompute=function(a,b){a.clientWidth&&this._differs(b.height,b.height=Sd(b))&&(a.height=!0);(a.model||a.layerName)&&this._differs(b.id,b.id=Td(b))&&(a.id=!0)};v(Kc.prototype,A);var $d={inception:"dummy;kit fox;English setter;Siberian husky;Australian terrier;English springer;grey whale;lesser panda;Egyptian cat;ibex;Persian cat;cougar;gazelle;porcupine;sea lion;malamute;badger;Great Dane;Walker hound;Welsh springer spaniel;whippet;Scottish deerhound;killer whale;mink;African elephant;Weimaraner;soft - coated wheaten terrier;Dandie Dinmont;red wolf;Old English sheepdog;jaguar;otterhound;bloodhound;Airedale;hyena;meerkat;giant schnauzer;titi;three - toed sloth;sorrel;black - footed ferret;dalmatian;black - and - tan coonhound;papillon;skunk;Staffordshire bullterrier;Mexican hairless;Bouvier des Flandres;weasel;miniature poodle;Cardigan;malinois;bighorn;fox squirrel;colobus;tiger cat;Lhasa;impala;coyote;Yorkshire terrier;Newfoundland;brown bear;red fox;Norwegian elkhound;Rottweiler;hartebeest;Saluki;grey fox;schipperke;Pekinese;Brabancon griffon;West Highland white terrier;Sealyham terrier;guenon;mongoose;indri;tiger;Irish wolfhound;wild boar;EntleBucher;zebra;ram;French bulldog;orangutan;basenji;leopard;Bernese mountain dog;Maltese dog;Norfolk terrier;toy terrier;vizsla;cairn;squirrel monkey;groenendael;clumber;Siamese cat;chimpanzee;komondor;Afghan hound;Japanese spaniel;proboscis monkey;guinea pig;white wolf;ice bear;gorilla;borzoi;toy poodle;Kerry blue terrier;ox;Scotch terrier;Tibetan mastiff;spider monkey;Doberman;Boston bull;Greater Swiss Mountain dog;Appenzeller;Shih - Tzu;Irish water spaniel;Pomeranian;Bedlington terrier;warthog;Arabian camel;siamang;miniature schnauzer;collie;golden retriever;Irish terrier;affenpinscher;Border collie;hare;boxer;silky terrier;beagle;Leonberg;German short - haired pointer;patas;dhole;baboon;macaque;Chesapeake Bay retriever;bull mastiff;kuvasz;capuchin;pug;curly - coated retriever;Norwich terrier;flat - coated retriever;hog;keeshond;Eskimo dog;Brittany spaniel;standard poodle;Lakeland terrier;snow leopard;Gordon setter;dingo;standard schnauzer;hamster;Tibetan terrier;Arctic fox;wire - haired fox terrier;basset;water buffalo;American black bear;Angora;bison;howler monkey;hippopotamus;chow;giant panda;American Staffordshire terrier;Shetland sheepdog;Great Pyrenees;Chihuahua;tabby;marmoset;Labrador retriever;Saint Bernard;armadillo;Samoyed;bluetick;redbone;polecat;marmot;kelpie;gibbon;llama;miniature pinscher;wood rabbit;Italian greyhound;lion;cocker spaniel;Irish setter;dugong;Indian elephant;beaver;Sussex spaniel;Pembroke;Blenheim spaniel;Madagascar cat;Rhodesian ridgeback;lynx;African hunting dog;langur;Ibizan hound;timber wolf;cheetah;English foxhound;briard;sloth bear;Border terrier;German shepherd;otter;koala;tusker;echidna;wallaby;platypus;wombat;revolver;umbrella;schooner;soccer ball;accordion;ant;starfish;chambered nautilus;grand piano;laptop;strawberry;airliner;warplane;airship;balloon;space shuttle;fireboat;gondola;speedboat;lifeboat;canoe;yawl;catamaran;trimaran;container ship;liner;pirate;aircraft carrier;submarine;wreck;half track;tank;missile;bobsled;dogsled;bicycle - built -for-two;mountain bike;freight car;passenger car;barrow;shopping cart;motor scooter;forklift;electric locomotive;steam locomotive;amphibian;ambulance;beach wagon;cab;convertible;jeep;limousine;minivan;Model T;racer;sports car;go-kart;golfcart;moped;snowplow;fire engine;garbage truck;pickup;tow truck;trailer truck;moving van;police van;recreational vehicle;streetcar;snowmobile;tractor;mobile home;tricycle;unicycle;horse cart;jinrikisha;oxcart;bassinet;cradle;crib;four-poster;bookcase;china cabinet;medicine chest;chiffonier;table lamp;file;park bench;barber chair;throne;folding chair;rocking chair;studio couch;toilet seat;desk;pool table;dining table;entertainment center;wardrobe;Granny Smith;orange;lemon;fig;pineapple;banana;jackfruit;custard apple;pomegranate;acorn;hip;ear;rapeseed;corn;buckeye;organ;upright;chime;drum;gong;maraca;marimba;steel drum;banjo;cello;violin;harp;acoustic guitar;electric guitar;cornet;French horn;trombone;harmonica;ocarina;panpipe;bassoon;oboe;sax;flute;daisy;yellow lady's slipper;cliff;valley;alp;volcano;promontory;sandbar;coral reef;lakeside;seashore;geyser;hatchet;cleaver;letter opener;plane;power drill;lawn mower;hammer;corkscrew;can opener;plunger;screwdriver;shovel;plow;chain saw;cock;hen;ostrich;brambling;goldfinch;house finch;junco;indigo bunting;robin;bulbul;jay;magpie;chickadee;water ouzel;kite;bald eagle;vulture;great grey owl;black grouse;ptarmigan;ruffed grouse;prairie chicken;peacock;quail;partridge;African grey;macaw;sulphur-crested cockatoo;lorikeet;coucal;bee eater;hornbill;hummingbird;jacamar;toucan;drake;red-breasted merganser;goose;black swan;white stork;black stork;spoonbill;flamingo;American egret;little blue heron;bittern;crane;limpkin;American coot;bustard;ruddy turnstone;red - backed sandpiper;redshank;dowitcher;oystercatcher;European gallinule;pelican;king penguin;albatross;great white shark;tiger shark;hammerhead;electric ray;stingray;barracouta;coho;tench;goldfish;eel;rock beauty;anemone fish;lionfish;puffer;sturgeon;gar;loggerhead;leatherback turtle;mud turtle;terrapin;box turtle;banded gecko;common iguana;American chameleon;whiptail;agama;frilled lizard;alligator lizard;Gila monster;green lizard;African chameleon;Komodo dragon;triceratops;African crocodile;American alligator;thunder snake;ringneck snake;hognose snake;green snake;king snake;garter snake;water snake;vine snake;night snake;boa constrictor;rock python;Indian cobra;green mamba;sea snake;horned viper;diamondback;sidewinder;European fire salamander;common newt;eft;spotted salamander;axolotl;bullfrog;tree frog;tailed frog;whistle;wing;paintbrush;hand blower;oxygen mask;snorkel;loudspeaker;microphone;screen;mouse;electric fan;oil filter;strainer;space heater;stove;guillotine;barometer;rule;odometer;scale;analog clock;digital clock;wall clock;hourglass;sundial;parking meter;stopwatch;digital watch;stethoscope;syringe;magnetic compass;binoculars;projector;sunglasses;loupe;radio telescope;bow;cannon [ground];assault rifle;rifle;projectile;computer keyboard;typewriter keyboard;crane;lighter;abacus;cash machine;slide rule;desktop computer;hand - held computer;notebook;web site;harvester;thresher;printer;slot;vending machine;sewing machine;joystick;switch;hook;car wheel;paddlewheel;pinwheel;potter's wheel;gas pump;carousel;swing;reel;radiator;puck;hard disc;sunglass;pick;car mirror;solar dish;remote control;disk brake;buckle;hair slide;knot;combination lock;padlock;nail;safety pin;screw;muzzle;seat belt;ski;candle;jack - o'-lantern;spotlight;torch;neck brace;pier;tripod;maypole;mousetrap;spider web;trilobite;harvestman;scorpion;black and gold garden spider;barn spider;garden spider;black widow;tarantula;wolf spider;tick;centipede;isopod;Dungeness crab;rock crab;fiddler crab;king crab;American lobster;spiny lobster;crayfish;hermit crab;tiger beetle;ladybug;ground beetle;long - horned beetle;leaf beetle;dung beetle;rhinoceros beetle;weevil;fly;bee;grasshopper;cricket;walking stick;cockroach;mantis;cicada;leafhopper;lacewing;dragonfly;damselfly;admiral;ringlet;monarch;cabbage butterfly;sulphur butterfly;lycaenid;jellyfish;sea anemone;brain coral;flatworm;nematode;conch;snail;slug;sea slug;chiton;sea urchin;sea cucumber;iron;espresso maker;microwave;Dutch oven;rotisserie;toaster;waffle iron;vacuum;dishwasher;refrigerator;washer;Crock Pot;frying pan;wok;caldron;coffeepot;teapot;spatula;altar;triumphal arch;patio;steel arch bridge;suspension bridge;viaduct;barn;greenhouse;palace;monastery;library;apiary;boathouse;church;mosque;stupa;planetarium;restaurant;cinema;home theater;lumbermill;coil;obelisk;totem pole;castle;prison;grocery store;bakery;barbershop;bookshop;butcher shop;confectionery;shoe shop;tobacco shop;toyshop;fountain;cliff dwelling;yurt;dock;brass;megalith;bannister;breakwater;dam;chainlink fence;picket fence;worm fence;stone wall;grille;sliding door;turnstile;mountain tent;scoreboard;honeycomb;plate rack;pedestal;beacon;mashed potato;bell pepper;head cabbage;broccoli;cauliflower;zucchini;spaghetti squash;acorn squash;butternut squash;cucumber;artichoke;cardoon;mushroom;shower curtain;jean;carton;handkerchief;sandal;ashcan;safe;plate;necklace;croquet ball;fur coat;thimble;pajama;running shoe;cocktail shaker;chest;manhole cover;modem;tub;tray;balance beam;bagel;prayer rug;kimono;hot pot;whiskey jug;knee pad;book jacket;spindle;ski mask;beer bottle;crash helmet;bottlecap;tile roof;mask;maillot;Petri dish;football helmet;bathing cap;teddy bear;holster;pop bottle;photocopier;vestment;crossword puzzle;golf ball;trifle;suit;water tower;feather boa;cloak;red wine;drumstick;shield;Christmas stocking;hoopskirt;menu;stage;bonnet;meat loaf;baseball;face powder;scabbard;sunscreen;beer glass;hen-of - the - woods;guacamole;lampshade;wool;hay;bow tie;mailbag;water jug;bucket;dishrag;soup bowl;eggnog;mortar;trench coat;paddle;chain;swab;mixing bowl;potpie;wine bottle;shoji;bulletproof vest;drilling platform;binder;cardigan;sweatshirt;pot;birdhouse;hamper;ping-pong ball;pencil box;pay - phone;consomme;apron;punching bag;backpack;groom;bearskin;pencil sharpener;broom;mosquito net;abaya;mortarboard;poncho;crutch;Polaroid camera;space bar;cup;racket;traffic light;quill;radio;dough;cuirass;military uniform;lipstick;shower cap;monitor;oscilloscope;mitten;brassiere;French loaf;vase;milk can;rugby ball;paper towel;earthstar;envelope;miniskirt;cowboy hat;trolleybus;perfume;bathtub;hotdog;coral fungus;bullet train;pillow;toilet tissue;cassette;carpenter's kit;ladle;stinkhorn;lotion;hair spray;academic gown;dome;crate;wig;burrito;pill bottle;chain mail;theater curtain;window shade;barrel;washbasin;ballpoint;basketball;bath towel;cowboy boot;gown;window screen;agaric;cellular telephone;nipple;barbell;mailbox;lab coat;fire screen;minibus;packet;maze;pole;horizontal bar;sombrero;pickelhaube;rain barrel;wallet;cassette player;comic book;piggy bank;street sign;bell cote;fountain pen;Windsor tie;volleyball;overskirt;sarong;purse;bolo tie;bib;parachute;sleeping bag;television;swimming trunks;measuring cup;espresso;pizza;breastplate;shopping basket;wooden spoon;saltshaker;chocolate sauce;ballplayer;goblet;gyromitra;stretcher;water bottle;dial telephone;soap dispenser;jersey;school bus;jigsaw puzzle;plastic bag;reflex camera;diaper;Band Aid;ice lolly;velvet;tennis ball;gasmask;doormat;Loafer;ice cream;pretzel;quilt;maillot;tape player;clog;iPod;bolete;scuba diver;pitcher;matchstick;bikini;sock;CD player;lens cap;thatch;vault;beaker;bubble;cheeseburger;parallel bars;flagpole;coffee mug;rubber eraser;stole;carbonara;dumbbell".split(";")};
v(nc.prototype,A);nc.prototype._recompute=function(a,b){a.inceptionLabels&&this._differs(b.labels,b.labels=Yd(b))&&(a.labels=!0)};v(fc.prototype,A);var Qa=Oc(".3f");v(Xa.prototype,A);Xa.prototype._recompute=function(a,b){a.gridSize&&this._differs(b.realGridSize,b.realGridSize=be(b))&&(a.realGridSize=!0);(a.iconScaleFactor||a.realGridSize)&&this._differs(b.scaleCountFactor,b.scaleCountFactor=ce(b))&&(a.scaleCountFactor=!0)};new Xa({target:document.querySelector("#app")})})();
//# sourceMappingURL=detail.min.js.map
