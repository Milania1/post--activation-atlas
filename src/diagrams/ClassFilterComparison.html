

<div style="display: grid;grid-column-gap: 20px; grid-template-columns: 1fr 1fr 200px;">
  
  <div>
    <h4>“{@html $inceptionLabels[$currentClassAtlasCompareIndex]}” <br>filtered by top rank</h4>
    <div class="atlas">
      <ClassAtlas classFilter={$currentClassAtlasCompareIndex} filterType="winner" />
    </div>
    <div class="figcaption">We pluck only those activations whose top attribution is toward the class in question. The results are often much more focused and isolated, exclusive to the class. Some are low magnitude, like backgrounds, and we miss correlations or concepts that are shared among many classes. </div>
  </div>
  <div>
    <h4>“{@html $inceptionLabels[$currentClassAtlasCompareIndex]}” <br>filtered by overall magnitude</h4>
    <div class="atlas">
      <ClassAtlas classFilter={$currentClassAtlasCompareIndex} filterType="top" />
    </div>
    <div class="figcaption">Here we sort all the activations by the magnitude toward the class in question (independent of other classes) and take the top 2,000 activations. We see more correlated activations that could, on their own, contribute to another classification. Some of them are spurious, however. </div>
  </div>
  <div class="chooser-container">
    <div class="chooser">
      {#each $classAtlasIndices as c}
        <label class="{$currentClassAtlasCompareIndex === c ? 'selected' : ''}">
          <input type=radio bind:group=$currentClassAtlasCompareIndex value={c}>
          {$inceptionLabels[c]} ({c})
        </label>
      {/each}
    </div>
  </div>
</div>

<script>
export default {
  components: {
    ClassAtlas: "./ClassAtlas.html"
  },
  data() {
    return {
    };
  },
  computed: {
  }
}
</script>

<style>
button {
  display: block;
}
.figcaption {
  margin-top: 20px;
}
.figcaption b {
  text-transform: uppercase;
  margin-right: 8px;
}
h4 {
  margin-top: 0;
}

.chooser-container {
  overflow-y: scroll;
  height: 100%;
  position: relative;
}

.chooser {
  position: absolute;
  border-left: solid 1px #ddd;
}
.chooser label {
  position: relative;
  font-size: 10px;
  line-height: 1em;
  display: block;
  border-left: solid 3px white;
  padding: 5px 20px 5px 16px;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow-y: hidden;
}
.chooser label input {
  position: absolute;
  opacity: 0;
}
.chooser label.selected {
  border-left-color: rgb(255, 130, 0);
  color: rgb(255, 130, 0);
  background-color: rgba(255, 130, 0, 0.08);
  font-weight: bold;
}
</style>